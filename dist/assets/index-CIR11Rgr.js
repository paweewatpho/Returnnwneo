import{i as Sa,g as ka,a as Oa,r as k,o as Ta,j as e,s as Da,L as Ia,S as Aa,O as Vt,F as Ea,b as Gt,T as Ne,C as Pa,c as $s,X as fe,W as La,d as $a,e as Ce,f as It,h as A,k as ls,u as ht,l as Kt,m as rs,n as Oe,M as Ve,B as Jt,P as st,p as At,q as Pe,A as Et,t as Ze,v as $e,R as Ue,D as ct,w as Ba,x as Ht,y as Ma,z as ns,E as os,Y as Qt,G as Wt,H as _a,I as qa,J as Ss,K as ks,N as Fa,Q as Ua,U as Ha,V as Qa,Z as Y,_ as Ye,$ as Ge,a0 as ds,a1 as Pt,a2 as Yt,a3 as lt,a4 as Lt,a5 as Wa,a6 as za,a7 as Va,a8 as Os,a9 as Ga,aa as Xt,ab as xt,ac as et,ad as tt,ae as Ka,af as xs,ag as Ts,ah as ms,ai as kt,aj as Ja,ak as ps,al as Ke,am as Ya,an as Xa,ao as es,ap as us,aq as Za,ar as $t,as as el,at as Bs,au as Ms,av as tl,aw as _s,ax as Zt,ay as bs,az as dt,aA as sl,aB as al,aC as ll,aD as ts,aE as mt,aF as Ot,aG as Ds,aH as rl,aI as nl,aJ as ol,aK as Is,aL as il,aM as qs,aN as cl,aO as Fs,aP as dl,aQ as xl,aR as ml}from"./vendor-QfJxuq-k.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))g(t);new MutationObserver(t=>{for(const x of t)if(x.type==="childList")for(const u of x.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&g(u)}).observe(document,{childList:!0,subtree:!0});function d(t){const x={};return t.integrity&&(x.integrity=t.integrity),t.referrerPolicy&&(x.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?x.credentials="include":t.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function g(t){if(t.ep)return;t.ep=!0;const x=d(t);fetch(t.href,x)}})();var xe=(s=>(s.DASHBOARD="DASHBOARD",s.OPERATIONS="OPERATIONS",s.NCR="NCR",s.NCR_REPORT="NCR_REPORT",s.INVENTORY="INVENTORY",s.COLLECTION="COLLECTION",s.COL_REPORT="COL_REPORT",s.SETTINGS="SETTINGS",s))(xe||{});const pl={apiKey:"AIzaSyCu4-qBECAiA2Bqgzt0JB52dBx3d4WKsFo",authDomain:"returnneosiam.firebaseapp.com",databaseURL:"https://returnneosiam-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"returnneosiam",storageBucket:"returnneosiam.firebasestorage.app",messagingSenderId:"46662606762",appId:"1:46662606762:web:29d41bf680226753f4d5d3",measurementId:"G-38PCJ8VXLS"},hs=Sa(pl);console.log("‚úÖ Firebase App Initialized (RTDB):",hs.name);const Re=ka(hs),As=Oa(hs),Us=k.createContext(void 0),bl=({children:s})=>{const[r,d]=k.useState(null),[g,t]=k.useState(!0);k.useEffect(()=>{t(!1);const a=Ta(As,C=>{if(C){const v={uid:C.uid,email:C.email||"",displayName:C.displayName||"User",role:"ADMIN",photoURL:C.photoURL||void 0};d(v)}});return()=>a()},[]);const x=async a=>{d(a)},u=async()=>{await Da(As).catch(a=>console.error("Firebase Signout Error",a)),d(null)};return e.jsx(Us.Provider,{value:{user:r,loading:g,login:x,logout:u},children:s})},Hs=()=>{const s=k.useContext(Us);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},Ct=(s,r)=>{if(!s)return"NONE";switch(s){case"ADMIN":return"FULL";case"NCR_OPERATOR":return r==="NCR_SYSTEM"||r==="NCR_REPORT"||r==="OPERATIONS"?"FULL":r==="DASHBOARD"||r==="COL_REPORT"||r==="INVENTORY"?"READ":r==="COL_SYSTEM"||r==="SETTINGS"?"NONE":"READ";case"COL_OPERATOR":return r==="COL_SYSTEM"||r==="COL_REPORT"||r==="OPERATIONS"?"FULL":r==="DASHBOARD"||r==="NCR_REPORT"||r==="INVENTORY"?"READ":r==="NCR_SYSTEM"||r==="SETTINGS"?"NONE":"READ";case"REQUEST_ENTRY":return r==="COL_SYSTEM"?"FULL":r==="OPERATIONS"||r==="DASHBOARD"||r==="NCR_REPORT"||r==="COL_REPORT"||r==="INVENTORY"?"READ":r==="NCR_SYSTEM"||r==="SETTINGS"?"NONE":"READ";case"QC_OPERATOR":return r==="OPERATIONS"?"FULL":r==="DASHBOARD"||r==="NCR_REPORT"||r==="COL_REPORT"||r==="INVENTORY"?"READ":r==="NCR_SYSTEM"||r==="COL_SYSTEM"||r==="SETTINGS"?"NONE":"READ";case"CLOSURE_OPERATOR":return r==="OPERATIONS"?"FULL":r==="DASHBOARD"||r==="NCR_REPORT"||r==="COL_REPORT"||r==="INVENTORY"?"READ":r==="NCR_SYSTEM"||r==="COL_SYSTEM"||r==="SETTINGS"?"NONE":"READ";case"VIEWER":return r==="SETTINGS"?"NONE":"READ";default:return"NONE"}},ul=(s,r)=>{if(!s)return!1;switch(r){case xe.DASHBOARD:return!0;case xe.OPERATIONS:return!0;case xe.NCR:return Ct(s,"NCR_SYSTEM")!=="NONE";case xe.NCR_REPORT:return Ct(s,"NCR_REPORT")!=="NONE";case xe.COLLECTION:return Ct(s,"COL_SYSTEM")!=="NONE";case xe.COL_REPORT:return Ct(s,"COL_REPORT")!=="NONE";case xe.INVENTORY:return Ct(s,"INVENTORY")!=="NONE";case xe.SETTINGS:return hl(s);default:return!1}},hl=s=>s?s==="ADMIN":!1,gs=s=>({ADMIN:"‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö",NCR_OPERATOR:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô NCR",COL_OPERATOR:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô Collection",REQUEST_ENTRY:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô",QC_OPERATOR:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô QC",CLOSURE_OPERATOR:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô",VIEWER:"‡∏ú‡∏π‡πâ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"})[s]||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",Qs=s=>({ADMIN:"text-red-600 bg-red-50",NCR_OPERATOR:"text-indigo-600 bg-indigo-50",COL_OPERATOR:"text-orange-600 bg-orange-50",REQUEST_ENTRY:"text-yellow-600 bg-yellow-50",QC_OPERATOR:"text-green-600 bg-green-50",CLOSURE_OPERATOR:"text-purple-600 bg-purple-50",VIEWER:"text-slate-600 bg-slate-50"})[s]||"text-gray-600 bg-gray-50",gl=({currentView:s,onChangeView:r,isOpen:d=!1,onClose:g})=>{const{user:t,logout:x}=Hs(),u=k.useRef(null);k.useEffect(()=>{const n=f=>{d&&u.current&&!u.current.contains(f.target)&&window.innerWidth<1024&&(g==null||g())};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[d,g]);const C=[{id:xe.DASHBOARD,label:"‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Dashboard)",icon:Ia},{id:xe.OPERATIONS,label:"‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ (Operations)",icon:Aa},{id:xe.NCR,label:"NCR (‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏µ‡∏Å‡∏•‡∏±‡∏ö)",icon:Vt},{id:xe.NCR_REPORT,label:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR",icon:Ea},{id:xe.INVENTORY,label:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inventory)",icon:Gt},{id:xe.COLLECTION,label:"‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Tasks)",icon:Ne},{id:xe.COL_REPORT,label:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô COL",icon:Pa},{id:xe.SETTINGS,label:"‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö",icon:$s}].filter(n=>ul(t==null?void 0:t.role,n.id)),o=async()=>{try{const n=Ce(Re,"connection_test");await It(n,{status:"online",timestamp:new Date().toISOString(),message:"System is connected to Realtime Database"}),alert(`‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Realtime Database ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (Connection Successful)
‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ‡∏¢‡∏±‡∏á path: /connection_test`)}catch(n){alert(`‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (Failed): ${n.message}
‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Config ‡∏´‡∏£‡∏∑‡∏≠ Security Rules`)}},v=async()=>{(await A.fire({title:"‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?",text:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"‡πÉ‡∏ä‡πà, ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",background:"#fff",customClass:{popup:"rounded-2xl shadow-xl border border-slate-100"}})).isConfirmed&&await x()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 transition-opacity duration-300 lg:hidden ${d?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),e.jsxs("div",{ref:u,className:`fixed inset-y-0 left-0 w-64 bg-slate-900/80 backdrop-blur-md text-white shadow-2xl transform transition-transform duration-300 ease-in-out z-50 lg:translate-x-0 lg:static lg:shadow-none flex flex-col h-full print:hidden ${d?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"p-6 flex items-center justify-between border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-10 h-10 object-contain bg-white rounded-lg p-1"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"Neosiam Return"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Management System"})]})]}),e.jsx("button",{onClick:g,className:"lg:hidden p-1 text-slate-400 hover:text-white rounded-md hover:bg-slate-800","aria-label":"‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π",title:"‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π",children:e.jsx(fe,{className:"w-6 h-6"})})]}),t&&e.jsx("div",{className:"px-4 py-3 border-b border-slate-800 bg-slate-800/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.photoURL||"https://ui-avatars.com/api/?name=User",alt:t.displayName,className:"w-10 h-10 rounded-full border-2 border-slate-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:t.displayName}),e.jsx("p",{className:`text-xs px-2 py-0.5 rounded-full inline-block ${Qs(t.role)}`,children:gs(t.role)})]})]})}),e.jsx("nav",{className:"flex-1 px-3 py-6 space-y-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700",children:C.map(n=>{const f=n.icon,c=s===n.id;return e.jsxs("button",{onClick:()=>{r(n.id),g==null||g()},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 outline-none focus:ring-2 focus:ring-blue-500
                  ${c?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"}
                `,children:[e.jsx(f,{className:`w-5 h-5 flex-shrink-0 ${c?"text-white":"text-slate-400"}`}),e.jsx("span",{className:"truncate",children:n.label})]},n.id)})}),e.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2 mt-auto",children:[e.jsxs("button",{onClick:o,className:"flex items-center gap-3 text-green-400 hover:text-green-300 hover:bg-slate-800 px-4 py-3 w-full text-sm rounded-lg transition-colors border border-transparent hover:border-slate-700",children:[e.jsx(La,{className:"w-5 h-5"}),e.jsx("span",{className:"truncate",children:"‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ DB"})]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-3 text-red-400 hover:text-red-300 hover:bg-slate-800 px-4 py-3 w-full text-sm transition-colors rounded-lg border border-transparent hover:border-slate-700",children:[e.jsx($a,{className:"w-5 h-5"}),e.jsx("span",{className:"truncate",children:"‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö"})]})]})]})]})},Ws=k.createContext({items:[],ncrReports:[],loading:!0,addReturnRecord:async()=>!1,updateReturnRecord:async()=>!1,deleteReturnRecord:async()=>!1,addNCRReport:async()=>!1,updateNCRReport:async()=>!1,deleteNCRReport:async()=>!1,systemConfig:{},updateSystemConfig:async()=>!1,getNextNCRNumber:async()=>"NCR-ERROR-0000",getNextReturnNumber:async()=>"RT-ERROR-0000",getNextCollectionNumber:async()=>"COL-ERROR-0000",runDataIntegrityCheck:async()=>0}),Ie=()=>k.useContext(Ws),fl=({children:s})=>{const[r,d]=k.useState([]),[g,t]=k.useState([]),[x,u]=k.useState({telegram:{botToken:"8523483845:AAH63mYzb4xDe7kTWs3NMQLdX1RYWRzn8L0",chatId:"-1002744751386",enabled:!0}}),[a,C]=k.useState(!0);k.useEffect(()=>{console.log("üîÑ Connecting to Realtime Database...");const R=Ce(Re,"return_records"),h=ls(R,S=>{const I=S.val(),T=I?Object.values(I).map($=>({...$,date:$.date||new Date().toISOString().split("T")[0],productName:$.productName||"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})).filter($=>{if(!$||typeof $!="object")return!1;const B=["id","date","status","branch","customerName","productCode"];for(const V of B)if(typeof $[V]!="string")return console.warn(`üõ°Ô∏è Data Hardening: Filtering out invalid ReturnRecord (missing/bad ${V})`,$),!1;if(typeof $.quantity!="number")if(typeof $.quantity=="string"&&!isNaN(parseFloat($.quantity)))$.quantity=parseFloat($.quantity);else return console.warn("üõ°Ô∏è Data Hardening: Filtering out invalid ReturnRecord (bad quantity)",$),!1;return!0}):[];d(T.sort(($,B)=>new Date(B.date).getTime()-new Date($.date).getTime())),C(!1),console.log(`‚úÖ RTDB Connected: Loaded ${T.length} valid Return Records`)},S=>{console.warn("‚ö†Ô∏è RTDB Permission/Connection Error (Returns).",S.message),d([]),C(!1)}),O=Ce(Re,"ncr_reports"),w=ls(O,S=>{const I=S.val(),T=I?Object.entries(I).map(([$,B])=>{if(!B||typeof B!="object")return null;const G={...B,id:typeof B.id=="string"&&B.id?B.id:$};return{...G,date:(typeof G.date=="string"?G.date:void 0)||new Date().toISOString().split("T")[0],status:(typeof G.status=="string"?G.status:void 0)||"Open"}}).filter($=>{if(!$)return!1;const B=$;if((B.ncrNo==="NCR-2025-0163"||B.id==="NCR-2025-0163")&&console.log("üîç Checking NCR-2025-0163 in DataContext filter:",B),!B||typeof B!="object")return!1;if(typeof B.id!="string")return B.ncrNo==="NCR-2025-0163"&&console.error("‚ùå CRTICAL: NCR-2025-0163 filtered due to missing ID.",B),console.warn("üõ°Ô∏è Data Hardening: Filtering out invalid NCR (missing id).",$),!1;if(typeof B.date!="string"||typeof B.status!="string")return console.warn("üõ°Ô∏è Data Hardening: NCR date/status invalid type.",$),!1;const V=B.item||B;return!V||typeof V!="object"?((B.ncrNo==="NCR-2025-0163"||B.id==="NCR-2025-0163")&&console.error("‚ùå CRTICAL: NCR-2025-0163 filtered due to invalid Item structure.",B),console.warn("üõ°Ô∏è Data Hardening: Invalid NCR Item structure.",$),!1):(typeof V.productName!="string"&&console.warn("‚ö†Ô∏è Data Warning: NCR report missing valid productName.",$),!0)}):[];t(T.sort(($,B)=>new Date(B.date).getTime()-new Date($.date).getTime())),console.log(`‚úÖ RTDB Connected: Loaded ${T.length} valid NCR Reports`)},S=>{console.warn("‚ö†Ô∏è RTDB Permission/Connection Error (NCR).",S.message),t([])}),j=Ce(Re,"system_config"),D=ls(j,S=>{const I=S.val();I&&u(T=>({...T,...I,telegram:{...T.telegram,...I.telegram||{}}}))});return()=>{h(),w(),D()}},[]);const o=async R=>{const h=(R.documentNo||R.refNo||"").trim(),O=(R.productCode||R.productName||"").trim();if(h){const w=h.toLowerCase(),j=O.toLowerCase(),D=w==="-"||w===""?[]:r.filter(S=>(S.documentNo||S.refNo||"").trim().toLowerCase()===w);if(D.length>0){if(D.some(T=>T.status!=="Draft"&&T.status!=="Requested")){const T=`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ: ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ "${h}" ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (Step 2+) ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥)`;return console.warn("üö´ "+T),A.fire({icon:"error",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",html:`
              <div class="text-left">
                 <p class="font-bold text-red-600 mb-2">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ${h} ‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏Ñ (In Process)</p>
                 <p class="text-sm text-slate-600">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Step 2 ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ) ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ</p>
              </div>
            `,confirmButtonText:"‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö",confirmButtonColor:"#334155"}),!1}if(D.some(T=>(T.productCode||T.productName||"").trim().toLowerCase()===j)){const T=`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ: ‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥ (‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ "${h}" + ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ "${O}")`;return console.warn("üö´ "+T),A.fire({icon:"warning",title:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥ (Duplicate)",html:`
              <div class="text-left">
                 <p class="font-bold text-amber-600 mb-2">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ${h} ‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß</p>
                 <div class="bg-amber-50 p-2 rounded border border-amber-200 text-xs text-amber-800 mb-2 font-mono">
                    Product: ${O||"Unknown"}
                 </div>
                 <p class="text-sm text-slate-600">‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô</p>
              </div>
            `,confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á",confirmButtonColor:"#d97706"}),!1}}}try{return await It(Ce(Re,"return_records/"+R.id),R),!0}catch(w){return w.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Write Permission Denied: Cannot save return record."),alert("Access Denied: Check Firebase Realtime Database Rules. Developer tip: Set rules to 'allow read, write: if true;' for testing.")):(console.error("Error adding return record:",w),alert("Failed to save record.")),!1}},v=async(R,h)=>{const O=(h.documentNo||h.refNo||"").trim();if(O){const w=O.toLowerCase(),j=r.find(T=>T.id===R),D=(h.productCode||h.productName||(j==null?void 0:j.productCode)||(j==null?void 0:j.productName)||"").trim(),S=D.toLowerCase(),I=r.filter(T=>T.id===R?!1:(T.documentNo||T.refNo||"").trim().toLowerCase()===w);if(I.length>0){if(I.some(B=>B.status!=="Draft"&&B.status!=="Requested")){const B=`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ: ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ "${O}" ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (Step 2+) (‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥)`;return console.warn("üö´ "+B),alert(B),!1}if(I.some(B=>(B.productCode||B.productName||"").trim().toLowerCase()===S)){const B=`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ: ‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥ (‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ "${O}" + ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ "${D}")`;return console.warn("üö´ "+B),alert(B),!1}}}try{return await ht(Ce(Re,"return_records/"+R),h),!0}catch(w){return w.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Update Permission Denied."),alert("Access Denied: Cannot update record.")):(console.error("Error updating return record:",w),alert("Failed to update record.")),!1}},n=async R=>{try{return await Kt(Ce(Re,"return_records/"+R)),!0}catch(h){return h.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Delete Permission Denied."),alert("Access Denied: Cannot delete this return record.")):(console.error("Error deleting return record:",h),alert("Failed to delete this return record.")),!1}},f=async R=>{try{return await It(Ce(Re,"ncr_reports/"+R.id),R),!0}catch(h){return h.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Write Permission Denied: Cannot save NCR report."),alert("Access Denied: Check Firebase Realtime Database Rules. Developer tip: Set rules to 'allow read, write: if true;' for testing.")):(console.error("Error adding NCR report:",h),alert("Failed to save NCR report.")),!1}},c=async(R,h)=>{try{const O=g.find(S=>S.id===R),w=O==null?void 0:O.ncrNo,j=(O==null?void 0:O.item)||O,D=j==null?void 0:j.productCode;if(await ht(Ce(Re,"ncr_reports/"+R),h),w&&D){const S=r.filter(I=>I.ncrNumber===w&&I.productCode===D);if(S.length>0){const I={...O,...h},T=I.item||I,$={date:I.date,dateRequested:I.date,productName:T.productName,productCode:T.productCode,quantity:T.quantity,unit:T.unit,customerName:T.customerName,destinationCustomer:T.destinationCustomer,branch:T.branch,founder:I.founder,amount:T.priceBill||0,priceBill:T.priceBill||0,pricePerUnit:T.pricePerUnit||0,neoRefNo:T.neoRefNo||"-",ncrNumber:I.ncrNo,problemDamaged:I.problemDamaged,problemDamagedInBox:I.problemDamagedInBox,problemLost:I.problemLost,problemMixed:I.problemMixed,problemWrongInv:I.problemWrongInv,problemLate:I.problemLate,problemDuplicate:I.problemDuplicate,problemWrong:I.problemWrong,problemIncomplete:I.problemIncomplete,problemOver:I.problemOver,problemWrongInfo:I.problemWrongInfo,problemShortExpiry:I.problemShortExpiry,problemTransportDamage:I.problemTransportDamage,problemAccident:I.problemAccident,problemPOExpired:I.problemPOExpired,problemNoBarcode:I.problemNoBarcode,problemNotOrdered:I.problemNotOrdered,problemOther:I.problemOther,problemOtherText:I.problemOtherText,problemDetail:I.problemDetail,rootCause:T.problemSource,problemSource:T.problemSource,hasCost:T.hasCost,costAmount:T.costAmount,costResponsible:T.costResponsible,toDept:I.toDept,copyTo:I.copyTo,poNo:I.poNo};for(const B of S)await ht(Ce(Re,"return_records/"+B.id),$);console.log(`‚úÖ Synced NCR ${I.ncrNo} update to ${S.length} Return Records`)}}return!0}catch(O){return O.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Update Permission Denied."),alert("Access Denied: Cannot update NCR report.")):(console.error("Error updating NCR report:",O),alert("Failed to update NCR report.")),!1}},N=async R=>{try{const h=g.find(O=>O.id===R);if(await ht(Ce(Re,"ncr_reports/"+R),{status:"Canceled"}),h&&h.ncrNo){const O=h.item||h,w=r.filter(j=>j.ncrNumber===h.ncrNo&&j.productCode===O.productCode);for(const j of w)await ht(Ce(Re,"return_records/"+j.id),{status:"Canceled"});w.length>0&&console.log(`üö´ Canceled ${w.length} linked Return Records in Hub`)}return!0}catch(h){return h.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Cancel Permission Denied."),alert("Access Denied: Cannot cancel NCR report.")):(console.error("Error canceling NCR report:",h),alert("Failed to cancel NCR report.")),!1}},b=async()=>{const R=Ce(Re,"counters/ncr_counter"),h=new Date().getFullYear();try{const{committed:O,snapshot:w}=await rs(R,j=>j===null?{year:h,lastNumber:1}:(j.year===h?j.lastNumber++:(j.year=h,j.lastNumber=1),j));if(O){const j=w.val(),D=String(j.lastNumber).padStart(4,"0");return`NCR-${j.year}-${D}`}else throw new Error("Failed to get next NCR number, transaction aborted.")}catch(O){return console.error("Error getting next NCR number:",O),`NCR-${h}-ERR${Math.floor(Math.random()*100)}`}},P=async()=>{const R=Ce(Re,"counters/return_counter"),h=new Date().getFullYear();try{const{committed:O,snapshot:w}=await rs(R,j=>j===null?{year:h,lastNumber:1}:(j.year===h?j.lastNumber++:(j.year=h,j.lastNumber=1),j));if(O){const j=w.val(),D=String(j.lastNumber).padStart(4,"0");return`RT-${j.year}-${D}`}else throw new Error("Failed to get next Return number, transaction aborted.")}catch(O){return console.error("Error getting next Return number:",O),`RT-${h}-ERR${Math.floor(Math.random()*100)}`}},p=async()=>{const R=Ce(Re,"counters/collection_counter"),h=new Date().getFullYear();try{const{committed:O,snapshot:w}=await rs(R,j=>{const D=new Date().getMonth()+1;return j===null?{year:h,month:D,lastNumber:1}:(j.year===h&&j.month===D?j.lastNumber++:(j.year=h,j.month=D,j.lastNumber=1),j)});if(O){const j=w.val(),D=String(j.month).padStart(2,"0"),S=String(j.lastNumber).padStart(4,"0");return`COL-${j.year}${D}-${S}`}else throw new Error("Failed to get next Collection number, transaction aborted.")}catch(O){return console.error("Error getting next Collection number:",O),`COL-${h}-ERR${Math.floor(Math.random()*100)}`}},i=async()=>{console.log("üîÑ Starting Data Integrity Check...");const R=r.filter(O=>{if(!O.ncrNumber&&!O.id.startsWith("NCR"))return!1;let w=O.ncrNumber;if(!w&&O.id.startsWith("NCR")&&(w=O.id),!w)return!1;w=w.trim();const j=g.find(D=>D.ncrNo===w||D.id===w);return!j||j.status==="Canceled"});if(R.length===0)return console.log("‚úÖ System Integrity Verified: No orphans found."),0;console.warn(`‚ö†Ô∏è Found ${R.length} orphaned records. Cleaning up...`,R);let h=0;for(const O of R)try{await Kt(Ce(Re,`return_records/${O.id}`)),h++}catch(w){console.error(`‚ùå Failed to delete orphan ${O.id}`,w)}return console.log(`üßπ Cleanup Complete. Removed ${h} records.`),h},m=async R=>{try{return await ht(Ce(Re,"system_config"),R),!0}catch(h){return console.error("Error updating system config:",h),!1}};return e.jsx(Ws.Provider,{value:{items:r,ncrReports:g,loading:a,systemConfig:x,addReturnRecord:o,updateReturnRecord:v,deleteReturnRecord:n,addNCRReport:f,updateNCRReport:c,deleteNCRReport:N,getNextNCRNumber:b,getNextReturnNumber:P,getNextCollectionNumber:p,runDataIntegrityCheck:i,updateSystemConfig:m},children:s})},Rt={Restock:"#22c55e",RTV:"#f59e0b",Recycle:"#ef4444",Claim:"#3b82f6",InternalUse:"#a855f7"},Es=()=>{const{items:s,ncrReports:r,runDataIntegrityCheck:d}=Ie(),g=async()=>{const{value:n}=await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Authentication)",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",input:"password",inputPlaceholder:"Enter password",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Verify)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(!n)return;if(n!=="888"){await A.fire({title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"Access Denied",icon:"error",confirmButtonColor:"#ef4444"});return}if((await A.fire({title:"‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?",text:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏ñ‡∏≤‡∏ß‡∏£ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ! ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"‡πÉ‡∏ä‡πà, ‡∏â‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed)try{A.fire({title:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...",text:"Please wait while we reset the system",allowOutsideClick:!1,didOpen:()=>{A.showLoading()}}),await Kt(Ce(Re,"return_records")),await Kt(Ce(Re,"ncr_reports")),await It(Ce(Re,"ncr_counter"),0),await A.fire("‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!","‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß","success"),location.reload()}catch(c){console.error(c),A.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà","error")}},t=async()=>{const{value:n}=await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Authentication)",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞",input:"password",inputPlaceholder:"Enter password",icon:"question",showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#64748b",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Verify)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(n){if(n!=="888"){await A.fire({title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"Access Denied",icon:"error",confirmButtonColor:"#ef4444"});return}A.fire({title:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö...",text:"Scanning for orphaned records...",allowOutsideClick:!1,didOpen:()=>{A.showLoading()}});try{const f=await d();f>0?await A.fire("‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",`‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á (Orphaned Records) ‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô ${f} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,"success"):await A.fire("‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥","‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö","success")}catch(f){console.error(f),A.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ","error")}}},x=k.useMemo(()=>({requests:s.filter(n=>n.status==="Draft"||n.status==="Requested").length,logistics:s.filter(n=>n.status==="InTransitHub").length,receiving:s.filter(n=>n.status==="ReceivedAtHub"||n.status==="Received").length,qc:s.filter(n=>n.status==="QCPassed"||n.status==="QCFailed"||n.status==="Graded").length,disposition:s.filter(n=>n.status==="ReturnToSupplier"||n.status==="Documented").length,completed:s.filter(n=>n.status==="Completed").length}),[s]),u=k.useMemo(()=>{const n=f=>{let c=0,N=0;return s.filter(b=>b.disposition===f).forEach(b=>{b.dateGraded&&(c++,(b.dateDocumented||b.dateCompleted)&&N++)}),c-N};return{restock:n("Restock"),rtv:n("RTV"),claim:n("Claim"),internal:n("InternalUse"),scrap:n("Recycle"),directReturn:s.filter(f=>f.disposition==="RTV"&&!f.dateGraded&&(f.dateDocumented||f.dateCompleted)).length}},[s]),a=k.useMemo(()=>{const n=s.filter(f=>!(f.documentType==="NCR"||f.ncrNumber&&f.documentType!=="LOGISTICS"));return{requests:n.filter(f=>f.status==="Requested").length,assigned:n.filter(f=>f.status==="COL_JobAccepted").length,collected:n.filter(f=>f.status==="COL_BranchReceived").length,consolidated:n.filter(f=>f.status==="COL_Consolidated").length,transit:n.filter(f=>f.status==="COL_InTransit").length,pendingCompletion:n.filter(f=>f.status==="COL_HubReceived"||f.status==="COL_Documented").length,completed:n.filter(f=>f.status==="Completed").length}},[s]),C=k.useMemo(()=>{let n=0,f=0,c=0,N=0;const b={},P={};s.forEach(i=>{const m=i.quantity||0,R=i.priceBill||0;if(n+=R*m,i.disposition==="Restock"&&(f+=(i.priceSell||0)*m),i.disposition==="RTV"&&(c+=R*m),i.hasCost&&i.costAmount){const h=i.costResponsible||"Unassigned",O=i.problemSource||"Other";b[h]=(b[h]||0)+i.costAmount,P[O]=(P[O]||0)+i.costAmount}}),r.filter(i=>i.status!=="Canceled").forEach(i=>{var R;const m=((R=i.item)==null?void 0:R.costAmount)||i.costAmount||0;N+=m});const p=Object.entries(b).map(([i,m])=>({name:i,value:m})).sort((i,m)=>m.value-i.value).slice(0,5);return{totalIntakeValue:n,recoveryValue:f,rtvValue:c,ncrCost:N,costResponsibleData:p}},[s,r]),o=k.useMemo(()=>{const n={Restock:0,RTV:0,Recycle:0,Claim:0,InternalUse:0};return s.forEach(f=>{f.disposition&&f.disposition!=="Pending"&&n[f.disposition]!==void 0&&n[f.disposition]++}),[{name:"‡∏Ç‡∏≤‡∏¢ (Restock)",value:n.Restock,color:Rt.Restock},{name:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (RTV)",value:n.RTV,color:Rt.RTV},{name:"‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",value:n.Claim,color:Rt.Claim},{name:"‡∏ó‡∏¥‡πâ‡∏á (Scrap)",value:n.Recycle,color:Rt.Recycle},{name:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",value:n.InternalUse,color:Rt.InternalUse}].filter(f=>f.value>0)},[s]),v=k.useMemo(()=>{const n={},f={Packaging:0,Transport:0,Operation:0,Environment:0};r.filter(b=>b.status!=="Canceled").forEach(b=>{var i;let P=((i=b.item)==null?void 0:i.problemSource)||b.problemSource||"Other";const p=P.trim().toLowerCase();p==="other"||p==="others"||p.startsWith("other")||p.includes("‡∏≠‡∏∑‡πà‡∏ô‡πÜ")||p==="-"?P="‡∏≠‡∏∑‡πà‡∏ô‡πÜ":p==="customer"?P="‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer)":(p==="transport"||p.includes("transport")||P.startsWith("‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á"))&&(P="‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transport)"),n[P]=(n[P]||0)+1,b.causePackaging&&f.Packaging++,b.causeTransport&&f.Transport++,b.causeOperation&&f.Operation++,b.causeEnv&&f.Environment++});const c=Object.entries(n).map(([b,P])=>({name:b,value:P})).sort((b,P)=>P.value-b.value),N=[{name:"Packaging",value:f.Packaging},{name:"Transport",value:f.Transport},{name:"Operation",value:f.Operation},{name:"Environment",value:f.Environment}].filter(b=>b.value>0);return{rootCauseData:c,causeData:N}},[r]);return e.jsxs("div",{className:"p-6 space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô (Operation Performance)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô‡∏Ñ‡∏á‡∏Ñ‡πâ‡∏≤‡∏á (Pipeline), ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (Inventory), ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Analysis)"})]}),e.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg border border-blue-100 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-bold text-blue-700",children:"Live Status"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-teal-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inbound Collection System)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[e.jsx(_e,{step:"1",title:"‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô (Request)",count:a.requests,icon:Oe,variant:"teal",desc:"‡∏£‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏á‡∏≤‡∏ô"}),e.jsx(_e,{step:"2",title:"‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Job)",count:a.assigned,icon:Ve,variant:"blue",desc:"‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏±‡∏ö"}),e.jsx(_e,{step:"3",title:"‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á (Collected)",count:a.collected,icon:Jt,variant:"emerald",desc:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx(_e,{step:"4",title:"‡∏à‡∏∏‡∏î‡∏û‡∏±‡∏Å (Hub)",count:a.consolidated,icon:st,variant:"purple",desc:"‡∏£‡∏≠‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsx(_e,{step:"5",title:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transit)",count:a.transit,icon:Ne,variant:"indigo",desc:"‡πÄ‡∏Ç‡πâ‡∏≤ Ops Hub"}),e.jsx(_e,{step:"6",title:"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Pending)",count:a.pendingCompletion,icon:At,variant:"amber",desc:"Direct/Docs"}),e.jsx(_e,{step:"7",title:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô (Completed)",count:a.completed,icon:Pe,variant:"rose",desc:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4"})," ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Operations Hub)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[e.jsx(_e,{step:"1",title:"‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô (Request)",count:x.requests,icon:Oe,variant:"slate",desc:"‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"}),e.jsx(_e,{step:"2",title:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (Logistics)",count:x.logistics,icon:Ne,variant:"amber",desc:"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á"}),e.jsx(_e,{step:"3",title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (Receive)",count:x.receiving,icon:st,variant:"blue",desc:"‡∏ñ‡∏∂‡∏á Hub"}),e.jsx(_e,{step:"4",title:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (QC)",count:x.qc,icon:Et,variant:"purple",desc:"‡∏£‡∏≠‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"}),e.jsx(_e,{step:"5",title:"‡∏Ñ‡∏•‡∏±‡∏á/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",count:x.disposition,icon:Oe,variant:"indigo",desc:"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"}),e.jsx(_e,{step:"6",title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Done)",count:x.completed,icon:Pe,variant:"emerald",desc:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"})," ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á (Inventory On-Hand)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsx(gt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢ (Sellable)",count:u.restock,variant:"green",icon:Pe,subTitle:"Fully Recovered"}),e.jsx(gt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô (RTV)",count:u.rtv,variant:"orange",icon:Ne,subTitle:"To Vendor"}),e.jsx(gt,{title:"‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",count:u.claim,variant:"blue",icon:Ze,subTitle:"Awaiting Claim"}),e.jsx(gt,{title:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",count:u.internal,variant:"purple",icon:Jt,subTitle:"In-House Use"}),e.jsx(gt,{title:"‡∏ã‡∏≤‡∏Å (Scrap)",count:u.scrap,variant:"red",icon:$e,subTitle:"Scrapped"}),e.jsx(gt,{title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ï‡∏£‡∏á (Direct)",count:u.directReturn,variant:"slate",icon:Ue,subTitle:"Bypassed Hub"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(ct,{className:"w-4 h-4"})," ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (Financial Impact)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(zt,{title:"Total Intake",value:`‡∏ø${C.totalIntakeValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö",icon:st,variant:"dark"}),e.jsx(zt,{title:"Recovery Value",value:`‡∏ø${C.recoveryValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏ô (Restock)",icon:Ba,variant:"green"}),e.jsx(zt,{title:"RTV Credit",value:`‡∏ø${C.rtvValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (RTV)",icon:Ne,variant:"orange"}),e.jsx(zt,{title:"Cost Impact",value:`‡∏ø${C.ncrCost.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (NCR & Costs)",icon:Vt,variant:"red"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100 flex flex-col",children:[e.jsxs("div",{className:"mb-8 flex flex-col justify-between items-start gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-1.5 h-8 bg-indigo-600 rounded-full"}),e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡∏∞‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤ (Return Trends)"})]}),e.jsx("p",{className:"text-sm text-slate-400 pl-4",children:"‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏ä‡∏¥‡πâ‡∏ô) ‡∏Å‡∏±‡∏ö‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"})]}),e.jsxs("div",{className:"flex items-center gap-6 pl-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-indigo-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (Qty)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500 border-2 border-white ring-1 ring-amber-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (Cost)"})]})]})]}),e.jsx("div",{className:"flex-1 min-h-[350px] w-full",children:e.jsx(Ht,{width:"100%",height:"100%",children:e.jsxs(Ma,{data:[{name:"Mon",qty:120,cost:5e3},{name:"Tue",qty:132,cost:4500},{name:"Wed",qty:101,cost:8e3},{name:"Thu",qty:134,cost:2e3},{name:"Fri",qty:190,cost:6e3},{name:"Sat",qty:230,cost:9e3},{name:"Sun",qty:210,cost:12e3}],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorQty",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),e.jsx(ns,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),e.jsx(os,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},dy:10}),e.jsx(Qt,{yAxisId:"left",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),e.jsx(Qt,{yAxisId:"right",orientation:"right",axisLine:!1,tickLine:!1,tick:{fill:"#f59e0b",fontSize:12},unit:"‡∏ø"}),e.jsx(Wt,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"}}),e.jsx(_a,{yAxisId:"left",type:"monotone",dataKey:"qty",stroke:"#6366f1",strokeWidth:3,fillOpacity:1,fill:"url(#colorQty)"}),e.jsx(qa,{yAxisId:"right",type:"monotone",dataKey:"cost",stroke:"#f59e0b",strokeWidth:3,dot:{r:4,strokeWidth:2,fill:"#fff",stroke:"#f59e0b"}})]})})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100 flex flex-col",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-1.5 h-8 bg-pink-500 rounded-full"}),e.jsxs("h3",{className:"text-xl font-bold text-slate-800 leading-tight",children:["5 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",e.jsx("br",{}),"(Top Critical Costs)"]})]})}),e.jsx("div",{className:"flex-1 min-h-[300px]",children:C.costResponsibleData.length>0?e.jsx("div",{className:"w-full h-full",children:e.jsx(Ht,{width:"100%",height:"100%",children:e.jsxs(Ss,{data:C.costResponsibleData,layout:"vertical",margin:{left:0,right:20},children:[e.jsx(ns,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#f8fafc"}),e.jsx(os,{type:"number",hide:!0}),e.jsx(Qt,{dataKey:"name",type:"category",width:80,tick:{fontSize:11,fill:"#64748b",fontWeight:600},axisLine:!1,tickLine:!1}),e.jsx(Wt,{cursor:{fill:"#fee2e2",opacity:.4,radius:8},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:n=>`‡∏ø${n.toLocaleString()}`}),e.jsx(ks,{dataKey:"value",fill:"#ec4899",radius:[0,10,10,0],barSize:12,background:{fill:"#fce7f3",radius:[0,10,10,0]}})]})})}):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-12",children:[e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-800"}),"‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Disposition Mix)"]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(Ht,{width:"100%",height:"100%",children:e.jsxs(Fa,{children:[e.jsx(Ua,{data:o,innerRadius:80,outerRadius:110,paddingAngle:5,dataKey:"value",cornerRadius:8,children:o.map((n,f)=>e.jsx(Ha,{fill:n.color,stroke:"none"},`cell-${f}`))}),e.jsx(Wt,{contentStyle:{borderRadius:"12px"}}),e.jsx(Qa,{verticalAlign:"middle",align:"right",layout:"vertical",iconType:"circle"})]})})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-600"}),"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Sources)"]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(Ht,{width:"100%",height:"100%",children:e.jsxs(Ss,{data:v.rootCauseData,layout:"vertical",margin:{left:20},children:[e.jsx(ns,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#f8fafc"}),e.jsx(os,{type:"number",hide:!0}),e.jsx(Qt,{dataKey:"name",type:"category",width:100,tick:{fontSize:11},axisLine:!1,tickLine:!1}),e.jsx(Wt,{cursor:{fill:"#f3e8ff"},contentStyle:{borderRadius:"12px"}}),e.jsx(ks,{dataKey:"value",fill:"#8b5cf6",radius:[0,8,8,0],barSize:20,background:{fill:"#f3e8ff",radius:[0,8,8,0]}})]})})})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center mt-12 mb-8 opacity-70 hover:opacity-100 transition-opacity",children:[e.jsxs("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-6 flex flex-col items-center w-64 hover:shadow-md transition-shadow",children:[e.jsxs("h3",{className:"text-blue-700 font-bold text-sm mb-2 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"})," Sync & Cleanup Data"]}),e.jsx("button",{onClick:t,"aria-label":"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞",className:"text-blue-600 underline text-xs cursor-pointer hover:text-blue-800 font-semibold",children:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞"}),e.jsx("div",{className:"text-[10px] text-blue-400 mt-1",children:"Remove orphaned NCR records"})]}),e.jsxs("div",{className:"border border-red-200 bg-red-50 rounded-lg p-6 flex flex-col items-center w-64 hover:shadow-md transition-shadow",children:[e.jsxs("h3",{className:"text-red-700 font-bold text-sm mb-2 flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"})," Data Factory Reset"]}),e.jsx("button",{onClick:g,"aria-label":"‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Reset All)",className:"text-red-600 underline text-xs cursor-pointer hover:text-red-800",children:"‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Reset All)"}),e.jsx("div",{className:"text-[10px] text-red-300 mt-1",children:"Delete all 100%"})]})]})]})},zs=({end:s,duration:r=1500})=>{const[d,g]=k.useState(0);return k.useEffect(()=>{let t=null;const x=u=>{t||(t=u);const a=u-t,C=Math.min(a/r,1);g(Math.floor((v=>v===1?1:1-Math.pow(2,-10*v))(C)*s)),a<r?requestAnimationFrame(x):g(s)};requestAnimationFrame(x)},[s,r]),e.jsx(e.Fragment,{children:d.toLocaleString()})},_e=({step:s,title:r,count:d,icon:g,variant:t="blue",desc:x})=>{const u={teal:{border:"border-teal-200",bg:"bg-teal-50",iconColor:"text-teal-600",blob:"bg-teal-100",hoverBorder:"group-hover:border-teal-400"},blue:{border:"border-blue-200",bg:"bg-blue-50",iconColor:"text-blue-600",blob:"bg-blue-100",hoverBorder:"group-hover:border-blue-400"},indigo:{border:"border-indigo-200",bg:"bg-indigo-50",iconColor:"text-indigo-600",blob:"bg-indigo-100",hoverBorder:"group-hover:border-indigo-400"},purple:{border:"border-purple-200",bg:"bg-purple-50",iconColor:"text-purple-600",blob:"bg-purple-100",hoverBorder:"group-hover:border-purple-400"},amber:{border:"border-amber-200",bg:"bg-amber-50",iconColor:"text-amber-600",blob:"bg-amber-100",hoverBorder:"group-hover:border-amber-400"},emerald:{border:"border-emerald-200",bg:"bg-emerald-50",iconColor:"text-emerald-600",blob:"bg-emerald-100",hoverBorder:"group-hover:border-emerald-400"},rose:{border:"border-rose-200",bg:"bg-rose-50",iconColor:"text-rose-600",blob:"bg-rose-100",hoverBorder:"group-hover:border-rose-400"},slate:{border:"border-slate-200",bg:"bg-slate-50",iconColor:"text-slate-600",blob:"bg-slate-200",hoverBorder:"group-hover:border-slate-400"}},a=u[t]||u.blue;return e.jsxs("div",{className:`relative p-5 rounded-[2rem] border ${a.border} ${a.bg} flex flex-col items-center text-center transition-all duration-300 hover:-translate-y-2 hover:shadow-xl hover:ring-2 hover:ring-offset-2 hover:ring-transparent ${a.hoverBorder} cursor-pointer overflow-hidden group h-full min-h-[220px]`,children:[e.jsx("div",{className:`absolute -top-6 -right-6 w-24 h-24 rounded-full ${a.blob} opacity-60 blur-2xl transition-transform duration-500 group-hover:scale-150`}),e.jsxs("div",{className:"relative z-10 text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4 transition-colors group-hover:text-slate-600",children:["Step ",s]}),e.jsx("div",{className:`relative z-10 mb-4 p-4 rounded-full shadow-sm bg-white ring-4 ring-white/50 ${a.iconColor} transition-transform duration-300 group-hover:scale-110 group-hover:shadow-md`,children:e.jsx(g,{className:"w-6 h-6",strokeWidth:1.5})}),e.jsx("div",{className:"relative z-10 text-4xl font-black text-slate-800 mb-2 transition-all group-hover:scale-105",children:e.jsx(zs,{end:d})}),e.jsx("div",{className:"relative z-10 text-xs font-bold text-slate-600 truncate w-full mb-1 px-2",children:r}),e.jsx("div",{className:"relative z-10 text-[10px] text-slate-400 font-medium",children:x})]})},zt=({title:s,value:r,subText:d,icon:g,variant:t="default"})=>{const x={dark:"bg-slate-900 text-white border-none shadow-xl shadow-slate-200 hover:shadow-slate-400/50",green:"bg-gradient-to-br from-emerald-500 to-teal-600 text-white border-none shadow-xl shadow-emerald-200 hover:shadow-emerald-400/50",orange:"bg-gradient-to-br from-amber-400 to-orange-600 text-white border-none shadow-xl shadow-orange-200 hover:shadow-orange-400/50",red:"bg-gradient-to-br from-red-500 to-rose-600 text-white border-none shadow-xl shadow-red-200 hover:shadow-red-400/50",default:"bg-white text-slate-800 border-slate-100 shadow-sm hover:border-blue-300"},u=x[t]||x.default,a=t!=="default";return e.jsxs("div",{className:`relative overflow-hidden rounded-[2rem] p-6 flex flex-col justify-between h-40 transition-all duration-300 hover:-translate-y-2 hover:scale-[1.02] hover:shadow-2xl cursor-pointer group ${u}`,children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-5 rounded-full -mr-10 -mt-10 blur-2xl transition-transform group-hover:scale-125 duration-700"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-black opacity-10 rounded-full -ml-8 -mb-8 blur-xl transition-transform group-hover:scale-150 duration-700"})]}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-bold uppercase tracking-widest mb-1 ${a?"text-white/70":"text-slate-500"}`,children:s}),e.jsx("div",{className:`p-2 rounded-lg inline-flex ${a?"bg-white/20 backdrop-blur-sm text-white":"bg-slate-100 text-slate-600"}`,children:e.jsx("span",{className:"text-[10px] font-medium",children:d})})]}),e.jsx("div",{className:`p-3 rounded-2xl ${a?"bg-white/20 backdrop-blur-md text-white":"bg-slate-100 text-slate-600"} transition-transform group-hover:rotate-12`,children:e.jsx(g,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"relative z-10 mt-auto",children:e.jsx("h3",{className:"text-3xl font-black tracking-tight group-hover:scale-105 transition-transform origin-left",children:r})})]})},gt=({title:s,count:r,variant:d,icon:g,subTitle:t})=>{const x={blue:"bg-gradient-to-br from-[#4f46e5] to-[#3b82f6] shadow-indigo-300",orange:"bg-gradient-to-br from-[#f97316] to-[#ef4444] shadow-orange-300",green:"bg-gradient-to-br from-[#10b981] to-[#059669] shadow-emerald-300",purple:"bg-gradient-to-br from-[#a855f7] to-[#d946ef] shadow-purple-300",red:"bg-gradient-to-br from-[#ef4444] to-[#be123c] shadow-rose-300",amber:"bg-gradient-to-br from-[#f59e0b] to-[#d97706] shadow-amber-300",slate:"bg-gradient-to-br from-[#64748b] to-[#475569] shadow-slate-300"},u=x[d]||x.slate;return e.jsxs("div",{className:`relative overflow-hidden rounded-[2rem] p-6 h-44 flex flex-col justify-between shadow-xl transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl cursor-pointer group ${u}`,children:[g&&e.jsx("div",{className:"absolute -bottom-6 -right-6 opacity-20 transform rotate-[-10deg] group-hover:scale-110 group-hover:rotate-0 transition-all duration-500 ease-out",children:e.jsx(g,{className:"w-36 h-36 text-white",strokeWidth:1})}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"text-white/90 text-sm font-bold tracking-wide mb-1 drop-shadow-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full inline-block"}),s]})}),e.jsxs("div",{className:"relative z-10 text-white font-black text-6xl leading-none tracking-tight drop-shadow-md flex items-baseline gap-2 my-2",children:[e.jsx(zs,{end:r}),e.jsx("span",{className:"text-xl font-bold opacity-70 tracking-normal",children:"‡∏ä‡∏¥‡πâ‡∏ô"})]}),e.jsx("div",{className:"relative z-10 self-start mt-auto",children:e.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-full px-4 py-1.5 border border-white/10 text-[10px] font-bold text-white tracking-widest uppercase shadow-sm",children:t||"STATUS"})})]})},Ps=s=>{if(isNaN(s)||s===0)return"‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô";const r=["‡∏®‡∏π‡∏ô‡∏¢‡πå","‡∏´‡∏ô‡∏∂‡πà‡∏á","‡∏™‡∏≠‡∏á","‡∏™‡∏≤‡∏°","‡∏™‡∏µ‡πà","‡∏´‡πâ‡∏≤","‡∏´‡∏Å","‡πÄ‡∏à‡πá‡∏î","‡πÅ‡∏õ‡∏î","‡πÄ‡∏Å‡πâ‡∏≤"],d=["","‡∏™‡∏¥‡∏ö","‡∏£‡πâ‡∏≠‡∏¢","‡∏û‡∏±‡∏ô","‡∏´‡∏°‡∏∑‡πà‡∏ô","‡πÅ‡∏™‡∏ô","‡∏•‡πâ‡∏≤‡∏ô"],g=Math.abs(s),t=Math.floor(g).toString(),x=Math.round(g*100%100).toString().padStart(2,"0");let u="";const a=o=>{let v="";for(let n=0;n<o.length;n++){let f=parseInt(o.charAt(n)),c=o.length-n-1;f!==0&&(c===1&&f===2?v+="‡∏¢‡∏µ‡πà":c===1&&f===1||(c===0&&f===1&&o.length>1?v+="‡πÄ‡∏≠‡πá‡∏î":v+=r[f]),v+=d[c])}return v};if(parseInt(t)>0){let o=parseInt(t),v="",n=0;for(;o>0;){const f=(o%1e6).toString(),c=a(f);c&&(v=c+(n>0?"‡∏•‡πâ‡∏≤‡∏ô":"")+v),o=Math.floor(o/1e6),n++}u=v}else u="‡∏®‡∏π‡∏ô‡∏¢‡πå";if(u+="‡∏ö‡∏≤‡∏ó",parseInt(x)===0)u+="‡∏ñ‡πâ‡∏ß‡∏ô";else{let o="",v=parseInt(x.charAt(0)),n=parseInt(x.charAt(1));v>0&&(v===2?o+="‡∏¢‡∏µ‡πà":v===1||(o+=r[v]),o+="‡∏™‡∏¥‡∏ö"),n>0&&(n===1&&v!==1?o+="‡πÄ‡∏≠‡πá‡∏î":n>1&&(o+=r[n])),u+=o+"‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå"}return(s<0?"‡∏•‡∏ö":"")+u},Nt=s=>{switch(s){case"RTV":return{code:"FM-LOG-05",rev:"00",th:"‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",en:"GOODS RETURN NOTE"};case"Restock":return{code:"FM-SAL-02",rev:"00",th:"‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ",en:"SALES DISPOSAL APPROVAL FORM"};case"Claim":return{code:"FM-CLM-01",rev:"00",th:"‡πÉ‡∏ö‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô",en:"INSURANCE CLAIM DELIVERY NOTE"};case"InternalUse":return{code:"FM-ADM-09",rev:"00",th:"‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô",en:"INTERNAL REQUISITION FORM"};case"Recycle":return{code:"FM-AST-04",rev:"00",th:"‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏±‡∏î‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢/‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô",en:"ASSET WRITE-OFF / SCRAP AUTHORIZATION FORM"};default:return{code:"FM-GEN-00",rev:"00",th:"‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô",en:"RETURN MANAGEMENT DOCUMENT"}}},ft={New:"‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ (Good)",BoxDamage:"‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ö‡∏∏‡∏ö (Box Dmg)",WetBox:"‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å (Wet Box)",LabelDefect:"‡∏â‡∏•‡∏≤‡∏Å‡∏•‡∏≠‡∏Å (Label)",Expired:"‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (Expired)",Damaged:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î/‡∏ã‡∏≤‡∏Å (Damaged)",Defective:"‡πÄ‡∏™‡∏µ‡∏¢ (Defective)"},it={RTV:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return)",Restock:"‡∏Ç‡∏≤‡∏¢ (Sell)",Recycle:"‡∏ó‡∏¥‡πâ‡∏á (Scrap)",InternalUse:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",Claim:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (Claim)"},jt={‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏ö‡∏ô‡∏£‡∏ñ:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏Ñ‡∏ô‡∏£‡∏ñ",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏±‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏°‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÑ‡∏°‡πà‡∏î‡∏µ:"‡πÄ‡∏Ñ‡∏•‡∏°‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏Ñ‡∏ô‡∏£‡∏ñ",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏±‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö‡∏£‡∏∏‡πà‡∏ô‡∏à‡∏≤‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö‡∏£‡∏∏‡πà‡∏ô‡∏à‡∏≤‡∏Å‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏Ñ‡∏ô‡∏£‡∏ñ",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏Å‡∏±‡∏î:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏°‡∏π‡∏•‡∏ô‡∏Å:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡∏•‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤"},at=async(s,r,d)=>{if(!s||!r)return!1;try{const g=`https://api.telegram.org/bot${s}/sendMessage`;return(await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:r,text:d,parse_mode:"HTML"})})).ok}catch(g){return console.error("Error sending Telegram message:",g),!1}},Tt=(s,r,d,g)=>{const t=r.documentType==="NCR"||!!r.ncrNumber,x=t?"NCR":"COL",u=`${r.customerName||"-"} / ${r.destinationCustomer||"-"}`,a=[r.problemDamaged&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î",r.problemDamagedInBox&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á",r.problemLost&&"‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢",r.problemMixed&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö",r.problemWrongInv&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV",r.problemLate&&"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤",r.problemDuplicate&&"‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥",r.problemWrong&&"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î",r.problemIncomplete&&"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö",r.problemOver&&"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô",r.problemWrongInfo&&"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î",r.problemShortExpiry&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô",r.problemTransportDamage&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ",r.problemAccident&&"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏",r.problemPOExpired&&"PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",r.problemNoBarcode&&"‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô",r.problemNotOrdered&&"‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",r.problemOther&&`‡∏≠‡∏∑‡πà‡∏ô‡πÜ (${r.problemOtherText})`].filter(Boolean).join(", ")||"-",C=r.hasCost?`‡πÉ‡∏ä‡πà (${r.costAmount} ‡∏ö‡∏≤‡∏ó, ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö: ${r.costResponsible})`:"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",o=r.isFieldSettled?`‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô (‡∏ä‡∏î‡πÄ‡∏ä‡∏¢: ${r.fieldSettlementAmount} ‡∏ö. ‡πÇ‡∏î‡∏¢: ${r.fieldSettlementName} [${r.fieldSettlementPosition}])`:"‡πÑ‡∏°‡πà‡∏°‡∏µ";let v="";if(g)if(g.plateNumber||g.transportPlate){const n=g.transportPlate||g.plateNumber||"-",f=g.transportDriver||g.driverName||"-";v=`üìç ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á: ${r.branch}
üèÅ ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: ${g.destination||"-"}
üöõ ‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô: ${n}
üë§ ‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö: ${f}
`}else g.received?v=`üìç ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á: ${r.branch}
üìù ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢
`:g.closed&&(v=`üìç ‡∏™‡∏≤‡∏Ç‡∏≤: ${r.branch}
üì¶ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ${r.productName}
üî¢ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${r.quantity} ${r.unit}
üìÑ ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà: ${r.documentNo||r.refNo||"-"}
`);return`
<b>${s}</b>
${v}----------------------------------
<b>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° ${t?"NCR":"COL"} :</b> [${x}]
<b>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà :</b> ${r.date||r.dateRequested||"-"}
<b>‡∏™‡∏≤‡∏Ç‡∏≤ :</b> ${r.branch||"-"}
<b>‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Founder) :</b> ${r.founder||"-"}
<b>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ / ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á :</b> ${u}
<b>Neo Ref No. :</b> ${r.neoRefNo||"-"}
<b>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / Ref No. :</b> ${r.refNo||"-"}
<b>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (‡πÄ‡∏•‡∏Ç R) :</b> ${r.documentNo||"-"}
<b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ :</b> ${r.problemDetail||r.reason||"-"}
<b>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ :</b> ${r.quantity} ${r.unit} ${d&&d>1?`(‡∏£‡∏ß‡∏° ${d} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`:""}
<b>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å :</b> ${r.problemSource||"-"}
<b>‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ :</b> ${a}
<b>‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ :</b> ${C}
<b>Field Settlement :</b> ${o}
----------------------------------
üìÖ <i>Updated: ${new Date().toLocaleString("th-TH")}</i>
  `.trim()},Vs=(s,r)=>{const{items:d,addReturnRecord:g,updateReturnRecord:t,addNCRReport:x,getNextNCRNumber:u,getNextReturnNumber:a,getNextCollectionNumber:C,systemConfig:o,ncrReports:v}=Ie(),[n,f]=k.useState(1),[c,N]=k.useState(!1),[b,P]=k.useState(null),[p,i]=k.useState(null),[m,R]=k.useState(!1),[h,O]=k.useState(0),[w,j]=k.useState("Damaged"),[D,S]=k.useState(!1),[I,T]=k.useState(1),[$,B]=k.useState(""),[V,G]=k.useState(null),[de,re]=k.useState(null),[pe,Se]=k.useState({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""}),[E,Q]=k.useState(!1),[U,ee]=k.useState(!1),[le,ce]=k.useState(null),[be,ke]=k.useState(!0),[ye,De]=k.useState(7),[J,l]=k.useState(!1),[L,H]=k.useState(0),[te,X]=k.useState(!1),[he,F]=k.useState({companyNameTH:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î",companyNameEN:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD.",address:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000",contact:"Tel: 056-275-841 Email: info_nw@neosiamlogistics.com",titleTH:"",titleEN:"",remarks:"1. ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 7 ‡∏ß‡∏±‡∏ô",signatory1:"‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥ (Prepared By)",signatory2:"‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Checked By)",signatory3:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Approved By)"}),[y,_]=k.useState(!1),[M,ne]=k.useState(null),[Z,se]=k.useState([]),[ue,ve]=k.useState(new Set),[Be,Qe]=k.useState(!1),[Me,we]=k.useState(null),[pt,bt]=k.useState(!1),[Je,Bt]=k.useState(null),[Mt,_t]=k.useState(!1),vt={branch:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å",date:new Date().toISOString().split("T")[0],quantity:1,unit:"‡∏ä‡∏¥‡πâ‡∏ô",pricePerUnit:0,priceBill:0,priceSell:0,status:"Draft",disposition:"Pending",condition:"Unknown",productCode:"",productName:"",expiryDate:"",notes:"",ncrNumber:"",refNo:"",neoRefNo:"",customerName:"",destinationCustomer:"",problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAcceptance:!1,actionSpecialAcceptanceQty:0,actionSpecialAcceptanceReason:"",actionScrap:!1,actionScrapQty:0,actionReplace:!1,actionReplaceQty:0,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",images:[],hasCost:!1,costAmount:0,costResponsible:"",problemSource:"",problemAnalysis:void 0,problemAnalysisSub:"",problemAnalysisCause:"",problemAnalysisDetail:"",preliminaryDecision:void 0,preliminaryRoute:"",isFieldSettled:!1,fieldSettlementAmount:0,fieldSettlementEvidence:"",fieldSettlementName:"",fieldSettlementPosition:""},[rt,nt]=k.useState(vt),[He,qt]=k.useState([]),[ea,js]=k.useState(""),[ta,vs]=k.useState(""),ws=d.filter(q=>q.status==="Requested"&&q.documentType!=="NCR"),sa=d.filter(q=>q.documentType==="NCR"||!!q.ncrNumber?q.status==="Requested"||q.status==="COL_JobAccepted":q.status==="COL_Consolidated"),aa=d.filter(q=>q.status==="JobAccepted"),la=d.filter(q=>q.status==="BranchReceived"),ys=d.filter(q=>q.status==="ReadyForLogistics"),ss=d.filter(q=>q.status==="InTransitToHub"||q.status==="NCR_InTransit"||q.status==="COL_InTransit"),Ft=d.filter(q=>{if(q.ncrNumber){const ae=v.find(oe=>oe.ncrNo===q.ncrNumber);if(ae&&ae.status==="Canceled")return!1}const z=q.documentType==="NCR"||!!q.ncrNumber||q.status.startsWith("NCR_");return z?z?q.status==="NCR_QCPassed"||q.status==="NCR_QCCompleted"||q.status==="QCPassed"||q.status==="QCCompleted"||q.status==="Settled_OnField":!1:q.status==="COL_HubReceived"||q.status==="ReceivedAtHub"||q.status==="HubReceived"||q.status==="QCCompleted"}),Cs=d.filter(q=>q.status==="DocsCompleted"||q.status==="ReturnToSupplier"||q.status==="DirectReturn"),ra=d.filter(q=>q.status==="Completed"),na=ys,oa=ss,ia=Ft,ca=Cs,da=ws,xa=ss,ma=[],pa=Ft,ba=Y.useMemo(()=>{const q=d.map(K=>K.customerName).filter(Boolean),z=He.map(K=>K.customerName).filter(Boolean);return Array.from(new Set([...q,...z])).sort()},[d,He]),ua=Y.useMemo(()=>{const q=d.map(K=>K.destinationCustomer).filter(Boolean),z=He.map(K=>K.destinationCustomer).filter(Boolean);return Array.from(new Set([...q,...z])).sort()},[d,He]),ha=Y.useMemo(()=>{const q=d.map(K=>K.founder).filter(Boolean),z=He.map(K=>K.founder).filter(Boolean);return Array.from(new Set([...q,...z])).sort()},[d,He]),ga=Y.useMemo(()=>{const q=d.map(K=>K.productCode).filter(Boolean),z=He.map(K=>K.productCode).filter(Boolean);return Array.from(new Set([...q,...z])).sort()},[d,He]),fa=Y.useMemo(()=>{const q=d.map(K=>K.productName).filter(Boolean),z=He.map(K=>K.productName).filter(Boolean);return Array.from(new Set([...q,...z])).sort()},[d,He]);k.useEffect(()=>{s&&(f(1),nt(q=>({...q,...s,date:s.date||q.date,branch:s.branch||q.branch})),r&&r())},[s,r]);const Na=(q,z)=>{Se(K=>({...K,[q]:z}))};return k.useEffect(()=>{if(rt.hasCost&&rt.problemSource){const q=jt[rt.problemSource];q&&nt(z=>({...z,costResponsible:q}))}},[rt.problemSource,rt.hasCost]),{state:{activeStep:n,isCustomBranch:c,qcSelectedItem:b,customInputType:p,showSplitMode:m,splitQty:h,splitCondition:w,isBreakdownUnit:D,conversionRate:I,newUnitName:$,splitDisposition:V,selectedDisposition:de,dispositionDetails:pe,isCustomRoute:E,showDocModal:U,docData:le,includeVat:be,vatRate:ye,includeDiscount:J,discountRate:L,isDocEditable:te,docConfig:he,showSelectionModal:y,selectionStatus:M,selectionItems:Z,selectedItemIds:ue,formData:rt,requestItems:He,customProblemType:ea,customRootCause:ta,docSelectedItem:Me,showStep4SplitModal:pt,isSubmittingDoc:Mt},derived:{uniqueCustomers:ba,uniqueDestinations:ua,uniqueFounders:ha,uniqueProductCodes:ga,uniqueProductNames:fa,step2Items:ws,step3Items:aa,step4Items:la,step5Items:ys,step6Items:ss,step7Items:Ft,step8Items:Cs,ncrStep2Items:sa,completedItems:ra,logisticItems:na,hubReceiveItems:oa,hubDocItems:ia,closureItems:ca,requestedItems:da,receivedItems:xa,gradedItems:ma,docItems:pa,processedItems:Ft},actions:{setActiveStep:f,setIsCustomBranch:N,setFormData:nt,setRequestItems:qt,handleImageUpload:q=>{q.target.files&&Array.from(q.target.files).forEach(K=>{const ae=new FileReader;ae.onloadend=()=>{nt(oe=>({...oe,images:[...oe.images||[],ae.result]}))},ae.readAsDataURL(K)})},handleRemoveImage:q=>{nt(z=>({...z,images:(z.images||[]).filter((K,ae)=>ae!==q)}))},handleAddItem:(q,z)=>{q&&q.preventDefault();const ae={...z||rt};qt(oe=>[...oe,ae]),nt(oe=>({...vt,founder:oe.founder,branch:oe.branch,date:oe.date,customerName:oe.customerName,destinationCustomer:oe.destinationCustomer,neoRefNo:oe.neoRefNo,refNo:oe.refNo,documentNo:oe.documentNo,invoiceNo:oe.invoiceNo,tmNo:oe.tmNo,controlDate:oe.controlDate,documentType:oe.documentType,problemAnalysis:oe.problemAnalysis})),js(""),vs("")},handleRemoveItem:q=>{qt(z=>z.filter((K,ae)=>ae!==q))},handleRequestSubmit:async q=>{var K;const z=q&&q.length>0?q:[...He];if(z.length===0){A.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",confirmButtonColor:"#3085d6"});return}if(!Be){Qe(!0);try{let ae=0,oe="",Te="";const Ae=z.some(ie=>ie.documentType==="NCR"&&!ie.ncrNumber),We=z.some(ie=>ie.documentType==="LOGISTICS"&&!ie.collectionOrderId);Ae&&(oe=await u()),We&&(Te=await C());for(const ie of z){const je=ie.ncrNumber||(ie.documentType==="NCR"?oe:""),ze=ie.collectionOrderId||(ie.documentType==="LOGISTICS"?Te:""),Le=await a(),W={...ie,id:Le,refNo:ie.refNo||"-",collectionOrderId:ze,amount:(ie.quantity||0)*(ie.priceBill||0),reason:ie.problemDetail||ie.notes||"‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",status:ie.isFieldSettled?"Settled_OnField":ie.isRecordOnly?"Completed":"Requested",dateRequested:ie.date||new Date().toISOString().split("T")[0],dateCompleted:ie.isRecordOnly?new Date().toISOString().split("T")[0]:void 0,disposition:ie.isFieldSettled?"RTV":ie.isRecordOnly?"InternalUse":"Pending",condition:ie.isRecordOnly?"New":"Unknown",productName:ie.productName||"Unknown Product",productCode:ie.productCode||"N/A",customerName:ie.customerName||"Unknown Customer",category:"General",ncrNumber:je},Xe=JSON.parse(JSON.stringify(W));if(await g(Xe)){if(W.documentType==="NCR"){const wt={id:je+"-"+W.id,ncrNo:je,date:W.dateRequested,toDept:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",founder:W.founder||"Operations Hub",poNo:"",copyTo:"",problemDamaged:W.problemDamaged,problemDamagedInBox:W.problemDamagedInBox,problemLost:W.problemLost,problemMixed:W.problemMixed,problemWrongInv:W.problemWrongInv,problemLate:W.problemLate,problemDuplicate:W.problemDuplicate,problemWrong:W.problemWrong,problemIncomplete:W.problemIncomplete,problemOver:W.problemOver,problemWrongInfo:W.problemWrongInfo,problemShortExpiry:W.problemShortExpiry,problemTransportDamage:W.problemTransportDamage,problemAccident:W.problemAccident,problemPOExpired:W.problemPOExpired,problemNoBarcode:W.problemNoBarcode,problemNotOrdered:W.problemNotOrdered,problemOther:W.problemOther,problemOtherText:W.problemOtherText,problemDetail:W.problemDetail||W.reason||"",problemAnalysis:W.problemAnalysis,problemAnalysisSub:W.problemAnalysisSub,problemAnalysisCause:W.problemAnalysisCause,problemAnalysisDetail:W.problemAnalysisDetail,item:{id:W.id,branch:W.branch,refNo:W.refNo,neoRefNo:W.neoRefNo,productCode:W.productCode,productName:W.productName,customerName:W.customerName,destinationCustomer:W.destinationCustomer,quantity:W.quantity,unit:W.unit||"PCS",priceBill:W.priceBill,pricePerUnit:W.pricePerUnit||0,expiryDate:W.expiryDate,hasCost:W.hasCost,costAmount:W.costAmount,costResponsible:W.costResponsible,problemSource:W.problemSource||W.problemAnalysis||"-",isFieldSettled:W.isFieldSettled,fieldSettlementAmount:W.fieldSettlementAmount,fieldSettlementEvidence:W.fieldSettlementEvidence,fieldSettlementName:W.fieldSettlementName,fieldSettlementPosition:W.fieldSettlementPosition},actionReject:W.actionReject,actionRejectQty:W.actionRejectQty,actionRejectSort:W.actionRejectSort,actionRejectSortQty:W.actionRejectSortQty,actionRework:W.actionRework,actionReworkQty:W.actionReworkQty,actionReworkMethod:W.actionReworkMethod,actionSpecialAcceptance:W.actionSpecialAcceptance,actionSpecialAcceptanceQty:W.actionSpecialAcceptanceQty,actionSpecialAcceptanceReason:W.actionSpecialAcceptanceReason,actionScrap:W.actionScrap,actionScrapQty:W.actionScrapQty,actionReplace:W.actionReplace,actionReplaceQty:W.actionReplaceQty,causePackaging:W.causePackaging,causeTransport:W.causeTransport,causeOperation:W.causeOperation,causeEnv:W.causeEnv,causeDetail:W.causeDetail,preventionDetail:W.preventionDetail,preventionDueDate:"",responsiblePerson:"",responsiblePosition:"",qaAccept:W.isRecordOnly||!1,qaReject:!1,qaReason:W.isRecordOnly?"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô":"",dueDate:"",approver:"",approverPosition:"",approverDate:"",status:W.isRecordOnly?"Closed":"Open"},yt=JSON.parse(JSON.stringify(wt));await x(yt)}ae++}}if(ae>0&&(await A.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ",timer:2e3,showConfirmButton:!1}),nt(vt),qt([]),js(""),vs(""),N(!1),N(!1),f(2),(K=o.telegram)!=null&&K.enabled&&o.telegram.chatId)){const ie=z.some(Ut=>Ut.documentType==="NCR"||!!Ut.ncrNumber),je=z[0],ze=new Date().toLocaleString("th-TH"),Le=je.branch||"-",W=je.founder||"-",Xe=je.customerName||"-",ut=je.destinationCustomer||"-",wt=je.neoRefNo||"-",yt=je.refNo||"-",Rs=ie?je.ncrNumber||"NCR-NEW":je.collectionOrderId||"COL-NEW",ot=je.problemDetail||je.reason||"-",as=z.reduce((Ut,Ra)=>Ut+(Ra.quantity||0),0),ja=je.problemSource||je.problemAnalysis||"-",ge=je,va=[ge.problemDamaged&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î",ge.problemDamagedInBox&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á",ge.problemLost&&"‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢",ge.problemMixed&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö",ge.problemWrongInv&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV",ge.problemLate&&"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤",ge.problemDuplicate&&"‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥",ge.problemWrong&&"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î",ge.problemIncomplete&&"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö",ge.problemOver&&"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô",ge.problemWrongInfo&&"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î",ge.problemShortExpiry&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô",ge.problemTransportDamage&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ",ge.problemAccident&&"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏",ge.problemPOExpired&&"PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",ge.problemNoBarcode&&"‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô",ge.problemNotOrdered&&"‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",ge.problemOther&&`‡∏≠‡∏∑‡πà‡∏ô‡πÜ (${ge.problemOtherText})`].filter(Boolean).join(", "),wa=ge.hasCost?`‡πÉ‡∏ä‡πà (Amount: ${ge.costAmount} ‡∏ö‡∏≤‡∏ó, Resp: ${ge.costResponsible})`:"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",ya=ge.isFieldSettled?`‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô (‡∏à‡πà‡∏≤‡∏¢: ${ge.fieldSettlementAmount} ‡∏ö‡∏≤‡∏ó, ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö: ${ge.fieldSettlementName} - ${ge.fieldSettlementPosition})`:"‡πÑ‡∏°‡πà‡∏°‡∏µ",Ca=`<b>${ie?"üö® NCR Report (New)":"üì¶ Collection Report (New)"} [${ie?"NCR":"COL"}]</b>
----------------------------------
<b>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà :</b> ${ze}
<b>‡∏™‡∏≤‡∏Ç‡∏≤ :</b> ${Le}
<b>‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Founder) :</b> ${W}
<b>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ / ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á :</b> ${Xe} / ${ut}
<b>Neo Ref No. :</b> ${wt}
<b>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / Ref No. :</b> ${yt}
<b>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (‡πÄ‡∏•‡∏Ç R) :</b> ${Rs}
<b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ :</b> ${ot}
<b>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ :</b> ${as} ${je.unit||"‡∏ä‡∏¥‡πâ‡∏ô"} ${z.length>1?`(‡∏£‡∏ß‡∏° ${z.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`:""}
<b>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å :</b> ${ja}
<b>‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ :</b> ${va||"-"}
${ge.isRecordOnly?`<b>üîπ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (Record Only)</b>
`:""}<b>‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ :</b> ${wa}
<b>Field Settlement :</b> ${ya}
----------------------------------
üîó <i>Status: ${ge.isRecordOnly?"Closed/Completed":"Requested"}</i>`;await at(o.telegram.botToken,o.telegram.chatId,Ca)}}catch(ae){console.error("Submission error:",ae),A.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà",confirmButtonColor:"#d33"})}finally{Qe(!1)}}},handleLogisticsSubmit:async(q,z,K)=>{try{if(console.log(`[Logistics] HandleSubmit Called. IDs: ${q.length}, Route: ${z}`),!q||q.length===0){A.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"});return}const ae=K.destination||(z==="Hub"?"Hub (Nakhon Sawan)":"Unknown"),oe=K.transportCompany==="‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"?K.driverName:"-",Te=K.transportCompany==="‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"?K.plateNumber:"-",Ae=K.transportCompany==="‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"?"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó":K.transportCompany,We=`[Transport] Driver: ${oe}, Plate: ${Te}, Company: ${Ae} | Dest: ${ae}`,ie=z==="Hub"?{status:"NCR_InTransit",notes:We,dispositionRoute:ae,dateInTransit:new Date().toISOString(),transportPlate:Te,transportDriver:oe,transportCompany:Ae,disposition:null}:{status:"DirectReturn",notes:We,dispositionRoute:ae,disposition:"RTV",destinationCustomer:ae,dateInTransit:new Date().toISOString(),transportPlate:Te,transportDriver:oe,transportCompany:Ae},je=d.filter(Xe=>q.includes(String(Xe.id)));if(!je||je.length===0){console.error("Critical Error: Items not found for IDs:",q),A.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:`‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
Selected: ${q.join(", ")}`});return}Bt({ids:q,updatePayload:ie});const ze=z==="Hub"?"‡πÉ‡∏ö‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub (Transfer Note)":"‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Note)",Le=z==="Hub"?"TRANSFER NOTE":"RETURN NOTE";F(Xe=>({...Xe,titleTH:ze,titleEN:Le})),ce({type:"RTV",items:je}),ke(!0),l(!1),H(0),X(!1),console.log("Opening Document Modal for Logistics..."),ee(!0)}catch(ae){console.error("HandleLogisticsSubmit Error:",ae),A.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö",text:String(ae)})}},handleIntakeReceive:async q=>{var oe,Te,Ae,We,ie,je,ze;const z=d.find(Le=>Le.id===q);if(!z)return;const K=new Date().toISOString().split("T")[0];if(((oe=z.refNo)==null?void 0:oe.startsWith("R-"))||((Te=z.refNo)==null?void 0:Te.startsWith("COL-"))||((Ae=z.refNo)==null?void 0:Ae.startsWith("RT-"))||((We=z.neoRefNo)==null?void 0:We.startsWith("R-"))||((ie=z.neoRefNo)==null?void 0:ie.startsWith("COL-"))){if(await t(q,{status:"Graded",dateReceived:K,dateGraded:K,disposition:"RTV",condition:"Good",notes:(z.notes||"")+" [Auto-Pass QC: Collection Item]"}),(je=o.telegram)!=null&&je.enabled&&o.telegram.chatId){const Le=Tt("üìç ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ HUB",z,1,{received:!0});at(o.telegram.botToken,o.telegram.chatId,Le)}await A.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!",text:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Collection ‡∏Ç‡πâ‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô QC ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",timer:2e3,showConfirmButton:!1})}else if(await t(q,{status:"ReceivedAtHub",dateReceived:K}),(ze=o.telegram)!=null&&ze.enabled&&o.telegram.chatId){const Le=Tt("üìç ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ HUB",z,1,{received:!0});at(o.telegram.botToken,o.telegram.chatId,Le)}},selectQCItem:q=>{P(q),i(null),re(null),Se({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""}),Q(!1)},handleConditionSelect:(q,z)=>{b&&(q==="Other"?(i(z||null),P({...b,condition:""})):(i(null),P({...b,condition:q})))},setQcSelectedItem:P,setCustomInputType:i,setSelectedDisposition:re,setIsCustomRoute:Q,handleDispositionDetailChange:Na,handleQCSubmit:async()=>{if(!b||!de)return;if(!b.condition||b.condition==="Unknown"){A.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","","warning");return}const q=new Date().toISOString().split("T")[0];await t(b.id,{condition:b.condition,disposition:de,status:"QCPassed",dateGraded:q,dispositionRoute:pe.route,sellerName:pe.sellerName,contactPhone:pe.contactPhone,internalUseDetail:pe.internalUseDetail,claimCompany:pe.claimCompany,claimCoordinator:pe.claimCoordinator,claimPhone:pe.claimPhone})&&(P(null),re(null),i(null),Q(!1),A.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏• QC ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:"Ready for Docs",timer:1500,showConfirmButton:!1}))},setShowSplitMode:R,setIsBreakdownUnit:S,setConversionRate:T,setNewUnitName:B,setSplitQty:O,setSplitCondition:j,setSplitDisposition:G,handleSplitSubmit:async()=>{const q=(b==null?void 0:b.quantity)||0,z=D?q*I:q;if(!Number.isInteger(h)){A.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°","","warning");return}if(!b||h<=0||h>=z){A.fire("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",`‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0 ‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${z})`,"warning");return}if(!b.condition||b.condition==="Unknown"){A.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å","","warning");return}if(!de){A.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)","","warning");return}const K=b.priceBill||0,ae=b.pricePerUnit||K/(b.quantity||1);let oe=ae;D&&I>1&&(oe=ae/I);const Te=D?$||"Sub-unit":b.unit,Ae=z-h,We=Ae*oe,ie=h*oe,ze=(b.priceSell||0)/(b.quantity||1),Le=D&&I>1?ze/I:ze,W=Ae*Le,Xe=h*Le,ut=new Date().toISOString().split("T")[0],wt=await t(b.id,{quantity:Ae,unit:Te,priceBill:We,pricePerUnit:oe,priceSell:W,condition:b.condition,disposition:de,status:"QCPassed",dateGraded:ut,dispositionRoute:pe.route,sellerName:pe.sellerName,contactPhone:pe.contactPhone,internalUseDetail:pe.internalUseDetail,claimCompany:pe.claimCompany,claimCoordinator:pe.claimCoordinator,claimPhone:pe.claimPhone}),yt=`${b.id}-S${Math.floor(Math.random()*100)}`,ot={...b,id:yt,quantity:h,unit:Te,priceBill:ie,pricePerUnit:oe,priceSell:Xe,condition:w,status:V?"QCPassed":"ReceivedAtHub",refNo:`${b.refNo} (Split)`,dateReceived:ut};V?(ot.disposition=V,ot.dateGraded=ut):(ot.disposition=void 0,ot.dateGraded=void 0);const as=await g(ot);wt&&as?(P(null),re(null),i(null),Q(!1),R(!1),O(0),S(!1),T(1),B(""),G(null),A.fire({icon:"success",title:"‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})):A.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","","error")},toggleSplitMode:()=>{m||(O(0),G(null),j("New"),S(!1),T(1),B("")),R(!m)},handlePrintClick:(q,z)=>{if(!z||z.length===0){A.fire("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡∏µ‡πâ","","info");return}ne(q),se(z),ve(new Set(z.map(K=>K.id))),_(!0)},toggleSelection:q=>{const z=new Set(ue);z.has(q)?z.delete(q):z.add(q),ve(z)},setShowSelectionModal:_,handleGenerateDoc:()=>{if(!M)return;const q=Z.filter(ae=>ue.has(ae.id));if(q.length===0){A.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£","","warning");return}const z=Nt(M);F(ae=>({...ae,titleTH:z.th,titleEN:z.en})),ce({type:M,items:q}),ke(!0);const K=M==="Restock";l(K),H(K?30:0),_(!1),ee(!0),X(!1)},setIncludeVat:ke,setVatRate:De,setIncludeDiscount:l,setDiscountRate:H,setIsDocEditable:X,setDocConfig:F,setShowDocModal:ee,handleConfirmDocGeneration:async()=>{var z;if(!le||Mt)return;_t(!0);const q=new Date().toISOString().split("T")[0];try{if(Je){let ae=0;const oe=d.filter(Te=>Je.ids.includes(Te.id));for(const Te of Je.ids)await t(Te,{...Je.updatePayload})&&ae++;if(ae>0){if((z=o.telegram)!=null&&z.enabled&&o.telegram.chatId&&oe.length>0){const Ae=Je.updatePayload.status==="DirectReturn"?"üöõ ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ï‡∏£‡∏á (Direct Return)":"üöö ‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ HUB (‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå)",We=oe[0],ie=Tt(Ae,We,oe.length,{plateNumber:Je.updatePayload.transportPlate,driverName:Je.updatePayload.transportDriver,destination:Je.updatePayload.dispositionRoute});at(o.telegram.botToken,o.telegram.chatId,ie)}A.fire({icon:"success",title:"‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:`‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! (${ae} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`,timer:2e3,showConfirmButton:!1}),ee(!1),Bt(null)}else A.fire("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ (Update Failed)","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console","error");return}let K=0;for(const ae of le.items){const Te=ae.documentType==="NCR"||!!ae.ncrNumber||ae.status.startsWith("NCR_")?"NCR_Documented":"COL_Documented";await t(ae.id,{status:Te,dateDocumented:q})&&K++}K>0&&(A.fire({icon:"success",title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:`${K} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ -> ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô "‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"`,timer:2e3,showConfirmButton:!1}),ee(!1))}catch(K){console.error("Document Generation Error:",K),A.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà","error")}finally{_t(!1)}},handleUpdateDocItem:async(q,z)=>{await t(q,z),ce(K=>K?{...K,items:K.items.map(ae=>ae.id===q?{...ae,...z}:ae)}:null)},setDocSelectedItem:we,setShowStep4SplitModal:bt,handleDocItemClick:q=>{we(q),bt(!0)},handleStep4SplitSubmit:async(q,z)=>{Me&&A.fire("Split functionality pending","This feature is pending implementation for Step 4 direct usage.","info")}}}},Nl=({isOpen:s,onClose:r,onConfirm:d,itemCount:g})=>s?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-scale-in",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ye,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"}),e.jsxs("p",{className:"text-slate-500 mb-6",children:["‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ",e.jsx("span",{className:"font-bold text-slate-800",children:g})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",e.jsx("br",{}),e.jsx("span",{className:"text-xs text-slate-400",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ"})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:r,className:"px-5 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-colors w-full",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:d,className:"px-5 py-2.5 rounded-xl bg-green-600 text-white font-bold hover:bg-green-700 shadow-lg shadow-green-200 transition-all w-full",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"})]})]})})}):null,Ee=["‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","‡∏Ñ‡∏•‡∏≠‡∏á 13","‡∏ã‡∏µ‡πÇ‡∏ô‡πà","‡∏õ‡∏£‡∏∞‡∏î‡∏π‡πà"],qe=["‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","Sino Pacific Trading","NEO CORPORATE"],jl=new Date,me=s=>{const r=new Date(jl);return r.setDate(r.getDate()-s),r.toISOString().split("T")[0]};me(0),me(0),me(1),me(2),me(1),me(1),me(3),me(2),me(1),me(2),me(4),me(3),me(2),me(3),me(6),me(5),me(4),me(3),me(4),me(8),me(7),me(6),me(5),me(4),me(5),me(7),me(6),me(6),me(5),me(5),me(6),me(6),me(6);me(1),me(2),me(1);const vl=({isOpen:s,onClose:r,item:d,onSave:g})=>{const[t,x]=k.useState({}),[u,a]=k.useState("problem"),[C,o]=k.useState(""),[v,n]=k.useState("");k.useEffect(()=>{s&&d&&(x({...d}),o(d.preliminaryRoute||""),d.preliminaryRoute&&!qe.includes(d.preliminaryRoute)&&d.preliminaryRoute!=="Other"?(o("Other"),n(d.preliminaryRoute)):d.preliminaryRoute==="Other"&&n(""))},[s,d]);const f=i=>{x(m=>m[i]?{...m,[i]:!1}:{...m,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,[i]:!0})},c=i=>{x(m=>m[i]?{...m,[i]:!1}:{...m,problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,[i]:!0})},N=i=>{x(m=>m[i]?{...m,[i]:!1}:{...m,actionReject:!1,actionRejectSort:!1,actionRework:!1,actionSpecialAcceptance:!1,actionScrap:!1,actionReplace:!1,[i]:!0})},b=i=>{if(i.target.files&&i.target.files.length>0){const R=Array.from(i.target.files).map(h=>new Promise((O,w)=>{const j=new FileReader;j.onloadend=()=>O(j.result),j.onerror=w,j.readAsDataURL(h)}));Promise.all(R).then(h=>{x(O=>({...O,images:[...O.images||[],...h]}))})}},P=i=>{x(m=>({...m,images:(m.images||[]).filter((R,h)=>h!==i)}))},p=()=>{if(!t.problemAnalysis){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Analysis)"});return}if(!C){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"});return}if(C==="Other"&&!v){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ"});return}g({...t,preliminaryDecision:"Return",preliminaryRoute:C==="Other"?v:C}),r()};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full h-full shadow-2xl flex flex-col animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-100 bg-slate-50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ & ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[d.productCode," - ",d.productName]})]}),e.jsx("button",{onClick:r,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:e.jsx(fe,{className:"w-5 h-5 text-slate-500"})})]}),e.jsxs("div",{className:"flex border-b border-slate-200 bg-white sticky top-0 z-10",children:[e.jsxs("button",{onClick:()=>a("problem"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${u==="problem"?"border-red-500 text-red-600 bg-red-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Ze,{className:"w-4 h-4"})," ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö"]}),e.jsxs("button",{onClick:()=>a("analysis"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${u==="analysis"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Ge,{className:"w-4 h-4"})," ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå & ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à"]}),e.jsxs("button",{onClick:()=>a("action"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${u==="action"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(ds,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsxs("button",{onClick:()=>a("cost"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${u==="cost"?"border-amber-500 text-amber-600 bg-amber-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(ct,{className:"w-4 h-4"})," ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 bg-slate-50/50",children:[u==="problem"&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-red-50 px-4 py-2 border-b border-red-100 font-bold text-red-700 flex items-center gap-2 text-sm",children:[e.jsx(Ze,{className:"w-4 h-4"})," ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border-r border-slate-100 pr-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 min-h-[150px] border-2 border-dashed border-slate-300 rounded-lg hover:bg-slate-50 transition-colors relative",children:[e.jsx("input",{type:"file","aria-label":"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",title:"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",multiple:!0,accept:"image/*",onChange:b,className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx(Pt,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("span",{className:"text-xs font-bold",children:"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"})]}),t.images&&t.images.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-4",children:t.images.map((i,m)=>e.jsxs("div",{className:"relative group aspect-square bg-slate-100 rounded overflow-hidden border border-slate-200",children:[e.jsx("img",{src:i,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>P(m),"aria-label":"‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",title:"‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",type:"button",className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($e,{className:"w-3 h-3"})})]},m))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"mb-2 font-bold underline text-slate-800 text-sm",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-slate-700 text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemDamaged,onChange:()=>c("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemDamagedInBox,onChange:()=>c("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemLost,onChange:()=>c("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemMixed,onChange:()=>c("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemWrongInv,onChange:()=>c("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemLate,onChange:()=>c("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemDuplicate,onChange:()=>c("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemWrong,onChange:()=>c("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemIncomplete,onChange:()=>c("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemOver,onChange:()=>c("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemWrongInfo,onChange:()=>c("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemShortExpiry,onChange:()=>c("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemTransportDamage,onChange:()=>c("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemAccident,onChange:()=>c("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemPOExpired,onChange:()=>c("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemNoBarcode,onChange:()=>c("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemNotOrdered,onChange:()=>c("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",checked:t.problemOther,onChange:()=>c("problemOther")})," ",e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-dotted border-slate-400 bg-transparent outline-none flex-1 text-slate-700",value:t.problemOtherText||"",onChange:i=>x({...t,problemOtherText:i.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold underline text-sm text-slate-800",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",value:t.problemDetail||"",onChange:i=>x({...t,problemDetail:i.target.value}),className:"w-full mt-1 p-2 bg-slate-50 border rounded text-sm min-h-[80px]",placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."})]})]})]})]})}),u==="analysis"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"border rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-200 font-bold text-slate-700 flex items-center gap-2 text-sm",children:[e.jsx(Yt,{className:"w-4 h-4 text-indigo-500"})," ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (Problem Analysis)"]}),e.jsxs("div",{className:"p-4 bg-white space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Customer",onChange:()=>x({...t,problemAnalysis:"Customer"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="DestinationCustomer",onChange:()=>x({...t,problemAnalysis:"DestinationCustomer"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Accounting",onChange:()=>x({...t,problemAnalysis:"Accounting"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Keying",onChange:()=>x({...t,problemAnalysis:"Keying"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Ñ‡∏µ‡∏¢‡πå‡∏ú‡∏¥‡∏î"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Warehouse",onChange:()=>x({...t,problemAnalysis:"Warehouse"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Transport",onChange:()=>x({...t,problemAnalysis:"Transport"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Ç‡∏ô‡∏™‡πà‡∏á"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Other",onChange:()=>x({...t,problemAnalysis:"Other"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]}),t.problemAnalysis==="Warehouse"&&e.jsx("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"}),e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",value:t.problemAnalysisSub||"",onChange:i=>x({...t,problemAnalysisSub:i.target.value}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --"}),Ee.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"whCause",checked:t.problemAnalysisCause==="Checker",onChange:()=>x({...t,problemAnalysisCause:"Checker"})})," ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"whCause",checked:t.problemAnalysisCause==="Unloader",onChange:()=>x({...t,problemAnalysisCause:"Unloader"})})," ‡∏•‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]})]})]})]})}),t.problemAnalysis==="Transport"&&e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-sm",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:t.problemAnalysisSub==="CompanyDriver",onChange:()=>x({...t,problemAnalysisSub:"CompanyDriver"})})," ‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:t.problemAnalysisSub==="JointTransport",onChange:()=>x({...t,problemAnalysisSub:"JointTransport"})})," ‡∏£‡∏ñ‡∏£‡πà‡∏ß‡∏°"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:t.problemAnalysisSub==="Other",onChange:()=>x({...t,problemAnalysisSub:"Other"})})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]})]})]}),t.problemAnalysis==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",value:t.problemAnalysisDetail||"",onChange:i=>x({...t,problemAnalysisDetail:i.target.value}),className:"w-full p-2 border rounded text-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..."})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-indigo-50/30",children:[e.jsxs("div",{className:"bg-indigo-100 px-4 py-2 border-b border-indigo-200 font-bold text-indigo-800 flex items-center gap-2 text-sm",children:[e.jsx(Ne,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return Route)"]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsxs("div",{className:"p-3 bg-white rounded border border-indigo-100 text-sm",children:[e.jsxs("label",{className:"block font-bold mb-2",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[qe.map(i=>e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${C===i?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio",name:"route",value:i,checked:C===i,onChange:m=>{o(m.target.value)},className:"hidden"}),i]},i)),e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${C==="Other"?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio",name:"route",value:"Other",checked:C==="Other",onChange:i=>{o(i.target.value)},className:"hidden"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]})]}),C==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",value:v,onChange:i=>n(i.target.value),className:"w-full mt-2 p-2 border rounded text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á..."})]})]})]})]}),u==="action"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-blue-50 px-4 py-2 border-b border-blue-100 font-bold text-blue-700 flex items-center gap-2 text-sm",children:[e.jsx(ds,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsxs("div",{className:"p-4 bg-white space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-b border-slate-100 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",checked:t.actionReject,onChange:()=>N("actionReject"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",value:t.actionRejectQty,onChange:i=>x({...t,actionRejectQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",title:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",checked:t.actionRejectSort,onChange:()=>N("actionRejectSort"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-40",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",value:t.actionRejectSortQty,onChange:i=>x({...t,actionRejectSortQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",checked:t.actionRework,onChange:()=>N("actionRework"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",value:t.actionReworkQty,onChange:i=>x({...t,actionReworkQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:"}),e.jsx("input",{type:"text","aria-label":"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",value:t.actionReworkMethod,onChange:i=>x({...t,actionReworkMethod:i.target.value}),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",checked:t.actionSpecialAcceptance,onChange:()=>N("actionSpecialAcceptance"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",value:t.actionSpecialAcceptanceQty,onChange:i=>x({...t,actionSpecialAcceptanceQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö:"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",value:t.actionSpecialAcceptanceReason,onChange:i=>x({...t,actionSpecialAcceptanceReason:i.target.value}),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",title:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",checked:t.actionScrap,onChange:()=>N("actionScrap"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",value:t.actionScrapQty,onChange:i=>x({...t,actionScrapQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",title:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",checked:t.actionReplace,onChange:()=>N("actionReplace"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",value:t.actionReplaceQty,onChange:i=>x({...t,actionReplaceQty:Number(i.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]})]})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm mt-6",children:[e.jsxs("div",{className:"bg-purple-50 px-4 py-2 border-b border-purple-100 font-bold text-purple-700 flex items-center gap-2 text-sm",children:[e.jsx(Ge,{className:"w-4 h-4"})," ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 bg-white text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold underline text-slate-800",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å:"}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causePackaging,onChange:()=>f("causePackaging")})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causeTransport,onChange:()=>f("causeTransport")})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causeOperation,onChange:()=>f("causeOperation")})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causeEnv,onChange:()=>f("causeEnv")})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("textarea",{"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",value:t.causeDetail||"",onChange:i=>x({...t,causeDetail:i.target.value}),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:"}),e.jsx("textarea",{"aria-label":"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô",title:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô",value:t.preventionDetail||"",onChange:i=>x({...t,preventionDetail:i.target.value}),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô..."})]})]})]})]})]}),u==="cost"&&e.jsx("div",{className:"animate-fade-in",children:e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-amber-50 px-4 py-2 border-b border-amber-100 font-bold text-amber-700 flex items-center gap-2",children:[e.jsx(ct,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Cost Tracking)"]}),e.jsxs("div",{className:"p-4 bg-white",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.hasCost||!1,onChange:i=>x({...t,hasCost:i.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-500 border-slate-300"}),e.jsx("span",{className:"font-bold text-amber-600",children:"‚ö† ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Has Cost)"})]}),e.jsxs("div",{className:`mb-4 p-4 rounded-lg border flex flex-col gap-3 transition-colors ${t.isFieldSettled?"bg-amber-50 border-amber-200 shadow-sm":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:t.isFieldSettled||!1,onChange:i=>{const m=i.target.checked;x({...t,isFieldSettled:m,preliminaryRoute:m?"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô":t.preliminaryRoute}),m&&o("‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô")},className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-500"}),e.jsx("span",{className:`text-sm font-bold transition-colors ${t.isFieldSettled?"text-amber-800":"text-slate-600 group-hover:text-amber-700"}`,children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Field Settlement)"})]}),t.isFieldSettled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in pl-8 border-l-2 border-amber-200 ml-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (Amount)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white",value:t.fieldSettlementAmount||"",onChange:i=>x({...t,fieldSettlementAmount:parseFloat(i.target.value)||0}),placeholder:"0.00"}),e.jsx("span",{className:"text-sm font-bold text-amber-800",children:"‡∏ö‡∏≤‡∏ó"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (Evidence Ref)"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",title:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white",value:t.fieldSettlementEvidence||"",onChange:i=>x({...t,fieldSettlementEvidence:i.target.value}),placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white",value:t.fieldSettlementName||"",onChange:i=>x({...t,fieldSettlementName:i.target.value}),placeholder:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1",children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text","aria-label":"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white",value:t.fieldSettlementPosition||"",onChange:i=>x({...t,fieldSettlementPosition:i.target.value}),placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢"})]})]})]}),t.hasCost&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in bg-amber-50 p-4 rounded-lg border border-amber-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (Problem Source)"}),e.jsxs("select",{"aria-label":"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",title:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",value:t.problemSource||"",onChange:i=>x({...t,problemSource:i.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"-- ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ --"}),Object.keys(jt).map(i=>e.jsx("option",{value:i,children:i},i)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",step:"0.01",value:t.costAmount||"",onChange:i=>x({...t,costAmount:Number(i.target.value)}),onBlur:i=>x({...t,costAmount:parseFloat(parseFloat(i.target.value).toFixed(2))}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsx("input",{type:"text","aria-label":"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",value:t.costResponsible||"",onChange:i=>x({...t,costResponsible:i.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg bg-white text-slate-800 font-bold",placeholder:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á"})]})]})]})]})})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-end gap-3 bg-slate-50",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{onClick:p,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 flex items-center gap-2 shadow-sm",children:[e.jsx(Ye,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå"]})]})]})}):null},wl=({isOpen:s,onClose:r,onConfirm:d})=>{const[g,t]=k.useState(""),[x,u]=k.useState(""),[a,C]=k.useState(""),[o,v]=k.useState(!1),[n,f]=k.useState(0),[c,N]=k.useState(""),[b,P]=k.useState(""),[p,i]=k.useState("");if(!s)return null;const m=()=>{if(!o&&!g){C("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô");return}if(!o&&g==="Other"&&!x){C("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ");return}d("Return",g==="Other"?x:g,{isFieldSettled:o,amount:n,evidence:c,name:b,position:p}),t(""),u(""),C(""),v(!1),f(0),N(""),P(""),i("")};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white shadow-xl w-full max-w-2xl rounded-2xl overflow-hidden animate-scale-in flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-blue-50 flex-shrink-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-6 h-6 text-indigo-600"})," ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return Route)"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-1",children:[a&&e.jsxs("div",{className:"bg-red-50 text-red-600 px-3 py-2 rounded-lg text-sm font-bold border border-red-100 mb-2",children:["‚ö† ",a]}),e.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${o?"bg-amber-50 border-amber-500 shadow-md":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:R=>v(R.target.checked),className:"w-5 h-5 accent-amber-600"}),e.jsx("span",{className:`text-lg font-bold ${o?"text-amber-800":"text-slate-600"}`,children:"üí∞ ‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô / ‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Field Settlement)"})]}),e.jsx("p",{className:"text-xs text-slate-500 ml-8 mt-1",children:"‡∏ï‡∏¥‡πä‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏≤‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô Hub"}),o&&e.jsxs("div",{className:"mt-4 ml-8 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (‡∏ö.)"}),e.jsx("input",{type:"number",value:n||"",onChange:R=>f(Number(R.target.value)),className:"w-full p-3 border border-amber-300 rounded-lg text-sm font-bold focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (Ref.)"}),e.jsx("input",{type:"text",value:c,onChange:R=>N(R.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô / ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",value:b,onChange:R=>P(R.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",value:p,onChange:R=>i(R.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢"})]})]})]}),!o&&e.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Select Route) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[qe.map(R=>e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200 hover:border-indigo-300 cursor-pointer transition-all hover:shadow-sm",children:[e.jsx("input",{type:"radio",name:"route",value:R,checked:g===R,onChange:h=>{t(h.target.value),C("")},className:"w-4 h-4 text-indigo-600"}),e.jsx("span",{className:"font-medium",children:R})]},R)),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200 hover:border-indigo-300 cursor-pointer transition-all hover:shadow-sm",children:[e.jsx("input",{type:"radio",name:"route",value:"Other",checked:g==="Other",onChange:R=>{t(R.target.value),C("")},className:"w-4 h-4 text-indigo-600"}),e.jsx("span",{className:"font-medium",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]}),g==="Other"&&e.jsx("input",{type:"text",value:x,onChange:R=>u(R.target.value),className:"w-full p-3 mt-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",autoFocus:!0})]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-between items-center gap-3 flex-shrink-0",children:[e.jsx("button",{onClick:r,className:"px-6 py-2.5 rounded-xl border border-slate-300 text-slate-600 font-bold hover:bg-slate-100 transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"}),e.jsx("button",{onClick:m,className:`px-8 py-2.5 rounded-xl text-white font-bold shadow-lg transition-all flex items-center gap-2 ${o?"bg-amber-600 hover:bg-amber-700 shadow-amber-200":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200"}`,children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)"})]})]})})},yl=({formData:s,updateField:r,isCustomBranch:d,setIsCustomBranch:g})=>e.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô (To Dept)"}),e.jsx("input",{type:"text","aria-label":"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô",title:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô",value:s.toDept||"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",onChange:t=>r("toDept",t.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô",required:!0,value:s.date,onChange:t=>r("date",t.target.value),className:"w-full p-2.5 pl-10 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm"}),e.jsx(lt,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤ (Copy To)"}),e.jsx("input",{type:"text","aria-label":"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ñ‡∏∂‡∏á",title:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ñ‡∏∂‡∏á",value:s.copyTo||"",onChange:t=>r("copyTo",t.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏≥‡πÄ‡∏ô‡∏≤..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),d?e.jsxs("div",{className:"flex gap-2 animate-fade-in relative",children:[e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏≠‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏≠‡∏á",required:!0,value:s.branch,onChange:t=>r("branch",t.target.value),className:"w-full p-2.5 pl-10 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤...",autoFocus:!0}),e.jsx(Ve,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-xs text-blue-600 hover:underline absolute right-3 top-3 bg-white px-2",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",required:!0,value:s.branch,onChange:t=>{t.target.value==="Other"?g(!0):r("branch",t.target.value)},className:"w-full p-2.5 pl-10 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm appearance-none",children:[e.jsx("option",{value:"",disabled:!0,children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),Ee.map(t=>e.jsx("option",{value:t,children:t},t)),e.jsx("option",{value:"Other",children:"+ ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏≠‡∏á..."})]}),e.jsx(Ve,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï (PO No.)"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠",value:s.poNo||"",onChange:t=>r("poNo",t.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà PO..."})]})]})]}),Dt=({label:s,value:r,onChange:d,options:g,placeholder:t,required:x})=>{const[u,a]=k.useState(!1),C=k.useRef(null);k.useEffect(()=>{function v(n){C.current&&!C.current.contains(n.target)&&a(!1)}return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const o=g.filter(v=>v.toLowerCase().includes((r||"").toLowerCase()));return e.jsxs("div",{className:"relative",ref:C,children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[s," ",x&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:r,onChange:v=>{d(v.target.value),a(!0)},onFocus:()=>a(!0),placeholder:t,required:x}),u&&o.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:o.map((v,n)=>e.jsx("button",{type:"button",className:"w-full text-left px-4 py-2 text-sm hover:bg-blue-50 text-slate-700 block border-b border-slate-50 last:border-0",onClick:()=>{d(v),a(!1)},children:v},n))})]})},Cl=({formData:s,updateField:r,uniqueCustomers:d,uniqueDestinations:g,uniqueFounders:t})=>e.jsxs("div",{className:"border border-slate-200 rounded-xl p-6 bg-white shadow-sm relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500 rounded-tl-xl rounded-bl-xl"}),e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2",children:[e.jsx(Lt,{className:"w-5 h-5 text-blue-500"})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (Header Info)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Founder)"}),e.jsx(Dt,{label:"",value:s.founder||"",onChange:x=>r("founder",x),options:t,placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer Name)"}),e.jsx(Dt,{label:"",value:s.customerName||"",onChange:x=>r("customerName",x),options:d,placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (Destination / Site) "}),e.jsx(Dt,{label:"",value:s.destinationCustomer||"",onChange:x=>r("destinationCustomer",x),options:g,placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á..."})]})]})]}),Rl=({formData:s,updateField:r,uniqueProductCodes:d,uniqueProductNames:g})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref No.) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á",required:!0,value:s.refNo||"",onChange:t=>r("refNo",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-mono",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Neo Ref No. (Optional)"}),e.jsx("input",{type:"text","aria-label":"Neo Ref No.",title:"Neo Ref No.",value:s.neoRefNo||"",onChange:t=>r("neoRefNo",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-mono",placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà Neo..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Code)"}),e.jsx(Dt,{label:"",value:s.productCode||"",onChange:t=>r("productCode",t),options:d})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Name)"}),e.jsx(Dt,{label:"",value:s.productName||"",onChange:t=>r("productName",t),options:g})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",required:!0,min:"1",value:s.quantity||"",onChange:t=>{const x=parseFloat(t.target.value)||0;r("quantity",x);const u=s.pricePerUnit||0;r("priceBill",x*u)},className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-bold text-blue-600 text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢",value:s.unit||"‡∏ä‡∏¥‡πâ‡∏ô",onChange:t=>r("unit",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-blue-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Price/Unit)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number","aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",step:"0.01",value:s.pricePerUnit||"",onChange:t=>{const x=parseFloat(t.target.value)||0;r("pricePerUnit",x);const u=s.quantity||0;r("priceBill",u*x)},className:"w-full p-2.5 pl-9 bg-white border border-blue-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-blue-700",placeholder:"0.00"}),e.jsx(ct,{className:"w-4 h-4 text-blue-500 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("input",{type:"date","aria-label":"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",title:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",value:s.expiryDate||"",onChange:t=>r("expiryDate",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏•‡∏£‡∏ß‡∏° (Total Price Bill)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number","aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏•‡∏£‡∏ß‡∏°",title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏•‡∏£‡∏ß‡∏°",step:"0.01",value:s.priceBill||0,readOnly:!0,className:"w-full p-2.5 pl-9 bg-slate-100 border border-slate-300 rounded text-sm outline-none font-bold text-slate-700",placeholder:"Auto-calculated"}),e.jsx(ct,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ (Price Sell)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number","aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢",title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢",step:"0.01",value:s.priceSell||"",onChange:t=>r("priceSell",parseFloat(t.target.value)),onBlur:t=>r("priceSell",parseFloat(parseFloat(t.target.value).toFixed(2))),className:"w-full p-2.5 pl-9 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all",placeholder:"0.00"}),e.jsx(ct,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]})]})]}),Sl=["‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå","‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏•‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏≠‡∏∑‡πà‡∏ô‡πÜ"],kl=({formData:s,updateField:r,handleCheckboxToggle:d,handleImageUpload:g,handleRemoveImage:t})=>e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4 text-red-500"})," ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 bg-white grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border-r border-slate-200 pr-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 min-h-[200px] border-2 border-dashed border-slate-300 rounded-lg hover:bg-slate-50 transition-colors relative",children:[e.jsx("input",{type:"file","aria-label":"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",title:"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",multiple:!0,accept:"image/*",onChange:g,className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx(Pt,{className:"w-12 h-12 mb-2 opacity-50"}),e.jsx("span",{className:"text-sm font-bold",children:"‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"}),e.jsx("span",{className:"text-xs text-slate-400 mt-1",children:"‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"})]}),s.images&&s.images.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-4",children:s.images.map((x,u)=>e.jsxs("div",{className:"relative group aspect-square bg-slate-100 rounded overflow-hidden border border-slate-200",children:[e.jsx("img",{src:x,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>t(u),"aria-label":"‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",title:"‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",type:"button",className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx($e,{className:"w-3 h-3"})})]},u))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"mb-4 bg-slate-50 p-3 rounded border border-slate-200",children:[e.jsxs("div",{className:"mb-3 font-bold text-slate-800 text-sm border-b border-slate-200 pb-2",children:["‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (Problem Source) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-3 gap-x-2 text-sm text-slate-700",children:[[{value:"Customer",label:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Source Customer)"},{value:"DestinationCustomer",label:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination Customer)"},{value:"Accounting",label:"‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Accounting)"},{value:"Keying",label:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î (Keying)"},{value:"Sales",label:"‡∏ù‡πà‡∏≤‡∏¢‡∏Ç‡∏≤‡∏¢ (Sales)"},{value:"Production",label:"‡∏ù‡πà‡∏≤‡∏¢‡∏ú‡∏•‡∏¥‡∏ï/‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô (Production)"},{value:"Procurement",label:"‡∏ù‡πà‡∏≤‡∏¢‡∏à‡∏±‡∏î‡∏ã‡∏∑‡πâ‡∏≠ (Procurement)"}].map(x=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",required:!0,checked:s.problemAnalysis===x.value,onChange:()=>r("problemAnalysis",x.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),x.label]},x.value)),e.jsxs("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors mb-2",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:s.problemAnalysis==="Warehouse",onChange:()=>r("problemAnalysis","Warehouse"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),"‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Warehouse)"]}),s.problemAnalysis==="Warehouse"&&e.jsxs("div",{className:"ml-6 p-3 bg-slate-50 border border-slate-200 rounded grid grid-cols-1 md:grid-cols-2 gap-3 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"}),e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",className:"w-full border rounded p-1.5 text-sm",value:s.problemAnalysisSub||"",onChange:x=>r("problemAnalysisSub",x.target.value),children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),Ee.map(x=>e.jsx("option",{value:x,children:x},x))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ (Cause)"}),e.jsx("div",{className:"flex flex-wrap gap-2 text-sm mt-1",children:Sl.map(x=>e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"whCause",checked:s.problemAnalysisCause===x,onChange:()=>r("problemAnalysisCause",x)}),x]},x))}),s.problemAnalysisCause==="‡∏≠‡∏∑‡πà‡∏ô‡πÜ"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-slate-400 outline-none text-sm w-full mt-1",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏...",value:s.problemAnalysisDetail||"",onChange:x=>r("problemAnalysisDetail",x.target.value)})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors mb-2",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:s.problemAnalysis==="Transport",onChange:()=>r("problemAnalysis","Transport"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transport)"]}),s.problemAnalysis==="Transport"&&e.jsxs("div",{className:"ml-6 p-3 bg-slate-50 border border-slate-200 rounded animate-fade-in",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsxs("div",{className:"flex gap-4 mb-2",children:[e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"transType",checked:s.problemAnalysisSub==="CompanyDriver",onChange:()=>r("problemAnalysisSub","CompanyDriver")})," ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"transType",checked:s.problemAnalysisSub==="JointTransport",onChange:()=>r("problemAnalysisSub","JointTransport")})," ‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏°"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"transType",checked:s.problemAnalysisSub==="Other",onChange:()=>r("problemAnalysisSub","Other")})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]})]}),s.problemAnalysisSub==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-slate-400 outline-none text-sm w-full",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:s.problemAnalysisDetail||"",onChange:x=>r("problemAnalysisDetail",x.target.value)})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:s.problemAnalysis==="Other",onChange:()=>r("problemAnalysis","Other"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]}),s.problemAnalysis==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-dotted border-slate-400 bg-transparent outline-none flex-1 text-slate-700 ml-2",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏...",value:s.problemAnalysisDetail||"",onChange:x=>r("problemAnalysisDetail",x.target.value)})]})})]})]}),e.jsxs("div",{className:"mb-2 font-bold underline text-slate-800 text-sm",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-slate-700 text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemDamaged,onChange:()=>d("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemDamagedInBox,onChange:()=>d("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemLost,onChange:()=>d("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemMixed,onChange:()=>d("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemWrongInv,onChange:()=>d("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemLate,onChange:()=>d("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemDuplicate,onChange:()=>d("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemWrong,onChange:()=>d("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemIncomplete,onChange:()=>d("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemOver,onChange:()=>d("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemWrongInfo,onChange:()=>d("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemShortExpiry,onChange:()=>d("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemTransportDamage,onChange:()=>d("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemAccident,onChange:()=>d("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemPOExpired,onChange:()=>d("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemNoBarcode,onChange:()=>d("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:s.problemNotOrdered,onChange:()=>d("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",checked:s.problemOther,onChange:()=>d("problemOther")}),e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-dotted border-slate-400 bg-transparent outline-none flex-1 text-slate-700",value:s.problemOtherText||"",onChange:x=>r("problemOtherText",x.target.value)})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-amber-50 border border-amber-200 rounded-xl cursor-pointer hover:bg-amber-100 transition-all border-dashed",children:[e.jsx("input",{type:"checkbox",checked:s.isRecordOnly||!1,onChange:()=>d("isRecordOnly"),className:"w-5 h-5 text-amber-600 focus:ring-amber-500 rounded border-amber-300"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-amber-800 text-sm",children:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (Record Only)"}),e.jsx("span",{className:"text-[10px] text-amber-600 leading-tight",children:"‡∏Å‡∏£‡∏ì‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á (‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤)"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold underline text-sm text-slate-800",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",value:s.problemDetail||"",onChange:x=>r("problemDetail",x.target.value),className:"w-full mt-1 p-2 bg-slate-50 border rounded text-sm min-h-[80px]",placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."})]})]})]})]}),Ol=({formData:s,updateField:r,handleCheckboxToggle:d})=>{const g=["actionReject","actionRejectSort","actionRework","actionSpecialAcceptance","actionScrap","actionReplace"],t=x=>{const u=g.filter(a=>a!==x);d(x,u)};return e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden mt-6",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(ds,{className:"w-4 h-4 text-blue-500"})," ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsxs("div",{className:"p-4 bg-white space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-b border-slate-100 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",checked:s.actionReject,onChange:()=>t("actionReject"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",value:s.actionRejectQty,onChange:x=>r("actionRejectQty",Number(x.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",title:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",checked:s.actionRejectSort,onChange:()=>t("actionRejectSort"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-40",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",value:s.actionRejectSortQty,onChange:x=>r("actionRejectSortQty",Number(x.target.value)),className:"w-20 border rounded px-2 py-1"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",checked:s.actionRework,onChange:()=>t("actionRework"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",value:s.actionReworkQty,onChange:x=>r("actionReworkQty",Number(x.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:"}),e.jsx("input",{type:"text","aria-label":"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",value:s.actionReworkMethod,onChange:x=>r("actionReworkMethod",x.target.value),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",checked:s.actionSpecialAcceptance,onChange:()=>t("actionSpecialAcceptance"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",value:s.actionSpecialAcceptanceQty,onChange:x=>r("actionSpecialAcceptanceQty",Number(x.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö:"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",value:s.actionSpecialAcceptanceReason,onChange:x=>r("actionSpecialAcceptanceReason",x.target.value),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",title:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",checked:s.actionScrap,onChange:()=>t("actionScrap"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",value:s.actionScrapQty,onChange:x=>r("actionScrapQty",Number(x.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",title:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",checked:s.actionReplace,onChange:()=>t("actionReplace"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",value:s.actionReplaceQty,onChange:x=>r("actionReplaceQty",Number(x.target.value)),className:"w-20 border rounded px-2 py-1"})]})]})]})]})]})},Tl=({formData:s,updateField:r,handleCheckboxToggle:d})=>{const g=t=>{d(t,[])};return e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden mt-6",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-purple-500"})," ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 bg-white text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold underline text-slate-800",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å:"}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:s.causePackaging,onChange:()=>g("causePackaging")})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:s.causeTransport,onChange:()=>g("causeTransport")})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:s.causeOperation,onChange:()=>g("causeOperation")})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:s.causeEnv,onChange:()=>g("causeEnv")})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("textarea",{value:s.causeDetail||"",onChange:t=>r("causeDetail",t.target.value),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:"}),e.jsx("textarea",{value:s.preventionDetail||"",onChange:t=>r("preventionDetail",t.target.value),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô..."})]})]})]})]})},Dl=({formData:s,updateField:r})=>e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden mt-6",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4 text-red-500"})," ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Cost Tracking)"]}),e.jsxs("div",{className:"p-4 bg-white",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",checked:s.hasCost||!1,onChange:d=>r("hasCost",d.target.checked),className:"w-5 h-5 text-red-600 rounded focus:ring-red-500 border-slate-300"}),e.jsx("span",{className:"font-bold text-red-600",children:"‚ö† ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Has Cost)"})]}),e.jsxs("div",{className:`mb-4 p-4 rounded-lg border flex flex-col gap-3 transition-colors ${s.isFieldSettled?"bg-amber-50 border-amber-200 shadow-sm":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:s.isFieldSettled||!1,onChange:d=>{const g=d.target.checked;r("isFieldSettled",g),g&&r("preliminaryRoute","‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô")},className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-500"}),e.jsx("span",{className:`text-sm font-bold transition-colors ${s.isFieldSettled?"text-amber-800":"text-slate-600 group-hover:text-amber-700"}`,children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Field Settlement)"})]}),s.isFieldSettled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in pl-8 border-l-2 border-amber-200 ml-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1 uppercase tracking-wider",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (Amount)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white font-bold text-amber-700 shadow-sm",value:s.fieldSettlementAmount||"",onChange:d=>r("fieldSettlementAmount",parseFloat(d.target.value)||0),placeholder:"0.00"}),e.jsx("span",{className:"text-sm font-bold text-amber-800",children:"‡∏ö‡∏≤‡∏ó"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1 uppercase tracking-wider",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (Evidence Ref)"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",title:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white placeholder-amber-300",value:s.fieldSettlementEvidence||"",onChange:d=>r("fieldSettlementEvidence",d.target.value),placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1 uppercase tracking-wider",children:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white placeholder-amber-300",value:s.fieldSettlementName||"",onChange:d=>r("fieldSettlementName",d.target.value),placeholder:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1 uppercase tracking-wider",children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text","aria-label":"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white placeholder-amber-300",value:s.fieldSettlementPosition||"",onChange:d=>r("fieldSettlementPosition",d.target.value),placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢"})]})]})]}),s.hasCost&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in bg-red-50 p-4 rounded-lg border border-red-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (Problem Source)"}),e.jsxs("select",{"aria-label":"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",title:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",value:s.problemSource||"",onChange:d=>r("problemSource",d.target.value),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"-- ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ --"}),Object.keys(jt).map(d=>e.jsx("option",{value:d,children:d},d)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",step:"0.01",value:s.costAmount||"",onChange:d=>r("costAmount",Number(d.target.value)),onBlur:d=>r("costAmount",parseFloat(parseFloat(d.target.value).toFixed(2))),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsx("input",{type:"text","aria-label":"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",value:s.costResponsible||"",onChange:d=>r("costResponsible",d.target.value),className:"w-full p-2 border border-slate-300 rounded-lg bg-white text-slate-800 font-bold",placeholder:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á"})]})]})]})]}),Il=({requestItems:s,handleRemoveItem:r,handleAnalyzeClick:d})=>e.jsxs("div",{className:"mt-8 border border-slate-200 rounded-xl overflow-hidden shadow-sm",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200 flex justify-between items-center",children:e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(Wa,{className:"w-5 h-5"})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (",s.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-100 text-slate-600 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"#"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Source)"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("th",{className:"px-4 py-3 w-10",children:"‡∏•‡∏ö"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map((g,t)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>d(t),children:[e.jsx("td",{className:"px-4 py-3 text-slate-500",children:t+1}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-bold text-slate-800",children:g.productName}),e.jsx("div",{className:"text-xs text-slate-500",children:g.productCode})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-mono font-bold bg-slate-100 px-2 py-1 rounded",children:[g.quantity," ",g.unit]})}),e.jsx("td",{className:"px-4 py-3",children:g.problemAnalysis?e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-purple-100 text-purple-700",children:g.problemAnalysis}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsxs("td",{className:"px-4 py-3 max-w-[200px] truncate text-slate-600",children:[g.problemDetail||g.reason||"-",g.problemDamaged&&e.jsx("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-1 rounded",children:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î"}),g.problemWrong&&e.jsx("span",{className:"ml-2 text-xs bg-orange-100 text-orange-600 px-1 rounded",children:"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{type:"button","aria-label":"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",title:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",onClick:x=>{x.stopPropagation(),x.preventDefault(),r(t)},className:"text-red-500 hover:bg-red-50 p-1.5 rounded-lg transition-colors",children:e.jsx($e,{className:"w-4 h-4"})})})]},t))}),e.jsx("tfoot",{className:"bg-slate-50 border-t border-slate-200 font-bold text-slate-700",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:"px-4 py-3 text-right",children:"‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),e.jsxs("td",{className:"px-4 py-3 bg-yellow-50 text-yellow-800",children:[s.reduce((g,t)=>g+(t.quantity||0),0)," ‡∏´‡∏ô‡πà‡∏ß‡∏¢"]}),e.jsx("td",{colSpan:3})]})})]})})]}),Al=({formData:s,requestItems:r,isCustomBranch:d,uniqueCustomers:g,uniqueDestinations:t,uniqueFounders:x,uniqueProductCodes:u,uniqueProductNames:a,initialData:C,setFormData:o,setIsCustomBranch:v,setRequestItems:n,handleAddItem:f,handleRemoveItem:c,handleImageUpload:N,handleRemoveImage:b,handleRequestSubmit:P})=>{const[p,i]=k.useState(!1),[m,R]=k.useState(!1),[h,O]=k.useState(!1),[w,j]=k.useState(null),[D,S]=k.useState(!1),[I,T]=k.useState(null),[$,B]=k.useState(null);Y.useEffect(()=>{o(J=>({...J,documentType:"NCR"}))},[o]);const V=(J,l)=>{o(L=>({...L,[J]:l}))},G=(J,l=[])=>{o(L=>{const H=L[J],te={[J]:!H};return!H&&l.length>0&&l.forEach(X=>te[X]=!1),{...L,...te}})},de=J=>{if(!s.quantity||s.quantity<=0){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (> 0)"});return}j(s),O(!0)},re=()=>{if(r.length===0){A.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"});return}if(s.productName||s.productCode){A.fire({icon:"warning",title:"‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà",text:"‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£' ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô"});return}const J=r.filter(l=>!l.problemAnalysis);if(J.length>0){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏î‡πâ: ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Source) ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${J.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`});return}i(!0)},pe=J=>{T(J),B(r[J]),S(!0)},Se=J=>{I!==null&&n(l=>{const L=[...l];return L[I]=J,L}),S(!1),T(null),B(null)},[E,Q]=k.useState(1),U=5,ee=[{id:1,title:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á",sub:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô & ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà",icon:Oe},{id:2,title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á",sub:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ & ‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á",icon:Lt},{id:3,title:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤",sub:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ & ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",icon:Ze},{id:4,title:"‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£",sub:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç & ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",icon:za},{id:5,title:"‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",sub:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö & ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",icon:Pe}],le=J=>{switch(J){case 1:return!s.date||!s.branch?(A.fire({icon:"error",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",text:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô"}),!1):!0;case 2:return s.customerName?!0:(A.fire({icon:"error",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",text:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),!1);case 3:return!s.quantity||s.quantity<=0?(A.fire({icon:"error",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ > 0"}),!1):!s.productName&&!s.productCode?(A.fire({icon:"error",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),!1):s.problemDamaged||s.problemDamagedInBox||s.problemLost||s.problemMixed||s.problemWrongInv||s.problemLate||s.problemDuplicate||s.problemWrong||s.problemIncomplete||s.problemOver||s.problemWrongInfo||s.problemShortExpiry||s.problemTransportDamage||s.problemAccident||s.problemPOExpired||s.problemNoBarcode||s.problemNotOrdered||s.problemOther?s.problemAnalysis?!0:(A.fire({icon:"error",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Source)"}),!1):(A.fire({icon:"error",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"}),!1);case 4:return!0;default:return!0}},ce=()=>{E===4?de():le(E)&&Q(J=>Math.min(J+1,U))},be=()=>{Q(J=>Math.max(J-1,1))},ke=J=>{(J<E||le(E))&&Q(J)},ye=(J,l,L)=>{if(w){const H={...w,preliminaryDecision:J,preliminaryRoute:l||"",isFieldSettled:(L==null?void 0:L.isFieldSettled)||!1,fieldSettlementAmount:(L==null?void 0:L.amount)||0,fieldSettlementEvidence:(L==null?void 0:L.evidence)||"",fieldSettlementName:(L==null?void 0:L.name)||"",fieldSettlementPosition:(L==null?void 0:L.position)||""};f(null,H),j(null),Q(5)}O(!1)},De=()=>{switch(E){case 1:return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"bg-indigo-50 border-l-4 border-indigo-500 p-4 mb-4",children:[e.jsx("p",{className:"font-bold text-indigo-700",children:"Step 1: ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á (Initiation)"}),e.jsx("p",{className:"text-sm text-indigo-600",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á"})]}),e.jsx(yl,{formData:s,updateField:V,isCustomBranch:d,setIsCustomBranch:v})]});case 2:return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:[e.jsx("p",{className:"font-bold text-blue-700",children:"Step 2: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (Header Info)"}),e.jsx("p",{className:"text-sm text-blue-600",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á ‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsx(Cl,{formData:s,updateField:V,uniqueCustomers:g,uniqueDestinations:t,uniqueFounders:x})]});case 3:return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-4 mb-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-orange-700",children:"Step 3: ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Analysis)"}),e.jsx("p",{className:"text-sm text-orange-600",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"})]}),e.jsxs("div",{className:"text-xs bg-white px-2 py-1 rounded shadow-sm text-orange-500 border border-orange-200",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ",r.length+1]})]}),e.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden shadow-sm p-6 bg-white space-y-6",children:[e.jsx(Rl,{formData:s,updateField:V,uniqueProductCodes:u,uniqueProductNames:a}),e.jsx(kl,{formData:s,updateField:V,handleCheckboxToggle:G,handleImageUpload:N,handleRemoveImage:b})]})]});case 4:return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4",children:[e.jsx("p",{className:"font-bold text-red-700",children:"Step 4: ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ (Action & Cost)"}),e.jsx("p",{className:"text-sm text-red-600",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)"})]}),e.jsx(Ol,{formData:s,updateField:V,handleCheckboxToggle:G}),e.jsx(Tl,{formData:s,updateField:V,handleCheckboxToggle:G}),e.jsx(Dl,{formData:s,updateField:V})]});case 5:return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 mb-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-green-700",children:"Step 5: ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ (Review)"}),e.jsx("p",{className:"text-sm text-green-600",children:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"})]}),e.jsxs("button",{onClick:()=>Q(3),className:"text-xs flex items-center gap-1 bg-white border border-green-200 text-green-600 px-3 py-1 rounded-full shadow-sm hover:bg-green-50 font-bold",children:[e.jsx(Os,{className:"w-3 h-3"})," ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô (Add More)"]})]}),r.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-300 rounded-xl bg-slate-50",children:[e.jsx(st,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("button",{onClick:()=>Q(3),className:"mt-2 text-indigo-600 font-bold hover:underline",children:"‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}):e.jsx(Il,{requestItems:r,handleRemoveItem:c,handleAnalyzeClick:pe}),e.jsx("div",{className:"flex justify-end pt-4 mt-4 border-t border-slate-100",children:e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-sm text-slate-500",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ",e.jsx("span",{className:"font-bold text-slate-800",children:r.length})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})})})]});default:return null}};return e.jsxs(e.Fragment,{children:[e.jsx(vl,{isOpen:D,onClose:()=>S(!1),item:$,onSave:Se}),e.jsx(Nl,{isOpen:p,onClose:()=>i(!1),onConfirm:()=>{i(!1),P()},itemCount:r.length}),e.jsxs("div",{className:"h-full overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 text-indigo-600",children:e.jsx(Oe,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"1. ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (NCR / Return Request)"}),e.jsx("p",{className:"text-sm text-slate-500",children:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ NCR ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (Wizard Mode)"})]}),(C==null?void 0:C.ncrNumber)&&e.jsxs("div",{className:"ml-auto bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-bold border border-orange-200",children:["Ref: ",C.ncrNumber]})]}),e.jsxs("div",{className:"flex items-center justify-between relative max-w-4xl mx-auto",children:[e.jsx("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-slate-100 -z-10 transform -translate-y-1/2"}),e.jsx("div",{className:`absolute top-1/2 left-0 h-0.5 bg-indigo-100 -z-10 transform -translate-y-1/2 transition-all duration-300 ${E===1?"w-0":E===2?"w-1/4":E===3?"w-2/4":E===4?"w-3/4":"w-full"}`}),ee.map(J=>{const l=E===J.id,L=E>J.id;return e.jsxs("button",{onClick:()=>ke(J.id),disabled:!L&&E!==J.id,className:`relative flex flex-col items-center group focus:outline-none ${L||l?"cursor-pointer":"cursor-default"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 bg-white
                                         ${l?"border-indigo-600 text-indigo-600 shadow-lg scale-110":L?"border-green-500 bg-green-50 text-green-500":"border-slate-200 text-slate-300"}
                                     `,children:L?e.jsx(Pe,{className:"w-6 h-6"}):e.jsx(J.icon,{className:"w-5 h-5"})}),e.jsxs("div",{className:`mt-2 text-center transition-all duration-300 ${l?"opacity-100":"opacity-70"}`,children:[e.jsx("p",{className:`text-xs font-bold ${l?"text-indigo-800":L?"text-green-600":"text-slate-400"}`,children:J.title}),e.jsx("p",{className:"text-[10px] text-slate-400 hidden sm:block",children:J.sub})]})]},J.id)})]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-slate-50/50 p-4 sm:p-6 pb-24",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:De()})}),e.jsx("div",{className:"bg-white border-t border-slate-200 p-4 flex-shrink-0 z-10 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex justify-between items-center",children:[e.jsxs("button",{onClick:be,disabled:E===1,className:`px-6 py-2.5 rounded-xl font-bold flex items-center gap-2 transition-all
                                ${E===1?"bg-slate-100 text-slate-300 cursor-not-allowed":"bg-white border border-slate-300 text-slate-600 hover:bg-slate-50 hover:text-slate-800"}`,children:[e.jsx(Va,{className:"w-4 h-4"})," ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Back)"]}),e.jsx("div",{className:"flex items-center gap-3"}),E<5?e.jsx("button",{onClick:ce,className:"px-8 py-2.5 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 shadow-lg hover:shadow-indigo-200 flex items-center gap-2 transition-all transform active:scale-95",children:E===4?e.jsxs(e.Fragment,{children:[e.jsx(Os,{className:"w-5 h-5"})," ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Add Item)"]}):e.jsxs(e.Fragment,{children:["‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (Next) ",e.jsx(Ga,{className:"w-4 h-4"})]})}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>R(!0),disabled:r.length===0,title:"‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå",className:`px-6 py-2.5 rounded-xl font-bold border flex items-center gap-2 transition-all
                                        ${r.length===0?"bg-slate-100 text-slate-300 border-slate-200 cursor-not-allowed":"bg-white text-slate-700 border-slate-300 hover:bg-slate-50"}`,children:[e.jsx(Xt,{className:"w-5 h-5"})," ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå (Preview)"]}),e.jsxs("button",{onClick:re,disabled:r.length===0,title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö",className:`px-8 py-2.5 rounded-xl font-bold shadow-lg flex items-center gap-2 transition-all transform hover:scale-105
                                        ${r.length===0?"bg-slate-300 text-slate-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 shadow-green-200"}`,children:[e.jsx(Ye,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å NCR (Save All)"]})]})]})})]}),m&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-slate-200 w-full h-full max-w-6xl rounded-2xl shadow-2xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex justify-between items-center flex-shrink-0",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Xt,{className:"w-5 h-5 text-indigo-600"})," ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Document Preview)"]}),e.jsx("button",{onClick:()=>R(!1),className:"text-slate-400 hover:text-slate-600",title:"‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á",children:e.jsx(fe,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-4 md:p-8 flex justify-center bg-slate-500/10",children:e.jsxs("div",{className:"bg-white w-[210mm] min-h-[297mm] shadow-lg p-[10mm] text-slate-800 relative",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-xl font-bold",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Request / NCR)"}),e.jsx("p",{className:"text-sm text-slate-500",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠ ‡∏™‡∏¢‡∏≤‡∏° ‡∏à‡∏≥‡∏Å‡∏±‡∏î"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-6 border border-slate-300",children:[e.jsxs("div",{className:"p-2 border-b border-r border-slate-300",children:[e.jsx("span",{className:"font-bold",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"})," ",s.date]}),e.jsxs("div",{className:"p-2 border-b border-slate-300",children:[e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£:"})," ",(C==null?void 0:C.ncrNumber)||"DRAFT"]}),e.jsxs("div",{className:"p-2 border-b border-r border-slate-300",children:[e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:"})," ",s.toDept]}),e.jsxs("div",{className:"p-2 border-b border-slate-300",children:[e.jsx("span",{className:"font-bold",children:"‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤:"})," ",s.branch]}),e.jsxs("div",{className:"p-2 border-r border-slate-300",children:[e.jsx("span",{className:"font-bold",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:"})," ",s.customerName]}),e.jsxs("div",{className:"p-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á:"})," ",s.founder]})]}),e.jsxs("table",{className:"w-full text-xs border-collapse border border-slate-300 mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100",children:[e.jsx("th",{className:"border border-slate-300 p-2 w-10",children:"#"}),e.jsx("th",{className:"border border-slate-300 p-2",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-slate-300 p-2",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-slate-300 p-2 w-20",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-slate-300 p-2",children:"‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö"}),e.jsx("th",{className:"border border-slate-300 p-2",children:"‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£"})]})}),e.jsx("tbody",{children:r.map((J,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-300 p-2 text-center",children:l+1}),e.jsx("td",{className:"border border-slate-300 p-2",children:J.productCode}),e.jsx("td",{className:"border border-slate-300 p-2",children:J.productName}),e.jsxs("td",{className:"border border-slate-300 p-2 text-center font-bold",children:[J.quantity," ",J.unit]}),e.jsxs("td",{className:"border border-slate-300 p-2",children:[e.jsx("div",{children:J.problemSource}),e.jsx("div",{className:"text-[10px] text-slate-500",children:J.problemDetail})]}),e.jsxs("td",{className:"border border-slate-300 p-2",children:[J.actionReject&&"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",J.actionRework&&"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ",J.actionScrap&&"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ "]})]},l))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-12 text-center text-sm",children:[e.jsx("div",{className:"pt-8 border-t border-slate-300",children:e.jsx("p",{children:"‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á (Found By)"})}),e.jsx("div",{className:"pt-8 border-t border-slate-300",children:e.jsx("p",{children:"‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏≤‡∏Ç‡∏≤ (Branch Manager)"})}),e.jsx("div",{className:"pt-8 border-t border-slate-300",children:e.jsx("p",{children:"‡∏ù‡πà‡∏≤‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QA)"})})]})]})})]})}),e.jsx(wl,{isOpen:h,onClose:()=>{O(!1),j(null)},onConfirm:ye})]})},Gs=({onComplete:s})=>{const{items:r,updateReturnRecord:d,deleteReturnRecord:g,getNextCollectionNumber:t}=Ie(),[x,u]=Y.useState([]),[a,C]=Y.useState(!1),[o,v]=Y.useState(""),[n,f]=Y.useState(new Set),c=Y.useMemo(()=>r.filter(h=>{if(h.status!=="Requested")return!1;if(h.documentType!=="LOGISTICS"){if(h.documentType==="NCR"||h.ncrNumber)return!1}return!(o&&h.branch!==o)}),[r,o]),N=Y.useMemo(()=>{const h={};return c.forEach(O=>{const j=(O.documentNo?O.documentNo.trim():`_NO_DOC_${O.id}`).toLowerCase();h[j]||(h[j]=[]),h[j].push(O)}),Object.entries(h).map(([O,w])=>({key:O,items:w,rep:w[0]})).sort((O,w)=>{const j=new Date(O.rep.date||0).getTime();return new Date(w.rep.date||0).getTime()-j})},[c]),b=h=>{const O=new Set(n);O.has(h)?O.delete(h):O.add(h),f(O)},P=h=>{const O=h.map(j=>j.id),w=O.every(j=>x.includes(j));u(w?j=>j.filter(D=>!O.includes(D)):j=>Array.from(new Set([...j,...O])))},p=async(h,O,w)=>{for(const j of h)await d(j.id,{[O]:w})},i=async()=>{if(x.length===0||a)return;const h=r.filter(j=>x.includes(j.id)),O=Array.from(new Set(h.map(j=>(j.documentNo||"").trim()))).filter(Boolean);if(O.length>1){await A.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ",html:`‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å: <b>1 COL (‡πÉ‡∏ö‡∏á‡∏≤‡∏ô) ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö 1 ‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</b><br/><br/>(‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡∏à‡∏≤‡∏Å ${O.length} ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£: ${O.join(", ")})<br/>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏Ç R ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô`,confirmButtonText:"‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß"});return}const{value:w}=await A.fire({title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Create Job)",html:`
                <div style="text-align:left;">
                    <label style="display:block; font-weight:bold; margin-bottom:5px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Date)</label>
                    <input id="swal-job-date" type="date" class="swal2-input" style="margin:0; width:100%;" value="${new Date().toISOString().split("T")[0]}">
                </div>
            `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#2563eb",preConfirm:()=>{const j=document.getElementById("swal-job-date").value;return j||A.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"),j}});if(w){C(!0);try{const j=await t(),D={id:j,driverId:"Unspecified",vehiclePlate:"Unspecified",linkedRmaIds:x,pickupLocation:{name:"Multiple Customers",address:"Multiple Addresses",contactName:"-",contactPhone:"-"},pickupDate:w,packageSummary:{totalBoxes:1,description:"Batch Collection"},status:"ASSIGNED",createdDate:new Date().toISOString()};await It(Ce(Re,`collection_orders/${j}`),D);for(const S of x)await d(S,{status:"COL_JobAccepted",collectionOrderId:j,dateJobAccepted:new Date().toISOString()});await A.fire({icon:"success",title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:`‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß: ${j}`,timer:2e3,showConfirmButton:!1}),u([]),s&&s()}catch(j){console.error("Error creating job:",j),A.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà",confirmButtonColor:"#d33"})}finally{C(!1)}}},m=async h=>{if(a)return;const{value:O}=await A.fire({title:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Undo)",input:"password",inputLabel:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password)",inputPlaceholder:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(O==="1234"&&(await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?",text:"‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏ñ‡∏≤‡∏ß‡∏£ ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Delete)"})).isConfirmed){C(!0);try{await g(h),await A.fire({icon:"success",title:"‡∏•‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}catch(j){console.error("Delete error:",j),A.fire("Error","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏î‡πâ","error")}finally{C(!1)}}},R=async()=>{if(x.length===0||a)return;const{value:h}=await A.fire({title:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",input:"password",inputLabel:`‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password) - ‡∏•‡∏ö ${x.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,inputPlaceholder:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(h==="1234"&&(await A.fire({title:`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö ${x.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö (Delete All)"})).isConfirmed){C(!0);try{let w=0;for(const j of x)await g(j)&&w++;await A.fire({icon:"success",title:`‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ${w} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,timer:2e3,showConfirmButton:!1}),u([])}catch(w){console.error("Delete error:",w),A.fire("Error","‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","error")}finally{C(!1)}}};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-6 h-6 text-blue-600"})," 2. ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Receive Job)"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:o,onChange:h=>v(h.target.value),className:"p-2 border border-slate-300 rounded-lg text-sm text-slate-700 font-medium outline-none focus:ring-2 focus:ring-blue-500 bg-white shadow-sm","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",children:[e.jsx("option",{value:"",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (All Branches)"}),Ee.map(h=>e.jsx("option",{value:h,children:h},h))]}),x.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:R,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"})," ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (",x.length,")"]}),e.jsxs("button",{onClick:i,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (",x.length,")"]})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b text-center w-12",children:"#"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (DATE)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (BRANCH)"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç INVOICE"}),e.jsx("th",{className:"p-3 border-b min-w-[130px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL (COL NO)"}),e.jsx("th",{className:"p-3 border-b min-w-[300px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (PRODUCT) - EXPAND (+)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Yt,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô"})]})})}):N.map(h=>{const{rep:O,items:w,key:j}=h,D=n.has(j),S=w.every(T=>x.includes(T.id)),I=w.some(T=>x.includes(T.id));return e.jsxs("tr",{className:`hover:bg-slate-50 transition-colors text-xs align-top ${S?"bg-blue-50/30":""}`,children:[e.jsx("td",{className:"p-3 text-center border-r border-slate-100 bg-slate-50/30",children:e.jsx("input",{type:"checkbox",checked:S,"aria-label":`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${O.documentNo||j}`,title:`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${O.documentNo||j}`,ref:T=>{T&&(T.indeterminate=I&&!S)},onChange:()=>P(w),className:"accent-blue-600 w-4 h-4 cursor-pointer"})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-medium text-slate-700",children:O.date?new Date(O.date).toLocaleDateString("th-TH"):"-"}),e.jsxs("td",{className:"p-3 border-r border-slate-100",children:[e.jsxs("select",{onChange:T=>p(w,"branch",T.target.value),value:O.branch||"","aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",className:"w-full bg-transparent border-none p-0 font-bold text-slate-700 focus:ring-0 text-xs cursor-pointer truncate",children:[e.jsx("option",{value:"",disabled:!0,children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤"}),Ee.map(T=>e.jsx("option",{value:T,children:T},T))]}),w.length>1&&e.jsxs("div",{className:"text-[9px] text-slate-400 mt-1",children:["*‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó ",w.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:O.customerName,children:O.customerName||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:O.destinationCustomer,children:O.destinationCustomer||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-500",children:e.jsx("input",{type:"text",disabled:!0,value:O.invoiceNo||"-","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà Invoice",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà Invoice",placeholder:"Invoice NO",className:"w-full bg-transparent border-none p-0 text-xs truncate"})}),e.jsxs("td",{className:"p-3 border-r border-slate-100",children:[e.jsx("input",{type:"text",value:O.documentNo||"",onChange:T=>p(w,"documentNo",T.target.value),className:"w-full bg-transparent border-b border-dashed border-slate-300 focus:border-blue-500 outline-none text-blue-600 font-bold px-1 py-0.5",placeholder:"R...","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ R",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ R"}),w.length>1&&e.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 px-1.5 py-0.5 rounded bg-blue-100 text-blue-700 text-[9px] font-bold",children:[e.jsx(xt,{className:"w-3 h-3"})," ",w.length," Items"]})]}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3 text-slate-400"}),O.controlDate?new Date(O.controlDate).toLocaleDateString("th-TH"):"-"]})}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:e.jsx("input",{type:"text",value:O.tmNo||"",onChange:T=>p(w,"tmNo",T.target.value),className:"w-full bg-transparent border-b border-dashed border-slate-300 focus:border-blue-500 outline-none text-slate-700 font-mono px-1 py-0.5",placeholder:"TM...","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° TM",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° TM"})}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:O.collectionOrderId?e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded text-[10px] font-mono border border-indigo-100 block w-fit",children:O.collectionOrderId}):e.jsx("span",{className:"text-slate-300",children:"-"})}),e.jsx("td",{className:"p-3 border-r border-slate-100 relative",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-800 text-xs",children:w[0].productCode||""}),e.jsx("div",{className:"text-slate-600 text-[11px] leading-tight",children:w[0].productName||"-"}),e.jsxs("div",{className:"text-slate-500 text-[10px] font-medium bg-slate-100 w-fit px-1.5 py-0.5 rounded mt-0.5",children:["Qty: ",e.jsxs("span",{className:"text-slate-900 font-bold",children:[w[0].quantity," ",w[0].unit]})]})]}),e.jsx("button",{onClick:T=>{T.stopPropagation(),m(w[0].id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ","aria-label":"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ",children:e.jsx(fe,{className:"w-3 h-3"})})]}),w.length>1&&e.jsxs("button",{onClick:()=>b(j),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                                ${D?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-indigo-100"}`,"aria-label":D?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",title:D?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",children:[D?e.jsx(et,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"}),D?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Collapse)":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${w.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),D&&w.length>1&&e.jsx("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:w.slice(1).map(T=>e.jsxs("div",{className:"flex justify-between items-start pl-2 border-l-2 border-indigo-200 group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-700 text-xs",children:T.productCode||""}),e.jsx("div",{className:"text-slate-500 text-[11px]",children:T.productName||"-"}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["Qty: ",e.jsxs("b",{children:[T.quantity," ",T.unit]})]})]}),e.jsx("button",{onClick:$=>{$.stopPropagation(),m(T.id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ","aria-label":"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ",children:e.jsx(fe,{className:"w-3 h-3"})})]},T.id))})]})})]},j)})})]})})})]})},Ks=({onComplete:s})=>{const{items:r,updateReturnRecord:d}=Ie(),[g,t]=Y.useState(!1),[x,u]=Y.useState(""),[a,C]=Y.useState([]),[o,v]=Y.useState(new Set),n=Y.useMemo(()=>r.filter(p=>!(!(p.status==="COL_JobAccepted"||p.status==="JobAccepted")||!(p.documentType==="LOGISTICS")&&(p.documentType==="NCR"||p.ncrNumber)||x&&p.branch!==x)),[r,x]),f=Y.useMemo(()=>{const p={};return n.forEach(i=>{const R=(i.documentNo?i.documentNo.trim():`_NO_DOC_${i.id}`).toLowerCase();p[R]||(p[R]=[]),p[R].push(i)}),Object.entries(p).map(([i,m])=>({key:i,items:m,rep:m[0]})).sort((i,m)=>{const R=new Date(i.rep.date||0).getTime();return new Date(m.rep.date||0).getTime()-R})},[n]),c=p=>{const i=new Set(o);i.has(p)?i.delete(p):i.add(p),v(i)},N=p=>{const i=p.map(R=>R.id),m=i.every(R=>a.includes(R));C(m?R=>R.filter(h=>!i.includes(h)):R=>Array.from(new Set([...R,...i])))},b=async()=>{if(a.length===0||g)return;const p=new Date().toISOString().split("T")[0],i=r.filter(h=>a.includes(h.id)),m=i.map(h=>`
            <tr data-id="${h.id}" class="item-row">
                <td style="padding: 5px;"><input type="text" class="swal2-input product-name" style="margin:0; width:100%; font-size:0.9em;" value="${h.productName||""}" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"></td>
                <td style="padding: 5px;"><input type="number" class="swal2-input product-qty" style="margin:0; width:80px; font-size:0.9em;" value="${h.quantity}" min="0"></td>
                <td style="padding: 5px;"><input type="text" class="swal2-input product-unit" style="margin:0; width:60px; font-size:0.9em;" value="${h.unit||""}" placeholder="‡∏´‡∏ô‡πà‡∏ß‡∏¢"></td>
                <td style="padding: 5px; text-align:center;">-</td>
            </tr>
        `).join(""),{value:R}=await A.fire({title:`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (${a.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`,width:"800px",html:`
                <div style="text-align: left; font-size: 0.9rem; color: #334155;">
                     <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display:block; font-weight:bold; margin-bottom:4px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á <span style="color:red">*</span></label>
                            <input id="swal-date" type="date" class="swal2-input" style="margin:0; width:100%; box-sizing:border-box;" value="${p}">
                        </div>
                        <div>
                            <label style="display:block; font-weight:bold; margin-bottom:4px;">‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö <span style="color:red">*</span></label>
                            <input id="swal-driver" type="text" class="swal2-input" style="margin:0; width:100%; box-sizing:border-box;" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠...">
                        </div>
                        <div>
                            <label style="display:block; font-weight:bold; margin-bottom:4px;">‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ <span style="color:red">*</span></label>
                            <input id="swal-plate" type="text" class="swal2-input" style="margin:0; width:100%; box-sizing:border-box;" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô...">
                        </div>
                    </div>

                    <div style="max-height: 300px; overflow-y: auto; border: 1px solid #e2e8f0; border-radius: 8px;">
                        <table style="width:100%; border-collapse: collapse;">
                            <thead style="background: #f1f5f9; position: sticky; top: 0;">
                                <tr>
                                    <th style="padding: 8px; text-align: left; font-size: 0.85rem;">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)</th>
                                    <th style="padding: 8px; text-align: left; font-size: 0.85rem; width: 80px;">Qty</th>
                                    <th style="padding: 8px; text-align: left; font-size: 0.85rem; width: 60px;">Unit</th>
                                    <th style="padding: 8px; width: 40px;"></th>
                                </tr>
                            </thead>
                            <tbody id="swal-items-body">
                                ${m}
                            </tbody>
                        </table>
                    </div>
                    <button type="button" id="btn-add-row" style="margin-top: 10px; width: 100%; padding: 8px; border: 1px dashed #cbd5e1; background: #f8fafc; color: #475569; font-weight: bold; cursor: pointer; border-radius: 6px;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Add Product)</button>
                </div>
            `,didOpen:()=>{const h=document.getElementById("btn-add-row"),O=document.getElementById("swal-items-body");h&&O&&h.addEventListener("click",()=>{var D,S;const w=document.createElement("tr");w.classList.add("item-row"),w.setAttribute("data-new","true"),w.innerHTML=`
                             <td style="padding: 5px;"><input type="text" class="swal2-input product-name" style="margin:0; width:100%; font-size:0.9em;" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"></td>
                            <td style="padding: 5px;"><input type="number" class="swal2-input product-qty" style="margin:0; width:80px; font-size:0.9em;" value="1" min="0"></td>
                            <td style="padding: 5px;"><input type="text" class="swal2-input product-unit" style="margin:0; width:60px; font-size:0.9em;" placeholder="‡∏´‡∏ô‡πà‡∏ß‡∏¢"></td>
                            <td style="padding: 5px; text-align:center;"><button type="button" class="btn-remove-row" style="color: red; border: none; background: none; cursor: pointer;">X</button></td>
                        `,O.appendChild(w);const j=(D=O.parentElement)==null?void 0:D.parentElement;j&&(j.scrollTop=j.scrollHeight),(S=w.querySelector(".btn-remove-row"))==null||S.addEventListener("click",()=>{w.remove()})})},focusConfirm:!1,showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#4f46e5",preConfirm:()=>{const h=document.getElementById("swal-date"),O=document.getElementById("swal-driver"),w=document.getElementById("swal-plate");if(!h.value||!O.value||!w.value)return A.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö ‡πÅ‡∏•‡∏∞‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ"),!1;const j=document.querySelectorAll(".item-row"),D=[];let S=!0;return j.forEach(I=>{const T=I.getAttribute("data-id"),$=I.getAttribute("data-new")==="true",B=I.querySelector(".product-name").value,V=Number(I.querySelector(".product-qty").value),G=I.querySelector(".product-unit").value;if(!B){S=!1;return}D.push({id:T,isNew:$,productName:B,quantity:V,unit:G})}),S?{date:h.value,driver:O.value,plate:w.value,items:D}:(A.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô"),!1)}});if(R){t(!0);try{const h={driverName:R.driver,plateNumber:R.plate,transportCompany:"Company"};for(const O of R.items)if(!O.isNew&&O.id)await d(O.id,{status:"COL_BranchReceived",dateReceived:R.date,dateBranchReceived:R.date,quantity:O.quantity,unit:O.unit,productName:O.productName,transportInfo:h});else if(O.isNew){const w=i[0];if(!w&&i.length===0)return;const j=`EXTRA_${Date.now()}_${Math.floor(Math.random()*1e3)}`,D={...w,id:j,status:"COL_BranchReceived",dateReceived:R.date,dateBranchReceived:R.date,productCode:O.productName,productName:O.productName,quantity:O.quantity,unit:O.unit,transportInfo:h,documentNo:w.documentNo,invoiceNo:w.invoiceNo,tmNo:w.tmNo,collectionOrderId:w.collectionOrderId,branch:w.branch};await d(j,D)}await A.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${R.items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,timer:1500,showConfirmButton:!1}),C([]),s&&s()}catch(h){console.error("Error receiving items:",h),A.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ"})}finally{t(!1)}}},P=async p=>{if(g)return;const{value:i}=await A.fire({title:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Undo)",input:"password",inputLabel:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password)",inputPlaceholder:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(i==="1234"){t(!0);try{await d(p,{status:"Requested"}),await A.fire({icon:"success",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡πÑ‡∏õ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô Step 2",timer:2e3,showConfirmButton:!1})}catch(m){console.error("Undo error:",m),A.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ","error")}finally{t(!1)}}else i&&A.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","","error")};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Et,{className:"w-6 h-6 text-indigo-600"})," 3. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Branch Physical Receive)"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:x,onChange:p=>u(p.target.value),className:"p-2 border border-slate-300 rounded-lg text-sm text-slate-700 font-medium outline-none focus:ring-2 focus:ring-blue-500 bg-white shadow-sm","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",children:[e.jsx("option",{value:"",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (All Branches)"}),Ee.map(p=>e.jsx("option",{value:p,children:p},p))]}),a.length>0&&e.jsxs("button",{onClick:b,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all flex items-center gap-2",children:[e.jsx(Ka,{className:"w-5 h-5"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á (",a.length,")"]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b text-center w-12",children:"#"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (DATE)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (BRANCH)"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç INVOICE"}),e.jsx("th",{className:"p-3 border-b min-w-[130px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL (COL NO)"}),e.jsx("th",{className:"p-3 border-b min-w-[300px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (PRODUCT) - EXPAND (+)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Jt,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]})})}):f.map(p=>{const{rep:i,items:m,key:R}=p,h=o.has(R),O=m.every(j=>a.includes(j.id)),w=m.some(j=>a.includes(j.id));return e.jsxs("tr",{className:`hover:bg-slate-50 transition-colors text-xs align-top ${O?"bg-indigo-50/30":""}`,children:[e.jsx("td",{className:"p-3 text-center border-r border-slate-100 bg-slate-50/30",children:e.jsx("input",{type:"checkbox",checked:O,"aria-label":`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${i.documentNo||R}`,title:`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${i.documentNo||R}`,ref:j=>{j&&(j.indeterminate=w&&!O)},onChange:()=>N(m),className:"accent-indigo-600 w-4 h-4 cursor-pointer"})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-medium text-slate-700",children:i.date?new Date(i.date).toLocaleDateString("th-TH"):"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:e.jsx("div",{className:"font-bold text-slate-700",children:i.branch})}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:i.customerName,children:i.customerName||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:i.destinationCustomer,children:i.destinationCustomer||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-500",children:i.invoiceNo||"-"}),e.jsxs("td",{className:"p-3 border-r border-slate-100",children:[e.jsx("span",{className:"font-bold text-blue-600 dashed-underline cursor-help",title:i.documentNo,children:i.documentNo||"-"}),m.length>1&&e.jsxs("div",{className:"inline-flex items-center gap-1 mt-1 px-1.5 py-0.5 rounded bg-blue-100 text-blue-700 text-[9px] font-bold",children:[e.jsx(xt,{className:"w-3 h-3"})," ",m.length," Items"]})]}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3 text-slate-400"}),i.controlDate?new Date(i.controlDate).toLocaleDateString("th-TH"):"-"]})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-mono text-slate-600",children:i.tmNo||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:i.collectionOrderId?e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded text-[10px] font-mono border border-indigo-100 block w-fit",children:i.collectionOrderId}):"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 relative",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-800 text-xs",children:m[0].productCode||""}),e.jsx("div",{className:"text-slate-600 text-[11px] leading-tight",children:m[0].productName||"-"}),e.jsxs("div",{className:"text-slate-500 text-[10px] font-medium bg-slate-100 w-fit px-1.5 py-0.5 rounded mt-0.5",children:["Qty: ",e.jsxs("span",{className:"text-slate-900 font-bold",children:[m[0].quantity," ",m[0].unit]})]})]}),e.jsx("button",{onClick:j=>{j.stopPropagation(),P(m[0].id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",children:e.jsx(Ue,{className:"w-3 h-3"})})]}),m.length>1&&e.jsxs("button",{onClick:()=>c(R),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                                ${h?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-indigo-100"}`,children:[h?e.jsx(et,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"}),h?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Collapse)":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${m.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),h&&m.length>1&&e.jsx("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:m.slice(1).map(j=>e.jsxs("div",{className:"flex justify-between items-start pl-2 border-l-2 border-indigo-200 group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-700 text-xs",children:j.productCode||""}),e.jsx("div",{className:"text-slate-500 text-[11px]",children:j.productName||"-"}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["Qty: ",e.jsxs("b",{children:[j.quantity," ",j.unit]})]})]}),e.jsx("button",{onClick:D=>{D.stopPropagation(),P(j.id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",children:e.jsx(Ue,{className:"w-3 h-3"})})]},j.id))})]})})]},R)})})]})})})]})},Js=({onComplete:s})=>{const{items:r,updateReturnRecord:d}=Ie(),[g,t]=Y.useState(!1),[x,u]=Y.useState(new Date().toISOString().split("T")[0]),[a,C]=Y.useState(""),[o,v]=Y.useState([]),[n,f]=Y.useState(new Set),[c,N]=Y.useState(!1),[b,P]=Y.useState([]),[p,i]=Y.useState(""),[m]=Y.useState({driverName:"",plateNumber:"",transportCompany:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"}),R=Y.useMemo(()=>r.filter(I=>!(!(I.status==="BranchReceived"||I.status==="COL_BranchReceived")||a&&I.branch!==a)),[r,a]),h=Y.useMemo(()=>{const I={};return R.forEach(T=>{const B=(T.documentNo?T.documentNo.trim():`_NO_DOC_${T.id}`).toLowerCase();I[B]||(I[B]=[]),I[B].push(T)}),Object.entries(I).map(([T,$])=>({key:T,items:$,rep:$[0]})).sort((T,$)=>new Date($.rep.date).getTime()-new Date(T.rep.date).getTime())},[R]),O=I=>{const T=new Set(n);T.has(I)?T.delete(I):T.add(I),f(T)},w=I=>{const T=I.map(B=>B.id),$=T.every(B=>o.includes(B));v($?B=>B.filter(V=>!T.includes(V)):B=>Array.from(new Set([...B,...T])))},j=async()=>{o.length!==0&&(g||(P(o),i(""),N(!0)))},D=async()=>{if(!p||p==="Other"){await A.fire({icon:"warning",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",text:"‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"});return}if(!g){t(!0);try{for(const I of b)await d(I,{status:"COL_Consolidated",dateConsolidated:x,preliminaryDecision:"Return",preliminaryRoute:p,transportInfo:m});await A.fire({icon:"success",title:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1}),N(!1),P([]),v([]),i(""),s&&s()}finally{t(!1)}}},S=async I=>{if(g)return;const{value:T}=await A.fire({title:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Undo)",input:"password",inputLabel:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password)",inputPlaceholder:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(T==="1234"){t(!0);try{await d(I,{status:"COL_JobAccepted"}),await A.fire({icon:"success",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡πÑ‡∏õ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô Step 3",timer:2e3,showConfirmButton:!1})}catch{A.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ","error")}finally{t(!1)}}else T&&A.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","","error")};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Gt,{className:"w-6 h-6 text-slate-600"})," 4. ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Branch Consolidation)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:a,onChange:I=>C(I.target.value),className:"p-2 border border-slate-300 rounded-lg text-sm text-slate-700 font-medium outline-none focus:ring-2 focus:ring-blue-500 bg-white shadow-sm mr-2","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",children:[e.jsx("option",{value:"",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (All Branches)"}),Ee.map(I=>e.jsx("option",{value:I,children:I},I))]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-slate-200 shadow-sm mr-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°:"}),e.jsx("input",{type:"date",value:x,onChange:I=>u(I.target.value),className:"outline-none text-slate-700 font-medium text-sm","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),o.length>0&&e.jsxs("button",{onClick:j,disabled:g,className:"bg-slate-800 hover:bg-black text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all disabled:opacity-50 disabled:cursor-wait flex items-center gap-2",children:[e.jsx(Ts,{className:"w-5 h-5"})," ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (",o.length,")"]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b text-center w-12",children:"#"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (DATE)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (BRANCH)"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç INVOICE"}),e.jsx("th",{className:"p-3 border-b min-w-[130px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL (COL NO)"}),e.jsx("th",{className:"p-3 border-b min-w-[300px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (PRODUCT) - EXPAND (+)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ts,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]})})}):h.map(I=>{const{rep:T,items:$,key:B}=I,V=n.has(B),G=$.every(re=>o.includes(re.id)),de=$.some(re=>o.includes(re.id));return e.jsxs("tr",{className:`hover:bg-slate-50 transition-colors text-xs align-top ${G?"bg-indigo-50/30":""}`,children:[e.jsx("td",{className:"p-3 text-center border-r border-slate-100 bg-slate-50/30",children:e.jsx("input",{type:"checkbox",checked:G,ref:re=>{re&&(re.indeterminate=de&&!G)},onChange:()=>w($),className:"accent-slate-800 w-4 h-4 cursor-pointer","aria-label":`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${T.documentNo||B}`,title:`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${T.documentNo||B}`})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-medium text-slate-700",children:T.date?new Date(T.date).toLocaleDateString("th-TH"):"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:e.jsx("div",{className:"font-bold text-slate-700",children:T.branch})}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:T.customerName,children:T.customerName||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:T.destinationCustomer,children:T.destinationCustomer||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-500",children:T.invoiceNo||"-"}),e.jsxs("td",{className:"p-3 border-r border-slate-100",children:[e.jsx("span",{className:"font-bold text-blue-600 dashed-underline cursor-help",title:T.documentNo,children:T.documentNo||"-"}),$.length>1&&e.jsxs("div",{className:"inline-flex items-center gap-1 mt-1 px-1.5 py-0.5 rounded bg-blue-100 text-blue-700 text-[9px] font-bold",children:[e.jsx(xt,{className:"w-3 h-3"})," ",$.length," Items"]})]}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3 text-slate-400"}),T.controlDate?new Date(T.controlDate).toLocaleDateString("th-TH"):"-"]})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-mono text-slate-600",children:T.tmNo||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:T.collectionOrderId?e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded text-[10px] font-mono border border-indigo-100 block w-fit",children:T.collectionOrderId}):"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 relative",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-800 text-xs",children:$[0].productCode||""}),e.jsx("div",{className:"text-slate-600 text-[11px] leading-tight",children:$[0].productName||"-"}),e.jsxs("div",{className:"text-slate-500 text-[10px] font-medium bg-slate-100 w-fit px-1.5 py-0.5 rounded mt-0.5",children:["Qty: ",e.jsxs("span",{className:"text-slate-900 font-bold",children:[$[0].quantity," ",$[0].unit]})]})]}),e.jsx("button",{onClick:re=>{re.stopPropagation(),S($[0].id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",children:e.jsx(Ue,{className:"w-3 h-3"})})]}),$.length>1&&e.jsxs("button",{onClick:()=>O(B),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                                ${V?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-slate-100"}`,children:[V?e.jsx(et,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"}),V?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Collapse)":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${$.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),V&&$.length>1&&e.jsx("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:$.slice(1).map(re=>e.jsxs("div",{className:"flex justify-between items-start pl-2 border-l-2 border-indigo-200 group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-700 text-xs",children:re.productCode||""}),e.jsx("div",{className:"text-slate-500 text-[11px]",children:re.productName||"-"}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["Qty: ",e.jsxs("b",{children:[re.quantity," ",re.unit]})]})]}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),S(re.id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",children:e.jsx(Ue,{className:"w-3 h-3"})})]},re.id))})]})})]},B)})})]})})}),c&&xs.createPortal(e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-scale-up",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-slate-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ms,{className:"w-6 h-6 text-indigo-600"}),"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (",b.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]}),e.jsx("button",{onClick:()=>N(!1),className:"text-slate-400 hover:text-slate-600","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(fe,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-800 mb-2",children:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return Route)"}),e.jsx("div",{className:"border rounded-xl overflow-hidden bg-indigo-50/30",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"p-3 bg-white rounded border border-indigo-100 text-sm",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[qe.map(I=>e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${p===I?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio",name:"tempRoute",value:I,checked:p===I,onChange:T=>i(T.target.value),className:"hidden"}),I]},I)),e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${p==="Other"||p&&!qe.includes(p)?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio",name:"tempRoute",value:"Other",checked:p==="Other"||p&&!qe.includes(p),onChange:()=>i("Other"),className:"hidden"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]})]}),(p==="Other"||p&&!qe.includes(p))&&e.jsx("input",{type:"text",value:p==="Other"?"":p,onChange:I=>i(I.target.value),className:"w-full mt-2 p-2 border rounded text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",autoFocus:!0})]})})})]})}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"px-5 py-2.5 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:D,disabled:g,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md transition-all disabled:opacity-50 disabled:cursor-wait",children:g?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...":"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (Save)"})]})]})}),document.body)]})},El=()=>{const{items:s,updateReturnRecord:r,addReturnRecord:d,ncrReports:g}=Ie(),[t,x]=k.useState(null),[u,a]=k.useState(null),[C,o]=k.useState(null),[v,n]=k.useState({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""}),[f,c]=k.useState(!1),[N,b]=k.useState(!1),[P,p]=k.useState(""),[i,m]=k.useState(!1),[R,h]=k.useState(!1),[O,w]=k.useState(1),[j,D]=k.useState(""),[S,I]=k.useState(0),[T,$]=k.useState("New"),[B,V]=k.useState(null),G=Y.useMemo(()=>s.filter(l=>{var te,X,he,F,y;if(l.ncrNumber){const _=g.find(M=>M.ncrNo===l.ncrNumber);if(_&&_.status==="Canceled")return!1}if(!(l.status==="NCR_HubReceived"||l.status==="ReceivedAtHub"))return!1;const H=P.toLowerCase().trim();return H?((te=l.refNo)==null?void 0:te.toLowerCase().includes(H))||((X=l.ncrNumber)==null?void 0:X.toLowerCase().includes(H))||((he=l.documentNo)==null?void 0:he.toLowerCase().includes(H))||((F=l.productName)==null?void 0:F.toLowerCase().includes(H))||((y=l.productCode)==null?void 0:y.toLowerCase().includes(H)):!0}),[s,g,P]),[de,re]=k.useState(new Set),pe=Y.useMemo(()=>{const l={};return G.forEach(L=>{const H=y=>y?y.replace(/\s+/g,"").toLowerCase():"",te=H(L.colNumber),X=H(L.ncrNumber),F=H(L.documentNo)||te||X||L.id;l[F]||(l[F]=[]),l[F].push(L)}),Object.entries(l).map(([L,H])=>({key:L,items:H,rep:H[0]})).sort((L,H)=>H.rep.date.localeCompare(L.rep.date))},[G]),Se=l=>{re(L=>{const H=new Set(L);return H.has(l)?H.delete(l):H.add(l),H})},[E,Q]=k.useState(!1),U=Y.useMemo(()=>t?pe.find(l=>l.items.some(L=>L.id===t.id)):null,[t,pe]),ee=U&&U.items.length>1,le=l=>{x(l),Q(!1),o(null),a(null),m(!1),I(0),n({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""})},ce=(l,L)=>{t&&(x({...t,condition:l}),L&&a(L))},be=(l,L)=>{n(H=>({...H,[l]:L}))},ke=()=>{m(!i)},ye=async()=>{if(!t)return;const l=E&&U?U.items:[t],L=l.length,{value:H}=await A.fire({title:E?`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏° (${L})`:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö (Undo)",text:E?`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á ${L} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ Step 3 (Receive) ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ Step 3 (Receive)",input:"password",icon:"warning",showCancelButton:!0,confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",inputPlaceholder:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"});H==="1234"?(await Promise.all(l.map(te=>r(te.id,{status:"NCR_InTransit"}))),x(null),Q(!1),await A.fire({icon:"success",title:E?`‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö ${L} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`:"‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö Step 3 ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})):H&&A.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","","error")},De=async()=>{if(!t||!C||N)return;b(!0);const l=E&&U?U.items:[t];try{const L={status:"NCR_QCCompleted",condition:t.condition,disposition:C,destinationCustomer:C==="RTV"?v.route:C==="Restock"?v.sellerName:C==="InternalUse"?v.internalUseDetail:"",problemDetail:C==="Claim"?`Claim: ${v.claimCompany} / ${v.claimCoordinator}`:t.problemDetail||""};await Promise.all(l.map(H=>r(H.id,L))),x(null),Q(!1),await A.fire({icon:"success",title:E?`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏• QC ‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏° (${l.length}) ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏• QC ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}catch(L){console.error("QC Submit Error:",L),A.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:L instanceof Error?L.message:"Unknown error"})}finally{b(!1)}},J=async()=>{if(!(!t||S<=0)&&!N){b(!0);try{const l=t.quantity,L=R?l*O:l;if(S>=L){A.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",text:"Cannot split entire quantity via split function. Use normal Submit."});return}const H=L-S,X={quantity:(R&&H>0,H),unit:R?j:t.unit,status:"NCR_QCCompleted",disposition:C||"Pending",condition:t.condition};await r(t.id,X);const he={...t,id:`${t.id}-SP${Date.now().toString().slice(-4)}`,quantity:S,unit:R?j:t.unit,condition:T,disposition:B||"Pending",status:B?"NCR_QCCompleted":"NCR_HubReceived",refNo:`${t.refNo}-SP`};await d(he),x(null),await A.fire({icon:"success",title:"‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}catch(l){console.error("Split Error:",l),A.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",text:l instanceof Error?l.message:"Unknown error"})}finally{b(!1)}}};return e.jsxs("div",{className:"h-full flex",children:[e.jsxs("div",{className:"w-80 border-r border-slate-200 bg-white flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 font-bold text-slate-700 flex justify-between items-center",children:[e.jsxs("span",{children:["‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (",G.length,")"]}),e.jsx(Et,{className:"w-4 h-4 text-blue-500"})]}),e.jsx("div",{className:"p-2 border-b border-slate-50 bg-slate-50/50",children:e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏• / NCR / ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...",value:P,onChange:l=>p(l.target.value),className:"w-full pl-3 pr-8 py-1.5 text-xs bg-white border border-slate-200 rounded focus:ring-1 focus:ring-blue-400 outline-none transition-all"}),P&&e.jsx("button",{onClick:()=>p(""),"aria-label":"‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",title:"‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 focus:outline-none",children:e.jsx(fe,{className:"w-3 h-3"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:pe.length===0?e.jsx("div",{className:"p-4 text-center text-slate-400 text-xs italic",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"}):pe.map(l=>{const{key:L,items:H,rep:te}=l,X=de.has(L),he=(t==null?void 0:t.id)===te.id,F=H.length>1;return e.jsxs("div",{className:`bg-white rounded-lg border transition-all overflow-hidden
                                    ${he?"border-emerald-500 shadow-md ring-1 ring-emerald-100":"border-slate-100 shadow-sm hover:shadow"}
                                `,children:[e.jsxs("div",{onClick:()=>{le(te)},className:`p-3 cursor-pointer relative transition-colors ${he?"bg-blue-50/30":"hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700 truncate max-w-[60%]",title:te.productCode,children:te.productCode}),e.jsx("span",{className:"text-[10px] text-slate-400",children:te.dateReceived})]}),e.jsx("div",{className:"text-sm font-medium text-slate-800 truncate mb-1",title:te.productName,children:te.productName}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-1",children:[te.documentNo&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-emerald-50 text-emerald-600 rounded border border-emerald-100 font-bold",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R): ",te.documentNo]}),te.refNo&&te.refNo!=="-"&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-blue-50 text-blue-600 rounded border border-blue-100 font-bold",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• (Ref No.): ",te.refNo]}),te.ncrNumber&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-red-50 text-red-600 rounded border border-red-100 font-bold",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR: ",te.ncrNumber]}),te.colNumber&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-indigo-50 text-indigo-600 rounded border border-indigo-100",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL: ",te.colNumber]})]}),e.jsxs("div",{className:"flex justify-between items-end mt-2",children:[e.jsx("div",{className:"text-xs text-slate-500",children:te.branch}),F&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full font-bold",children:[e.jsx(xt,{className:"w-3 h-3"})," ",H.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]})]}),F&&e.jsxs("div",{className:"border-t border-slate-100",children:[e.jsxs("button",{onClick:y=>{y.stopPropagation(),Se(L)},className:`flex items-center justify-center gap-2 w-full py-2 text-xs font-bold transition-colors
                                                    ${X?"bg-slate-100 text-slate-600":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[X?e.jsx(et,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}),X?"‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô":`‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô (${H.length})`]}),X&&e.jsx("div",{className:"bg-slate-50 border-t border-slate-100 divide-y divide-slate-100 animate-slide-down",children:H.map(y=>{const _=(t==null?void 0:t.id)===y.id;return e.jsxs("div",{onClick:()=>le(y),className:`p-2 pl-4 cursor-pointer text-xs flex flex-col gap-1
                                                                    ${_?"bg-blue-100 text-blue-800 font-bold border-l-4 border-blue-500":"text-slate-600 hover:bg-slate-200 border-l-4 border-transparent"}
                                                                `,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"truncate w-3/4 font-medium",children:y.productName}),e.jsxs("span",{className:"shrink-0",children:[y.quantity," ",y.unit]})]}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[y.productCode," | ",y.branch]})]},y.id)})})]})]},L)})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50/50",children:t?e.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[ee&&e.jsxs("div",{className:`mb-6 p-3 rounded-lg flex items-center justify-between border transition-all ${E?"bg-indigo-600 text-white border-indigo-700 shadow-md transform scale-[1.01]":"bg-indigo-50 text-indigo-800 border-indigo-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${E?"bg-white/20":"bg-indigo-100"}`,children:e.jsx(xt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:E?`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏° (${U==null?void 0:U.items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`:`‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ${U==null?void 0:U.items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`}),e.jsx("div",{className:`text-xs ${E?"text-indigo-100":"text-indigo-500"}`,children:E?"‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Grading/Disposition) ‡∏à‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ":"‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ"})]})]}),e.jsx("button",{onClick:()=>Q(!E),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all shadow-sm ${E?"bg-white text-indigo-600 hover:bg-indigo-50":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md ring-2 ring-indigo-200 ring-offset-1"}`,children:E?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (‡∏ó‡∏≥‡∏ó‡∏µ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)":"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏° (Batch QC)"})]}),e.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:t.productName}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-500",children:[t.documentNo&&e.jsxs("span",{children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R): ",e.jsx("b",{className:"text-emerald-600",children:t.documentNo})]}),t.refNo&&t.refNo!=="-"&&e.jsxs("span",{children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• (Ref No.): ",e.jsx("b",{className:"text-blue-600",children:t.refNo})]}),t.ncrNumber&&e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR: ",e.jsx("b",{children:t.ncrNumber})]}),t.colNumber&&e.jsxs("span",{children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL: ",e.jsx("b",{children:t.colNumber})]}),e.jsxs("span",{children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ",e.jsxs("b",{children:[t.quantity," ",t.unit]})]})]}),t.preliminaryDecision&&e.jsxs("div",{className:"mt-3 p-4 bg-white/50 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô:"}),t.preliminaryRoute&&e.jsx("span",{className:"text-xs bg-indigo-50 text-indigo-700 px-2 py-1 rounded font-bold border border-indigo-100",children:t.preliminaryRoute})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg text-white font-bold text-center text-sm shadow-md border ${t.preliminaryDecision==="Return"?"bg-blue-600 border-blue-700":t.preliminaryDecision==="Sell"?"bg-green-600 border-green-700":t.preliminaryDecision==="Scrap"?"bg-red-600 border-red-700":t.preliminaryDecision==="Internal"?"bg-amber-500 border-amber-600":t.preliminaryDecision==="Claim"?"bg-orange-500 border-orange-600":"bg-slate-500 border-slate-600"}`,children:t.preliminaryDecision==="Return"?"üöö ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤":t.preliminaryDecision==="Sell"?"üíµ ‡∏Ç‡∏≤‡∏¢":t.preliminaryDecision==="Scrap"?"üóëÔ∏è ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢":t.preliminaryDecision==="Internal"?"üè† ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô":t.preliminaryDecision==="Claim"?"üìÑ ‡πÄ‡∏Ñ‡∏•‡∏°":t.preliminaryDecision})]})]}),e.jsx("div",{className:"bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-xs font-bold",children:"In Progress"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3 uppercase tracking-wider",children:"1. ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏†‡∏≤‡∏û (Grading)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-bold text-green-600 bg-green-50 p-1.5 rounded w-fit mb-2",children:"Good (‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["New","BoxDamage","WetBox","LabelDefect","Other"].map(l=>e.jsx("button",{onClick:()=>ce(l==="Other"?"Other":l,"Good"),className:`py-2 px-3 rounded-lg border text-sm font-medium transition-all ${t.condition===l||l==="Other"&&u==="Good"?"bg-green-600 text-white border-green-600 shadow-md":"bg-white border-slate-200 text-slate-600 hover:border-green-300 hover:text-green-600"}`,children:ft[l]||"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)"},l))}),u==="Good"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...",className:"w-full mt-2 p-2 border rounded-lg text-sm focus:ring-1 focus:ring-green-500 outline-none",value:Object.keys(ft).includes(t.condition||"")?"":t.condition,onChange:l=>x({...t,condition:l.target.value}),autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-bold text-red-600 bg-red-50 p-1.5 rounded w-fit mb-2",children:"Bad (‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Expired","Damaged","Defective","Other"].map(l=>e.jsx("button",{onClick:()=>ce(l==="Other"?"Other":l,"Bad"),className:`py-2 px-3 rounded-lg border text-sm font-medium transition-all ${t.condition===l||l==="Other"&&u==="Bad"?"bg-red-600 text-white border-red-600 shadow-md":"bg-white border-slate-200 text-slate-600 hover:border-red-300 hover:text-red-600"}`,children:ft[l]||"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)"},l))}),u==="Bad"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢...",className:"w-full mt-2 p-2 border rounded-lg text-sm focus:ring-1 focus:ring-red-500 outline-none",value:Object.keys(ft).includes(t.condition||"")?"":t.condition,onChange:l=>x({...t,condition:l.target.value}),autoFocus:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3 uppercase tracking-wider",children:"2. ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:Object.keys(it).map(l=>e.jsxs("button",{onClick:()=>{o(l),c(!1)},className:`flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${C===l?"bg-blue-600 text-white border-blue-700 shadow-md":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[e.jsx(Ne,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-xs font-bold",children:it[l]})]},l))}),C==="RTV"&&e.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-100 animate-fade-in",children:[e.jsx("label",{className:"block text-xs font-bold text-amber-800 mb-2",children:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Select Route)"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[qe.map(l=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-3 py-2 rounded border border-amber-200 text-sm text-slate-700 hover:border-amber-400",children:[e.jsx("input",{type:"radio","aria-label":l,title:l,name:"route",value:l,checked:v.route===l,onChange:L=>{be("route",L.target.value),c(!1)},className:"text-amber-500 focus:ring-amber-500"}),l]},l)),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-3 py-2 rounded border border-amber-200 text-sm text-slate-700 hover:border-amber-400",children:[e.jsx("input",{type:"radio","aria-label":"‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",name:"route",checked:f,onChange:()=>{c(!0),be("route","")},className:"text-amber-500 focus:ring-amber-500"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]})]}),f&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",className:"w-full mt-2 p-2 border rounded-lg text-sm focus:ring-1 focus:ring-amber-500 outline-none",value:v.route,onChange:l=>be("route",l.target.value),autoFocus:!0})]}),C==="Restock"&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 animate-fade-in grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-800 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠ (Buyer Name)"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠",className:"w-full p-2 border border-green-200 rounded text-sm focus:ring-1 focus:ring-green-500 outline-none",value:v.sellerName,onChange:l=>be("sellerName",l.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-800 mb-1",children:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",title:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",className:"w-full p-2 border border-green-200 rounded text-sm focus:ring-1 focus:ring-green-500 outline-none",value:v.contactPhone,onChange:l=>be("contactPhone",l.target.value)})]})]}),C==="InternalUse"&&e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 animate-fade-in",children:[e.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ (Department/User)"}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ",className:"w-full p-2 border border-purple-200 rounded text-sm focus:ring-1 focus:ring-purple-500 outline-none",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏ú‡∏ô‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ, ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ä‡∏≤‡∏¢",value:v.internalUseDetail,onChange:l=>be("internalUseDetail",l.target.value)})]}),C==="Claim"&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 animate-fade-in space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (Insurance Company)"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô",className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:v.claimCompany,onChange:l=>be("claimCompany",l.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô"}),e.jsx("input",{type:"text","aria-label":"‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô",title:"‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô",className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:v.claimCoordinator,onChange:l=>be("claimCoordinator",l.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£",title:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£",className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:v.claimPhone,onChange:l=>be("claimPhone",l.target.value)})]})]})]})]}),e.jsxs("div",{className:"border-t border-slate-100 pt-4 mb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("button",{onClick:ke,className:"text-sm font-bold text-blue-600 flex items-center gap-2 hover:bg-blue-50 px-3 py-1.5 rounded-lg transition-colors",children:[e.jsx(kt,{className:"w-4 h-4"})," ",i?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Cancel Split)":"‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Split Item)"]})}),i&&e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 animate-fade-in",children:[e.jsxs("h5",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(kt,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å (Split Details)"]}),e.jsxs("div",{className:"mb-4 bg-blue-50/50 p-3 rounded-lg border border-blue-100",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:l=>{h(l.target.checked),l.target.checked?w(12):(w(1),D(""))},className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢ (Unit Breakdown)"})]}),R&&e.jsxs("div",{className:"animate-fade-in pl-6 mt-2 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏ô 1 ‡πÅ‡∏û‡πá‡∏Ñ/‡∏•‡∏±‡∏á (Qty per Pack)"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏ô 1 ‡πÅ‡∏û‡πá‡∏Ñ",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏ô 1 ‡πÅ‡∏û‡πá‡∏Ñ",min:"1",value:O,onChange:l=>w(parseInt(l.target.value)||1),className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500"}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:"‡πÄ‡∏ä‡πà‡∏ô 1 ‡∏•‡∏±‡∏á ‡∏°‡∏µ 12 ‡∏ä‡∏¥‡πâ‡∏ô ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢ (New Unit Name)"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡∏ß‡∏î, ‡∏ä‡∏¥‡πâ‡∏ô, ‡∏≠‡∏±‡∏ô",value:j,onChange:l=>D(l.target.value),className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"bg-white p-2 rounded border border-blue-100 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô (Price/Unit):"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[((t.pricePerUnit||(t.priceBill||0)/(t.quantity||1))/O).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ‡∏ö‡∏≤‡∏ó"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(()=>{const l=t.pricePerUnit||(t.priceBill||0)/(t.quantity||1),L=R&&O>1?l/O:l,H=R?t.quantity*O:t.quantity,te=H-S;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-green-600",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å (Main Item)"}),e.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["‡∏ø",(te*L).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"text-sm text-slate-500 mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (",R?j||"Unit":t.unit,"s):"]}),e.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[te,e.jsx("span",{className:"text-sm font-normal text-slate-400 ml-1",children:R?j||"Unit":t.unit})]}),e.jsxs("div",{className:"space-y-3 mt-3 pt-3 border-t border-slate-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Condition)"}),e.jsxs("select",{"aria-label":"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",value:t.condition||"",onChange:X=>ce(X.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm text-slate-700",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏†‡∏≤‡∏û --"}),Object.entries(ft).map(([X,he])=>e.jsx("option",{value:X,children:he},X)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)"}),e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à",value:C||"",onChange:X=>o(X.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm text-slate-700",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à --"}),Object.entries(it).map(([X,he])=>e.jsx("option",{value:X,children:he},X))]})]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-red-600",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ (New Item)"}),e.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["‡∏ø",(S*L).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏°‡∏≤ (",R?j||"Unit":t.unit,")"]}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏°‡∏≤",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏°‡∏≤",min:"1",max:H-1,value:S,onChange:X=>I(parseInt(X.target.value)||0),className:"w-full p-2 border border-slate-300 rounded text-sm font-bold text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Condition)"}),e.jsxs("select",{"aria-label":"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",value:T,onChange:X=>$(X.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm",children:[Object.entries(ft).map(([X,he])=>e.jsx("option",{value:X,children:he},X)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]})]}),e.jsx("div",{className:"text-[10px] text-orange-500 bg-orange-50 p-2 rounded mt-3",children:'* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà "‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition) ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'}),e.jsxs("div",{className:"pt-2 border-t border-blue-100 mt-2",children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (Immediate Disposition)"}),e.jsxs("select",{"aria-label":"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ",title:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ",value:B||"",onChange:X=>V(X.target.value?X.target.value:null),className:"w-full p-2 border border-slate-300 rounded text-sm text-slate-700 bg-white",children:[e.jsx("option",{value:"",children:"-- ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏¥‡∏ß QC (Default) --"}),Object.entries(it).map(([X,he])=>e.jsx("option",{value:X,children:he},X))]}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:B?e.jsx("span",{className:"text-green-600 font-bold",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏õ‡∏ó‡∏µ‡πà Step 4 (Docs) ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"}):"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"})]})]})]})})()})]})]}),e.jsx("div",{className:"mt-4 flex justify-end pt-6 border-t border-slate-200",children:i?e.jsx("button",{onClick:J,"aria-label":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",disabled:N||S<=0||S>=(R?t.quantity*O:t.quantity)||!C,className:"px-8 py-3 rounded-lg bg-orange-600 text-white font-bold hover:bg-orange-700 shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-wait",children:N?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•..."}):e.jsxs(e.Fragment,{children:[e.jsx(kt,{className:"w-5 h-5"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Confirm Split)"]})}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:ye,"aria-label":"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",title:"‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Step 3)",disabled:N,className:"px-6 py-3 rounded-lg bg-white border border-slate-300 text-slate-600 font-bold hover:bg-red-50 hover:text-red-600 hover:border-red-200 shadow-sm flex items-center gap-2 mr-auto disabled:opacity-50",children:[e.jsx(Ja,{className:"w-5 h-5"})," ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)"]}),e.jsx("button",{onClick:De,"aria-label":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Confirm QC)",disabled:N||!C||!(t!=null&&t.condition)||t.condition==="Unknown",className:"px-8 py-3 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-wait",children:N?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å..."}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-5 h-5"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Confirm QC)"]})})]})})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx(Yt,{className:"w-16 h-16 mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-bold",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß"}),e.jsx("p",{className:"text-sm",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"})]})})]})},Pl=({onConfirm:s})=>{const{items:r,updateReturnRecord:d,ncrReports:g}=Ie(),[t,x]=k.useState(new Set),[u,a]=k.useState(!1),[C,o]=k.useState(!1),[v,n]=k.useState(!1),[f,c]=k.useState(null),[N,b]=k.useState(""),[P,p]=k.useState(!1),[i,m]=k.useState(0),[R,h]=k.useState(""),[O,w]=k.useState(""),[j,D]=k.useState(""),[S,I]=k.useState("Company"),[T,$]=k.useState({driverName:"",plateNumber:"",transportCompany:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"}),[B,V]=k.useState("Hub"),[G,de]=k.useState(""),[re,pe]=k.useState(""),[Se,E]=k.useState("All"),[Q,U]=k.useState(""),ee=k.useMemo(()=>r.filter(F=>{if(F.ncrNumber){const _=g.find(M=>M.ncrNo===F.ncrNumber);if(_&&_.status==="Canceled")return!1}return F.documentType==="NCR"||!!F.ncrNumber&&F.documentType!=="LOGISTICS"?F.status==="Requested"||F.status==="COL_JobAccepted":F.status==="COL_Consolidated"}),[r,g]),le=k.useMemo(()=>Array.from(new Set(ee.map(F=>F.branch))).filter(Boolean),[ee]),ce=k.useMemo(()=>ee.filter(F=>{var ne,Z,se,ue,ve,Be;const y=Se==="All"||F.branch===Se,_=Q.toLowerCase().trim(),M=!_||((ne=F.refNo)==null?void 0:ne.toLowerCase().includes(_))||((Z=F.ncrNumber)==null?void 0:Z.toLowerCase().includes(_))||((se=F.documentNo)==null?void 0:se.toLowerCase().includes(_))||((ue=F.collectionOrderId)==null?void 0:ue.toLowerCase().includes(_))||((ve=F.productName)==null?void 0:ve.toLowerCase().includes(_))||((Be=F.productCode)==null?void 0:Be.toLowerCase().includes(_));return y&&M}),[ee,Se,Q]),[be,ke]=k.useState(new Set),ye=k.useMemo(()=>{const F={};return ce.forEach(y=>{const _=!!y.collectionOrderId||y.status==="COL_Consolidated"||y.id&&y.id.startsWith("COL"),M=y.refNo&&y.refNo!=="-"&&!y.refNo.startsWith("RT-")?y.refNo:"",ne=_?y.collectionOrderId||`COL-${y.id}`:M||y.ncrNumber||y.id;F[ne]||(F[ne]=[]),F[ne].push(y)}),Object.entries(F).map(([y,_])=>({key:y,items:_,rep:_[0]}))},[ce]),De=F=>{ke(y=>{const _=new Set(y);return _.has(F)?_.delete(F):_.add(F),_})},J=F=>{const y=F.map(ne=>ne.id),_=y.every(ne=>t.has(ne)),M=new Set(t);_?y.forEach(ne=>M.delete(ne)):y.forEach(ne=>M.add(ne)),x(M)},l=()=>{t.size===ce.length&&ce.length>0?x(new Set):x(new Set(ce.map(F=>F.id)))},L=F=>{c(F),b(""),p(!1),m(0),h(""),w(""),D(""),n(!0)},H=async()=>{if(!P&&(!N||N==="Other")){await A.fire({icon:"warning",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",text:"‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}if(!C){o(!0);try{await d(f,{status:P?"Settled_OnField":void 0,preliminaryDecision:"Return",preliminaryRoute:P?"":N,isFieldSettled:P,fieldSettlementAmount:i,fieldSettlementEvidence:R,fieldSettlementName:O,fieldSettlementPosition:j,disposition:P?"RTV":void 0}),await A.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1}),n(!1),c(null)}finally{o(!1)}}},te=()=>{if(t.size===0){A.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}a(!0)},X=async()=>{if(S==="Company"){if(!T.driverName||!T.plateNumber){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡πÅ‡∏•‡∏∞‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}}else if(S==="3PL"){if(!T.transportCompany){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á (3PL)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}if(!T.driverName||!T.plateNumber){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡πÅ‡∏•‡∏∞‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 3PL",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}}else if(S==="Other"&&!T.transportCompany){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á (‡∏≠‡∏∑‡πà‡∏ô‡πÜ)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}let F="";if(B==="Direct"){if(!G){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}if(G==="Other"&&!re){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (‡∏≠‡∏∑‡πà‡∏ô‡πÜ)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}F=G==="Other"?re:G}if(s){o(!0);try{const y={...T,destination:B==="Direct"?F:void 0};await s(Array.from(t),B,y),a(!1),A.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1})}finally{o(!1)}}},he=ce.length>0&&ce.every(F=>t.has(F.id));return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in relative",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-6 h-6 text-indigo-600"})," 2. ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡∏ô‡∏™‡πà‡∏á (Consolidation & Logistics)"]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6 flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsxs("select",{"aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤",value:Se,onChange:F=>E(F.target.value),className:"bg-transparent text-sm font-medium outline-none text-slate-800",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤"}),le.map(F=>e.jsx("option",{value:F,children:F},F))]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200 min-w-[200px]",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600 truncate",children:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏¥‡∏•:"}),e.jsx("input",{type:"text",placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / NCR / ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / R...",value:Q,onChange:F=>U(F.target.value),className:"bg-transparent text-sm font-medium outline-none text-slate-800 w-full"}),Q&&e.jsx("button",{onClick:()=>U(""),"aria-label":"‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",title:"‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",className:"text-slate-400 hover:text-slate-600",children:e.jsx(fe,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£: ",e.jsx("span",{className:"font-bold text-indigo-600",children:ce.length})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{"aria-label":he?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",title:he?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",onClick:l,className:"px-4 py-2 text-sm bg-white border border-slate-300 rounded-lg hover:bg-slate-50 text-slate-600 font-bold transition-colors",children:he?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),e.jsxs("button",{onClick:te,"aria-label":`‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ ${t.size} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,title:`‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ ${t.size} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,disabled:t.size===0,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold text-sm hover:bg-indigo-700 shadow-md flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[e.jsx(Ne,{className:"w-4 h-4"})," ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (",t.size,")"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:ye.length===0?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50",children:[e.jsx(st,{className:"w-16 h-16 mb-4 text-slate-300"}),e.jsx("p",{className:"font-medium text-lg",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á"}),e.jsx("p",{className:"text-sm mt-1",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:ye.map(F=>{const{key:y,items:_,rep:M}=F,ne=_.every(we=>t.has(we.id)),Z=be.has(y),se=!!M.collectionOrderId||M.status==="COL_Consolidated"||M.id&&M.id.startsWith("COL"),ue=!se&&(M.documentType==="NCR"||!!M.ncrNumber),ve=we=>!!we&&we.startsWith("RT-"),Be=M.refNo&&M.refNo!=="-"&&!ve(M.refNo)?M.refNo:"",Qe=M.documentNo&&!ve(M.documentNo)?M.documentNo:"",Me=se?Qe||M.collectionOrderId||"-":Be||M.ncrNumber||"-";return e.jsxs("div",{onClick:()=>J(_),className:`group relative p-4 rounded-xl border transition-all cursor-pointer shadow-sm hover:shadow-md 
                                        ${ne?"bg-indigo-50 border-indigo-400 ring-2 ring-indigo-200":"bg-white border-slate-200 hover:border-indigo-300"}
                                    `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[se&&e.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full font-bold border border-orange-200",children:"COL"}),ue&&e.jsx("span",{className:"text-[10px] bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-bold border border-indigo-200",children:"NCR"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:"text-xs font-mono font-bold text-slate-700 bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200",children:Me}),ue&&M.ncrNumber&&M.ncrNumber!==Me&&e.jsxs("span",{className:"text-[10px] font-mono text-red-500 font-bold bg-red-50 px-1 rounded border border-red-100",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR: ",M.ncrNumber]}),ue&&M.refNo&&M.refNo!=="-"&&M.refNo!==Me&&e.jsxs("span",{className:"text-[10px] font-mono text-blue-600 font-bold bg-blue-50 px-1 rounded border border-blue-200",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• (Ref No.): ",M.refNo]}),se&&M.documentNo&&M.documentNo!==Me&&e.jsxs("span",{className:"text-[10px] font-mono text-emerald-600 font-bold bg-emerald-50 px-1 rounded border border-emerald-100",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R): ",M.documentNo]}),se&&M.collectionOrderId&&M.collectionOrderId!==Me&&e.jsxs("span",{className:"text-[10px] font-mono text-indigo-600 font-bold bg-indigo-50 px-1 rounded border border-indigo-100",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL: ",M.collectionOrderId]})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors 
                                            ${ne?"bg-indigo-600 border-indigo-600":"bg-transparent border-slate-300 group-hover:border-indigo-400"}
                                        `,children:ne&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-2 line-clamp-2 min-h-[1.25rem]",title:M.productName,children:M.productName||"Unknown Product"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsxs("span",{className:"font-bold text-slate-700",children:[M.quantity," ",M.unit]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsx("span",{className:"text-slate-700",children:M.branch})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("span",{className:"text-slate-700",children:M.dateRequested||M.date})]}),_.length>1&&e.jsxs("div",{onClick:we=>we.stopPropagation(),className:"mt-2",children:[e.jsxs("button",{onClick:()=>De(y),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                        ${Z?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-slate-100"}`,children:[Z?e.jsx(et,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"}),Z?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${_.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),Z&&e.jsx("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:_.slice(1).map(we=>e.jsxs("div",{className:"pl-2 border-l-2 border-indigo-200 text-xs",children:[e.jsx("div",{className:"font-bold text-slate-700 truncate",title:we.productName,children:we.productName}),e.jsxs("div",{className:"text-slate-500 flex justify-between",children:[e.jsxs("span",{children:["Qty: ",e.jsxs("b",{children:[we.quantity," ",we.unit]})]}),e.jsx("span",{children:we.branch})]})]},we.id))})]}),se&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-slate-500",children:"‡πÄ‡∏•‡∏Ç R:"}),e.jsx("span",{className:"font-mono font-bold text-emerald-600 bg-emerald-50 px-1.5 rounded border border-emerald-100",children:M.documentNo||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"}),e.jsx("span",{className:"text-slate-700 truncate max-w-[120px]",title:M.destinationCustomer,children:M.destinationCustomer||"-"})]})]})]}),M.preliminaryDecision&&e.jsx("div",{className:"mt-3 pt-2 border-t border-slate-100",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-500 font-bold",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô:"}),M.preliminaryRoute&&e.jsx("span",{className:"text-[10px] text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded font-bold border border-indigo-100",children:M.preliminaryRoute})]}),e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-center font-bold text-xs shadow-sm border ${M.preliminaryDecision==="Return"?"bg-blue-600 text-white border-blue-700":M.preliminaryDecision==="Sell"?"bg-green-600 text-white border-green-700":M.preliminaryDecision==="Scrap"?"bg-red-600 text-white border-red-700":M.preliminaryDecision==="Internal"?"bg-amber-500 text-white border-amber-600":M.preliminaryDecision==="Claim"?"bg-orange-500 text-white border-orange-600":"bg-slate-500 text-white border-slate-600"}`,children:M.preliminaryDecision==="Return"?"üöö ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤":M.preliminaryDecision==="Sell"?"üíµ ‡∏Ç‡∏≤‡∏¢":M.preliminaryDecision==="Scrap"?"üóëÔ∏è ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢":M.preliminaryDecision==="Internal"?"üè† ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô":M.preliminaryDecision==="Claim"?"üìÑ ‡πÄ‡∏Ñ‡∏•‡∏°":M.preliminaryDecision})]})}),!M.preliminaryDecision&&e.jsx("div",{className:"mt-3 pt-2 border-t border-dashed border-amber-200 bg-amber-50/30",children:e.jsxs("button",{onClick:we=>{we.stopPropagation(),L(M.id)},className:"w-full py-2 px-3 text-xs font-bold text-amber-700 hover:text-amber-800 hover:bg-amber-100 rounded transition-colors flex items-center justify-center gap-1.5",children:[e.jsx(ms,{className:"w-3.5 h-3.5"}),"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô"]})}),M.founder&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-100 text-[10px] text-slate-500 flex items-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3"})," ‡∏ú‡∏π‡πâ‡∏û‡∏ö: ",M.founder]})]},y)})})}),u&&xs.createPortal(e.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh] animate-slide-up",children:[e.jsxs("div",{className:"px-6 py-4 bg-white border-b border-slate-100 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-6 h-6 text-indigo-600"})," ‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:["‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ",t.size," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å"]})]}),e.jsx("button",{onClick:()=>a(!1),"aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(fe,{className:"w-6 h-6 text-slate-400"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-800 mb-2",children:"1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("label",{className:`cursor-pointer rounded-xl border p-4 transition-all ${S==="Company"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-700 mb-2",children:[e.jsx("input",{type:"radio","aria-label":"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó",title:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó",name:"transportType",checked:S==="Company",onChange:()=>{I("Company"),$({driverName:"",plateNumber:"",transportCompany:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"})},className:"text-indigo-600 focus:ring-indigo-500"}),"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",value:S==="Company"?T.driverName:"",onChange:F=>$({...T,driverName:F.target.value}),disabled:S!=="Company",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"}),e.jsx("input",{type:"text","aria-label":"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",title:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",placeholder:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",value:S==="Company"?T.plateNumber:"",onChange:F=>$({...T,plateNumber:F.target.value}),disabled:S!=="Company",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"})]})]}),e.jsxs("label",{className:`cursor-pointer rounded-xl border p-4 transition-all ${S==="3PL"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-700 mb-2",children:[e.jsx("input",{type:"radio","aria-label":"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏° (3PL)",title:"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏° (3PL)",name:"transportType",checked:S==="3PL",onChange:()=>{I("3PL"),$({driverName:"",plateNumber:"",transportCompany:""})},className:"text-indigo-600 focus:ring-indigo-500"}),"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏° (3PL)"]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á...",value:S==="3PL"?T.transportCompany:"",onChange:F=>$({...T,transportCompany:F.target.value}),disabled:S!=="3PL",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",value:S==="3PL"?T.driverName:"",onChange:F=>$({...T,driverName:F.target.value}),disabled:S!=="3PL",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"}),e.jsx("input",{type:"text","aria-label":"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",title:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",placeholder:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",value:S==="3PL"?T.plateNumber:"",onChange:F=>$({...T,plateNumber:F.target.value}),disabled:S!=="3PL",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"})]})]}),e.jsxs("label",{className:`cursor-pointer rounded-xl border p-4 transition-all ${S==="Other"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-700 mb-2",children:[e.jsx("input",{type:"radio","aria-label":"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",name:"transportType",checked:S==="Other",onChange:()=>{I("Other"),$({driverName:"",plateNumber:"",transportCompany:""})},className:"text-indigo-600 focus:ring-indigo-500"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:S==="Other"?T.transportCompany:"",onChange:F=>$({...T,transportCompany:F.target.value}),disabled:S!=="Other",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none mt-2"})]})]})]}),e.jsx("hr",{className:"border-slate-100"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-800 mb-2",children:"2. ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all ${B==="Hub"?"bg-indigo-50 border-indigo-500 shadow-sm ring-1 ring-indigo-200":"border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"radio","aria-label":"‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå",title:"‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå",name:"route",checked:B==="Hub",onChange:()=>V("Hub"),className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 text-base",children:"Hub ‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC) ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("label",{className:`flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all ${B==="Direct"?"bg-green-50 border-green-500 shadow-sm ring-1 ring-green-200":"border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"radio","aria-label":"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)",title:"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)",name:"route",checked:B==="Direct",onChange:()=>V("Direct"),className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 text-base",children:"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô Hub)"})]})]}),B==="Direct"&&e.jsxs("div",{className:"p-4 bg-green-50/50 rounded-xl border border-green-100 animate-fade-in",children:[e.jsx("div",{className:"text-sm font-bold text-green-800 mb-2",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"}),e.jsxs("div",{className:"space-y-2",children:[["‡∏™‡∏≤‡∏¢ 3","‡∏ã‡∏µ‡πÇ‡∏ô","‡∏ô‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏≠‡πÄ‡∏õ‡∏≠‡πÄ‡∏£‡∏ó"].map(F=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm hover:bg-green-100/50 p-1 rounded",children:[e.jsx("input",{type:"radio","aria-label":F,title:F,name:"directDest",value:F,checked:G===F,onChange:y=>de(y.target.value),className:"text-green-600"})," ",F]},F)),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm hover:bg-green-100/50 p-1 rounded",children:[e.jsx("input",{type:"radio","aria-label":"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô",title:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô",name:"directDest",value:"Other",checked:G==="Other",onChange:F=>de(F.target.value),className:"text-green-600"})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ",G==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",value:re,onChange:F=>pe(F.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á...",className:"flex-1 ml-2 p-1.5 text-xs border border-green-300 rounded focus:ring-1 focus:ring-green-500 outline-none bg-white",autoFocus:!0})]})]})]})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>a(!1),className:"px-5 py-2.5 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:X,disabled:C,className:`px-6 py-2.5 text-white font-bold rounded-lg shadow-md flex items-center gap-2 transition-all disabled:opacity-50 disabled:cursor-wait ${B==="Hub"?"bg-indigo-600 hover:bg-indigo-700":"bg-green-600 hover:bg-green-700"}`,children:C?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å..."}):B==="Hub"?e.jsxs(e.Fragment,{children:["‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô / ‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ",e.jsx(Ne,{className:"w-5 h-5"})]}):e.jsxs(e.Fragment,{children:["‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô / ‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ",e.jsx(Ke,{className:"w-5 h-5"})]})})]})]})}),document.body),v&&xs.createPortal(e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-indigo-50 to-blue-50",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ms,{className:"w-6 h-6 text-indigo-600"}),"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô"]}),e.jsx("button",{onClick:()=>n(!1),"aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",className:"text-slate-400 hover:text-slate-600",children:e.jsx(fe,{className:"w-6 h-6"})})]}),e.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${P?"bg-amber-50 border-amber-500 shadow-md":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P,onChange:F=>p(F.target.checked),className:"w-5 h-5 accent-amber-600"}),e.jsx("span",{className:`text-lg font-bold ${P?"text-amber-800":"text-slate-600"}`,children:"üí∞ ‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô / ‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Field Settlement)"})]}),e.jsx("p",{className:"text-xs text-slate-500 ml-8 mt-1",children:"‡∏ï‡∏¥‡πä‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏≤‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô Hub"}),P&&e.jsxs("div",{className:"mt-4 ml-8 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (‡∏ö.)"}),e.jsx("input",{type:"number",value:i||"",onChange:F=>m(Number(F.target.value)),className:"w-full p-3 border border-amber-300 rounded-lg text-sm font-bold focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (Ref.)"}),e.jsx("input",{type:"text",value:R,onChange:F=>h(F.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô / ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",value:O,onChange:F=>w(F.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",value:j,onChange:F=>D(F.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢"})]})]})]}),!P&&e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-indigo-50/30",children:[e.jsxs("div",{className:"bg-indigo-100 px-4 py-2 border-b border-indigo-200 font-bold text-indigo-800 flex items-center gap-2 text-sm",children:[e.jsx(Ne,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return Route)"]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsxs("div",{className:"p-3 bg-white rounded border border-indigo-100 text-sm",children:[e.jsxs("label",{className:"block font-bold mb-2",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[qe.map(F=>e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${N===F?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio","aria-label":F,title:F,name:"tempRoute",value:F,checked:N===F,onChange:y=>{b(y.target.value)},className:"hidden"}),F]},F)),e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${N==="Other"||N&&!qe.includes(N)?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio","aria-label":"‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",name:"tempRoute",value:"Other",checked:N==="Other"||N&&!qe.includes(N),onChange:()=>{b("Other")},className:"hidden"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]})]}),(N==="Other"||N&&!qe.includes(N))&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",value:N==="Other"?"":N,onChange:F=>b(F.target.value),className:"w-full mt-2 p-2 border rounded text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",autoFocus:!0})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>n(!1),className:"px-5 py-2.5 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:H,disabled:C,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md transition-all disabled:opacity-50 disabled:cursor-wait",children:C?"...":"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"})]})]})}),document.body)]})},Ll=()=>{const{items:s,updateReturnRecord:r,ncrReports:d,systemConfig:g}=Ie(),[t,x]=Y.useState(""),[u,a]=Y.useState(""),[C,o]=Y.useState(""),[v,n]=Y.useState(""),[f,c]=Y.useState(!1),N=Y.useMemo(()=>s.filter(w=>{if(w.ncrNumber){const j=d.find(D=>D.ncrNo===w.ncrNumber);if(j&&j.status==="Canceled")return!1}return w.status==="InTransitToHub"||w.status==="COL_InTransit"||w.status==="NCR_InTransit"}),[s,d]),b=async(w,j=[])=>{var T;if(f)return;const D=j&&j.length>1;let S=[w],I="SINGLE";if(D){const{isConfirmed:$,isDismissed:B}=await A.fire({title:"‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (Receive Options)",html:`
                    <div class="text-left">
                        <p class="mb-2">‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô <b>${j.length}</b> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                        <ul class="text-xs text-slate-500 mb-2 list-disc pl-4 bg-slate-50 p-2 rounded">
                            <li>‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£: ${w.documentNo||"-"}</li>
                            <li>NCR/COL: ${w.ncrNumber||w.collectionOrderId||"-"}</li>
                        </ul>
                        <p class="text-sm">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ <b>"‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°"</b> ‡∏´‡∏£‡∏∑‡∏≠ <b>"‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ"</b>?</p>
                    </div>
                `,icon:"question",showDenyButton:!0,showCancelButton:!0,confirmButtonText:`‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏° (${j.length})`,denyButtonText:"‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ",confirmButtonColor:"#f59e0b",denyButtonColor:"#3b82f6",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",reverseButtons:!0});if(B)return;$&&(S=j,I="GROUP")}else{const B=w.documentType==="NCR"||!!w.ncrNumber||w.status==="NCR_InTransit"?"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ NCR ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Hub ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC)?":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ Collection ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Hub (‡∏Ç‡πâ‡∏≤‡∏° QC ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)?";if(!(await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤",text:B,icon:"question",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"})).isConfirmed)return}c(!0);try{if(await Promise.all(S.map(async $=>{const V=$.documentType==="NCR"||!!$.ncrNumber||$.status==="NCR_InTransit"?"NCR_HubReceived":"COL_HubReceived";await r($.id,{status:V,dateReceived:new Date().toISOString().split("T")[0],dateHubReceived:new Date().toISOString().split("T")[0]})})),(T=g.telegram)!=null&&T.enabled&&g.telegram.chatId&&S.length>0){const $=S[0],B=Tt("üìç ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ HUB",$,S.length);at(g.telegram.botToken,g.telegram.chatId,B)}await A.fire({icon:"success",title:I==="GROUP"?`‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° ${S.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",timer:1500,showConfirmButton:!1})}catch($){console.error("Receive Error:",$),A.fire("Error","Failed to receive item","error")}finally{c(!1)}},P=async()=>{if(i.length===0)return;if((await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?",text:`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${i.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?`,icon:"warning",showCancelButton:!0,confirmButtonText:"‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Receive All)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){A.fire({title:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...",allowOutsideClick:!1,didOpen:()=>{A.showLoading()}});for(const j of i){const S=j.documentType==="NCR"||!!j.ncrNumber||j.status==="NCR_InTransit"?"NCR_HubReceived":"COL_HubReceived";await r(j.id,{status:S,dateReceived:new Date().toISOString().split("T")[0],dateHubReceived:new Date().toISOString().split("T")[0]})}await A.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}},p=Y.useMemo(()=>{const w=new Set(N.map(j=>j.branch).filter(Boolean));return Array.from(w).sort()},[N]),i=Y.useMemo(()=>N.filter(w=>{var $,B,V,G;const j=!t||w.branch===t,D=!u||(w.customerName||"").toLowerCase().includes(u.toLowerCase()),S=!C||(w.destinationCustomer||"").toLowerCase().includes(C.toLowerCase()),I=v.toLowerCase().trim(),T=!I||(($=w.refNo)==null?void 0:$.toLowerCase().includes(I))||((B=w.ncrNumber)==null?void 0:B.toLowerCase().includes(I))||((V=w.documentNo)==null?void 0:V.toLowerCase().includes(I))||((G=w.collectionOrderId)==null?void 0:G.toLowerCase().includes(I));return j&&D&&S&&T}),[N,t,u,C,v]),[m,R]=Y.useState(new Set),h=Y.useMemo(()=>{const w={};return i.forEach(j=>{const D=j.collectionOrderId||j.ncrNumber||j.documentNo||j.id;w[D]||(w[D]=[]),w[D].push(j)}),Object.entries(w).map(([j,D])=>({key:j,items:D,rep:D[0]}))},[i]),O=w=>{R(j=>{const D=new Set(j);return D.has(w)?D.delete(w):D.add(w),D})};return e.jsxs("div",{className:"h-full overflow-auto p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-amber-500"})," ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub (Received at Hub)"]}),i.length>0&&e.jsxs("button",{onClick:P,"aria-label":`‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${i.length})`,title:`‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${i.length})`,className:"w-full md:w-auto bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all flex justify-center",children:["‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (",i.length,")"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm mb-4 space-y-3 sticky top-0 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700",children:"‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á (Filters)"}),(t||u||C||v)&&e.jsx("button",{onClick:()=>{x(""),a(""),o(""),n("")},className:"text-xs text-blue-600 font-bold hover:underline",children:"‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsxs("select",{className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none","aria-label":"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",value:t,onChange:w=>x(w.target.value),children:[e.jsx("option",{value:"",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),p.map(w=>e.jsx("option",{value:w,children:w},w))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤...",value:u,onChange:w=>a(w.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none","aria-label":"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)",title:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á...",value:C,onChange:w=>o(w.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / Ref No."}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full p-2 pr-8 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref No.)",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref No.)",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏• / NCR / R...",value:v,onChange:w=>n(w.target.value)}),v&&e.jsx("button",{onClick:()=>n(""),"aria-label":"‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",title:"‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(fe,{className:"w-4 h-4"})})]})]})]})]}),i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-400 bg-white rounded-xl border border-slate-200",children:[e.jsx(Ya,{className:"w-12 h-12 mb-2 opacity-50"}),e.jsx("p",{children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏¢‡∏±‡∏á Hub"})]}):e.jsx("div",{className:"space-y-4",children:[...h].sort((w,j)=>(j.rep.ncrNumber||j.rep.id).localeCompare(w.rep.ncrNumber||w.rep.id)).map(w=>{const{key:j,items:D,rep:S}=w,I=m.has(j);return e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-9 gap-4 mb-4 border-b border-slate-100 pb-3 relative",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsxs("span",{className:"font-bold text-slate-800 flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3 text-slate-400"})," ",S.branch]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á"}),e.jsx("span",{className:"font-bold text-slate-800",children:S.dateRequested||S.date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"COL No"}),e.jsx("span",{className:"font-mono font-bold text-blue-600",children:S.collectionOrderId||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:S.documentNo||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"NCR No."}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:S.ncrNumber||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Neo Ref"}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:S.neoRefNo||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",title:S.customerName,children:S.customerName||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",title:S.founder,children:S.founder||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",title:S.destinationCustomer,children:S.destinationCustomer||"-"})]}),D.length>1&&e.jsx("div",{className:"absolute top-0 right-0 -mt-2 -mr-2",children:e.jsxs("span",{className:"bg-slate-800 text-white text-[10px] px-2 py-0.5 rounded-full flex items-center gap-1 shadow-sm",children:[e.jsx(xt,{className:"w-3 h-3"})," ",D.length]})})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-1",children:[S.refNo&&S.refNo!=="-"&&e.jsxs("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded font-mono font-bold",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref No.)",children:["Ref: ",S.refNo]}),S.ncrNumber&&e.jsxs("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded font-mono font-bold",title:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR",children:["NCR: ",S.ncrNumber]}),S.documentNo&&e.jsxs("span",{className:"bg-emerald-100 text-emerald-800 text-xs px-2 py-0.5 rounded font-mono font-bold",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)",children:["R: ",S.documentNo]}),S.collectionOrderId&&e.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs px-2 py-0.5 rounded font-mono font-bold",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL",children:S.collectionOrderId}),e.jsx("span",{className:"text-slate-600 font-mono font-bold",children:S.productCode})]}),e.jsx("div",{className:"font-bold text-slate-900 text-base mb-1 truncate",title:S.productName,children:S.productName}),S.problemDetail&&e.jsx("p",{className:"text-xs text-slate-500 truncate",children:S.problemDetail})]}),e.jsxs("div",{className:"text-center min-w-[80px] bg-white px-3 py-1 rounded border border-slate-200",children:[e.jsx("span",{className:"text-slate-400 text-[10px] block",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("span",{className:"font-bold text-lg text-blue-600",children:S.quantity})," ",e.jsx("span",{className:"text-xs text-slate-500",children:S.unit})]}),e.jsx("button",{onClick:()=>b(S,D),"aria-label":"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub",title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub",disabled:f,className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm flex items-center gap-2 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-wait",children:f?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö..."}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4"})," ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub"]})})]}),D.length>1&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("button",{onClick:()=>O(j),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                ${I?"bg-slate-100 text-slate-600 border-slate-200":"bg-slate-50 text-slate-600 border-slate-100 hover:bg-slate-100"}`,children:[I?e.jsx(et,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"}),I?"‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô":`‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô‡∏≠‡∏µ‡∏Å ${D.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),I&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 pt-2 border-t border-slate-100 animate-slide-down",children:D.slice(1).map(T=>e.jsxs("div",{className:"bg-slate-50/50 p-2 rounded border border-slate-100 flex flex-col md:flex-row gap-3 items-center ml-4 border-l-4 border-l-slate-300",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex gap-2 mb-0.5",children:e.jsx("span",{className:"text-[10px] font-mono text-slate-500",children:T.productCode})}),e.jsx("div",{className:"font-bold text-slate-700 text-sm truncate",title:T.productName,children:T.productName})]}),e.jsxs("div",{className:"text-center min-w-[60px]",children:[e.jsx("span",{className:"font-bold text-slate-600",children:T.quantity})," ",e.jsx("span",{className:"text-[10px] text-slate-400",children:T.unit})]}),e.jsx("button",{onClick:()=>b(T,[]),disabled:f,className:"px-3 py-1 bg-amber-100 text-amber-700 text-xs font-bold rounded hover:bg-amber-200 disabled:opacity-50",children:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"})]},T.id))})]})]},j)})})]})},St=({title:s,status:r,icon:d,color:g,items:t,onPrintClick:x,onItemClick:u,onSplitClick:a,onUndoClick:C,overrideFilter:o})=>{const v=k.useMemo(()=>o?t:t.filter(p=>p.disposition===r&&(r==="RTV"?!p.documentNo:!0)),[t,r,o]),n=k.useMemo(()=>{const p={};return v.forEach(i=>{const m=j=>j?j.trim().replace(/\s+/g,"").toLowerCase():"",R=m(i.documentNo),h=m(i.collectionOrderId),O=m(i.ncrNumber),w=R||h||O||i.id;p[w]||(p[w]=[]),p[w].push(i)}),Object.entries(p).map(([i,m])=>({key:i,items:m,rep:m[0]})).sort((i,m)=>(m.rep.date||"").localeCompare(i.rep.date||""))},[v]),[f,c]=k.useState(new Set),N=p=>{c(i=>{const m=new Set(i);return m.has(p)?m.delete(p):m.add(p),m})},b=g.replace("bg-","border-").replace("500","200"),P=(p,i=!1)=>{var m;return e.jsxs("div",{onClick:()=>u&&u(p),draggable:!i,className:`bg-white p-3 rounded-lg border cursor-pointer hover:shadow-md transition-all group relative
                ${i?"border-l-4 border-l-slate-300 ml-4 mt-2":"shadow-sm border-slate-200 hover:ring-2 hover:ring-blue-400"}
            `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1 mr-2",children:[e.jsx("span",{className:"font-bold text-slate-700 text-sm line-clamp-1",children:p.productName}),p.parentId&&e.jsx("div",{className:"flex items-center gap-1 mt-0.5",children:e.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-50 text-blue-600 border border-blue-100",children:[e.jsx(Xa,{className:"w-3 h-3 mr-1"}),"‡πÅ‡∏¢‡∏Å‡∏°‡∏≤"]})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[C&&e.jsx("button",{onClick:R=>{R.stopPropagation(),C(p)},className:"p-1 rounded hover:bg-red-50 text-slate-400 hover:text-red-600 transition-colors","aria-label":"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Reverse)",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Reverse Status)",children:e.jsx(Ue,{className:"w-3 h-3"})}),a&&e.jsx("button",{onClick:R=>{R.stopPropagation(),a(p)},className:"p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-blue-600 transition-colors","aria-label":`‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item) - ${p.quantity} ${p.unit}`,title:`‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item) - ${p.quantity} ${p.unit}`,children:e.jsx(kt,{className:"w-3 h-3"})}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${p.condition==="New"?"bg-green-50 text-green-600 border-green-100":"bg-red-50 text-red-600 border-red-100"}`,children:p.condition})]})]}),e.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mt-2 border-t pt-2 border-slate-100",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("span",{className:"font-bold text-slate-700 truncate",children:p.branch})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á"}),e.jsx("span",{className:"font-bold text-slate-700 truncate",children:p.date})]})]}),(p.neoRefNo||p.ncrNumber||p.collectionOrderId||p.documentNo)&&e.jsxs("div",{className:"grid grid-cols-2 gap-1 mt-1",children:[p.documentNo&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-emerald-600 font-bold",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("span",{className:"font-mono text-xs text-emerald-700 bg-emerald-50 px-1 rounded w-fit truncate",title:p.documentNo,children:p.documentNo})]}),p.collectionOrderId&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-indigo-600 font-bold",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL"}),e.jsx("span",{className:"font-mono text-xs text-indigo-700 bg-indigo-50 px-1 rounded w-fit truncate",title:p.collectionOrderId,children:p.collectionOrderId})]}),p.refNo&&p.refNo!=="-"&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-blue-600 font-bold",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• (Ref No.)"}),e.jsx("span",{className:"font-bold text-blue-600 truncate",title:p.refNo,children:p.refNo})]}),p.ncrNumber&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-red-500 font-bold",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR"}),e.jsx("span",{className:"font-bold text-red-600 truncate",title:p.ncrNumber,children:p.ncrNumber})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("span",{className:"font-medium text-slate-700 truncate",title:p.customerName,children:p.customerName||"-"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)"}),e.jsx("span",{className:"font-medium text-slate-700 truncate",title:p.destinationCustomer,children:p.destinationCustomer||"-"})]}),e.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-1.5 rounded mt-1",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsxs("span",{className:"font-bold text-slate-800 text-sm",children:[p.quantity," ",p.unit]})]}),r==="RTV"&&p.destinationCustomer&&e.jsxs("div",{className:"text-[10px] text-amber-600 bg-amber-50 p-1 rounded mt-1",children:["Route: ",p.destinationCustomer]}),p.isFieldSettled&&e.jsxs("div",{className:"mt-2 p-2 bg-amber-50 border border-amber-200 rounded-lg shadow-sm border-l-4 border-l-amber-500",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-amber-800 uppercase tracking-tighter",children:"üí∞ ‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô (Settled)"}),e.jsxs("span",{className:"text-sm font-black text-amber-900 underline decoration-amber-300 decoration-2",children:[(m=p.fieldSettlementAmount)==null?void 0:m.toLocaleString()," ‡∏ö."]})]}),p.fieldSettlementEvidence&&e.jsxs("div",{className:"text-[10px] text-amber-700 font-medium truncate italic bg-white/50 px-1 rounded",children:["Ref: ",p.fieldSettlementEvidence]}),(p.fieldSettlementName||p.fieldSettlementPosition)&&e.jsxs("div",{className:"mt-1 flex flex-col border-t border-amber-200/50 pt-1 text-[9px] text-amber-900/70 font-bold",children:[e.jsxs("span",{children:["üë§ ",p.fieldSettlementName||"-"]}),p.fieldSettlementPosition&&e.jsxs("span",{className:"text-[8px] font-normal opacity-75 ml-4",children:["(",p.fieldSettlementPosition,")"]})]})]}),p.preliminaryDecision&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à:"}),p.preliminaryRoute&&e.jsx("span",{className:"text-[9px] bg-indigo-50 text-indigo-700 px-1.5 py-0.5 rounded border border-indigo-100 font-bold",children:p.preliminaryRoute})]}),e.jsx("span",{className:`px-2 py-1 rounded text-center font-bold text-[10px] text-white shadow-sm border ${p.preliminaryDecision==="Return"?"bg-blue-600 border-blue-700":p.preliminaryDecision==="Sell"?"bg-green-600 border-green-700":p.preliminaryDecision==="Scrap"?"bg-red-600 border-red-700":p.preliminaryDecision==="Internal"?"bg-amber-500 border-amber-600":p.preliminaryDecision==="Claim"?"bg-orange-500 border-orange-600":"bg-slate-500 border-slate-600"}`,children:p.preliminaryDecision==="Return"?"üöö ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤":p.preliminaryDecision==="Sell"?"üíµ ‡∏Ç‡∏≤‡∏¢":p.preliminaryDecision==="Scrap"?"üóëÔ∏è ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢":p.preliminaryDecision==="Internal"?"üè† ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô":p.preliminaryDecision==="Claim"?"üìÑ ‡πÄ‡∏Ñ‡∏•‡∏°":p.preliminaryDecision})]})]})]},p.id)};return e.jsxs("div",{className:"min-w-[300px] bg-slate-100 rounded-xl p-4 flex flex-col h-full border border-slate-200",children:[e.jsxs("div",{className:`font-bold text-slate-700 mb-4 flex justify-between items-center pb-2 border-b-2 ${b}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${g} text-white`,children:e.jsx(d,{className:"w-4 h-4"})}),e.jsx("span",{children:s})]}),e.jsx("span",{className:"bg-white px-2 py-0.5 rounded-full text-xs border shadow-sm",children:v.length})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:n.map(p=>{const i=f.has(p.key);return p.items.length>1?e.jsxs("div",{className:"bg-slate-200/50 p-1.5 rounded-xl border border-slate-300",children:[e.jsxs("div",{className:"px-2 mb-1.5 flex justify-between items-center",children:[e.jsxs("span",{className:"text-[10px] font-bold text-slate-600 truncate max-w-[70%]",children:[p.items.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ",p.rep.productName]}),p.items.some(R=>R.productCode!==p.rep.productCode)&&e.jsx("span",{className:"text-[9px] bg-white px-1.5 py-0.5 rounded border border-slate-200 text-slate-400",children:"‡∏Ñ‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),P(p.rep),e.jsxs("button",{onClick:()=>N(p.key),className:`flex items-center justify-center gap-2 w-full py-2 mt-1 rounded-lg text-xs font-bold transition-all
                                    ${i?"bg-slate-200 text-slate-600":"bg-blue-100 text-blue-700 hover:bg-blue-200"}
                                `,children:[i?e.jsx(et,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"}),i?"‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô":`‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° (${p.items.length-1})`]}),i&&e.jsx("div",{className:"mt-2 space-y-2 pl-2 border-l-2 border-slate-300 animate-slide-down",children:p.items.slice(1).map(R=>P(R,!0))})]},p.key):P(p.rep)})}),v.length>0&&e.jsxs("button",{onClick:()=>x(r,v),"aria-label":`‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (${v.length})`,className:"mt-4 w-full py-2 bg-white border border-slate-300 rounded-lg text-sm font-bold text-slate-600 hover:bg-slate-50 hover:text-blue-600 flex items-center justify-center gap-2 transition-colors",children:[e.jsx(Ke,{className:"w-4 h-4"})," ‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (",v.length,")"]})]})},$l=({onPrintDocs:s})=>{const{items:r,updateReturnRecord:d,ncrReports:g}=Ie(),[t,x]=Y.useState("NCR"),u=Y.useMemo(()=>r.filter(h=>{if(h.ncrNumber){const j=g.find(D=>D.ncrNo===h.ncrNumber);if(j&&j.status==="Canceled")return!1}const O=h.documentType==="NCR"||!!h.ncrNumber||h.status.startsWith("NCR_");return O?O?h.status==="NCR_QCCompleted"||h.status==="QCCompleted"||h.status==="Settled_OnField":!1:h.status==="COL_HubReceived"||h.status==="ReceivedAtHub"||h.status==="HubReceived"||h.status==="QCCompleted"}),[r,g]),a=async(h,O)=>{s?s(h,O):console.error("onPrintDocs prop missing")},C=()=>{A.fire({icon:"info",title:"‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Under Construction)",text:"‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split) ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤",confirmButtonText:"‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö"})},o=async h=>{const O=h.documentType==="NCR"||!!h.ncrNumber||h.status.startsWith("NCR_");let w="",j="";if(O?(w="NCR_HubReceived",j='‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ "‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC)"'):(w="COL_InTransit",j='‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ "‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub"'),h.status==="QCCompleted"&&(w="ReceivedAtHub"),h.status==="HubReceived"&&(w="InTransitToHub"),(await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",text:`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£${j} ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,icon:"warning",showCancelButton:!0,confirmButtonText:"‡πÉ‡∏ä‡πà, ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#f59e0b"})).isConfirmed)try{await d(h.id,{status:w}),await A.fire({icon:"success",title:"‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:"‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1})}catch(S){console.error("Undo Error:",S),A.fire("Error","Failed to undo action","error")}},v=h=>h.ncrNumber||h.id.startsWith("NCR")||h.documentType==="NCR",n=h=>!v(h),f=Y.useMemo(()=>u.filter(v),[u]),c=Y.useMemo(()=>u.filter(n),[u]),b=(t==="NCR"?f:c).map(h=>({...h,disposition:h.disposition||"RTV"})),P=b.filter(h=>h.disposition==="RTV"),p=b.filter(h=>h.disposition==="Restock"),i=b.filter(h=>h.disposition==="Claim"),m=b.filter(h=>h.disposition==="InternalUse"),R=b.filter(h=>h.disposition==="Recycle"||h.disposition==="Scrap");return e.jsxs("div",{className:"h-full flex flex-col p-4",children:[e.jsxs("div",{className:"flex gap-4 mb-4 border-b border-slate-200 pb-2",children:[e.jsxs("button",{onClick:()=>x("NCR"),className:`px-6 py-2 rounded-lg font-bold transition-all flex items-center gap-2 ${t==="NCR"?"bg-amber-100 text-amber-700 border border-amber-200 shadow-sm":"bg-white text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Vt,{className:"w-5 h-5"}),"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR (",f.length,")"]}),e.jsxs("button",{onClick:()=>x("COLLECTION"),className:`px-6 py-2 rounded-lg font-bold transition-all flex items-center gap-2 ${t==="COLLECTION"?"bg-teal-100 text-teal-700 border border-teal-200 shadow-sm":"bg-white text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Oe,{className:"w-5 h-5"}),"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Collection (",c.length,")"]})]}),e.jsxs("div",{className:"flex-1 overflow-x-auto flex gap-4",children:[e.jsx(St,{title:t==="NCR"?"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô NCR (RTV)":"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô Collection (RTV)",status:"RTV",icon:t==="NCR"?Vt:Oe,color:t==="NCR"?"bg-amber-600":"bg-teal-600",items:P,onPrintClick:a,onSplitClick:C,onUndoClick:o,overrideFilter:!0}),t==="NCR"&&e.jsxs(e.Fragment,{children:[e.jsx(St,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏¢ (Restock)",status:"Restock",icon:Ue,color:"bg-green-500",items:p,onPrintClick:a,onSplitClick:C,onUndoClick:o}),e.jsx(St,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",status:"Claim",icon:es,color:"bg-blue-500",items:i,onPrintClick:a,onSplitClick:C,onUndoClick:o}),e.jsx(St,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",status:"InternalUse",icon:us,color:"bg-purple-500",items:m,onPrintClick:a,onSplitClick:C,onUndoClick:o}),e.jsx(St,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",status:"Recycle",icon:$e,color:"bg-red-500",items:R,onPrintClick:a,onSplitClick:C,onUndoClick:o})]})]})]})},fs=({disposition:s})=>{if(!s||s==="Pending")return e.jsx("span",{className:"text-slate-400",children:"-"});const r={RTV:{color:"bg-amber-50 text-amber-700 border-amber-200",icon:Ne,label:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return)"},Restock:{color:"bg-green-50 text-green-700 border-green-200",icon:Ue,label:"‡∏Ç‡∏≤‡∏¢ (Sell)"},Recycle:{color:"bg-red-50 text-red-700 border-red-200",icon:$e,label:"‡∏ó‡∏¥‡πâ‡∏á (Scrap)"},InternalUse:{color:"bg-purple-50 text-purple-700 border-purple-200",icon:us,label:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô"},Claim:{color:"bg-blue-50 text-blue-700 border-blue-200",icon:es,label:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô"}}[s];if(!r)return e.jsxs("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] border border-slate-200 flex items-center gap-1",children:[e.jsx(Ze,{className:"w-3 h-3"})," ‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡πà‡∏≤"]});const d=r.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold border ${r.color}`,children:[e.jsx(d,{className:"w-3 h-3"})," ",r.label]})},Bl=()=>{const{items:s,updateReturnRecord:r,ncrReports:d,systemConfig:g}=Ie(),[t,x]=k.useState(!1),[u,a]=k.useState(new Set),[C,o]=k.useState("ALL"),[v,n]=k.useState(""),f=Y.useMemo(()=>s.filter(m=>{var w,j,D,S,I,T;if(m.ncrNumber){const $=d.find(B=>B.ncrNo===m.ncrNumber);if($&&$.status==="Canceled")return!1}if(!(m.status==="DocsCompleted"||m.status==="COL_Documented"||m.status==="NCR_Documented"||m.status==="DirectReturn"||m.status==="ReturnToSupplier"))return!1;const h=m.documentType==="NCR"||!!m.ncrNumber||m.id&&m.id.startsWith("NCR");if(C==="NCR"&&!h||C==="COL"&&h)return!1;const O=v.toLowerCase().trim();return!(O&&!(((w=m.refNo)==null?void 0:w.toLowerCase().includes(O))||((j=m.ncrNumber)==null?void 0:j.toLowerCase().includes(O))||((D=m.documentNo)==null?void 0:D.toLowerCase().includes(O))||((S=m.collectionOrderId)==null?void 0:S.toLowerCase().includes(O))||((I=m.productName)==null?void 0:I.toLowerCase().includes(O))||((T=m.productCode)==null?void 0:T.toLowerCase().includes(O))))}),[s,C,d,v]),c=Y.useMemo(()=>{const m={};return f.forEach(R=>{const h=S=>S?S.trim().replace(/\s+/g,"").toLowerCase():"",O=h(R.documentNo),w=h(R.collectionOrderId),j=h(R.ncrNumber),D=O||w||j||R.id;m[D]||(m[D]=[]),m[D].push(R)}),Object.entries(m).map(([R,h])=>({key:R,items:h,rep:h[0]})).sort((R,h)=>(h.rep.dateRequested||"").localeCompare(R.rep.dateRequested||""))},[f]),N=Y.useMemo(()=>s.filter(m=>m.status==="Completed").sort((m,R)=>new Date(R.dateCompleted||"").getTime()-new Date(m.dateCompleted||"").getTime()),[s]),b=async m=>{var h;if(t)return;if((await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô",text:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ (Complete Job)?",icon:"question",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){x(!0);try{if(await r(m,{status:"Completed",dateCompleted:new Date().toISOString().split("T")[0]}),(h=g.telegram)!=null&&h.enabled&&g.telegram.chatId){const O=s.find(w=>w.id===m);if(O){const w=Tt("‚úÖ ‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå",O,1,{closed:!0});at(g.telegram.botToken,g.telegram.chatId,w)}}await A.fire({icon:"success",title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}finally{x(!1)}}},P=async m=>{if(t)return;const{value:R}=await A.fire({title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Undo)",text:'‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Docs)"',input:"password",inputPlaceholder:"‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#f59e0b",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(R){if(R!=="1234"){await A.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error");return}x(!0);try{let h="ReceivedAtHub";m.documentType==="NCR"||m.ncrNumber||m.id&&m.id.startsWith("NCR")?h="QCPassed":h="ReceivedAtHub",await r(m.id,{status:h}),A.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:`‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ${m.id} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`})}finally{x(!1)}}},p=m=>{a(R=>{const h=new Set(R);return h.has(m)?h.delete(m):h.add(m),h})},i=(m,R=!1,h=!1,O=!1,w="")=>{var D;const j=m.documentType==="NCR"||!!m.ncrNumber||m.id&&m.id.startsWith("NCR");return e.jsxs("tr",{className:`transition-colors border-b last:border-0 align-top text-xs text-slate-700 
                ${j?"bg-amber-50/50 hover:bg-amber-100/50":"bg-teal-50/50 hover:bg-teal-100/50"}
                ${R?"bg-opacity-30":""}
            `,children:[e.jsx("td",{className:`px-3 py-2 border-r text-center align-top ${R?"pl-8 bg-slate-50/50":""}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>b(m.id),disabled:t,"aria-label":"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Complete)",className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1.5 rounded text-xs font-bold shadow-sm flex items-center gap-1 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-wait",title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Complete)",children:t?"...":e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-3 h-3"})," ‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"]})}),e.jsx("button",{onClick:()=>P(m),disabled:t,"aria-label":"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo to Docs)",className:"bg-amber-100 hover:bg-amber-200 text-amber-700 px-2 py-1.5 rounded text-xs font-bold shadow-sm flex items-center gap-1 transition-all active:scale-95 border border-amber-300 disabled:opacity-50 disabled:cursor-wait",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo to Docs)",children:e.jsx(Ue,{className:"w-3 h-3"})})]})}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3 text-slate-400"})," ",m.branch]})}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[!R&&h&&e.jsx("button",{onClick:()=>p(w),className:"mt-0.5 text-blue-600 hover:text-blue-800 transition-colors",title:O?"‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏¢":"‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏¢",children:O?e.jsx(et,{className:"w-4 h-4"}):e.jsx(tt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold text-slate-800 flex items-center gap-2",children:[m.productCode,h&&!R&&e.jsxs("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 rounded-full",children:["+",(((D=c.find(S=>S.key===w))==null?void 0:D.items.length)||1)-1," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsx("div",{className:"line-clamp-2",title:m.productName,children:m.productName})]})]})}),e.jsxs("td",{className:"px-3 py-2 border-r text-center font-bold text-slate-700",children:[m.quantity," ",m.unit]}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:m.dateRequested}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-700",children:m.ncrNumber||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-indigo-700 font-bold",children:m.collectionOrderId||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-700",children:m.neoRefNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-blue-700 font-bold",children:m.documentNo||m.refNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-slate-700",children:m.tmNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-slate-700",children:m.invoiceNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-700",children:m.customerName}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-700",children:m.founder||"-"}),e.jsx("td",{className:"px-3 py-2 align-top",children:e.jsx("span",{className:"px-2 py-1 rounded-full bg-slate-100 border border-slate-200 text-slate-700 block text-center",children:m.destinationCustomer||m.dispositionRoute||"-"})})]},m.id)};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in overflow-hidden",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-6 h-6 text-green-600"})," 6. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Pending Completion)"]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col mb-6 max-h-[60%]",children:[e.jsxs("div",{className:"p-4 bg-purple-50 border-b border-purple-100 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-bold text-purple-800",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (",f.length,")"]}),e.jsx("div",{className:"flex bg-white rounded-lg p-1 border border-purple-200 shadow-sm",children:["ALL","NCR","COL"].map(m=>e.jsx("button",{onClick:()=>o(m),className:`px-3 py-1 rounded text-xs font-bold transition-all ${C===m?"bg-purple-100 text-purple-700 shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:m==="ALL"?"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":m},m))})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(Ge,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏• / NCR / ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / R...",value:v,onChange:m=>n(m.target.value),className:"w-full pl-9 pr-8 py-1.5 bg-white border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all"}),v&&e.jsx("button",{onClick:()=>n(""),"aria-label":"‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",title:"‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",className:"absolute right-2.5 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx(fe,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 border-r text-center min-w-[100px]",children:"Action"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[200px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r text-center min-w-[80px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"Neo Doc"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R) / Ref No."}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("th",{className:"px-3 py-3 min-w-[120px]",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:14,className:"p-8 text-center text-slate-400",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"})}):c.map(m=>{const R=m.items.length>1,h=u.has(m.key);return e.jsxs(Y.Fragment,{children:[i(m.rep,!1,R,h,m.key),R&&h&&m.items.slice(1).map(O=>i(O,!0))]},m.key)})})]})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-green-500"})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Completed)"]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[200px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r text-center min-w-[80px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"NCR No."}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"COL No."}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"Neo Doc"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R / Ref)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-3 py-3 min-w-[100px]",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[N.slice(0,20).map(m=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors opacity-75 align-top text-xs text-slate-700",children:[e.jsx("td",{className:"px-3 py-2 border-r",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3 text-slate-400"})," ",m.branch]})}),e.jsxs("td",{className:"px-3 py-2 border-r",children:[e.jsx("div",{className:"font-bold text-slate-700",children:m.productCode}),e.jsx("div",{className:"text-slate-500",title:m.productName,children:m.productName})]}),e.jsxs("td",{className:"px-3 py-2 border-r text-center font-bold text-slate-600",children:[m.quantity," ",m.unit]}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:m.dateCompleted}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:m.ncrNumber||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-indigo-600 font-bold",children:m.collectionOrderId||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:m.neoRefNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-blue-600 font-bold",children:m.documentNo||(m.refNo&&m.refNo!=="-"?m.refNo:"-")||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-slate-600",children:m.tmNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-slate-600",children:m.invoiceNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:m.customerName}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(fs,{disposition:m.disposition})})]},m.id)),N.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:12,className:"p-8 text-center text-slate-400 italic",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô"})})]})]})})]})]})},Ml=()=>{const{items:s,ncrReports:r}=Ie(),[d,g]=k.useState(""),t=k.useMemo(()=>s.filter(u=>{var a,C,o,v,n,f;if(u.ncrNumber){const c=r.find(N=>N.ncrNo===u.ncrNumber);if(c&&c.status==="Canceled")return!1}return(u.status==="Completed"||u.status==="DirectReturn")&&(u.productName.toLowerCase().includes(d.toLowerCase())||((a=u.productCode)==null?void 0:a.toLowerCase().includes(d.toLowerCase()))||u.id.toLowerCase().includes(d.toLowerCase())||((C=u.customerName)==null?void 0:C.toLowerCase().includes(d.toLowerCase()))||((o=u.refNo)==null?void 0:o.toLowerCase().includes(d.toLowerCase()))||((v=u.documentNo)==null?void 0:v.toLowerCase().includes(d.toLowerCase()))||((n=u.collectionOrderId)==null?void 0:n.toLowerCase().includes(d.toLowerCase()))||((f=u.ncrNumber)==null?void 0:f.toLowerCase().includes(d.toLowerCase())))}).sort((u,a)=>{const C=u.dateCompleted||u.dateInTransit||u.date,o=a.dateCompleted||a.dateInTransit||a.date;return new Date(o).getTime()-new Date(C).getTime()}),[s,d,r]),x=k.useMemo(()=>({total:t.length,direct:t.filter(u=>u.status==="DirectReturn").length,processed:t.filter(u=>u.status==="Completed").length}),[t]);return e.jsxs("div",{className:"h-full flex flex-col p-6 space-y-6 overflow-hidden bg-slate-50/50",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Pe,{className:"w-8 h-8 text-green-600"}),"7. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Completed Items)"]}),e.jsx("p",{className:"text-slate-500 mt-1 ml-10",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏´‡∏£‡∏∑‡∏≠ ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Total)"}),e.jsx("p",{className:"text-2xl font-bold text-slate-700",children:x.total})]}),e.jsx("div",{className:"bg-slate-100 p-2 rounded-lg text-slate-500",children:e.jsx(Za,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-green-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-green-600 uppercase",children:"‡∏ú‡πà‡∏≤‡∏ô Hub (Processed)"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:x.processed})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:e.jsx(Pe,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-orange-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-orange-600 uppercase",children:"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)"}),e.jsx("p",{className:"text-2xl font-bold text-orange-700",children:x.direct})]}),e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg text-orange-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"relative w-80",children:[e.jsx(Ge,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏• / NCR / R / COL / ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...",value:d,onChange:u=>g(u.target.value),className:"pl-9 pr-8 py-2 w-full border border-slate-300 rounded-lg text-sm focus:ring-1 focus:ring-indigo-500 outline-none transition-all"}),d&&e.jsx("button",{onClick:()=>g(""),"aria-label":"‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",title:"‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤",className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx($t,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ",e.jsx("span",{className:"font-bold text-slate-800",children:t.length})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-white rounded-xl border border-slate-200 shadow-sm relative",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200 sticky top-0 shadow-sm z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"IDs (NCR / R / Ref)"}),e.jsx("th",{className:"p-4",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)"}),e.jsx("th",{className:"p-4 text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-4",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("th",{className:"p-4",children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ (Closed Date)"}),e.jsx("th",{className:"p-4",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"p-12 text-center text-slate-400 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:e.jsx($t,{className:"w-8 h-8 text-slate-300"})}),e.jsx("p",{children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß"})]})}):t.map(u=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-4",children:u.status==="Completed"?e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-bold border border-green-200 inline-flex items-center gap-1",children:[e.jsx(Pe,{className:"w-3 h-3"})," Completed"]}):e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold border border-orange-200 inline-flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"})," Direct"]})}),e.jsxs("td",{className:"p-4 space-y-1",children:[u.documentNo&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold bg-emerald-100 text-emerald-800 px-1 rounded",children:"R No."}),e.jsx("span",{className:"font-mono text-xs font-bold text-emerald-700",children:u.documentNo})]}),u.refNo&&u.refNo!=="-"&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold bg-blue-100 text-blue-800 px-1 rounded",children:"Ref (‡∏ö‡∏¥‡∏•)"}),e.jsx("span",{className:"font-mono text-xs font-bold text-blue-600",children:u.refNo})]}),u.ncrNumber&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] font-bold bg-red-100 text-red-800 px-1 rounded",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR"}),e.jsx("span",{className:"font-mono text-xs font-bold text-red-600",children:u.ncrNumber})]}),!u.documentNo&&(!u.refNo||u.refNo==="-")&&!u.ncrNumber&&e.jsx("div",{className:"text-xs text-slate-400 font-mono",children:u.id})]}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-slate-800",children:u.productName}),e.jsx("div",{className:"text-xs text-slate-500",children:u.productCode})]}),e.jsxs("td",{className:"p-4 text-center",children:[e.jsx("span",{className:"font-bold text-slate-700",children:u.quantity})," ",e.jsx("span",{className:"text-xs text-slate-500",children:u.unit})]}),e.jsx("td",{className:"p-4 text-slate-600",children:u.branch}),e.jsx("td",{className:"p-4 text-slate-600 text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3"}),u.dateCompleted?new Date(u.dateCompleted).toLocaleDateString():u.dateInTransit?new Date(u.dateInTransit).toLocaleDateString():"-"]})}),e.jsx("td",{className:"p-4",children:u.status==="Completed"?e.jsx(fs,{disposition:u.disposition}):e.jsx("span",{className:"text-xs text-slate-500",children:"-"})})]},u.id))})]})})]})},_l=({isOpen:s,onClose:r,selectionItems:d,selectionStatus:g,selectedItemIds:t,toggleSelection:x,handleGenerateDoc:u,onSplit:a})=>s?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white shadow-xl w-full h-full flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5 text-blue-600"})," ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"]}),e.jsx("button",{onClick:r,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-100 rounded-full",children:e.jsx(fe,{className:"w-5 h-5 text-slate-400"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center bg-blue-50 p-3 rounded-lg border border-blue-100",children:[e.jsx(fs,{disposition:g||void 0}),e.jsxs("span",{className:"text-xs text-blue-600",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ",t.size," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsx("div",{className:"space-y-2",children:d.map(C=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border hover:bg-slate-50 transition-all ${t.has(C.id)?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"checkbox","aria-label":`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ${C.productName}`,title:`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ${C.productName}`,checked:t.has(C.id),onChange:()=>x(C.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 cursor-pointer"})}),e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>x(C.id),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:C.productName}),e.jsx("span",{className:"text-xs font-mono text-slate-400",children:C.id})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex gap-2",children:[e.jsx("span",{children:C.branch}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:C.customerName})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-bold text-sm text-slate-700",children:[C.quantity," ",C.unit]}),e.jsx("button",{onClick:o=>{o.stopPropagation(),a(C)},className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors border border-blue-200",title:"‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item)",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-git-fork",children:[e.jsx("circle",{cx:"12",cy:"18",r:"3"}),e.jsx("circle",{cx:"6",cy:"6",r:"3"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("path",{d:"M6 9v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9"}),e.jsx("path",{d:"M12 12v3"})]})})]})]},C.id))})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-end gap-3 bg-slate-50",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded-lg font-bold text-sm",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{onClick:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 shadow-sm flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Generate)"]})]})]})}):null,ql=({isOpen:s,onClose:r,docData:d,docConfig:g,setDocConfig:t,isDocEditable:x,setIsDocEditable:u,includeVat:a,setIncludeVat:C,vatRate:o,setVatRate:v,includeDiscount:n,setIncludeDiscount:f,discountRate:c,setDiscountRate:N,handleConfirmDocGeneration:b,onUpdateItem:P,isSubmitting:p=!1})=>{const[i,m]=k.useState({}),[R,h]=k.useState({});if(!s||!d)return null;const O=d.items.map(S=>{let I=S.pricePerUnit;i[S.id]!==void 0&&(I=i[S.id]);let T=S.discountPercent||0;return n?R[S.id]!==void 0?T=R[S.id]:S.discountPercent===void 0&&c>0&&(T=c):T=0,{...S,pricePerUnit:I,priceBill:I*(S.quantity||1),discountPercent:T}}),j=((S,I,T)=>{let $=0,B=0;S.forEach(re=>{const pe=re.priceBill||0,Se=pe*((re.discountPercent||0)/100);$+=pe,B+=Se});const V=$-B,G=I?V*(T/100):0,de=V+G;return{subtotal:$,discount:B,afterDiscount:V,vat:G,net:de}})(O,a,o),D=()=>{const S=g.titleTH||Nt(d.type).th,I=g.companyNameTH,T=Nt(d.type);let $=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <!--[if gte mso 9]>
                <xml>
                    <x:ExcelWorkbook>
                        <x:ExcelWorksheets>
                            <x:ExcelWorksheet>
                                <x:Name>${S}</x:Name>
                                <x:WorksheetOptions>
                                    <x:DisplayGridlines/>
                                </x:WorksheetOptions>
                            </x:ExcelWorksheet>
                        </x:ExcelWorksheets>
                    </x:ExcelWorkbook>
                </xml>
                <![endif]-->
                <style>
                    th { font-weight: bold; background-color: #f0f0f0; border: 1px solid #000; padding: 5px; }
                    td { border: 1px solid #000; padding: 5px; }
                    .num { text-align: right; }
                    .center { text-align: center; }
                </style>
            </head>
            <body>
                <h2>${I}</h2>
                <h3>${S}</h3>
                <p>Document No: ${T.code} (${T.rev})</p>
                <p>Date: ${new Date().toLocaleDateString("th-TH")}</p>
                
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                            <th>‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th>‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th>‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${d.items.map((de,re)=>`
                            <tr>
                                <td class="center">${re+1}</td>
                                <td style="mso-number-format:'@'">${de.productCode}</td>
                                <td>${de.productName}</td>
                                <td class="center">${de.quantity}</td>
                                <td class="center">${de.unit}</td>
                                <td class="num">${(de.priceBill||0).toFixed(2)}</td>
                                <td class="num">${((de.priceBill||0)*de.quantity).toFixed(2)}</td>
                            </tr>
                        `).join("")}
                        <tr>
                            <td colspan="6" class="num" style="font-weight:bold;">‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (Subtotal)</td>
                            <td class="num" style="font-weight:bold;">${j.subtotal.toFixed(2)}</td>
                        </tr>
                        ${n?`
                        <tr>
                            <td colspan="6" class="num">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Discount ${c}%)</td>
                            <td class="num" style="color:red;">-${j.discount.toFixed(2)}</td>
                        </tr>
                        <tr>
                            <td colspan="6" class="num" style="font-weight:bold;">‡∏¢‡∏≠‡∏î‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (After Discount)</td>
                            <td class="num" style="font-weight:bold;">${j.afterDiscount.toFixed(2)}</td>
                        </tr>
                        `:""}
                        ${a?`
                        <tr>
                            <td colspan="6" class="num">‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° (VAT ${o}%)</td>
                            <td class="num">${j.vat.toFixed(2)}</td>
                        </tr>
                        <tr>
                            <td colspan="6" class="num" style="font-weight:bold;">‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (Net Total)</td>
                            <td class="num" style="font-weight:bold;">${j.net.toFixed(2)}</td>
                        </tr>
                        `:""}
                    </tbody>
                </table>
            </body>
            </html>
        `;const B=new Blob([$],{type:"application/vnd.ms-excel"}),V=URL.createObjectURL(B),G=document.createElement("a");G.href=V,G.download=`${T.code}_${new Date().toISOString().split("T")[0]}.xls`,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(V)};return e.jsxs("div",{className:"fixed inset-0 bg-black/60 z-50 flex flex-col animate-fade-in text-slate-900 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-800 text-white p-4 flex justify-between items-center shadow-md print:hidden w-full z-10",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-blue-400"})," ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Print Preview)"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-2 py-1 border border-slate-600",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:S=>f(S.target.checked),className:"rounded text-blue-500 focus:ring-blue-500 bg-slate-600 border-slate-500"}),e.jsx("span",{className:n?"text-white":"text-slate-400",children:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î"})]}),n&&e.jsxs("div",{className:"flex items-center gap-1 border-l border-slate-600 pl-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 mr-1",children:"All:"}),e.jsx("input",{type:"number","aria-label":"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå",title:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå",value:c,onChange:S=>{const I=Number(S.target.value);N(I);const T={};O.forEach($=>{T[$.id]=I}),h($=>({...$,...T}))},className:"w-12 bg-slate-800 border border-slate-500 rounded px-1 text-center text-xs text-white focus:ring-1 focus:ring-blue-500 outline-none",min:"0",max:"100"}),e.jsx("span",{className:"text-xs text-slate-400",children:"%"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-2 py-1 border border-slate-600",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:S=>C(S.target.checked),className:"rounded text-blue-500 focus:ring-blue-500 bg-slate-600 border-slate-500"}),e.jsx("span",{className:a?"text-white":"text-slate-400",children:"‡∏Ñ‡∏¥‡∏î VAT"})]}),a&&e.jsxs("div",{className:"flex items-center gap-1 border-l border-slate-600 pl-2",children:[e.jsx("input",{type:"number","aria-label":"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°",title:"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°",value:o,onChange:S=>v(Number(S.target.value)),className:"w-12 bg-slate-800 border border-slate-500 rounded px-1 text-center text-xs text-white focus:ring-1 focus:ring-blue-500 outline-none",min:"0",max:"100"}),e.jsx("span",{className:"text-xs text-slate-400",children:"%"})]})]}),e.jsx("div",{className:"h-6 w-px bg-slate-600 mx-2"}),e.jsxs("button",{onClick:()=>u(!x),className:`px-3 py-1.5 text-xs font-bold rounded-lg border flex items-center gap-1 transition-all ${x?"bg-amber-500 border-amber-500 text-white":"bg-transparent border-slate-600 text-slate-300 hover:border-slate-400"}`,children:[e.jsx(el,{className:"w-3 h-3"})," ",x?"Editing Mode":"Edit Header"]}),e.jsxs("button",{onClick:D,className:"px-3 py-2 bg-green-700 text-white rounded-lg hover:bg-green-600 font-bold text-sm flex items-center gap-2",children:[e.jsx(Bs,{className:"w-4 h-4"})," Excel"]}),e.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-white text-slate-900 rounded-lg hover:bg-slate-100 font-bold text-sm flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"})," ‡∏û‡∏¥‡∏°‡∏û‡πå"]}),e.jsx("button",{disabled:p,onClick:async()=>{(await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",text:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£? (Confirm Save & Generate Document)",icon:"question",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"})).isConfirmed&&b()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-wait",children:p?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å..."}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"]})}),e.jsx("button",{onClick:r,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"ml-2 p-2 hover:bg-slate-700 rounded-full",children:e.jsx(fe,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 p-8 print:p-0 print:bg-white print:overflow-visible",children:e.jsxs("div",{className:"bg-white shadow-lg mx-auto max-w-[210mm] min-h-[297mm] p-[15mm] print:shadow-none print:w-full print:max-w-none print:p-0 relative",children:[e.jsxs("div",{className:"flex border-b-2 border-slate-800 pb-4 mb-6",children:[e.jsx("div",{className:"w-[100px] h-[100px] flex items-center justify-center mr-6",children:e.jsx("img",{src:"/logo.png",alt:"Neo Siam Logo",className:"max-w-full max-h-full object-contain"})}),e.jsx("div",{className:"flex-1",children:x?e.jsxs("div",{className:"space-y-1",children:[e.jsx("input",{"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (TH)",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (TH)",value:g.companyNameTH,onChange:S=>t({...g,companyNameTH:S.target.value}),className:"w-full text-lg font-bold border rounded px-1"}),e.jsx("input",{"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (EN)",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (EN)",value:g.companyNameEN,onChange:S=>t({...g,companyNameEN:S.target.value}),className:"w-full text-sm border rounded px-1"}),e.jsx("input",{"aria-label":"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà",title:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà",value:g.address,onChange:S=>t({...g,address:S.target.value}),className:"w-full text-xs text-slate-600 border rounded px-1"}),e.jsx("input",{"aria-label":"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",value:g.contact,onChange:S=>t({...g,contact:S.target.value}),className:"w-full text-xs text-slate-600 border rounded px-1"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-800",children:g.companyNameTH}),e.jsx("h2",{className:"text-sm font-bold text-slate-600",children:g.companyNameEN}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:g.address}),e.jsx("p",{className:"text-xs text-slate-500",children:g.contact})]})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"border inline-block px-4 py-2 rounded text-center mb-2",children:[e.jsx("div",{className:"text-[10px] text-slate-500",children:"Document No."}),e.jsx("div",{className:"font-bold font-mono text-lg",children:Nt(d.type).code})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Date: ",new Date().toLocaleDateString("th-TH")]})]})]}),e.jsxs("div",{className:"text-center mb-8",children:[x?e.jsx("input",{"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (TH)",title:"‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (TH)",value:g.titleTH,onChange:S=>t({...g,titleTH:S.target.value}),className:"text-CENTER text-2xl font-bold border rounded px-2 w-full mb-1"}):e.jsx("h2",{className:"text-2xl font-bold uppercase border-b border-black inline-block px-8 pb-1",children:g.titleTH||Nt(d.type).th}),e.jsx("p",{className:"text-sm text-slate-500 mt-1 uppercase tracking-wide",children:g.titleEN||Nt(d.type).en})]}),e.jsx("div",{className:"mb-6 text-sm",children:e.jsx("div",{className:"p-4 border rounded-lg print:border-none print:p-0",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 leading-loose",children:[e.jsxs("div",{className:"flex items-end border-b border-dotted border-slate-400 pb-1",children:[e.jsx("span",{className:"font-bold w-[60px]",children:"‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:"}),e.jsx("span",{className:"flex-1 px-2 text-slate-800"})]}),e.jsxs("div",{className:"flex items-end border-b border-dotted border-slate-400 pb-1",children:[e.jsx("span",{className:"font-bold w-[60px]",children:"‡∏ú‡πà‡∏≤‡∏ô:"}),e.jsx("span",{className:"flex-1 px-2 text-slate-800"})]})]})})}),e.jsxs("table",{className:"w-full border-collapse border border-slate-800 text-sm mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 print:bg-slate-200 text-center",children:[e.jsx("th",{className:"border border-slate-800 p-2 w-10",children:"#"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[120px]",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-slate-800 p-2",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[80px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[60px]",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[100px]",children:"‡∏™‡∏†‡∏≤‡∏û"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[100px]",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),n&&e.jsx("th",{className:"border border-slate-800 p-2 w-[80px]",children:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î %"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[100px]",children:"‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô"})]})}),e.jsxs("tbody",{children:[O.map((S,I)=>((S.priceBill||0)*((S.discountPercent||0)/100),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-800 p-2 text-center",children:I+1}),e.jsx("td",{className:"border border-slate-800 p-2",children:S.productCode}),e.jsxs("td",{className:"border border-slate-800 p-2",children:[e.jsx("div",{children:S.productName}),e.jsxs("div",{className:"text-[10px] text-slate-500",children:["Ref: ",S.refNo]})]}),e.jsx("td",{className:"border border-slate-800 p-2 text-center font-bold",children:S.quantity}),e.jsx("td",{className:"border border-slate-800 p-2 text-center",children:S.unit}),e.jsx("td",{className:"border border-slate-800 p-2 text-center text-xs",children:S.condition}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:x?e.jsx("input",{type:"number","aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",className:"w-full text-right bg-transparent border-b border-dashed border-gray-300 focus:border-blue-500 outline-none text-sm font-bold print:border-none",value:S.pricePerUnit??(S.priceBill||0)/(S.quantity||1),onChange:$=>{const B=parseFloat($.target.value);m(V=>({...V,[S.id]:isNaN(B)?0:B}))},onBlur:$=>{const B=parseFloat($.target.value);P(S.id,{pricePerUnit:B,priceBill:B*(S.quantity||1)})}}):(S.pricePerUnit??(S.priceBill||0)/(S.quantity||1)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),n&&e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:x?e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("input",{type:"number","aria-label":"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î %",className:"w-12 text-right bg-transparent border-b border-dashed border-gray-300 focus:border-blue-500 outline-none text-sm font-bold print:border-none",value:S.discountPercent||0,onChange:$=>{const B=parseFloat($.target.value);h(V=>({...V,[S.id]:isNaN(B)?0:B}))},onBlur:$=>{const B=parseFloat($.target.value);P(S.id,{discountPercent:B})}}),e.jsx("span",{className:"text-[10px] text-slate-500",children:"%"})]}):e.jsxs("span",{children:[S.discountPercent||0,"%"]})}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:(S.priceBill||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]},I))),e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsxs("td",{colSpan:n?7:6,rowSpan:n?a?5:3:a?3:1,className:"border border-slate-800 p-4 text-center align-middle text-lg italic bg-slate-50 text-slate-600 print:hidden",children:["(",Ps(j.net),")"]}),e.jsxs("td",{colSpan:n?7:6,rowSpan:n?a?5:3:a?3:1,className:"border border-slate-800 p-4 text-center align-middle text-lg italic bg-slate-50 text-slate-600 hidden print:table-cell",children:["(",Ps(j.net),")"]}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:"‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:j.subtotal.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsx("td",{className:"border border-slate-800 p-2 text-right text-red-600",children:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏£‡∏ß‡∏° (Discount Total)"}),e.jsxs("td",{className:"border border-slate-800 p-2 text-right text-red-600",children:["-",j.discount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:"‡∏¢‡∏≠‡∏î‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î"}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:j.afterDiscount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsxs("td",{className:"border border-slate-800 p-2 text-right",children:["VAT ",o,"%"]}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:j.vat.toLocaleString([],{minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.jsxs("tr",{className:"font-bold bg-slate-100 print:bg-slate-200",children:[e.jsx("td",{className:"border border-slate-800 p-2 text-right text-black",children:"‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥"}),e.jsx("td",{className:"border border-slate-800 p-2 text-right text-black",children:j.net.toLocaleString([],{minimumFractionDigits:2,maximumFractionDigits:2})})]})]})]})]}),e.jsxs("div",{className:"mb-8 p-4 border border-slate-300 rounded print:border-black",children:[e.jsx("span",{className:"font-bold underline text-sm",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:"}),x?e.jsx("textarea",{"aria-label":"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",value:g.remarks,onChange:S=>t({...g,remarks:S.target.value}),className:"w-full mt-1 p-1 border rounded",rows:2}):e.jsx("p",{className:"text-sm mt-1 indent-4",children:g.remarks})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-12 print:break-inside-avoid",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-black border-dotted h-8 w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold",children:g.signatory1}),e.jsx("div",{className:"text-xs text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-black border-dotted h-8 w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold",children:g.signatory2}),e.jsx("div",{className:"text-xs text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-black border-dotted h-8 w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold",children:g.signatory3}),e.jsx("div",{className:"text-xs text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]})]})]})})]})},Fl=({isOpen:s,onClose:r,item:d,onConfirm:g})=>{const[t,x]=k.useState(0),[u,a]=k.useState("SAME"),[C,o]=k.useState(!1),[v,n]=k.useState(1),[f,c]=k.useState(""),[N,b]=k.useState(null);if(k.useEffect(()=>{s&&d&&(x(0),a("SAME"),o(!1),n(1),c(""),b(d.disposition||null))},[s,d]),!s||!d)return null;const P=C?d.quantity*v:d.quantity,p=C?f||"Unit":d.unit,i=m=>{m.preventDefault();const R=u==="SAME"?d.disposition:u,h=N||d.disposition;g(t,R,C,v,f,h)};return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white shadow-xl w-full h-full flex flex-col animate-fade-in",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(kt,{className:"w-5 h-5 text-blue-600"})," ‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item)"]}),e.jsx("button",{"aria-label":"‡∏õ‡∏¥‡∏î (Close)",title:"‡∏õ‡∏¥‡∏î (Close)",onClick:r,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full hover:bg-slate-200 transition-colors",children:e.jsx(fe,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:i,className:"p-6 space-y-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700 mb-1",children:d.productName}),e.jsx("div",{className:"flex justify-between text-xs text-slate-500",children:e.jsxs("span",{children:["ID: ",d.id]})}),e.jsxs("div",{className:"mt-2 text-2xl font-bold text-blue-700",children:[d.quantity," ",e.jsx("span",{className:"text-sm font-normal text-slate-500",children:d.unit})]}),C&&e.jsxs("div",{className:"mt-1 text-xs text-amber-600 font-bold",children:["‚ûî ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ",P," ",p]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å (Main Disposition)"}),e.jsx("select",{"aria-label":"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å",title:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å",value:N||"",onChange:m=>b(m.target.value),className:"w-full p-2 border border-blue-300 rounded text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none text-blue-900",children:Object.entries(it).map(([m,R])=>e.jsx("option",{value:m,children:R},m))})]})]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢",title:"‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢",checked:C,onChange:m=>o(m.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢ (Unit Breakdown)"})]}),C&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 pl-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô (‡∏ï‡πà‡∏≠ 1 ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏´‡∏•‡∏±‡∏Å)"}),e.jsx("input",{type:"number","aria-label":"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô",title:"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô",min:"1",value:v,onChange:m=>n(parseInt(m.target.value)||1),className:"w-full p-2 border border-slate-300 rounded text-sm",placeholder:"‡πÄ‡∏ä‡πà‡∏ô 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà",title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà",value:f,onChange:m=>c(m.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏¥‡πâ‡∏ô, ‡∏´‡πà‡∏≠"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å (",p,")"]}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å",min:"1",max:P-1,value:t===0?"":t,onChange:m=>x(parseInt(m.target.value)||0),className:"w-full p-3 border border-slate-300 rounded-lg text-lg font-bold text-center focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0",autoFocus:!0}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ",P-t," ",p]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà: ",t," ",p]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å (New Disposition)"}),e.jsxs("select",{"aria-label":"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å",title:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å",value:u,onChange:m=>a(m.target.value),className:"w-full p-3 border border-slate-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none",children:[e.jsxs("option",{value:"SAME",children:["‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏° (Keep ",it[d.disposition],")"]}),e.jsx("option",{disabled:!0,children:"‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"}),Object.entries(it).map(([m,R])=>e.jsx("option",{value:m,children:R},m))]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button","aria-label":"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",onClick:r,className:"flex-1 py-3 px-4 rounded-lg border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{type:"submit","aria-label":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å",title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å",disabled:t<=0||t>=P,className:"flex-1 py-3 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:["‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å ",e.jsx(Ms,{className:"w-4 h-4"})]})]})]})]})})},Ul=({initialData:s,onClearInitialData:r,initialStep:d})=>{var v;const{state:g,actions:t,derived:x}=Vs(s,r),[u,a]=k.useState(!0);Y.useEffect(()=>{d&&t.setActiveStep(d)},[d]);const C=[{id:1,label:"1. ‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Request)",icon:tl,count:void 0,color:"text-blue-600",group:"Return Request"},{id:2,label:"2. ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡∏ô‡∏™‡πà‡∏á (Consolidation & Logistics)",icon:Ne,count:((v=x.ncrStep2Items)==null?void 0:v.length)||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:3,label:"3. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub (Received at Hub)",icon:Gt,count:x.step6Items.length||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:4,label:"4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC)",icon:es,count:void 0,color:"text-indigo-600",group:"NCR Hub"},{id:5,label:"5. ‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô (Docs)",icon:Oe,count:x.step7Items.length||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:6,label:"6. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Pending Completion)",icon:Et,count:x.step8Items.length||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:7,label:"7. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Completed)",icon:Pe,count:void 0,color:"text-green-600",group:"NCR Hub"}],o=()=>{switch(g.activeStep){case 1:return e.jsx(Al,{formData:g.formData,requestItems:g.requestItems,isCustomBranch:g.isCustomBranch,uniqueCustomers:x.uniqueCustomers,uniqueDestinations:x.uniqueDestinations,uniqueFounders:x.uniqueFounders,uniqueProductCodes:x.uniqueProductCodes,uniqueProductNames:x.uniqueProductNames,setFormData:t.setFormData,setRequestItems:t.setRequestItems,setIsCustomBranch:t.setIsCustomBranch,handleImageUpload:t.handleImageUpload,handleRemoveImage:t.handleRemoveImage,handleAddItem:t.handleAddItem,handleRemoveItem:t.handleRemoveItem,handleRequestSubmit:t.handleRequestSubmit});case 12:return e.jsx(Gs,{});case 13:return e.jsx(Ks,{});case 14:return e.jsx(Js,{});case 2:return e.jsx(Pl,{onConfirm:t.handleLogisticsSubmit});case 3:return e.jsx(Ll,{});case 4:return e.jsx(El,{});case 5:return e.jsx($l,{onPrintDocs:t.handlePrintClick});case 6:return e.jsx(Bl,{});case 7:return e.jsx(Ml,{});default:return e.jsx("div",{className:"p-8 text-center text-slate-400",children:"‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (Step Coming Soon)"})}};return e.jsxs("div",{className:"flex bg-slate-100 h-screen overflow-hidden font-sans",children:[e.jsxs("aside",{className:`${u?"w-72":"w-20"} 
        bg-white border-r border-slate-200 flex flex-col transition-all duration-300 shadow-xl z-20`,children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[u&&e.jsxs("div",{className:"font-extrabold text-xl text-slate-800 tracking-tight flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-blue-200",children:e.jsx(Gt,{className:"w-5 h-5"})}),e.jsxs("span",{className:"bg-gradient-to-r from-blue-700 to-blue-500 bg-clip-text text-transparent transform scale-90 origin-left flex flex-col",children:[e.jsx("span",{className:"text-sm",children:"‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("span",{className:"text-[10px] text-slate-500",children:"Return Operations Hub"})]})]}),e.jsx("button",{onClick:()=>a(!u),"aria-label":"Toggle Sidebar",title:"Toggle Sidebar",className:"p-2 hover:bg-white rounded-lg transition-colors text-slate-400 hover:text-blue-600 hover:shadow-sm",children:e.jsx(_s,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2 space-y-1",children:["Return Request","NCR Hub"].map(n=>{const f=C.filter(c=>c.group===n);return f.length===0?null:e.jsxs("div",{className:"mb-4",children:[u&&e.jsx("div",{className:"px-3 mb-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:n}),f.map(c=>e.jsxs("button",{onClick:()=>t.setActiveStep(c.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group relative mb-1
                        ${g.activeStep===c.id?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100 font-bold":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[e.jsx("div",{className:`p-1.5 rounded-lg transition-all duration-200 ${g.activeStep===c.id?"bg-white shadow-sm":"bg-slate-100 group-hover:bg-white"}`,children:e.jsx(c.icon,{className:`w-4 h-4 ${g.activeStep===c.id?c.color:"text-slate-400"}`})}),u&&e.jsxs("div",{className:"flex-1 text-left flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium",children:c.label}),c.count&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold
                              ${g.activeStep===c.id?"bg-white text-blue-600 shadow-sm":"bg-slate-100 text-slate-500"}`,children:c.count})]})]},c.id))]},n)})}),e.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50",children:u?e.jsxs("div",{className:"text-xs text-slate-400 text-center font-medium",children:["Neo Siam Logistics",e.jsx("br",{}),"NCR Operations System v3.0"]}):e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})})})]}),e.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-white/50 relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-slate-50 -z-10 skew-y-1 transform origin-top-left opacity-50"}),e.jsx("div",{className:"flex-1 overflow-hidden p-2 sm:p-4",children:o()})]}),g.showSelectionModal&&e.jsx(_l,{isOpen:g.showSelectionModal,onClose:()=>t.setShowSelectionModal(!1),selectionItems:g.selectionItems,selectedItemIds:g.selectedItemIds,toggleSelection:t.toggleSelection,handleGenerateDoc:t.handleGenerateDoc,selectionStatus:g.selectionStatus,onSplit:t.handleDocItemClick}),g.showDocModal&&g.docData&&e.jsx(ql,{isOpen:g.showDocModal,onClose:()=>t.setShowDocModal(!1),docData:g.docData,docConfig:g.docConfig,setDocConfig:t.setDocConfig,includeVat:g.includeVat,vatRate:g.vatRate,includeDiscount:g.includeDiscount,discountRate:g.discountRate,isDocEditable:g.isDocEditable,setIncludeVat:t.setIncludeVat,setVatRate:t.setVatRate,setIncludeDiscount:t.setIncludeDiscount,setDiscountRate:t.setDiscountRate,setIsDocEditable:t.setIsDocEditable,handleConfirmDocGeneration:t.handleConfirmDocGeneration,onUpdateItem:t.handleUpdateDocItem,isSubmitting:g.isSubmittingDoc}),g.showStep4SplitModal&&g.docSelectedItem&&e.jsx(Fl,{isOpen:g.showStep4SplitModal,onClose:()=>t.setShowStep4SplitModal(!1),item:g.docSelectedItem,onConfirm:t.handleStep4SplitSubmit})]})},Ys=({value:s,onChange:r,options:d,placeholder:g,className:t,disabled:x})=>{const[u,a]=k.useState(!1),C=k.useRef(null);k.useEffect(()=>{function v(n){C.current&&!C.current.contains(n.target)&&a(!1)}return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const o=d.filter(v=>v.toLowerCase().includes((s||"").toLowerCase()));return e.jsxs("div",{className:"relative flex-1",ref:C,children:[e.jsx("input",{type:"text",className:t,value:s,onChange:v=>{r(v.target.value),x||a(!0)},onFocus:()=>{x||a(!0)},placeholder:g,disabled:x,title:g||"Search or select option"}),u&&o.length>0&&e.jsx("div",{className:"absolute z-10 w-full left-0 mt-1 bg-white border border-slate-300 shadow-lg max-h-60 overflow-auto rounded-sm print:hidden",children:o.map((v,n)=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 text-slate-700 block border-b border-slate-100 last:border-0",onClick:()=>{r(v),a(!1)},title:v,children:v},n))})]})},Xs=async(s,r,d)=>{const g=new Zt.Workbook,t=g.addWorksheet("NCR Report",{pageSetup:{paperSize:9,orientation:"portrait",fitToPage:!0,margins:{left:.4,right:.4,top:.4,bottom:.4,header:.3,footer:.3}}});t.columns=Array(24).fill({width:3.5});const x={},u={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},a={name:"TH Sarabun New",size:16,bold:!0},C={name:"TH Sarabun New",size:14,bold:!0},o={name:"TH Sarabun New",size:12},v={name:"TH Sarabun New",size:12,bold:!0},n={vertical:"middle",horizontal:"center"},f={vertical:"middle",horizontal:"left",wrapText:!0},c=D=>D?"‚òë":"‚òê",N=(D,S,I,T,$=o,B=f,V=x)=>{t.mergeCells(D,S,D,I);const G=t.getCell(D,S);return G.value=T,G.font=$,G.alignment=B,G.border=V,G};let b=1;t.mergeCells(b,1,b+4,4);try{const I=await(await fetch("/logo.png")).arrayBuffer(),T=g.addImage({buffer:I,extension:"png"});t.addImage(T,{tl:{col:0,row:0},br:{col:4,row:5}})}catch{const D=t.getCell(b,1);D.value="NEO",D.alignment=n,D.font=a}N(b,5,24,"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î",{name:"TH Sarabun New",size:18,bold:!0},{vertical:"bottom",horizontal:"left"}),b++,N(b,5,24,"NEOSIAM LOGISTICS & TRANSPORT CO., LTD.",v,{vertical:"top",horizontal:"left"}),b++,N(b,5,24,"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000",o,{vertical:"top",horizontal:"left"}),b++,N(b,5,24,"Tax ID: 0105552087673 | Tel: 056-275-841",o,{vertical:"top",horizontal:"left"}),b++,b++,N(b,1,24,"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô",{name:"TH Sarabun New",size:20,bold:!0},n,{bottom:{style:"medium"},top:{style:"medium"}}),b++,b++;const P={bottom:{style:"dotted"}};N(b,1,3,"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:",v,f),N(b,4,10,s.toDept,o,f,P),N(b,12,13,"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:",v,f),N(b,14,18,s.date,o,n,P),N(b,20,21,"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:",v,f),N(b,22,24,s.copyTo,o,f,P),b+=2,N(b,1,3,"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR:",v,f),N(b,4,10,d,v,f,P),N(b,12,13,"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤:",v,f),N(b,14,18,s.founder,o,f,P),N(b,20,21,"Ref/PO:",v,f),N(b,22,24,s.poNo,o,f,P),b+=2,N(b,1,24,"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items)",C,f),b++;const p=(D,S,I)=>{const T=N(b,D,S,I,v,n,u);T.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}}};p(1,3,"‡∏™‡∏≤‡∏Ç‡∏≤"),p(4,7,"Ref / Neo Ref"),p(8,14,"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"),p(15,16,"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"),p(17,18,"‡∏´‡∏ô‡πà‡∏ß‡∏¢"),p(19,21,"‡∏£‡∏≤‡∏Ñ‡∏≤/Exp"),p(22,24,"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå"),b++,r.length>0?r.forEach(D=>{t.getRow(b).height=25;const I=D,T=I.lotNo?` Lot: ${I.lotNo}`:"";N(b,1,3,D.branch||"",o,f,u),N(b,4,7,`${D.refNo||"-"}
${D.neoRefNo||"-"}`,o,f,u),N(b,8,14,`[${D.productCode}] ${D.productName}${T}
${D.customerName||""}`,o,f,u),N(b,15,16,D.quantity,o,n,u),N(b,17,18,D.unit,o,n,u),N(b,19,21,`${D.pricePerUnit}
${D.expiryDate||"-"}`,o,n,u),N(b,22,24,`${D.problemSource||"-"}`,o,f,u),b++}):(N(b,1,24,"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",o,n,u),b++),b++,N(b,1,8,"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (Images)",v,{vertical:"middle",horizontal:"center"},u),N(b,9,24,"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (Problem Source)",v,{vertical:"middle",horizontal:"left",indent:1},u),b++,t.mergeCells(b,1,b+5,8);const i=t.getCell(b,1);i.value=`(‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö)
‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏î‡∏π‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û`,i.alignment=n,i.font={...o,color:{argb:"FF999999"}},i.border=u;const m=(D,S)=>`${c(S)} ${D}`;N(b,9,16,m("‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer)",s.problemSource==="Customer"),o,f),N(b,17,24,m("‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Keying)",s.problemSource==="Keying"),o,f),t.getCell(b,24).border={right:{style:"thin"}},b++,N(b,9,16,m("‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Accounting)",s.problemSource==="Accounting"),o,f),N(b,17,24,m("‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination)",s.problemSource==="DestinationCustomer"),o,f),t.getCell(b,24).border={right:{style:"thin"}},b++,N(b,9,24,m("‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Warehouse)",s.problemSource==="Warehouse"),o,f,{right:{style:"thin"}}),b++,N(b,9,24,m("‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transport)",s.problemSource==="Transport"),o,f,{right:{style:"thin"}}),b++,N(b,9,24,`${m("‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)",s.problemSource==="Other")} : ${s.problemAnalysisDetail||""}`,o,f,{right:{style:"thin"}}),b++,t.mergeCells(b,9,b,24);const R=t.getCell(b,9);R.border={top:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},b++,N(b,1,12,"‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£",v,n,u),N(b,13,24,"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",v,n,u),b++;const h=(D,S,I,T,$,B,V,G)=>{N(b,1,6,`${c(S)} ${D}`,o,f),N(b,7,12,`${c(T)} ${I}`,o,f,{right:{style:"thin"}});const de=`${c(B)} ${$} ${V?`(‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${V})`:""} ${G?`[${G}]`:""}`;N(b,13,24,de,o,f,{right:{style:"thin"}}),b++};h("‡∏ä‡∏≥‡∏£‡∏∏‡∏î",s.problemDamaged,"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á",s.problemDamagedInBox,"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",s.actionReject,s.actionRejectQty),h("‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢",s.problemLost,"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö",s.problemMixed,"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ñ‡∏∑‡∏ô",s.actionRejectSort,s.actionRejectSortQty),h("‡∏ú‡∏¥‡∏î INV",s.problemWrongInv,"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤",s.problemLate,"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",s.actionRework,s.actionReworkQty,s.actionReworkMethod),h("‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥",s.problemDuplicate,"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î",s.problemWrong,"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",s.actionSpecialAcceptance,s.actionSpecialAcceptanceQty,s.actionSpecialAcceptanceReason),h("‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö",s.problemIncomplete,"‡∏™‡πà‡∏á‡πÄ‡∏Å‡∏¥‡∏ô",s.problemOver,"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",s.actionScrap,s.actionScrapQty),h("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î",s.problemWrongInfo,"‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô",s.problemShortExpiry,"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",s.actionReplace,s.actionReplaceQty),h("‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ",s.problemTransportDamage,"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏",s.problemAccident,"",!1,"",""),N(b,1,12,`${c(s.problemOther)} ‡∏≠‡∏∑‡πà‡∏ô‡πÜ: ${s.problemOtherText||""}`,o,f,{right:{style:"thin"},bottom:{style:"thin"}}),N(b,13,24,`‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à: ${s.dueDate||""}`,o,f,{right:{style:"thin"},bottom:{style:"thin"}}),b++,b++,N(b,1,24,"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (Root Cause & Prevention)",v,f,u),b++,N(b,1,4,"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:",v,f,{left:{style:"thin"},bottom:{style:"thin"}}),N(b,5,24,`${c(s.causePackaging)} Packaging  ${c(s.causeTransport)} Transport  ${c(s.causeOperation)} Operation  ${c(s.causeEnv)} Environment`,o,f,{right:{style:"thin"},bottom:{style:"thin"}}),b++,N(b,1,4,"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:",v,f,{left:{style:"thin"}}),N(b,5,24,s.causeDetail||"-",o,f,{right:{style:"thin"}}),b++,N(b,1,4,"‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:",v,f,{left:{style:"thin"},bottom:{style:"thin"}}),N(b,5,24,s.preventionDetail||"-",o,f,{right:{style:"thin"},bottom:{style:"thin"}}),b++,b++,N(b,1,24,"‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î NCR (Closing)",v,n,u),b++,N(b,1,24,`${c(s.qaAccept)} ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö (Accept)    ${c(s.qaReject)} ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö (Reject) : ${s.qaReason||""}`,o,f,u),b++,b++;const O=(D,S,I,T)=>{N(b,D,S,"_______________________",o,n),N(b+1,D,S,`(${T||"......................."})`,o,n),N(b+2,D,S,I,v,n)};O(3,8,"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤",s.founder),O(10,15,"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",s.responsiblePerson),O(17,22,"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",s.approver),b+=4;const w=await g.xlsx.writeBuffer(),j=new Blob([w],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});bs.saveAs(j,`NCR_Form_${d}_${new Date().toISOString().split("T")[0]}.xlsx`)},Hl=()=>{const{addNCRReport:s,getNextNCRNumber:r,addReturnRecord:d,ncrReports:g,systemConfig:t,items:x}=Ie(),u={toDept:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",date:new Date().toISOString().split("T")[0],copyTo:"",founder:"",poNo:"",branch:"",problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAcceptance:!1,actionSpecialAcceptanceQty:0,actionSpecialAcceptanceReason:"",actionScrap:!1,actionScrapQty:0,actionReplace:!1,actionReplaceQty:0,problemAnalysis:"Customer",problemSource:"Customer",problemAnalysisSub:"",problemAnalysisCause:"",problemAnalysisDetail:"",images:[],preliminaryRoute:"Other",preliminaryRouteOther:"",hasCost:!1,costAmount:0,costResponsible:"",isFieldSettled:!1,fieldSettlementAmount:0,fieldSettlementEvidence:"",fieldSettlementName:"",fieldSettlementPosition:"",causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",preventionDueDate:"",dueDate:"",approver:"",approverPosition:"",approverDate:"",responsiblePerson:"",responsiblePosition:"",qaAccept:!1,qaReject:!1,qaReason:"",isRecordOnly:!1},[a,C]=k.useState(u),[o,v]=k.useState([]),[n,f]=k.useState(!1),[c,N]=k.useState({branch:"",refNo:"",neoRefNo:"",productCode:"",productName:"",customerName:"",destinationCustomer:"",quantity:0,unit:"",pricePerUnit:0,priceBill:0,priceSell:0,expiryDate:"",hasCost:!1,costAmount:0,costResponsible:"",problemSource:"",preliminaryDecision:"Return",preliminaryRoute:"",isFieldSettled:!1,fieldSettlementAmount:0,fieldSettlementEvidence:"",fieldSettlementName:"",fieldSettlementPosition:"",problemAnalysis:"Customer",problemAnalysisSub:"",problemAnalysisCause:"",problemAnalysisDetail:"",images:[],problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAcceptance:!1,actionSpecialAcceptanceQty:0,actionSpecialAcceptanceReason:"",actionScrap:!1,actionScrapQty:0,actionReplace:!1,actionReplaceQty:0,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",preventionDueDate:""}),[b,P]=k.useState(!1),[p,i]=k.useState(!1),[m,R]=k.useState(!1),[h,O]=k.useState(null),[w,j]=k.useState(!1),[D,S]=k.useState(""),[I,T]=k.useState(!1),[$,B]=k.useState(null),[V,G]=k.useState(null),[de,re]=k.useState(""),pe=k.useMemo(()=>{const l=new Set(g.map(L=>L.founder).filter(Boolean));return Array.from(l).sort()},[g]);k.useEffect(()=>{},[n]),k.useEffect(()=>{if(c.hasCost&&c.problemSource){const l=jt[c.problemSource];l&&N(L=>({...L,costResponsible:l}))}},[c.hasCost,c.problemSource]);const Se=()=>{if(de!=="1234"){A.fire({icon:"error",title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",timer:1500,showConfirmButton:!1});return}if($==="DELETE"&&V)v(o.filter(l=>l.id!==V));else if($==="EDIT"&&V){const l=o.find(L=>L.id===V);if(l){N(l);const L=o.filter(H=>H.id!==V);v(L),f(!0)}}T(!1),re(""),B(null),G(null)},E=l=>{B("DELETE"),G(l),T(!0)},Q=l=>{C(L=>({...L,[l]:!L[l]}))},U=l=>{C(L=>({...L,[l]:!L[l]}))},ee=l=>{if(l.target.files&&l.target.files.length>0){const H=Array.from(l.target.files).map(te=>new Promise(X=>{const he=new FileReader;he.onloadend=()=>X(he.result),he.readAsDataURL(te)}));Promise.all(H).then(te=>{C(X=>({...X,images:[...X.images||[],...te]}))})}},le=l=>{C(L=>({...L,images:(L.images||[]).filter((H,te)=>te!==l)}))},ce=l=>{if(N(H=>({...H,productCode:l})),!l)return;const L=x.find(H=>(H.productCode||"").toLowerCase()===l.toLowerCase()||(H.barcode||"").toLowerCase()===l.toLowerCase());L&&N(H=>({...H,productName:L.productName,unit:L.unit||H.unit,pricePerUnit:L.pricePerUnit||H.pricePerUnit,customerName:L.customerName||H.customerName}))},be=(l=!0)=>{if(!c.productCode||!c.branch){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏Ç‡∏≤"});return}const L={...c,id:Date.now().toString(),quantity:Number(c.quantity)||0,pricePerUnit:Number(c.pricePerUnit)||0,priceBill:Number(c.priceBill)||0,priceSell:Number(c.priceSell)||0,costAmount:Number(c.costAmount)||0,problemDetail:c.problemDetail||"",problemOtherText:c.problemOtherText||"",actionReworkMethod:c.actionReworkMethod||"",actionSpecialAcceptanceReason:c.actionSpecialAcceptanceReason||"",preliminaryDecision:c.isFieldSettled?"FieldSettlement":"Return",preliminaryRoute:c.preliminaryRoute==="Other"?c.preliminaryRouteOther||"Other":c.preliminaryRoute};v([...o,L]),N({branch:"",refNo:"",neoRefNo:"",productCode:"",productName:"",customerName:"",destinationCustomer:"",quantity:0,unit:"",pricePerUnit:0,priceBill:0,priceSell:0,expiryDate:"",hasCost:!1,costAmount:0,costResponsible:"",problemSource:"",preliminaryDecision:"Return",preliminaryRoute:"",isFieldSettled:!1,fieldSettlementAmount:0,fieldSettlementEvidence:"",fieldSettlementName:"",fieldSettlementPosition:"",problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAcceptance:!1,actionSpecialAcceptanceQty:0,actionSpecialAcceptanceReason:"",actionScrap:!1,actionScrapQty:0,actionReplace:!1,actionReplaceQty:0,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",preventionDueDate:""}),l&&f(!1)},ke=()=>[],ye=async()=>{var H,te,X,he,F,y,_;i(!1),P(!0);const l=await r();if(l.includes("ERR")){O({success:!1,message:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"}),R(!0),P(!1);return}let L=0;for(const M of o){const ne={...a,id:`${l}-${M.id}`,ncrNo:l,item:M,status:M.isFieldSettled?"Settled_OnField":a.isRecordOnly||a.qaAccept?"Closed":"Open",qaAccept:a.isRecordOnly||a.qaAccept,qaReason:a.isRecordOnly?"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô":a.qaReason,isRecordOnly:a.isRecordOnly};if(await s(ne)){const se={id:`RT-${new Date().getFullYear()}-${Date.now()}-${Math.floor(Math.random()*1e3)}`,refNo:M.refNo||a.poNo||"-",date:a.date,dateRequested:a.date,productName:M.productName||"Unknown",productCode:M.productCode||"N/A",quantity:M.quantity,unit:M.unit||"Unit",customerName:M.customerName||"Unknown",destinationCustomer:M.destinationCustomer||"",branch:M.branch||"Head Office",category:"General",ncrNumber:l,documentType:"NCR",founder:a.founder,status:a.isFieldSettled?"Settled_OnField":a.isRecordOnly?"Completed":"Requested",isRecordOnly:a.isRecordOnly,dateCompleted:a.isRecordOnly?new Date().toISOString().split("T")[0]:void 0,disposition:a.isRecordOnly?"InternalUse":"Pending",condition:a.isRecordOnly?"New":"Unknown",isFieldSettled:a.isFieldSettled,fieldSettlementAmount:a.fieldSettlementAmount,fieldSettlementEvidence:a.fieldSettlementEvidence,fieldSettlementName:a.fieldSettlementName,fieldSettlementPosition:a.fieldSettlementPosition,preliminaryRoute:a.preliminaryRoute==="Other"&&a.preliminaryRouteOther?`Other: ${a.preliminaryRouteOther}`:a.preliminaryRoute||"Other",reason:`NCR: ${a.problemDetail||"-"}`,amount:M.priceBill||0,priceBill:M.priceBill||0,pricePerUnit:M.pricePerUnit||0,priceSell:M.priceSell||0,neoRefNo:M.neoRefNo||"-",problemDamaged:a.problemDamaged,problemDamagedInBox:a.problemDamagedInBox,problemLost:a.problemLost,problemMixed:a.problemMixed,problemWrongInv:a.problemWrongInv,problemLate:a.problemLate,problemDuplicate:a.problemDuplicate,problemWrong:a.problemWrong,problemIncomplete:a.problemIncomplete,problemOver:a.problemOver,problemWrongInfo:a.problemWrongInfo,problemShortExpiry:a.problemShortExpiry,problemTransportDamage:a.problemTransportDamage,problemAccident:a.problemAccident,problemPOExpired:a.problemPOExpired,problemNoBarcode:a.problemNoBarcode,problemNotOrdered:a.problemNotOrdered,problemOther:a.problemOther,problemOtherText:a.problemOtherText,problemDetail:a.problemDetail,actionReject:a.actionReject,actionRejectQty:a.actionRejectQty,actionRejectSort:a.actionRejectSort,actionRejectSortQty:a.actionRejectSortQty,actionRework:a.actionRework,actionReworkQty:a.actionReworkQty,actionReworkMethod:a.actionReworkMethod,actionSpecialAcceptance:a.actionSpecialAcceptance,actionSpecialAcceptanceQty:a.actionSpecialAcceptanceQty,actionSpecialAcceptanceReason:a.actionSpecialAcceptanceReason,actionScrap:a.actionScrap,actionScrapQty:a.actionScrapQty,actionReplace:a.actionReplace,actionReplaceQty:a.actionReplaceQty,rootCause:a.problemSource||"NCR",problemSource:a.problemSource||"Customer",problemAnalysis:a.problemAnalysis||"Customer",problemAnalysisSub:a.problemAnalysisSub,problemAnalysisCause:a.problemAnalysisCause,problemAnalysisDetail:a.problemAnalysisDetail,images:a.images,hasCost:a.hasCost,costAmount:a.costAmount,costResponsible:a.costResponsible,causePackaging:a.causePackaging,causeTransport:a.causeTransport,causeOperation:a.causeOperation,causeEnv:a.causeEnv,causeDetail:a.causeDetail,preventionDetail:a.preventionDetail,preventionDueDate:a.preventionDueDate,responsiblePerson:a.responsiblePerson,responsiblePosition:a.responsiblePosition,dueDate:a.dueDate,approver:a.approver,approverPosition:a.approverPosition,approverDate:a.approverDate};await d(se),L++}}if(P(!1),L===o.length){if(S(l),O({success:!0,message:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",ncrNo:l}),R(!0),w&&setTimeout(()=>window.print(),500),(H=t.telegram)!=null&&H.enabled&&t.telegram.chatId){const M=new Date().toLocaleString("th-TH"),ne=a.founder||"-",Z=a.branch||((te=o[0])==null?void 0:te.branch)||"-",se=((X=o[0])==null?void 0:X.customerName)||"-",ue=((he=o[0])==null?void 0:he.destinationCustomer)||"-",ve=((F=o[0])==null?void 0:F.neoRefNo)||"-",Be=((y=o[0])==null?void 0:y.refNo)||"-",Qe=l,Me=a.problemDetail||"-",we=o.reduce((_t,vt)=>_t+(vt.quantity||0),0),pt=a.problemSource||"-",bt=[a.problemDamaged&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î",a.problemDamagedInBox&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á",a.problemLost&&"‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢",a.problemMixed&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö",a.problemWrongInv&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV",a.problemLate&&"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤",a.problemDuplicate&&"‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥",a.problemWrong&&"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î",a.problemIncomplete&&"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö",a.problemOver&&"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô",a.problemWrongInfo&&"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î",a.problemShortExpiry&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô",a.problemTransportDamage&&"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ",a.problemAccident&&"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏",a.problemPOExpired&&"PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",a.problemNoBarcode&&"‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô",a.problemNotOrdered&&"‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",a.problemOther&&`‡∏≠‡∏∑‡πà‡∏ô‡πÜ (${a.problemOtherText})`].filter(Boolean).join(", "),Je=a.hasCost?`‡πÉ‡∏ä‡πà (Amount: ${a.costAmount} ‡∏ö‡∏≤‡∏ó, Resp: ${a.costResponsible})`:"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",Bt=a.isFieldSettled?`‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô (‡∏à‡πà‡∏≤‡∏¢: ${a.fieldSettlementAmount} ‡∏ö‡∏≤‡∏ó, ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö: ${a.fieldSettlementName} - ${a.fieldSettlementPosition})`:"‡πÑ‡∏°‡πà‡∏°‡∏µ",Mt=`üö® <b>NCR Report (New) [NCR]</b>
----------------------------------
<b>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà :</b> ${M}
<b>‡∏™‡∏≤‡∏Ç‡∏≤ :</b> ${Z}
<b>‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Founder) :</b> ${ne}
<b>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ / ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á :</b> ${se} / ${ue}
<b>Neo Ref No. :</b> ${ve}
<b>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / Ref No. :</b> ${Be}
<b>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (‡πÄ‡∏•‡∏Ç R) :</b> ${Qe}
<b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ :</b> ${Me}
<b>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ :</b> ${we} ${((_=o[0])==null?void 0:_.unit)||"‡∏ä‡∏¥‡πâ‡∏ô"} ${o.length>1?`(‡∏£‡∏ß‡∏° ${o.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`:""}
<b>‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å :</b> ${pt}
<b>‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ :</b> ${bt||"-"}
${a.isRecordOnly?`<b>üîπ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (Fast Track)</b>
`:""}<b>‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ :</b> ${Je}
<b>Field Settlement :</b> ${Bt}
----------------------------------
üîó <i>Status: ${a.isRecordOnly?"Closed/Completed":"Open"}</i>`;await at(t.telegram.botToken,t.telegram.chatId,Mt)}}else O({success:!1,message:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô"}),R(!0)},De=()=>{const l=ke();if(l.length>0){A.fire({icon:"warning",html:l.join("<br>")});return}j(!0),i(!0)},J=()=>{const l=ke();if(l.length>0){A.fire({icon:"warning",html:l.join("<br>")});return}j(!1),i(!0)};return e.jsxs("div",{className:"p-8 h-full overflow-auto bg-white flex flex-col items-center print:p-0 print:m-0 print:bg-white print:h-auto print:overflow-visible print:block",children:[e.jsx("style",{children:`
                @media screen { 
                    .a4-paper { width: 210mm; min-height: 297mm; margin: 0 auto; background: white; padding: 20mm; } 
                }
                @media print { 
                    @page { margin: 10mm; size: A4; } 
                    .a4-paper { width: 100%; margin: 0; padding: 0; box-shadow: none; border: none; }
                    .no-print { display: none !important; }
                    .print-border { border: 1px solid #000 !important; }
                    .print-border-2 { border: 2px solid #000 !important; }
                    .avoid-break { break-inside: avoid; page-break-inside: avoid; }
                    input, textarea, select { border: none !important; background: transparent !important; padding: 0 !important; }
                    input[type="checkbox"] { border: 1px solid #000 !important; }
                }
                .input-line { border-bottom: 1px dotted #999; width: 100%; }
            `}),e.jsxs("div",{className:"w-full max-w-5xl flex justify-end gap-2 mb-6 print:hidden",children:[e.jsxs("button",{onClick:()=>Xs(a,o,D||"Draft"),className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-sm hover:bg-green-700",title:"Export Excel",children:[e.jsx(dt,{className:"w-4 h-4"})," Export Excel"]}),e.jsxs("button",{onClick:De,className:"bg-slate-800 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-sm hover:bg-slate-700",title:"Print Form",children:[e.jsx(Ke,{className:"w-4 h-4"})," Print Form"]}),e.jsxs("button",{onClick:J,disabled:b,className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-sm hover:bg-blue-700 disabled:opacity-50",title:"Save Record",children:[e.jsx(Ye,{className:"w-4 h-4"})," Save Record"]})]}),e.jsxs("div",{className:"a4-paper text-sm",children:[e.jsxs("div",{className:"flex border-2 border-black mb-4 print-border-2 avoid-break",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black print-border p-4 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo",className:"max-h-20"})}),e.jsxs("div",{className:"w-[70%] p-4 pl-6 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-lg font-bold",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-xs font-bold text-slate-700",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Tax ID: 0105552087673 | Tel: 056-275-841"})]})]}),e.jsx("h1",{className:"text-lg font-bold text-center border-2 border-black py-2 mb-4 bg-slate-200 print:bg-transparent print-border-2",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 mb-6 avoid-break",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:"}),e.jsx("input",{type:"text",className:"input-line",value:a.toDept,onChange:l=>C({...a,toDept:l.target.value}),title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR:"}),e.jsx("div",{className:"input-line bg-slate-100 px-2 font-mono font-bold text-center",children:D||"Auto-Generated"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("input",{type:"date",className:"input-line",value:a.date,onChange:l=>C({...a,date:l.target.value}),title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤:"}),e.jsx("div",{className:"w-full border-b border-dotted border-slate-400",children:e.jsx(Ys,{className:"w-full",value:a.founder,onChange:l=>C({...a,founder:l}),options:pe,placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤..."})})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:"}),e.jsx("input",{type:"text",className:"input-line",value:a.copyTo,onChange:l=>C({...a,copyTo:l.target.value}),title:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ñ‡∏∂‡∏á"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0 whitespace-nowrap",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà PO/‡∏ú‡∏•‡∏¥‡∏ï:"}),e.jsx("input",{type:"text",className:"input-line",value:a.poNo,onChange:l=>C({...a,poNo:l.target.value}),title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠"})]})]}),e.jsxs("div",{className:"border-2 border-black mb-4 print-border-2",children:[e.jsx("div",{className:"bg-slate-200 print:bg-transparent border-b-2 border-black p-2 font-bold flex justify-between items-center print-border",children:e.jsx("span",{children:"1. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items) *"})}),e.jsxs("div",{className:"bg-slate-100 p-3 mb-2 border-b border-black text-xs no-print",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",className:"w-full p-1 border rounded",value:c.productCode,onChange:l=>N({...c,productCode:l.target.value}),placeholder:"Code",title:"Product Code"})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",className:"w-full p-1 border rounded",value:c.productName,onChange:l=>N({...c,productName:l.target.value}),placeholder:"Name",title:"Product Name"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",className:"w-full p-1 border rounded",value:c.customerName,onChange:l=>N({...c,customerName:l.target.value}),placeholder:"Customer",title:"Customer Name"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsxs("select",{className:"w-full p-1 border rounded",value:c.branch,onChange:l=>N({...c,branch:l.target.value}),title:"‡∏™‡∏≤‡∏Ç‡∏≤",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),Ee.map(l=>e.jsx("option",{value:l,children:l},l))]})]})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref No.)"}),e.jsx("input",{type:"text",className:"w-full p-1 border rounded",value:c.refNo,onChange:l=>N({...c,refNo:l.target.value}),placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•...",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref No.)"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block font-bold mb-1",children:"Neo Ref."}),e.jsx("input",{type:"text",className:"w-full p-1 border rounded",value:c.neoRefNo,onChange:l=>N({...c,neoRefNo:l.target.value}),placeholder:"Neo Ref",title:"Neo Ref"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block font-bold mb-1",children:"Lot No."}),e.jsx("input",{type:"text",className:"w-full p-1 border rounded",value:c.lotNo,onChange:l=>N({...c,lotNo:l.target.value}),placeholder:"Lot",title:"Lot No"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("input",{type:"text",className:"w-full p-1 border rounded",value:c.expiryDate,onChange:l=>N({...c,expiryDate:l.target.value}),placeholder:"DD/MM/YYYY",title:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("input",{type:"number",className:"w-full p-1 border rounded font-bold text-blue-600",value:c.quantity,onChange:l=>N({...c,quantity:parseFloat(l.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",placeholder:"0"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("input",{type:"text",className:"w-full p-1 border rounded",value:c.unit,onChange:l=>N({...c,unit:l.target.value}),placeholder:"Unit",title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("input",{type:"number",className:"w-full p-1 border rounded",value:c.pricePerUnit,onChange:l=>N({...c,pricePerUnit:parseFloat(l.target.value)}),title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",placeholder:"0.00"})]}),e.jsx("div",{className:"col-span-1 flex items-end",children:e.jsx("button",{onClick:()=>be(!1),className:"w-full bg-blue-600 text-white p-1 rounded font-bold hover:bg-blue-700 flex justify-center items-center shadow-sm",title:"‡πÄ‡∏û‡∏¥‡πà‡∏°",children:e.jsx(sl,{className:"w-4 h-4"})})})]})]}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 border-b border-black text-center",children:[e.jsx("th",{className:"p-1 border-r border-black w-10",children:"No."}),e.jsx("th",{className:"p-1 border-r border-black w-24",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-1 border-r border-black w-24",children:"‡∏ö‡∏¥‡∏•‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref) / Neo Ref"}),e.jsx("th",{className:"p-1 border-r border-black",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"p-1 border-r border-black w-16",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-1 border-r border-black w-20",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/Exp"}),e.jsx("th",{className:"p-1 border-r border-black w-32",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("th",{className:"p-1 w-8 no-print",children:"‡∏•‡∏ö"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-4 text-center text-slate-400 italic",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£')"})}):o.map((l,L)=>e.jsxs("tr",{className:"border-b border-black last:border-0 hover:bg-slate-50",children:[e.jsx("td",{className:"p-1 text-center border-r border-black",children:L+1}),e.jsx("td",{className:"p-1 text-center border-r border-black",children:l.branch}),e.jsxs("td",{className:"p-1 text-center border-r border-black",children:[l.refNo||"-",e.jsx("br",{}),e.jsx("span",{className:"text-[10px] text-slate-500",children:l.neoRefNo})]}),e.jsxs("td",{className:"p-1 border-r border-black",children:[e.jsx("div",{className:"font-bold",children:l.productCode}),e.jsx("div",{className:"truncate max-w-[150px]",children:l.productName}),e.jsx("div",{className:"text-[10px] text-slate-500",children:l.customerName})]}),e.jsxs("td",{className:"p-1 text-center border-r border-black font-bold",children:[l.quantity," ",l.unit]}),e.jsxs("td",{className:"p-1 text-center border-r border-black",children:[l.pricePerUnit,e.jsx("br",{}),e.jsx("span",{className:"text-[10px]",children:l.expiryDate})]}),e.jsxs("td",{className:"p-1 border-r border-black text-[10px]",children:[[l.problemDamaged&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î",l.problemDamagedInBox&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á",l.problemLost&&"‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢",l.problemMixed&&"‡∏õ‡∏∞‡∏õ‡∏ô",l.problemWrongInv&&"‡∏ú‡∏¥‡∏î INV",l.problemLate&&"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤",l.problemDuplicate&&"‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥",l.problemWrong&&"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î",l.problemIncomplete&&"‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö",l.problemOver&&"‡πÄ‡∏Å‡∏¥‡∏ô",l.problemWrongInfo&&"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î",l.problemShortExpiry&&"‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô",l.problemTransportDamage&&"‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏ó‡∏≥‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",l.problemAccident&&"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏",l.problemPOExpired&&"PO ‡∏´‡∏°‡∏î",l.problemNoBarcode&&"No Barcode",l.problemNotOrdered&&"‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á",l.problemOther&&"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"].filter(Boolean).join(", "),l.hasCost&&e.jsxs("div",{className:"text-red-500 font-bold mt-1",children:["Cost: ",l.costAmount]})]}),e.jsx("td",{className:"p-1 text-center no-print",children:e.jsx("button",{onClick:()=>E(l.id),className:"text-red-500 hover:text-red-700",title:"‡∏•‡∏ö",children:e.jsx($e,{className:"w-4 h-4"})})})]},l.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"border-2 border-black p-2 min-h-[100px] print-border-2",children:[e.jsxs("div",{className:"font-bold mb-2 flex items-center gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"})," ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"]}),e.jsx("div",{className:"text-center text-slate-400 text-xs py-4 border-2 border-dashed border-slate-300 rounded mb-2 no-print",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!0,checked:!1,title:"‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ö (As attached)"})," ",e.jsx("span",{className:"text-xs",children:"‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ö"})]})]}),e.jsxs("div",{className:"border-2 border-black p-2 min-h-[100px] print-border-2 relative",children:[e.jsx("div",{className:"font-bold mb-2",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"}),e.jsx("textarea",{className:"w-full h-20 text-xs resize-none outline-none border-0 bg-transparent",placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:a.problemDetail,onChange:l=>C({...a,problemDetail:l.target.value}),title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("div",{className:"mt-2 no-print",children:e.jsxs("label",{className:"flex items-center gap-3 p-2 bg-amber-50 border border-amber-200 rounded-lg cursor-pointer hover:bg-amber-100 transition-all border-dashed",children:[e.jsx("input",{type:"checkbox",checked:a.isRecordOnly||!1,onChange:()=>C({...a,isRecordOnly:!a.isRecordOnly}),className:"w-4 h-4 text-amber-600 focus:ring-amber-500 rounded border-amber-300"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-bold text-amber-800 text-[11px]",children:'‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö "Fast Track" (Record Only)'}),e.jsx("span",{className:"text-[9px] text-amber-600 leading-tight",children:"‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á (‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤) ‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"})]})]})})]})]}),e.jsxs("div",{className:"border-2 border-black mb-4 flex print-border-2 avoid-break",children:[e.jsxs("div",{className:"w-1/3 border-r-2 border-black p-2 print-border",children:[e.jsxs("div",{className:"font-bold mb-2 bg-slate-200 -mx-2 -mt-2 p-2 border-b-2 border-black print:bg-transparent print-border flex items-center gap-2",children:[e.jsx(Pt,{className:"w-4 h-4"})," ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (Images)"]}),e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 min-h-[120px] border-2 border-dashed border-slate-300 rounded hover:bg-slate-50 relative print:hidden",children:[e.jsx("input",{type:"file",title:"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ",multiple:!0,accept:"image/*",onChange:ee,className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx("span",{className:"text-xs font-bold",children:"+ ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"})]}),a.images&&a.images.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:a.images.map((l,L)=>e.jsxs("div",{className:"relative group aspect-square bg-slate-100 rounded overflow-hidden border border-slate-200",children:[e.jsx("img",{src:l,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>le(L),type:"button",className:"absolute top-0 right-0 bg-red-500 text-white p-0.5 rounded-bl hover:bg-red-600 print:hidden",title:"‡∏•‡∏ö",children:e.jsx(fe,{className:"w-3 h-3"})})]},L))})]}),e.jsxs("div",{className:"w-2/3 p-2",children:[e.jsxs("div",{className:"font-bold mb-2 bg-slate-200 -mx-2 -mt-2 p-2 border-b-2 border-black print:bg-transparent print-border flex items-center gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"})," ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (Problem Source) *"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[["Customer","DestinationCustomer","Accounting","Keying"].map(l=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:a.problemAnalysis===l,onChange:()=>C({...a,problemAnalysis:l,problemSource:l}),className:"w-4 h-4",title:l}),l]},l)),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:a.problemAnalysis==="Warehouse",onChange:()=>C({...a,problemAnalysis:"Warehouse",problemSource:"Warehouse"}),className:"w-4 h-4",title:"Warehouse"}),"‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Warehouse)"]}),a.problemAnalysis==="Warehouse"&&e.jsxs("div",{className:"ml-6 mt-1 p-2 bg-slate-50 border rounded grid grid-cols-2 gap-2",children:[e.jsxs("select",{className:"border rounded p-1",value:a.branch,onChange:l=>C({...a,branch:l.target.value}),title:"‡∏™‡∏≤‡∏Ç‡∏≤",children:[e.jsx("option",{value:"",children:"-- ‡∏™‡∏≤‡∏Ç‡∏≤ --"}),["‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","‡∏Ñ‡∏•‡∏≠‡∏á 13","‡∏ã‡∏µ‡πÇ‡∏ô‡πà","‡∏õ‡∏£‡∏∞‡∏î‡∏π‡πà"].map(l=>e.jsx("option",{value:l,children:l},l))]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå","‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏•‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏≠‡∏∑‡πà‡∏ô‡πÜ"].map(l=>e.jsxs("label",{className:"flex gap-1",children:[e.jsx("input",{type:"radio",name:"whCause",checked:a.problemAnalysisCause===l,onChange:()=>C({...a,problemAnalysisCause:l}),title:l})," ",l]},l))})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:a.problemAnalysis==="Transport",onChange:()=>C({...a,problemAnalysis:"Transport",problemSource:"Transport"}),className:"w-4 h-4",title:"Transport"}),"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transport)"]}),a.problemAnalysis==="Transport"&&e.jsx("div",{className:"ml-6 mt-1 p-2 bg-slate-50 border rounded flex gap-4",children:["CompanyDriver","JointTransport","Other"].map(l=>e.jsxs("label",{className:"flex gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:a.problemAnalysisSub===l,onChange:()=>C({...a,problemAnalysisSub:l}),title:l})," ",l]},l))})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded col-span-2",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:a.problemAnalysis==="Other",onChange:()=>C({...a,problemAnalysis:"Other",problemSource:"Other"}),className:"w-4 h-4",title:"Other"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]}),a.problemAnalysis==="Other"&&e.jsx("input",{type:"text",className:"col-span-2 w-full p-2 ml-6 border border-slate-300 rounded text-xs",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:a.problemAnalysisDetail||"",onChange:l=>C({...a,problemAnalysisDetail:l.target.value}),title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"})]}),e.jsx("textarea",{className:"w-full p-2 border rounded text-xs bg-slate-50",rows:2,placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°...",value:a.problemDetail,onChange:l=>C({...a,problemDetail:l.target.value}),title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤"})]})]})]}),e.jsxs("div",{className:"border-2 border-black mb-4 flex flex-row items-stretch print-border-2 avoid-break",children:[e.jsxs("div",{className:"w-1/2 border-r-2 border-black p-0 flex flex-col print-border",children:[e.jsx("div",{className:"font-bold p-2 border-b-2 border-black print:bg-transparent print-border",children:"‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ *"}),e.jsxs("div",{className:"p-2 grid grid-cols-2 gap-y-1 text-xs flex-1",children:[e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemDamaged,onChange:()=>Q("problemDamaged"),title:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î"})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemDamagedInBox,onChange:()=>Q("problemDamagedInBox"),title:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemLost,onChange:()=>Q("problemLost"),title:"‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemMixed,onChange:()=>Q("problemMixed"),title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemWrongInv,onChange:()=>Q("problemWrongInv"),title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemLate,onChange:()=>Q("problemLate"),title:"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemDuplicate,onChange:()=>Q("problemDuplicate"),title:"‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemWrong,onChange:()=>Q("problemWrong"),title:"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemIncomplete,onChange:()=>Q("problemIncomplete"),title:"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemOver,onChange:()=>Q("problemOver"),title:"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemWrongInfo,onChange:()=>Q("problemWrongInfo"),title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemShortExpiry,onChange:()=>Q("problemShortExpiry"),title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemTransportDamage,onChange:()=>Q("problemTransportDamage"),title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ"})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemAccident,onChange:()=>Q("problemAccident"),title:"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemPOExpired,onChange:()=>Q("problemPOExpired"),title:"PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemNoBarcode,onChange:()=>Q("problemNoBarcode"),title:"‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex gap-2 items-center cursor-pointer hover:bg-slate-50 rounded px-1",children:[e.jsx("input",{type:"checkbox",checked:a.problemNotOrdered,onChange:()=>Q("problemNotOrdered"),title:"‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"col-span-2 flex items-center gap-2 mt-1 px-1",children:[e.jsxs("label",{className:"flex gap-2 whitespace-nowrap cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.problemOther,onChange:()=>Q("problemOther")})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]}),e.jsx("input",{type:"text",className:"input-line text-xs flex-1",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",value:a.problemOtherText,onChange:l=>C({...a,problemOtherText:l.target.value}),title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]})]}),e.jsxs("div",{className:"w-1/2 p-0 flex flex-col",children:[e.jsx("div",{className:"font-bold p-2 border-b-2 border-black print:bg-transparent print-border",children:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsxs("div",{className:"text-xs space-y-2 p-2 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 hover:bg-slate-50 rounded px-1",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"checkbox",checked:a.actionReject,onChange:()=>U("actionReject")}),e.jsx("span",{className:"font-bold",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500 text-[10px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center font-bold",value:a.actionRejectQty||"",onChange:l=>C({...a,actionRejectQty:Number(l.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 hover:bg-slate-50 rounded px-1",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"checkbox",checked:a.actionRejectSort,onChange:()=>U("actionRejectSort")}),e.jsx("span",{className:"font-bold",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏∑‡∏ô"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500 text-[10px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center font-bold",value:a.actionRejectSortQty||"",onChange:l=>C({...a,actionRejectSortQty:Number(l.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 hover:bg-slate-50 rounded px-1 py-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"checkbox",checked:a.actionRework,onChange:()=>U("actionRework")}),e.jsx("span",{className:"font-bold",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500 text-[10px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center font-bold",value:a.actionReworkQty||"",onChange:l=>C({...a,actionReworkQty:Number(l.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"})]})]}),a.actionRework&&e.jsxs("div",{className:"pl-6 flex items-center gap-2 animate-fade-in",children:[e.jsx("span",{className:"whitespace-nowrap text-[10px]",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ:"}),e.jsx("input",{type:"text",className:"input-line flex-1",value:a.actionReworkMethod,onChange:l=>C({...a,actionReworkMethod:l.target.value}),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£...",title:"‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1 hover:bg-slate-50 rounded px-1 py-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"checkbox",checked:a.actionSpecialAcceptance,onChange:()=>U("actionSpecialAcceptance")}),e.jsx("span",{className:"font-bold",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500 text-[10px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center font-bold",value:a.actionSpecialAcceptanceQty||"",onChange:l=>C({...a,actionSpecialAcceptanceQty:Number(l.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©"})]})]}),a.actionSpecialAcceptance&&e.jsxs("div",{className:"pl-6 flex items-center gap-2 animate-fade-in",children:[e.jsx("span",{className:"whitespace-nowrap text-[10px]",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•:"}),e.jsx("input",{type:"text",className:"input-line flex-1",value:a.actionSpecialAcceptanceReason,onChange:l=>C({...a,actionSpecialAcceptanceReason:l.target.value}),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•...",title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•"})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 hover:bg-slate-50 rounded px-1",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"checkbox",checked:a.actionScrap,onChange:()=>U("actionScrap")}),e.jsx("span",{className:"font-bold",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500 text-[10px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center font-bold",value:a.actionScrapQty||"",onChange:l=>C({...a,actionScrapQty:Number(l.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢"})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 hover:bg-slate-50 rounded px-1",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx("input",{type:"checkbox",checked:a.actionReplace,onChange:()=>U("actionReplace")}),e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500 text-[10px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center font-bold",value:a.actionReplaceQty||"",onChange:l=>C({...a,actionReplaceQty:Number(l.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"})]})]}),e.jsxs("div",{className:"flex items-end gap-2 mt-4 pt-2 border-t border-dotted border-slate-300",children:[e.jsx("span",{className:"font-bold",children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à:"}),e.jsx("input",{type:"date",className:"input-line w-32 text-center",value:a.dueDate,onChange:l=>C({...a,dueDate:l.target.value}),title:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"})]})]})]})]}),e.jsxs("div",{className:"border-2 border-black mb-4 flex flex-row print-border-2 avoid-break",children:[e.jsxs("div",{className:"w-1/3 border-r-2 border-black p-2 print-border",children:[e.jsxs("div",{className:"font-bold mb-2 bg-slate-200 -mx-2 -mt-2 p-2 border-b-2 border-black print:bg-transparent print-border flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4"})," ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Select Route) *"]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[qe.map(l=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"globalRoute",className:"w-4 h-4",checked:a.preliminaryRoute===l,onChange:()=>C({...a,preliminaryRoute:l}),title:l}),e.jsx("span",{children:l})]},l)),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"globalRoute",className:"w-4 h-4",checked:a.preliminaryRoute==="Other",onChange:()=>C({...a,preliminaryRoute:"Other"}),title:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]}),a.preliminaryRoute==="Other"&&e.jsx("input",{type:"text",className:"w-full p-1 ml-6 border border-slate-300 rounded outline-none",placeholder:"‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏...",value:a.preliminaryRouteOther,onChange:l=>C({...a,preliminaryRoute:"Other",preliminaryRouteOther:l.target.value}),title:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]})]}),e.jsxs("div",{className:"w-1/3 border-r-2 border-black p-2 print-border",children:[e.jsxs("div",{className:"font-bold mb-2 bg-amber-50 -mx-2 -mt-2 p-2 border-b-2 border-black print:bg-transparent print-border flex items-center gap-2 text-amber-800",children:[e.jsx(Ze,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Cost Tracking)"]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.hasCost,onChange:l=>C({...a,hasCost:l.target.checked}),className:"w-4 h-4 accent-amber-600",title:"Has Cost"}),e.jsx("span",{className:"font-bold text-amber-600",children:"‚ö† ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Has Cost)"})]}),a.hasCost&&e.jsxs("div",{className:"space-y-2 pl-4 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1 text-slate-700",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (Problem Source)"}),e.jsxs("select",{className:"w-full input-line bg-white text-slate-700 font-medium p-1 border-b border-amber-300 focus:border-amber-500 outline-none",value:a.problemSource||"",onChange:l=>{const L=l.target.value,H=jt[L]||"";C({...a,problemSource:L,costResponsible:H})},title:"Problem Source",children:[e.jsx("option",{value:"",children:"-- ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ --"}),Object.keys(jt).map(l=>e.jsx("option",{value:l,children:l},l)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1 text-slate-700",children:"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"}),e.jsx("input",{type:"number",className:"w-full input-line border-amber-300 focus:border-amber-500",value:a.costAmount,onChange:l=>C({...a,costAmount:Number(l.target.value)}),title:"Cost Amount",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1 text-slate-700",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsx("input",{type:"text",className:"w-full input-line border-amber-300 focus:border-amber-500",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",value:a.costResponsible,onChange:l=>C({...a,costResponsible:l.target.value}),title:"Responsible"})]})]})]})]}),e.jsxs("div",{className:"w-1/3 p-2",children:[e.jsxs("div",{className:"font-bold mb-2 bg-green-100 -mx-2 -mt-2 p-2 border-b-2 border-black print:bg-transparent print-border flex items-center gap-2 text-green-800",children:[e.jsx(Pe,{className:"w-4 h-4"})," ‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô (Field Settlement)"]}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.isFieldSettled,onChange:l=>C({...a,isFieldSettled:l.target.checked}),className:"w-4 h-4",title:"Field Settlement"}),e.jsx("span",{className:"font-bold text-green-700",children:"‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Settlement)"})]}),a.isFieldSettled&&e.jsxs("div",{className:"space-y-2 pl-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"}),e.jsx("input",{type:"number",className:"w-full input-line border-green-300",value:a.fieldSettlementAmount,onChange:l=>C({...a,fieldSettlementAmount:Number(l.target.value)}),title:"Amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô"}),e.jsx("input",{type:"text",className:"w-full input-line border-green-300",value:a.fieldSettlementName,onChange:l=>C({...a,fieldSettlementName:l.target.value}),title:"Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"}),e.jsx("input",{type:"text",className:"w-full input-line border-green-300",placeholder:"Note/URL",value:a.fieldSettlementEvidence,onChange:l=>C({...a,fieldSettlementEvidence:l.target.value}),title:"Evidence"})]})]})]})]})]}),e.jsxs("div",{className:"border-2 border-black mb-4 print-border-2 avoid-break",children:[e.jsx("div",{className:"bg-slate-200 print:bg-transparent border-b-2 border-black p-2 font-bold print-border",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"}),e.jsxs("div",{className:"p-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border-r border-black pr-4",children:[e.jsx("div",{className:"font-bold mb-2 text-xs",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å *"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs mb-3",children:[e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.causePackaging,onChange:()=>C({...a,causePackaging:!a.causePackaging}),title:"‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.causeTransport,onChange:()=>C({...a,causeTransport:!a.causeTransport}),title:"‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.causeOperation,onChange:()=>C({...a,causeOperation:!a.causeOperation}),title:"‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.causeEnv,onChange:()=>C({...a,causeEnv:!a.causeEnv}),title:"‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-bold mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ :"}),e.jsx("textarea",{className:"w-full h-16 resize-none input-line bg-transparent",value:a.causeDetail,onChange:l=>C({...a,causeDetail:l.target.value}),title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-xs h-full flex flex-col",children:[e.jsx("div",{className:"font-bold mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô :"}),e.jsx("textarea",{className:"w-full flex-1 resize-none input-line bg-transparent mb-2",value:a.preventionDetail,onChange:l=>C({...a,preventionDetail:l.target.value}),title:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô..."}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",className:"input-line w-32",value:a.preventionDueDate,onChange:l=>C({...a,preventionDueDate:l.target.value}),title:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"})]})]})})]})]}),e.jsxs("div",{className:"flex border-2 border-black h-32 mb-4 print-border-2 avoid-break",children:[e.jsxs("div",{className:"w-1/4 border-r-2 border-black p-2 flex flex-col justify-between items-center print-border",children:[e.jsx("div",{className:"text-xs font-bold text-center w-full",children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Approver)"}),e.jsxs("div",{className:"text-center w-full mt-auto",children:[e.jsx("input",{type:"text",className:"input-line text-center mb-1 bg-transparent",placeholder:"(‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠)",value:a.approver,onChange:l=>C({...a,approver:l.target.value}),title:"‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"}),e.jsx("input",{type:"text",className:"input-line text-center text-xs mb-1 bg-transparent",placeholder:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",value:a.approverPosition,onChange:l=>C({...a,approverPosition:l.target.value}),title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsxs("div",{className:"flex justify-center items-center gap-1 text-[10px]",children:[e.jsx("span",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"}),e.jsx("input",{type:"date",className:"input-line w-24 text-center bg-transparent",value:a.approverDate,onChange:l=>C({...a,approverDate:l.target.value}),title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"})]})]})]}),e.jsxs("div",{className:"w-1/4 border-r-2 border-black p-2 flex flex-col justify-between items-center print-border",children:[e.jsx("div",{className:"text-xs font-bold text-center w-full",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsxs("div",{className:"text-center w-full mt-auto",children:[e.jsx("input",{type:"text",className:"input-line text-center mb-1 bg-transparent",placeholder:"(‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠)",value:a.responsiblePerson,onChange:l=>C({...a,responsiblePerson:l.target.value}),title:"‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",className:"input-line text-center text-xs mb-1 bg-transparent",placeholder:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",value:a.responsiblePosition,onChange:l=>C({...a,responsiblePosition:l.target.value}),title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsxs("div",{className:"flex justify-center items-center gap-1 text-[10px]",children:[e.jsx("span",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"}),e.jsx("input",{type:"date",className:"input-line w-24 text-center bg-transparent",value:a.dueDate,onChange:l=>C({...a,dueDate:l.target.value}),title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"})]})]})]}),e.jsx("div",{className:"w-2/4 p-2 text-[10px] italic flex items-center justify-center text-center",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ : ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≤‡∏á Supplier/Out source ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ö NCR ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏¢‡∏±‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå"})]}),e.jsxs("div",{className:"border-2 border-black mb-4 print-border-2 avoid-break",children:[e.jsx("div",{className:"bg-slate-200 print:bg-transparent border-b-2 border-black p-2 font-bold text-center print-border",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î NCR"}),e.jsxs("div",{className:"flex h-32 divide-x-2 divide-black",children:[e.jsxs("div",{className:"w-1/3 p-2 flex flex-col justify-center",children:[e.jsxs("label",{className:"flex gap-2 items-center mb-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.qaAccept,onChange:()=>C({...a,qaAccept:!0,qaReject:!1}),title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",className:"w-4 h-4"})," ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsxs("label",{className:"flex gap-2 items-center mb-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.qaReject,onChange:()=>C({...a,qaAccept:!1,qaReject:!0}),title:"‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",className:"w-4 h-4"})," ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsx("input",{type:"text",className:"input-line text-xs bg-transparent",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",value:a.qaReason,onChange:l=>C({...a,qaReason:l.target.value}),title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•"})]}),e.jsxs("div",{className:"w-1/3 p-2 flex flex-col justify-between items-center",children:[e.jsx("div",{className:"text-xs font-bold text-center w-full",children:"‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsxs("div",{className:"text-center w-full mt-auto",children:[e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-1 h-6"}),e.jsx("div",{className:"text-xs font-bold",children:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"}),e.jsx("div",{className:"text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]})]}),e.jsxs("div",{className:"w-1/3 p-2 flex flex-col justify-between items-center",children:[e.jsx("div",{className:"text-xs font-bold text-center w-full",children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsxs("div",{className:"text-center w-full mt-auto",children:[e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-1 h-6"}),e.jsx("div",{className:"text-xs font-bold",children:"‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£"}),e.jsx("div",{className:"text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]})]})]})]})]}),n&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto animate-fade-in-up",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center sticky top-0 bg-white z-10",children:[e.jsxs("h3",{className:"font-bold text-lg",children:[e.jsx(st,{className:"inline-block w-5 h-5 mr-2 text-blue-600"})," ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Add Item)"]}),e.jsx("button",{onClick:()=>f(!1),className:"p-1 hover:bg-slate-100 rounded-full",title:"Close",children:e.jsx(fe,{className:"w-6 h-6 text-slate-500"})})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"input-field flex-1",placeholder:"‡∏¢‡∏¥‡∏á‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î ‡∏´‡∏£‡∏∑‡∏≠ ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...",value:c.productCode,onChange:l=>ce(l.target.value),autoFocus:!0,title:"‡∏£‡∏´‡πâ‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î"}),e.jsx("button",{className:"btn-secondary",title:"Search",children:e.jsx(Ge,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",className:"input-field bg-slate-50",value:c.productName,readOnly:!0,title:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("input",{type:"number",className:"input-field text-center font-bold text-blue-600",value:c.quantity,onChange:l=>N({...c,quantity:Number(l.target.value)}),title:"Quantity",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("input",{type:"text",className:"input-field text-center",value:c.unit,onChange:l=>N({...c,unit:l.target.value}),title:"Unit",placeholder:"Unit"})]})]}),e.jsxs("div",{className:"col-span-2 pt-4 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"btn-secondary",title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:be,className:"btn-primary",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",children:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm text-center",children:[e.jsx(al,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-2 border rounded-lg hover:bg-slate-50",title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{onClick:ye,disabled:b,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex justify-center items-center gap-2",title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",children:[b&&e.jsx(ll,{className:"w-4 h-4 animate-spin"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"]})]})]})}),m&&h&&e.jsx("div",{className:"fixed inset-0 z-[90] bg-black/60 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm text-center",children:[h.success?e.jsx(Pe,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}):e.jsx($t,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:h.success?"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!":"‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4 whitespace-pre-line",children:h.message}),e.jsx("button",{onClick:()=>{R(!1),h.success&&(v([]),C(u),S(""))},className:"w-full py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700",title:"‡∏ï‡∏Å‡∏•‡∏á",children:"‡∏ï‡∏Å‡∏•‡∏á"})]})}),I&&e.jsx("div",{className:"fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-xs text-center animate-fade-in-up",children:[e.jsx(ts,{className:"w-10 h-10 text-slate-700 mx-auto mb-3"}),e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Admin Authentication"}),e.jsx("input",{type:"password",autoFocus:!0,className:"w-full p-2 text-center text-xl border rounded mb-4 tracking-widest",placeholder:"Password",value:de,onChange:l=>re(l.target.value),onKeyDown:l=>l.key==="Enter"&&Se(),title:"Password"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-2 border rounded hover:bg-slate-50",title:"Cancel",children:"Cancel"}),e.jsx("button",{onClick:Se,className:"flex-1 py-2 bg-slate-800 text-white rounded hover:bg-slate-900",title:"Confirm",children:"Confirm"})]})]})})]})},Ql=({item:s,onUpdate:r,onClose:d,onSave:g})=>{var a,C;const t=()=>{window.print()},x=o=>{if(!o)return[];const v=[];return o.problemDamaged&&v.push("‡∏ä‡∏≥‡∏£‡∏∏‡∏î"),o.problemDamagedInBox&&v.push("‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"),o.problemLost&&v.push("‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"),o.problemMixed&&v.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"),o.problemWrongInv&&v.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."),o.problemLate&&v.push("‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"),o.problemDuplicate&&v.push("‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"),o.problemWrong&&v.push("‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"),o.problemIncomplete&&v.push("‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"),o.problemOver&&v.push("‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"),o.problemWrongInfo&&v.push("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"),o.problemShortExpiry&&v.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"),o.problemTransportDamage&&v.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"),o.problemAccident&&v.push("‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"),o.problemPOExpired&&v.push("PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"),o.problemNoBarcode&&v.push("‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"),o.problemNotOrdered&&v.push("‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"),o.problemOther&&v.push(`‡∏≠‡∏∑‡πà‡∏ô‡πÜ: ${o.problemOtherText||"-"}`),v},u=s.item||s;return e.jsxs("div",{className:"fixed inset-0 bg-slate-900/50 flex flex-col items-center justify-start z-[9999] overflow-y-auto no-scrollbar print:static print:bg-white print:overflow-visible print:p-0 print:block",children:[e.jsxs("div",{className:"sticky top-0 w-full bg-white border-b border-slate-200 shadow-sm p-4 flex justify-between items-center z-50 print:hidden shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-slate-600"}),e.jsx("h2",{className:"font-bold text-slate-800",children:"Print Preview (A4 Mode)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 font-bold text-sm transition-colors border border-blue-200",children:[e.jsx(Ye,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]}),e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-900 font-bold text-sm transition-colors shadow-sm",children:[e.jsx(Ke,{className:"w-4 h-4"})," ‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå"]}),e.jsx("button",{onClick:d,className:"p-2 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(fe,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"my-8 print:m-0 print:w-full",children:e.jsxs("div",{className:"bg-white shadow-2xl mx-auto print:shadow-none print:mx-0 relative flex flex-col print-content-root ncr-a4-container",children:[e.jsxs("div",{className:"flex border-2 border-black mb-4",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black p-2 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-20"})}),e.jsxs("div",{className:"w-[70%] p-2 flex flex-col justify-center pl-4",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 leading-none mb-1",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-xs font-bold text-slate-700 mb-2",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-xs text-slate-600 mb-0.5",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-xs text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-lg font-bold text-center border-2 border-black py-1.5 mb-4 bg-white text-slate-900 print:bg-transparent uppercase tracking-wide",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-todept",className:"font-bold w-24 text-slate-800",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:"}),e.jsx("input",{id:"ncr-todept",type:"text",value:s.toDept||"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",onChange:o=>r({...s,toDept:o.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-date",className:"font-bold w-20 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("input",{id:"ncr-date",type:"text",value:s.date,onChange:o=>r({...s,date:o.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-copyto",className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:"}),e.jsx("input",{id:"ncr-copyto",type:"text",value:s.copyTo||"",onChange:o=>r({...s,copyTo:o.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1 font-bold",children:s.ncrNo})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-founder",className:"font-bold w-24 text-slate-800",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤:"}),e.jsx("input",{id:"ncr-founder",type:"text",value:s.founder||"",onChange:o=>r({...s,founder:o.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-pono",className:"font-bold w-20 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:"}),e.jsx("input",{id:"ncr-pono",type:"text",value:s.poNo||"",onChange:o=>r({...s,poNo:o.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-sm mb-2 underline decoration-2 decoration-black",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items)"}),e.jsxs("table",{className:"w-full border-collapse border border-black text-sm",children:[e.jsx("thead",{className:"print:table-header-group",children:e.jsxs("tr",{className:"bg-slate-100 print:bg-transparent",children:[e.jsx("th",{className:"border border-black p-2 w-[15%] text-left",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"border border-black p-2 w-[20%] text-left",children:"Ref / Neo Ref"}),e.jsx("th",{className:"border border-black p-2 w-[25%] text-left",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-black p-2 w-[10%] text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-black p-2 w-[15%] text-right",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("th",{className:"border border-black p-2 w-[15%] text-left",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"print:break-inside-avoid",children:[e.jsx("td",{className:"border border-black p-2 valign-top text-xs",children:u.branch}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Ref:"})," ",u.refNo||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Neo:"})," ",u.neoRefNo||"-"]})]}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsx("div",{className:"font-bold",children:u.productCode}),e.jsx("div",{className:"mb-1",children:u.productName}),e.jsx("div",{className:"text-slate-500 italic",children:u.customerName}),e.jsxs("div",{className:"text-slate-500 text-[10px]",children:["‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: ",u.destinationCustomer||"-"]})]}),e.jsxs("td",{className:"border border-black p-2 text-center valign-top font-bold",children:[u.quantity," ",u.unit]}),e.jsxs("td",{className:"border border-black p-2 text-right valign-top text-xs",children:[e.jsxs("div",{className:"mb-1",children:[(a=u.priceBill)==null?void 0:a.toLocaleString()," ‡∏ö."]}),e.jsxs("div",{className:"text-red-500",children:["Exp: ",u.expiryDate||"-"]})]}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsx("div",{className:"font-bold underline",children:u.problemSource}),u.hasCost&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"text-red-600 font-bold",children:["Cost: ",(C=u.costAmount)==null?void 0:C.toLocaleString()," ‡∏ö."]}),e.jsxs("div",{className:"text-[10px]",children:["(",u.costResponsible,")"]})]})]})]})})]})]}),e.jsxs("div",{className:"border border-black flex flex-col flex-1 min-h-0 print:break-inside-avoid",children:[e.jsxs("div",{className:"bg-slate-50 border-b border-black p-2 flex justify-between font-bold text-sm print:bg-transparent",children:[e.jsx("div",{className:"w-1/2 text-center",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("div",{className:"w-1/2 text-center border-l border-black",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})]}),e.jsxs("div",{className:"flex flex-1 min-h-[300px]",children:[e.jsx("div",{className:"w-1/2 p-4 border-r border-black flex flex-col items-center justify-center text-slate-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"[‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö]"}),e.jsx("p",{className:"text-xs mt-2 text-slate-300",children:"‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢"}),e.jsx("p",{className:"text-xs text-slate-300",children:"‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á"})]})}),e.jsxs("div",{className:"w-1/2 p-4 flex flex-col gap-3",children:[e.jsx("div",{className:"text-xs font-bold underline mb-2",children:"‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:x(s).length>0?x(s).map((o,v)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 border border-black bg-black flex items-center justify-center",children:e.jsx("span",{className:"text-white text-[10px] pb-1",children:"‚úì"})}),e.jsx("span",{children:o})]},v)):e.jsx("div",{className:"col-span-2 text-slate-400 italic",children:"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤"})}),e.jsxs("div",{className:"mt-4 flex flex-col flex-1",children:[e.jsx("label",{htmlFor:"ncr-detail",className:"text-xs font-bold mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{id:"ncr-detail",value:s.problemDetail,onChange:o=>r({...s,problemDetail:o.target.value}),className:"w-full flex-1 border border-dotted border-black p-2 text-xs resize-none min-h-[100px] outline-none"})]})]})]})]}),e.jsxs("div",{className:"mt-4 border-t-2 border-black pt-4 print:break-inside-avoid page-break-avoid",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 text-sm",children:[e.jsxs("div",{className:"border border-black p-4",children:[e.jsx("h4",{className:"font-bold underline mb-3 text-center",children:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionReject||s.actionRejectSort,readOnly:!0}),e.jsx("span",{children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject) / ‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å (Sort)"}),s.actionRejectSortQty&&e.jsxs("span",{className:"ml-auto underline",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ",s.actionRejectSortQty]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionScrap,readOnly:!0}),e.jsx("span",{children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),s.actionScrapQty&&e.jsxs("span",{className:"ml-auto underline",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ",s.actionScrapQty]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionSpecialAcceptance,readOnly:!0}),e.jsx("span",{children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"})]})]})]}),e.jsxs("div",{className:"border border-black p-4",children:[e.jsx("h4",{className:"font-bold underline mb-3 text-center",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ & ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex gap-4 mb-2",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:s.causePackaging,readOnly:!0})," Packaging"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:s.causeTransport,readOnly:!0})," Transport"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:s.causeOperation,readOnly:!0})," Operation"]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("div",{className:"border-b border-dotted border-black min-h-[20px]",children:s.causeDetail||"-"})]}),e.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:"}),e.jsx("div",{className:"border-b border-dotted border-black min-h-[20px]",children:s.preventionDetail||"-"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8 text-xs text-center px-8 pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsxs("div",{className:"font-bold",children:["(",s.founder||"..........................",")"]}),e.jsxs("div",{children:["‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ",s.date]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö / ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsxs("div",{className:"font-bold",children:["(",s.responsiblePerson||"..........................",")"]}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Manager)"}),e.jsxs("div",{className:"font-bold",children:["(",s.approver||"..........................",")"]}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]})]})]})]})}),e.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap');
        
        .print-content-root {
          font-family: 'Sarabun', 'TH Sarabun New', sans-serif;
        }

        .ncr-a4-container {
          width: 210mm;
          min-height: 297mm;
          padding: 10mm 15mm;
        }

        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body {
            background: white !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          .print-content-root {
            width: 100%;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:table-header-group {
            display: table-header-group !important;
          }
          .print\\:break-inside-avoid {
             page-break-inside: avoid !important;
             break-inside: avoid !important;
          }
        }
      `})]})},Fe=s=>{if(!s)return"-";const r=new Date(s);if(isNaN(r.getTime()))return"-";const d=String(r.getDate()).padStart(2,"0"),g=String(r.getMonth()+1).padStart(2,"0"),t=r.getFullYear();return`${d}/${g}/${t}`},Wl=({isOpen:s,onClose:r,report:d,correspondingReturn:g})=>{if(!s||!d)return null;const t=d.item||d,x=(N,b)=>{if(!N||!b)return null;const P=new Date(N),p=new Date(b),i=Math.abs(p.getTime()-P.getTime());return Math.ceil(i/(1e3*60*60*24))},u=[{id:1,label:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Request)",status:"‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",date:(g==null?void 0:g.dateRequested)||d.date,icon:Oe,colorKey:"blue",description:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤/‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:2,label:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (In Transit)",status:"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á",date:g==null?void 0:g.dateInTransit,icon:Ne,colorKey:"purple",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏õ Hub"},{id:3,label:"‡∏ñ‡∏∂‡∏á Hub (Received)",status:"‡∏ñ‡∏∂‡∏á Hub",date:(g==null?void 0:g.dateHubReceived)||(g==null?void 0:g.dateReceived),icon:Ve,colorKey:"pink",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:4,label:"‡∏Ñ‡∏•‡∏±‡∏á/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (QC/Docs)",status:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",date:(g==null?void 0:g.dateGraded)||(g==null?void 0:g.dateDocumented),icon:Oe,colorKey:"yellow",description:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£/‡∏Ñ‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"},{id:5,label:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Done)",status:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",date:g==null?void 0:g.dateCompleted,icon:mt,colorKey:"green",description:"‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå"}],a=u.filter(N=>N.date),C=a.length>0?a[0].date:null,o=a.length>0?a[a.length-1].date:null,v=x(C,o),n=d.status==="Canceled",f={blue:{bg:"bg-blue-100",border:"border-blue-500",text:"text-blue-600",badgeBg:"bg-blue-50",badgeText:"text-blue-700"},orange:{bg:"bg-orange-100",border:"border-orange-500",text:"text-orange-600",badgeBg:"bg-orange-50",badgeText:"text-orange-700"},indigo:{bg:"bg-indigo-100",border:"border-indigo-500",text:"text-indigo-600",badgeBg:"bg-indigo-50",badgeText:"text-indigo-700"},yellow:{bg:"bg-yellow-100",border:"border-yellow-500",text:"text-yellow-600",badgeBg:"bg-yellow-50",badgeText:"text-yellow-700"},purple:{bg:"bg-purple-100",border:"border-purple-500",text:"text-purple-600",badgeBg:"bg-purple-50",badgeText:"text-purple-700"},pink:{bg:"bg-pink-100",border:"border-pink-500",text:"text-pink-600",badgeBg:"bg-pink-50",badgeText:"text-pink-700"},green:{bg:"bg-green-100",border:"border-green-500",text:"text-green-600",badgeBg:"bg-green-50",badgeText:"text-green-700"},red:{bg:"bg-red-100",border:"border-red-500",text:"text-red-600",badgeBg:"bg-red-50",badgeText:"text-red-700"},gray:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-400",badgeBg:"bg-slate-100",badgeText:"text-slate-500"}},c=u.findIndex(N=>!N.date);return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl w-full max-w-5xl overflow-hidden flex flex-col max-h-[90vh] ${n?"border-4 border-red-500":""}`,children:[e.jsxs("div",{className:`border-b p-6 flex justify-between items-start ${n?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[n?e.jsx(fe,{className:"w-8 h-8 text-red-600"}):e.jsx(lt,{className:"w-6 h-6 text-blue-600"}),"Timeline ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border shadow-sm ${n?"bg-red-100 text-red-700 border-red-200":"bg-blue-100 text-blue-700 border-blue-200"}`,children:n?"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (CANCELED)":`NCR No: ${d.ncrNo||d.id}`}),v!==null&&e.jsxs("div",{className:"flex items-center gap-1 ml-4 bg-indigo-50 px-3 py-1 rounded-full border border-indigo-100",children:[e.jsx(At,{className:"w-4 h-4 text-indigo-600"}),e.jsxs("span",{className:"text-xs font-bold text-indigo-700",children:["‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ",v," ‡∏ß‡∏±‡∏ô"]})]})]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô (Status Tracking Infographic)"})]}),e.jsx("button",{onClick:r,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-200 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(fe,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto bg-slate-50/30",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-10",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)"}),e.jsx("div",{className:"font-bold text-slate-800 text-sm",children:t.productName}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:t.productCode})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (Customer)"}),e.jsx("div",{className:"font-bold text-slate-800 text-sm",children:t.customerName}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:t.branch})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Issue)"}),e.jsx("div",{className:"font-bold text-red-600 text-sm",children:d.problemDetail}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Source: ",t.problemSource]})]})]}),e.jsxs("div",{className:"relative pt-10 pb-6 px-4",children:[e.jsx("div",{className:"hidden md:block absolute top-[85px] left-10 right-10 h-1.5 bg-slate-200 rounded-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 relative",children:u.map((N,b)=>{let P=f[N.colorKey],p=!!N.date;const i=u[b-1],m=p&&(i!=null&&i.date)?x(i.date,N.date):null;let R=N.label,h=N.status,O=N.icon;return n&&(N.date||(b===c?(P=f.red,p=!0,h="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",O=fe):b>c&&(P=f.gray))),e.jsxs("div",{className:"flex flex-col items-center relative z-10 group",children:[m!==null&&e.jsx("div",{className:"hidden md:flex absolute -left-[50%] top-[-30px] w-full justify-center",children:e.jsxs("div",{className:"text-[10px] font-bold text-slate-500 bg-white px-2 py-1 rounded-full border border-slate-200 shadow-sm whitespace-nowrap",children:[m," ‡∏ß‡∏±‡∏ô ",e.jsx("span",{className:"text-slate-300 mx-1",children:"‚Üí"})]})}),e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center border-4 shadow-lg transition-transform duration-300 mb-4 bg-white
                      ${p?`${P.border} ${P.text} scale-110 group-hover:scale-115`:"border-slate-200 text-slate-300"}
                    `,children:e.jsx(O,{className:"w-7 h-7"})}),e.jsxs("div",{className:`w-full bg-white rounded-xl border p-3 shadow-sm text-center min-h-[140px] flex flex-col transition-all duration-300
                      ${p?"border-blue-100 shadow-md transform hover:-translate-y-1":"border-slate-100 opacity-70"}
                    `,children:[e.jsx("div",{className:`font-bold text-sm mb-1 ${p?"text-slate-800":"text-slate-400"}`,children:R}),e.jsx("div",{className:"flex-grow flex items-center justify-center my-2",children:e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold
                          ${p?`${P.badgeBg} ${P.badgeText}`:"bg-slate-100 text-slate-400"}
                        `,children:h})}),e.jsx("div",{className:"border-t border-slate-50 pt-2 mt-auto",children:N.date?e.jsxs("div",{className:"text-xs font-bold text-slate-600 flex items-center justify-center gap-1",children:[e.jsx(At,{className:"w-3 h-3"}),Fe(N.date)]}):n&&b===c?e.jsxs("div",{className:"text-xs font-bold text-red-500 flex items-center justify-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"}),"CANCELED"]}):e.jsx("div",{className:"text-[10px] text-slate-300 italic",children:"Pending"})})]})]},N.id)})})]}),e.jsxs("div",{className:"mt-8 text-center text-xs text-slate-400 bg-blue-50/50 p-2 rounded-lg border border-blue-50 mx-auto max-w-2xl",children:["üí° ",e.jsx("strong",{children:"Infographic Info:"})," ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Journey) ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô"]})]})]})})},zl=({onTransfer:s})=>{const{ncrReports:r,items:d,updateNCRReport:g,deleteNCRReport:t}=Ie(),[x,u]=k.useState(!1),[a,C]=k.useState(null),[o,v]=k.useState(!1),[n,f]=k.useState(null),[c,N]=k.useState(!1),[b,P]=k.useState(!1),[p,i]=k.useState(""),[m,R]=k.useState(null),[h,O]=k.useState(!1),[w,j]=k.useState(null);k.useEffect(()=>{o&&setTimeout(()=>{const y=document.getElementById("ncr-modal-overlay");y&&(y.scrollTop=0)},10)},[o]);const[D,S]=k.useState({query:"",action:"All",returnStatus:"All",hasCost:!1,startDate:"",endDate:""}),[I,T]=k.useState(1),[$,B]=k.useState(20),[V,G]=k.useState(!1),[de,re]=k.useState(null),pe=y=>{re(y),G(!0)},Se=k.useMemo(()=>{const y=new Set;return r.forEach(_=>{_.founder&&y.add(_.founder),_.item&&_.item.founder&&y.add(_.item.founder)}),d.forEach(_=>{_.founder&&y.add(_.founder)}),Array.from(y).sort()},[r,d]),E=k.useMemo(()=>[...r].filter(_=>{var se,ue,ve,Be,Qe,Me,we,pt;const M=_.item||_,ne=d.find(bt=>bt.ncrNumber===_.ncrNo);if(D.startDate&&_.date<D.startDate||D.endDate&&_.date>D.endDate)return!1;const Z=D.query.toLowerCase();return!(Z&&!((se=_.ncrNo)!=null&&se.toLowerCase().includes(Z))&&!((ue=M.customerName)!=null&&ue.toLowerCase().includes(Z))&&!((ve=M.productName)!=null&&ve.toLowerCase().includes(Z))&&!((Be=M.productCode)!=null&&Be.toLowerCase().includes(Z))&&!((Qe=M.branch)!=null&&Qe.toLowerCase().includes(Z))&&!((Me=M.destinationCustomer)!=null&&Me.toLowerCase().includes(Z))&&!((we=_.problemDetail)!=null&&we.toLowerCase().includes(Z))&&!((pt=M.problemSource)!=null&&pt.toLowerCase().includes(Z))||D.action!=="All"&&(D.action==="Reject"&&!_.actionReject&&!_.actionRejectSort||D.action==="Scrap"&&!_.actionScrap)||D.returnStatus!=="All"&&(D.returnStatus==="NotReturned"&&ne||D.returnStatus!=="NotReturned"&&(!ne||ne.status!==D.returnStatus))||D.hasCost&&!M.hasCost)}).sort((_,M)=>{const ne=_.ncrNo||_.id;return(M.ncrNo||M.id).localeCompare(ne)}),[r,d,D]),Q=()=>{const _=`
        <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
        <head>
          <meta http-equiv="content-type" content="text/plain; charset=UTF-8"/>
          <!--[if gte mso 9]>
          <xml>
            <x:ExcelWorkbook>
              <x:ExcelWorksheets>
                <x:ExcelWorksheet>
                  <x:Name>NCR Report</x:Name>
                  <x:WorksheetOptions>
                    <x:DisplayGridlines/>
                  </x:WorksheetOptions>
                </x:ExcelWorksheet>
              </x:ExcelWorksheets>
            </x:ExcelWorkbook>
          </xml>
          <![endif]-->
          <style>
            th { font-weight: bold; background-color: #f0f0f0; border: 1px solid #000; padding: 5px; }
            td { border: 1px solid #000; padding: 5px; vertical-align: top; }
          </style>
        </head>
        <body>
          <table>
            <thead>
              <tr>
                ${["NCR No","Date","Status","Product Code","Product Name","Customer","From Branch","To Destination","Quantity","Unit","Problem Detail","Problem Source","Has Cost","Cost Amount","Cost Responsible","Action","Return Status"].map(se=>`<th>${se}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${E.map(se=>{const ue=se.item||se,ve=d.find(Qe=>Qe.ncrNumber===se.ncrNo),Be=se.actionReject||se.actionRejectSort?"Reject":se.actionScrap?"Scrap":"N/A";return`<tr>
                  <td>${se.ncrNo||""}</td>
                  <td>${Fe(se.date)}</td>
                  <td>${se.status||""}</td>
                  <td style="mso-number-format:'@'">${ue.productCode||""}</td>
                  <td>${ue.productName||""}</td>
                  <td>${ue.customerName||""}</td>
                  <td>${ue.branch||""}</td>
                  <td>${ue.destinationCustomer||""}</td>
                  <td style="text-align:center;">${ue.quantity||0}</td>
                  <td style="text-align:center;">${ue.unit||""}</td>
                  <td>${se.problemDetail||""}</td>
                  <td>${ue.problemSource||""}</td>
                  <td style="text-align:center;">${ue.hasCost?"Yes":"No"}</td>
                  <td style="text-align:right;">${ue.costAmount||0}</td>
                  <td>${ue.costResponsible||""}</td>
                  <td>${Be}</td>
                  <td>${(ve==null?void 0:ve.status)||"Not Returned"}</td>
                </tr>`}).join("")}
            </tbody>
          </table>
        </body>
        </html>
      `,M=new Blob([_],{type:"application/vnd.ms-excel;charset=utf-8"}),ne=URL.createObjectURL(M),Z=document.createElement("a");Z.setAttribute("href",ne),Z.setAttribute("download",`ncr_report_${new Date().toISOString().split("T")[0]}.xls`),document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)},U=y=>{const _=y.ncrNo,M=r.filter(se=>se.ncrNo===_);if(M.length===0){alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö NCR ‡∏ô‡∏µ‡πâ");return}const ne=M.map(se=>se.item||se),Z={...y,branch:(y.item||{}).branch||"",problemSource:(y.item||{}).problemSource||"",problemAnalysisDetail:y.problemAnalysisDetail||""};Xs(Z,ne,_)},ee=k.useMemo(()=>{const y={};return E.forEach(_=>{const M=_.ncrNo||_.id;y[M]||(y[M]=[]),y[M].push(_)}),Object.values(y)},[E]),le=Math.ceil(ee.length/$),ce=k.useMemo(()=>{const y=(I-1)*$;return ee.slice(y,y+$)},[ee,I,$]);k.useEffect(()=>{T(1)},[D,$]);const be=y=>{f(y),N(!1),v(!0)},ke=y=>{R(y),i(""),P(!0)},ye=()=>{p==="1234"||p==="888"?(f(m),N(!0),v(!0),P(!1)):alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")},De=y=>{j(y),i(""),O(!0)},J=async()=>{(p==="1234"||p==="888")&&w?(await t(w),O(!1),j(null)):alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")},l=(y,_)=>{n&&f({...n,[y]:_})},L=(y,_)=>{n&&f({...n,item:{...n.item||{},[y]:_}})},H=y=>{n&&f(_=>_?{..._,[y]:!_[y]}:null)},te=y=>{n&&f(_=>_?{..._,[y]:!_[y]}:null)},X=async()=>{n&&confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")&&(await g(n.id,n),v(!1),N(!1))},he=y=>{C(y),u(!0)},F=y=>{const _=y.item||y,M={documentNo:y.ncrNo,documentType:"NCR",status:"Requested",date:new Date().toISOString().split("T")[0],productCode:_.productCode,productName:_.productName,quantity:_.quantity,unit:_.unit,customerName:_.customerName,branch:_.branch,ncrNumber:y.ncrNo,reason:y.problemDetail,notes:_.problemSource,founder:y.founder||_.founder,destinationCustomer:_.destinationCustomer,actionReject:y.actionReject,actionScrap:y.actionScrap,actionRejectSort:y.actionRejectSort};s(M)};return e.jsxs("div",{className:"h-full flex flex-col gap-4 p-4 font-inter text-slate-800 bg-slate-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm print:hidden",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-700 to-indigo-600 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(Oe,{className:"w-6 h-6 text-blue-600"}),"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR (NCR Report)"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î (Non-Conformance Report)"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(Ge,{className:"absolute left-2 top-1.5 w-4 h-4 text-slate-400 group-hover:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (NCR No, ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤, ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)...",value:D.query,onChange:y=>S({...D,query:y.target.value}),className:"pl-8 pr-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full md:w-64 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 border border-slate-200 rounded-lg p-0.5",children:[e.jsx("input",{type:"date",value:D.startDate,onChange:y=>S({...D,startDate:y.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:D.endDate,onChange:y=>S({...D,endDate:y.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î"})]})]}),e.jsxs("select",{value:D.action,onChange:y=>S({...D,action:y.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsx("option",{value:"Reject",children:"Reject"}),e.jsx("option",{value:"Scrap",children:"Scrap"})]}),e.jsxs("select",{value:D.returnStatus,onChange:y=>S({...D,returnStatus:y.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏∑‡∏ô"}),e.jsx("option",{value:"NotReturned",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô"}),e.jsx("option",{value:"Requested",children:"‡∏£‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"}),e.jsx("option",{value:"PickupScheduled",children:"‡∏£‡∏≠‡∏£‡∏ñ‡∏£‡∏±‡∏ö (Job Assigned)"}),e.jsx("option",{value:"PickedUp",children:"‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß (Picked Up)"}),e.jsx("option",{value:"InTransitHub",children:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsx("option",{value:"ReceivedAtHub",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Hub (‡∏£‡∏≠ QC)"}),e.jsx("option",{value:"QCPassed",children:"‡∏ú‡πà‡∏≤‡∏ô QC (‡∏£‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)"}),e.jsx("option",{value:"ReturnToSupplier",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô/‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"}),e.jsx("option",{value:"Completed",children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs text-slate-600 px-2 py-1 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:D.hasCost,onChange:y=>S({...D,hasCost:y.target.checked})}),"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"]}),e.jsxs("div",{className:"flex gap-1 ml-auto",children:[e.jsxs("button",{onClick:Q,className:"bg-green-600 text-white font-bold px-3 py-1 rounded-lg flex items-center gap-1 hover:bg-green-700 transition-colors shadow-sm text-xs whitespace-nowrap",children:[e.jsx(dt,{className:"w-3 h-3"}),"Excel"]}),e.jsx("button",{onClick:()=>S({query:"",action:"All",returnStatus:"All",hasCost:!1,startDate:"",endDate:"",docType:"All"}),className:"px-2 py-1 text-slate-600 hover:bg-slate-100 font-medium rounded-lg border border-slate-200",title:"‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á (Clear)",children:e.jsx(Ue,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col print:hidden",children:[e.jsx("div",{className:"overflow-auto flex-1 relative ncr-table-container",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{className:"whitespace-nowrap",children:[e.jsx("th",{className:"px-1 py-1 bg-slate-50 sticky left-0 z-10 border-r w-6 text-center text-[10px]",children:"#"}),e.jsx("th",{className:"px-1 py-1 bg-slate-50 sticky left-6 z-10 border-r w-[80px] text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà / ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà"}),e.jsx("th",{className:"px-1 py-1 max-w-[150px] text-[10px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[80px] text-[10px]",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö"}),e.jsx("th",{className:"px-1 py-1 max-w-[100px] text-[10px]",children:"F/T"}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Source)"}),e.jsx("th",{className:"px-1 py-1 text-right w-[60px] text-[10px]",children:"Cost"}),e.jsx("th",{className:"px-1 py-1 text-center w-[60px] text-[10px]",children:"Act"}),e.jsx("th",{className:"px-1 py-1 text-center w-[60px] text-[10px]",children:"Sts"}),e.jsx("th",{className:"px-1 py-1 text-center bg-slate-50 sticky right-0 z-10 border-l w-[100px] text-[10px]"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:ce.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"p-8 text-center text-slate-400 italic",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ"})}):ce.map(y=>{const _=y[0],M=_.item||_;M.productName||(M.productName="Unknown Product");const ne=d.find(se=>se.ncrNumber===_.ncrNo),Z=_.status==="Canceled";return e.jsx(Y.Fragment,{children:e.jsxs("tr",{className:`hover:bg-slate-50 transition-all ${Z?"line-through text-slate-400 bg-slate-50":""}`,children:[e.jsx("td",{className:`px-0.5 py-2 sticky left-0 border-r text-center ${Z?"bg-slate-100":"bg-white hover:bg-slate-50"}`,children:e.jsx("button",{onClick:()=>pe(_),className:"p-1 rounded-full hover:bg-blue-100 text-blue-400 hover:text-blue-600 transition-colors",title:"‡∏î‡∏π Timeline (View Infographic)",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-full p-1",children:e.jsx(Ge,{className:"w-3.5 h-3.5"})})})}),e.jsxs("td",{className:`px-1 py-1 sticky left-6 border-r w-[90px] ${Z?"bg-slate-100":"bg-white hover:bg-slate-50"}`,children:[e.jsx("div",{className:"flex gap-1 mb-0.5",children:e.jsx("span",{className:"px-1 rounded text-[8px] font-bold bg-indigo-100 text-indigo-700 border border-indigo-200",children:"NCR"})}),e.jsx("button",{onClick:()=>be(_),disabled:Z,className:"font-bold text-blue-700 hover:text-blue-800 hover:underline text-left block truncate w-full disabled:text-slate-400 disabled:no-underline disabled:cursor-not-allowed text-[11px]",title:"‡∏î‡∏π‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏° (View Full NCR)",children:_.ncrNo||_.id}),e.jsx("div",{className:"text-[9px] text-slate-500 font-medium",children:Fe(_.date)}),e.jsx("div",{className:"mt-1",children:Z?e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] text-slate-500 font-bold bg-slate-200 px-1 py-0.5 rounded border border-slate-300",children:[e.jsx($t,{className:"w-2.5 h-2.5"})," ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"]}):_.status==="Closed"?e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] text-green-700 font-bold bg-green-50 px-1 py-0.5 rounded border border-green-200",children:[e.jsx(mt,{className:"w-2.5 h-2.5"})," Closed"]}):e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] text-amber-600 font-bold bg-amber-50 px-1 py-0.5 rounded border border-amber-200",children:[e.jsx(At,{className:"w-2.5 h-2.5"})," ",_.status==="Open"?ne?ne.status:"Open":_.status]})})]}),e.jsx("td",{className:"px-1 py-1 min-w-[180px]",children:e.jsx("div",{className:"space-y-1.5",children:y.map((se,ue)=>{const ve=se.item||se;return e.jsxs("div",{className:`p-1 rounded text-[10px] ${ue>0?"border-t border-slate-100 pt-1.5":""}`,children:[e.jsxs("div",{className:`font-bold flex items-center gap-1 mb-0.5 ${Z?"":"text-indigo-600"}`,children:[e.jsx(st,{className:"w-3 h-3 flex-shrink-0"}),e.jsx("span",{children:ve.productCode})]}),e.jsx("div",{className:`line-clamp-2 leading-snug ${Z?"":"text-slate-700"}`,title:ve.productName,children:ve.productName}),e.jsxs("div",{className:"text-[9px] text-slate-500 font-medium mt-0.5",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ",e.jsxs("b",{className:"text-slate-700",children:[ve.quantity," ",ve.unit]})]})]},se.id||ue)})})}),e.jsx("td",{className:"px-1 py-1 max-w-[120px]",children:e.jsx("div",{className:`flex items-start gap-1 font-bold text-[10px] leading-tight ${Z?"":"text-slate-800"}`,children:e.jsx("span",{className:"line-clamp-3",title:M.customerName,children:M.customerName||"-"})})}),e.jsx("td",{className:"px-1 py-1 max-w-[80px]",children:e.jsx("div",{className:"text-[10px] font-medium text-slate-600 truncate",title:_.founder,children:_.founder||"-"})}),e.jsx("td",{className:"px-1 py-1 max-w-[100px]",children:e.jsxs("div",{className:"flex flex-col text-[10px] leading-tight text-slate-600",children:[e.jsxs("div",{className:"truncate mb-1",title:`From: ${M.branch}`,children:[e.jsx("span",{className:"px-1 bg-slate-100 rounded text-[9px] font-bold mr-1",children:"F:"}),M.branch]}),e.jsxs("div",{className:"truncate",title:`To: ${M.destinationCustomer}`,children:[e.jsx("span",{className:"px-1 bg-slate-100 rounded text-[9px] font-bold mr-1",children:"T:"}),M.destinationCustomer||"-"]})]})}),e.jsxs("td",{className:"px-1 py-1 max-w-[120px]",children:[e.jsx("div",{className:`text-[10px] font-bold leading-tight ${Z?"":"text-slate-800"} mb-1.5 line-clamp-2`,title:_.problemDetail,children:_.problemDetail}),e.jsx("div",{className:`text-[9px] p-0.5 px-1.5 rounded-full border inline-block font-bold ${Z?"bg-slate-100":"bg-red-50 text-red-700 border-red-100"}`,children:M.problemSource})]}),e.jsx("td",{className:"px-1 py-1 text-right w-[70px]",children:y.some(se=>(se.item||se).hasCost)?e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("span",{className:`font-bold flex items-center gap-0.5 text-[11px] ${Z?"":"text-red-600"}`,children:[e.jsx(ct,{className:"w-3 h-3"}),y.reduce((se,ue)=>se+((ue.item||ue).costAmount||0),0).toLocaleString()]}),e.jsxs("span",{className:"text-[8px] text-slate-400 font-medium",children:["(‡∏£‡∏ß‡∏° ",y.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]})]}):e.jsx("span",{className:"text-[10px] text-slate-300",children:"-"})}),e.jsx("td",{className:"px-1 py-1 text-center w-[60px]",children:_.actionReject||_.actionRejectSort?e.jsx("span",{className:`inline-block px-1.5 py-0.5 rounded text-[9px] font-bold border ${Z?"bg-slate-200":"bg-red-100 text-red-700 border-red-200"}`,children:"Reject"}):_.actionScrap?e.jsx("span",{className:`inline-block px-1.5 py-0.5 rounded text-[9px] font-bold border ${Z?"bg-slate-200":"bg-orange-100 text-orange-700 border-orange-200"}`,children:"Scrap"}):e.jsx("span",{className:"text-[10px] text-slate-300",children:"-"})}),e.jsx("td",{className:"px-1 py-1 text-center w-[75px]",children:ne?e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:`inline-block px-1.5 py-0.5 rounded text-[9px] font-bold border shadow-sm ${ne.status==="Completed"?"bg-green-600 text-white border-green-700":ne.status.includes("Hub")?"bg-indigo-600 text-white border-indigo-700":"bg-amber-500 text-white border-amber-600"}`,children:ne.status}),e.jsx("span",{className:"text-[8px] text-slate-400 font-medium",children:"Synced"})]}):e.jsx("span",{className:"text-[10px] text-slate-300",children:"-"})}),e.jsx("td",{className:`px-1 py-1 text-center sticky right-0 border-l w-[100px] ${Z?"bg-slate-100 shadow-[-4px_0_10px_rgba(0,0,0,0.05)]":"bg-white shadow-[-4px_0_10px_rgba(0,0,0,0.05)]"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[e.jsx("button",{onClick:()=>he(_),disabled:Z,className:"p-1 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-all disabled:opacity-30",title:"‡∏û‡∏¥‡∏°‡∏û‡πå (Print)",children:e.jsx(Ke,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>ke(_),disabled:Z,className:"p-1 text-amber-500 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-all disabled:opacity-30",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Edit)",children:e.jsx(Ot,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>De(_.id),disabled:Z,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all disabled:opacity-30",title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)",children:e.jsx($e,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>U(_),disabled:Z,className:"p-1 text-emerald-600 hover:text-emerald-800 hover:bg-emerald-50 rounded-lg transition-all disabled:opacity-30",title:"Export Excel",children:e.jsx(dt,{className:"w-3.5 h-3.5"})}),Z?e.jsx("span",{className:"bg-slate-200 text-slate-500 p-1 rounded-lg",children:e.jsx($t,{className:"w-3.5 h-3.5"})}):ne?e.jsx("span",{className:"bg-green-100 text-green-700 p-1 rounded-lg border border-green-200",title:"‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß",children:e.jsx(mt,{className:"w-3.5 h-3.5"})}):(_.actionReject||_.actionScrap||_.actionRejectSort)&&e.jsx("button",{onClick:()=>F(_),className:"bg-orange-600 hover:bg-orange-700 text-white p-1 rounded-lg shadow-md transition-all transform hover:scale-110",title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",children:e.jsx(Ms,{className:"w-3.5 h-3.5"})})]})})]})},_.ncrNo||_.id)})})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-sm print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{children:"‡πÅ‡∏™‡∏î‡∏á"}),e.jsxs("select",{value:$,onChange:y=>B(Number(y.target.value)),className:"bg-white border border-slate-300 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500 font-bold","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ",E.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(y=>Math.max(y-1,1)),disabled:I===1,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-bold text-slate-800",children:["‡∏´‡∏ô‡πâ‡∏≤ ",I]}),e.jsxs("span",{className:"text-slate-500",children:["‡∏à‡∏≤‡∏Å ",le||1]})]}),e.jsx("button",{onClick:()=>T(y=>Math.min(y+1,le)),disabled:I===le||le===0,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"})]})]})]}),x&&a&&e.jsx(Ql,{item:a,onUpdate:C,onClose:()=>u(!1),onSave:async()=>{confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")&&(await g(a.id,a),alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"))}}),o&&n&&e.jsx("div",{id:"ncr-modal-overlay",className:"fixed inset-0 bg-black/50 flex items-start justify-center p-4 pt-10 z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl my-8",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 sticky top-0 rounded-t-lg z-10",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-lg",children:[c?e.jsx(Ot,{className:"w-5 h-5 text-amber-500"}):e.jsx(Xt,{className:"w-5 h-5 text-blue-500"}),c?"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• NCR":"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î NCR"]}),e.jsx("button",{onClick:()=>v(!1),className:"text-slate-500 hover:text-slate-700","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(fe,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"bg-white shadow-xl border border-slate-200 relative p-8 min-w-[800px]",children:[e.jsxs("div",{className:"flex border-2 border-black mb-6",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black p-4 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-24"})}),e.jsxs("div",{className:"w-[70%] p-4 flex flex-col justify-center pl-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 leading-none mb-2",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-sm text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{className:"text-slate-400",children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-xl font-bold text-center border-2 border-black py-2 mb-6 bg-white text-slate-900",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô",title:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:n.toDept||"",onChange:y=>l("toDept",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("input",{type:"date",disabled:!c,"aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:n.date,onChange:y=>l("date",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤",title:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:n.copyTo||"",onChange:y=>l("copyTo",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"font-bold w-24 text-slate-800",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex-1 border-b border-dotted border-slate-400 bg-slate-100 outline-none px-2 py-1 font-mono text-slate-500 font-bold rounded-sm text-center",children:n.ncrNo})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"font-bold w-24 text-slate-800",children:["‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Ys,{disabled:!c,className:"w-full border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:n.founder||"",onChange:y=>l("founder",y),options:Se})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-32 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï:"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:n.poNo||"",onChange:y=>l("poNo",y.target.value)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsxs("h3",{className:"font-bold text-slate-900 underline",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items) ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),e.jsx("div",{className:"border-2 border-black bg-white",children:e.jsxs("table",{className:"w-full text-xs text-left",children:[e.jsx("thead",{className:"bg-slate-100 border-b border-black font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border-r border-black",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-2 border-r border-black",children:"Ref/Neo Ref"}),e.jsx("th",{className:"p-2 border-r border-black",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"p-2 border-r border-black text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-2 border-r border-black text-right",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("th",{className:"p-2 border-r border-black",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"})]})}),e.jsx("tbody",{className:"divide-y divide-black",children:e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black align-top",children:e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",className:"w-full bg-transparent border-b border-dotted border-slate-300",value:(n.item||n).branch||"",onChange:y=>L("branch",y.target.value)})}),e.jsxs("td",{className:"p-2 border-r border-black align-top",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Ref:"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"Ref No",title:"Ref No",className:"flex-1 bg-transparent border-b border-dotted border-slate-300 w-20",value:(n.item||n).refNo||"",onChange:y=>L("refNo",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-slate-500",children:[e.jsx("span",{children:"Neo:"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"Neo Ref No",title:"Neo Ref No",className:"flex-1 bg-transparent border-b border-dotted border-slate-300 w-20",value:(n.item||n).neoRefNo||"",onChange:y=>L("neoRefNo",y.target.value)})]})]}),e.jsxs("td",{className:"p-2 border-r border-black align-top",children:[e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",className:"w-full font-bold bg-transparent border-b border-dotted border-slate-300 mb-1",value:(n.item||n).productCode||"",onChange:y=>L("productCode",y.target.value)}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",className:"w-full text-slate-600 font-medium bg-transparent border-b border-dotted border-slate-300 mb-1",value:(n.item||n).productName||"",onChange:y=>L("productName",y.target.value)}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",className:"w-full text-slate-500 bg-transparent border-b border-dotted border-slate-300",value:(n.item||n).customerName||"",onChange:y=>L("customerName",y.target.value)}),e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-blue-600",children:[e.jsx("span",{children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",title:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",className:"flex-1 bg-transparent border-b border-dotted border-blue-200",value:(n.item||n).destinationCustomer||"",onChange:y=>L("destinationCustomer",y.target.value)})]})]}),e.jsx("td",{className:"p-2 border-r border-black text-center align-top",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("input",{type:"number",disabled:!c,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",className:"w-12 text-center bg-transparent border-b border-dotted border-slate-300",value:(n.item||n).quantity||0,onChange:y=>L("quantity",Number(y.target.value))}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢",className:"w-8 text-center bg-transparent border-b border-dotted border-slate-300",value:(n.item||n).unit||"",onChange:y=>L("unit",y.target.value)})]})}),e.jsxs("td",{className:"p-2 border-r border-black text-right align-top",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",step:"0.01",disabled:!c,"aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤",title:"‡∏£‡∏≤‡∏Ñ‡∏≤",className:"w-20 text-right bg-transparent border-b border-dotted border-slate-300",value:(n.item||n).priceBill||0,onChange:y=>L("priceBill",Number(y.target.value)),onBlur:y=>L("priceBill",parseFloat(parseFloat(y.target.value).toFixed(2)))})," ‡∏ö."]}),e.jsxs("div",{className:"text-red-500 mt-1 flex items-center justify-end gap-1",children:[e.jsx("span",{children:"Exp:"}),e.jsx("input",{type:"date",disabled:!c,"aria-label":"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",title:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",className:"w-24 bg-transparent border-none text-right text-xs",value:(n.item||n).expiryDate||"",onChange:y=>L("expiryDate",y.target.value)})]})]}),e.jsxs("td",{className:"p-2 border-r border-black align-top",children:[e.jsx("textarea",{disabled:!c,"aria-label":"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",className:"w-full h-12 text-xs resize-none bg-transparent border-b border-dotted border-slate-300",value:(n.item||n).problemSource||"",onChange:y=>L("problemSource",y.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"flex items-center gap-1 text-red-600 font-bold cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:(n.item||n).hasCost,onChange:y=>L("hasCost",y.target.checked)})," Has Cost"]}),(n.item||n).hasCost&&e.jsxs("div",{className:"pl-4 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-red-600 font-bold",children:"Cost:"}),e.jsx("input",{type:"number",step:"0.01",disabled:!c,"aria-label":"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",className:"w-20 bg-transparent border-b border-dotted border-red-300 text-red-600 font-bold",value:(n.item||n).costAmount||0,onChange:y=>L("costAmount",Number(y.target.value)),onBlur:y=>L("costAmount",parseFloat(parseFloat(y.target.value).toFixed(2)))})," ‡∏ö."]}),e.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[e.jsx("span",{className:"text-xs",children:"‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",className:"w-20 bg-transparent border-b border-dotted border-slate-300 text-xs",value:(n.item||n).costResponsible||"",onChange:y=>L("costResponsible",y.target.value)})]})]})]})]})]})})]})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-black bg-slate-50",children:[e.jsx("th",{className:"border-r-2 border-black w-1/3 py-2 text-slate-900",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("th",{className:"py-2 text-slate-900",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border-r-2 border-black p-4 text-center align-middle h-64 relative bg-white",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-red-500 opacity-50",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("h2",{className:"text-3xl font-bold",children:"‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ö"}),e.jsx(Pt,{className:"w-16 h-16 mt-4"})]})}),e.jsxs("td",{className:"p-4 align-top text-sm bg-white",children:[e.jsxs("div",{className:"mb-2 font-bold underline text-slate-900",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-slate-700",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemDamaged,onChange:()=>H("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemDamagedInBox,onChange:()=>H("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemLost,onChange:()=>H("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemMixed,onChange:()=>H("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemWrongInv,onChange:()=>H("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemLate,onChange:()=>H("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemDuplicate,onChange:()=>H("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemWrong,onChange:()=>H("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemIncomplete,onChange:()=>H("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemOver,onChange:()=>H("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemWrongInfo,onChange:()=>H("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemShortExpiry,onChange:()=>H("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemTransportDamage,onChange:()=>H("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemAccident,onChange:()=>H("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemPOExpired,onChange:()=>H("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemNoBarcode,onChange:()=>H("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.problemNotOrdered,onChange:()=>H("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox",disabled:!c,"aria-label":"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",checked:n.problemOther,onChange:()=>H("problemOther")})," ",e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-dotted border-slate-400 bg-transparent outline-none w-full text-slate-700",value:n.problemOtherText||"",onChange:y=>l("problemOtherText",y.target.value)})]})]}),e.jsx("div",{className:"font-bold underline mb-1 text-slate-900",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{disabled:!c,"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",className:"w-full h-32 border border-slate-200 bg-slate-50 p-2 text-sm resize-none focus:ring-1 focus:ring-blue-500 outline-none text-slate-700",value:n.problemDetail,onChange:y=>l("problemDetail",y.target.value)})]})]})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6 text-sm bg-white",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50 border-b-2 border-black",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"})})}),e.jsxs("tbody",{className:"divide-y divide-black border-b-2 border-black",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black w-1/2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!c,title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",checked:n.actionReject,onChange:y=>l("actionReject",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!c,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:n.actionRejectQty||"",onChange:y=>l("actionRejectQty",parseInt(y.target.value)||0)})]})}),e.jsx("td",{className:"p-2 w-1/2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!c,title:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",checked:n.actionRejectSort,onChange:y=>l("actionRejectSort",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!c,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:n.actionRejectSortQty||"",onChange:y=>l("actionRejectSortQty",parseInt(y.target.value)||0)})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!c,title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",checked:n.actionRework,onChange:y=>l("actionRework",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!c,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:n.actionReworkQty||"",onChange:y=>l("actionReworkQty",parseInt(y.target.value)||0)})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",className:"flex-1 border-b border-dotted border-black bg-transparent outline-none",value:n.actionReworkMethod||"",onChange:y=>l("actionReworkMethod",y.target.value)})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!c,title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",checked:n.actionSpecialAcceptance,onChange:y=>l("actionSpecialAcceptance",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!c,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:n.actionSpecialAcceptanceQty||"",onChange:y=>l("actionSpecialAcceptanceQty",parseInt(y.target.value)||0)})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",className:"flex-1 border-b border-dotted border-black bg-transparent outline-none",value:n.actionSpecialAcceptanceReason||"",onChange:y=>l("actionSpecialAcceptanceReason",y.target.value)})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!c,title:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",checked:n.actionScrap,onChange:y=>l("actionScrap",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!c,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:n.actionScrapQty||"",onChange:y=>l("actionScrapQty",parseInt(y.target.value)||0)})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!c,title:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",checked:n.actionReplace,onChange:y=>l("actionReplace",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!c,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:n.actionReplaceQty||"",onChange:y=>l("actionReplaceQty",parseInt(y.target.value)||0)})]})})]})]}),e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"p-3 bg-white",children:e.jsxs("div",{className:"flex justify-between items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",disabled:!c,"aria-label":"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à",title:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à",className:"border-b border-dotted border-black bg-transparent text-slate-700 outline-none",value:n.dueDate||"",onChange:y=>l("dueDate",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",title:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",className:"w-32 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:n.approver||"",onChange:y=>l("approver",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",className:"w-24 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:n.approverPosition||"",onChange:y=>l("approverPosition",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"}),e.jsx("input",{type:"date",disabled:!c,"aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",className:"border-b border-dotted border-black bg-transparent text-slate-700 outline-none",value:n.approverDate||"",onChange:y=>l("approverDate",y.target.value)})]})]})})})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6 text-sm bg-white",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50 border-b-2 border-black",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"w-1/4 border-r-2 border-black align-top p-0",children:[e.jsx("div",{className:"border-b border-black p-2 font-bold text-center bg-slate-50",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.causePackaging,onChange:()=>te("causePackaging")})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.causeTransport,onChange:()=>te("causeTransport")})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.causeOperation,onChange:()=>te("causeOperation")})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!c,checked:n.causeEnv,onChange:()=>te("causeEnv")})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]})]}),e.jsxs("td",{className:"align-top p-0",children:[e.jsxs("div",{className:"h-24 border-b border-black p-2 flex flex-col",children:[e.jsx("div",{className:"font-bold mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ :"}),e.jsx("textarea",{disabled:!c,"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",className:"flex-1 w-full bg-transparent outline-none resize-none text-slate-700",value:n.causeDetail||"",onChange:y=>l("causeDetail",y.target.value)})]}),e.jsxs("div",{className:"h-24 p-2 flex flex-col",children:[e.jsx("div",{className:"font-bold underline mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô :"}),e.jsx("textarea",{disabled:!c,"aria-label":"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô",title:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô",className:"flex-1 w-full bg-transparent outline-none resize-none text-slate-700",value:n.preventionDetail||"",onChange:y=>l("preventionDetail",y.target.value)})]})]})]}),e.jsx("tr",{className:"border-t-2 border-black",children:e.jsx("td",{colSpan:2,className:"p-3 bg-white",children:e.jsxs("div",{className:"flex justify-between items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",disabled:!c,"aria-label":"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à",title:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à",className:"border-b border-dotted border-black bg-transparent text-slate-700 outline-none",value:n.preventionDueDate||"",onChange:y=>l("preventionDueDate",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",className:"w-32 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:n.responsiblePerson||"",onChange:y=>l("responsiblePerson",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",className:"w-24 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:n.responsiblePosition||"",onChange:y=>l("responsiblePosition",y.target.value)})]})]})})})]})]}),e.jsxs("div",{className:"border-2 border-black p-2 mb-6 text-xs bg-white",children:[e.jsx("span",{className:"font-bold",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ :"})," ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≤‡∏á Supplier/Out source ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ö NCR ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏¢‡∏±‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå"]}),e.jsxs("table",{className:"w-full border-2 border-black text-sm bg-white",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50 border-b-2 border-black",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î NCR"})})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"border-b-2 border-black",children:e.jsx("td",{colSpan:2,className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!c,title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",checked:n.qaAccept,onChange:y=>l("qaAccept",y.target.checked)})," ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!c,title:"‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",checked:n.qaReject,onChange:y=>l("qaReject",y.target.checked)})," ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsx("input",{type:"text",disabled:!c,"aria-label":"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",className:"flex-1 border-b border-dotted border-black bg-transparent outline-none text-slate-700",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",value:n.qaReason||"",onChange:y=>l("qaReason",y.target.value)})]})})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"w-1/2 border-r-2 border-black p-4 text-center align-bottom h-32",children:[e.jsx("div",{className:"font-bold mb-8",children:"‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-slate-500 text-xs",children:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"})]}),e.jsxs("td",{className:"w-1/2 p-4 text-center align-bottom h-32",children:[e.jsx("div",{className:"font-bold mb-8",children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-slate-500 text-xs",children:"‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£"})]})]})]})]}),e.jsx("div",{className:"text-right text-xs mt-4 font-mono text-slate-400",children:"FM-OP01-06 Rev.00"})]})}),e.jsxs("div",{className:"p-4 border-t bg-slate-50 flex justify-end gap-2 sticky bottom-0 rounded-b-lg",children:[e.jsxs("button",{onClick:()=>n&&U(n),className:"px-4 py-2 text-green-600 hover:bg-green-50 border border-green-200 rounded font-bold flex items-center gap-2 mr-auto",children:[e.jsx(dt,{className:"w-4 h-4"})," Export Excel"]}),e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"‡∏õ‡∏¥‡∏î"}),c&&e.jsxs("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 font-bold shadow-sm",children:[e.jsx(Ye,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]})]})]})}),e.jsx(Wl,{isOpen:V,onClose:()=>G(!1),report:de,correspondingReturn:d.find(y=>y.ncrNumber===(de==null?void 0:de.ncrNo))}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center",children:[e.jsx(ts,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• NCR"}),e.jsx("input",{type:"password",value:p,onChange:y=>i(y.target.value),placeholder:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (1234)",className:"w-full border rounded p-2 text-center text-lg tracking-widest mb-4",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 rounded",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:ye,className:"px-6 py-2 bg-amber-500 text-white rounded font-bold hover:bg-amber-600",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center",children:[e.jsx($e,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-red-600",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å NCR"}),e.jsxs("p",{className:"text-slate-500 text-sm mb-4",children:["‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ",e.jsx("br",{}),"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"]}),e.jsx("input",{type:"password",value:p,onChange:y=>i(y.target.value),placeholder:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (1234)",className:"w-full border rounded p-2 text-center text-lg tracking-widest mb-4 border-red-200 focus:ring-red-500",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 rounded",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:J,className:"px-6 py-2 bg-red-600 text-white rounded font-bold hover:bg-red-700",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö"})]})]})}),e.jsx("style",{children:`
        .ncr-table-container {
          max-height: calc(100vh - 300px);
        }
      `})]})},Vl=({isOpen:s,onClose:r,item:d})=>{if(!s||!d)return null;const t=(o=>{let v=0;switch(o.status||""){case"Completed":v=7;break;case"COL_Documented":case"DocsCompleted":case"ReturnToSupplier":case"DirectReturn":v=6;break;case"COL_HubReceived":case"HubReceived":case"ReceivedAtHub":case"NCR_HubReceived":v=5;break;case"COL_InTransit":case"InTransit":case"InTransitToHub":case"NCR_InTransit":v=4;break;case"COL_Consolidated":case"Consolidated":v=3;break;case"COL_BranchReceived":case"BranchReceived":case"NCR_BranchReceived":v=2;break;case"COL_JobAccepted":case"JobAccepted":case"NCR_JobAccepted":v=1;break;default:v=0;break}return o.dateCompleted?v=Math.max(v,7):o.dateDocumented?v=Math.max(v,6):o.dateHubReceived?v=Math.max(v,5):o.dateInTransit?v=Math.max(v,4):o.dateConsolidated?v=Math.max(v,3):o.dateBranchReceived||o.dateReceived?v=Math.max(v,2):o.dateJobAccepted&&(v=Math.max(v,1)),o.collectionOrderId&&(v=Math.max(v,3)),v})(d),x=d.date||d.dateRequested||new Date().toISOString().split("T")[0],u=[{id:1,label:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Request)",status:t===0?"‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô":"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",date:d.date||d.dateRequested||x,icon:Oe,colorKey:"blue",description:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö"},{id:2,label:"‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Job Accept)",status:t===1?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£":t>1?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=1?d.dateJobAccepted||x:void 0,icon:Ne,colorKey:"orange",description:"‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô/‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:3,label:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Rx)",status:t===2?"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏≤‡∏Ç‡∏≤":t>2?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=2?d.dateBranchReceived||d.dateReceived||x:void 0,icon:Ds,colorKey:"indigo",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á/‡∏û‡∏±‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:4,label:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consol)",status:t===3?"‡∏£‡∏≠‡∏Ç‡∏ô‡∏™‡πà‡∏á":t>3?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=3?d.dateConsolidated||x:void 0,icon:Jt,colorKey:"yellow",description:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Hub"},{id:5,label:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (In Transit)",status:t===4?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á":t>4?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=4?d.dateInTransit||x:void 0,icon:Ne,colorKey:"purple",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏õ Hub"},{id:6,label:"‡∏ñ‡∏∂‡∏á Hub (Received)",status:t===5?"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Hub":t>5?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=5?d.dateHubReceived||x:void 0,icon:Ve,colorKey:"green",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:7,label:"‡∏Ñ‡∏•‡∏±‡∏á/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",status:t===6?"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô":t>6?"‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=6?d.dateDocumented||x:void 0,icon:Oe,colorKey:"blue",description:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£/‡∏Ñ‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"},{id:8,label:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Done)",status:t===7?"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=7?d.dateCompleted||x:void 0,icon:mt,colorKey:"green",description:"‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå"}],a=d.status==="Cancelled"||d.status==="Rejected",C={blue:{bg:"bg-blue-100",border:"border-blue-500",text:"text-blue-600",badgeBg:"bg-blue-50",badgeText:"text-blue-700"},orange:{bg:"bg-orange-100",border:"border-orange-500",text:"text-orange-600",badgeBg:"bg-orange-50",badgeText:"text-orange-700"},indigo:{bg:"bg-indigo-100",border:"border-indigo-500",text:"text-indigo-600",badgeBg:"bg-indigo-50",badgeText:"text-indigo-700"},yellow:{bg:"bg-yellow-100",border:"border-yellow-500",text:"text-yellow-600",badgeBg:"bg-yellow-50",badgeText:"text-yellow-700"},purple:{bg:"bg-purple-100",border:"border-purple-500",text:"text-purple-600",badgeBg:"bg-purple-50",badgeText:"text-purple-700"},green:{bg:"bg-green-100",border:"border-green-500",text:"text-green-600",badgeBg:"bg-green-50",badgeText:"text-green-700"},red:{bg:"bg-red-100",border:"border-red-500",text:"text-red-600",badgeBg:"bg-red-50",badgeText:"text-red-700"},gray:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-400",badgeBg:"bg-slate-100",badgeText:"text-slate-500"}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl w-full max-w-5xl overflow-hidden flex flex-col max-h-[90vh] ${a?"border-4 border-red-500":""}`,children:[e.jsxs("div",{className:`border-b p-6 flex justify-between items-start ${a?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[a?e.jsx(fe,{className:"w-8 h-8 text-red-600"}):e.jsx(lt,{className:"w-6 h-6 text-blue-600"}),"Timeline ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Journey)"]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border shadow-sm ${a?"bg-red-100 text-red-700 border-red-200":"bg-blue-100 text-blue-700 border-blue-200"}`,children:a?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (CANCELED)":`Doc No: ${d.documentNo||d.id}`})]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Status Tracking Infographic)"})]}),e.jsx("button",{onClick:r,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-200 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(fe,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto bg-slate-50/30",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-10",children:[e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(Oe,{className:"w-3 h-3"})," ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Documents)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"Invoice:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:d.invoiceNo||"-"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"R No:"}),e.jsx("span",{className:"font-bold text-blue-600 text-sm font-mono",children:d.documentNo||d.id})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"})," ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ç‡∏ô‡∏™‡πà‡∏á (Control)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"TM No:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:d.tmNo||"-"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏°:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:d.controlDate?Fe(d.controlDate):"-"})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(Ds,{className:"w-3 h-3"})," ‡∏™‡∏≤‡∏Ç‡∏≤ & ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Info)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:d.branch})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600 truncate max-w-[50px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:"}),e.jsx("span",{className:"font-bold text-slate-700 text-xs truncate max-w-[120px]",title:d.productName,children:d.productCode==="N/A"||!d.productCode?d.productName==="N/A"?"-":d.productName:d.productCode})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1 border-t border-slate-50 mt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsxs("span",{className:"font-bold text-slate-800 text-xs",children:[d.quantity," ",d.unit]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(Ve,{className:"w-3 h-3"})," ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Dest & COL)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"COL ID:"}),e.jsx("span",{className:"font-bold text-indigo-600 text-sm",children:d.collectionOrderId||"-"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"To:"}),e.jsx("span",{className:"font-bold text-slate-800 text-xs truncate max-w-[120px]",title:d.destinationCustomer||"-",children:d.destinationCustomer||"-"})]})]})]}),e.jsxs("div",{className:"relative pt-10 pb-6 px-4",children:[e.jsx("div",{className:"hidden md:block absolute top-[85px] left-10 right-10 h-1.5 bg-slate-200 rounded-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-4 relative",children:u.map((o,v)=>{let n=C[o.colorKey],f=v<=t;return a?n=C.gray:f||(n=C.gray),e.jsxs("div",{className:"flex flex-col items-center relative z-10 group",children:[e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center border-4 shadow-lg transition-transform duration-300 mb-4 bg-white
                                          ${f?`${n.border} ${n.text} scale-110 group-hover:scale-115`:"border-slate-200 text-slate-300"}
                                        `,children:e.jsx(o.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:`w-full bg-white rounded-xl border p-2 shadow-sm text-center min-h-[120px] flex flex-col transition-all duration-300
                                          ${f?"border-blue-100 shadow-md transform hover:-translate-y-1":"border-slate-100 opacity-70"}
                                        `,children:[e.jsx("div",{className:`font-bold text-xs mb-1 ${f?"text-slate-800":"text-slate-400"}`,children:o.label}),e.jsx("div",{className:"flex-grow flex items-center justify-center my-1",children:e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full font-bold
                                                  ${f?`${n.badgeBg} ${n.badgeText}`:"bg-slate-100 text-slate-400"}
                                                `,children:o.status})}),e.jsx("div",{className:"px-1 mb-1 hidden md:block",children:e.jsx("p",{className:"text-[9px] text-slate-400 leading-tight",children:o.description})}),e.jsx("div",{className:"border-t border-slate-50 pt-1 mt-auto",children:f&&o.date?e.jsxs("div",{className:"text-[10px] font-bold text-slate-600 flex items-center justify-center gap-1",children:[e.jsx(At,{className:"w-3 h-3"}),Fe(o.date)]}):e.jsx("div",{className:"text-[9px] text-slate-300 italic",children:"Pending"})})]})]},o.id)})})]}),e.jsxs("div",{className:"mt-8 text-center text-xs text-slate-400 bg-blue-50/50 p-2 rounded-lg border border-blue-50 mx-auto max-w-2xl",children:["üí° ",e.jsx("strong",{children:"Journey Info:"})," ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô (Collection Lifecycle)"]})]})]})})},Gl=({item:s,onClose:r})=>{const d=()=>{window.print()};return e.jsxs("div",{className:"fixed inset-0 bg-slate-900/50 flex flex-col items-center justify-start z-[9999] overflow-y-auto no-scrollbar print:static print:bg-white print:overflow-visible print:p-0 print:block",children:[e.jsxs("div",{className:"sticky top-0 w-full bg-white border-b border-slate-200 shadow-sm p-4 flex justify-between items-center z-50 print:hidden shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ke,{className:"w-5 h-5 text-slate-600"}),e.jsx("h2",{className:"font-bold text-slate-800",children:"Print Preview (A4 Mode)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-900 font-bold text-sm transition-colors shadow-sm",children:[e.jsx(Ke,{className:"w-4 h-4"})," ‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå"]}),e.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(fe,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"my-8 print:m-0 print:w-full",children:e.jsxs("div",{className:"bg-white shadow-2xl mx-auto print:shadow-none print:mx-0 relative flex flex-col print-content-root a4-paper-container",children:[e.jsxs("div",{className:"flex border-2 border-black mb-4",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black p-2 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-20"})}),e.jsxs("div",{className:"w-[70%] p-2 flex flex-col justify-center pl-4",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 leading-none mb-1",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-xs font-bold text-slate-700 mb-2",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-xs text-slate-600 mb-0.5",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-xs text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-lg font-bold text-center border-2 border-black py-1.5 mb-4 bg-white text-slate-900 print:bg-transparent uppercase tracking-wide",children:"‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Note)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1 font-bold",children:s.documentNo||s.id})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:Fe(s.date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:s.branch})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"Invoice No:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:s.invoiceNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:s.customerName||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"TM No:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:s.tmNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:s.notes||"-"})]})]}),e.jsx("div",{className:"mb-4 flex-1",children:e.jsxs("table",{className:"w-full border-collapse border border-black text-sm",children:[e.jsx("thead",{className:"print:table-header-group",children:e.jsxs("tr",{className:"bg-slate-100 print:bg-transparent",children:[e.jsx("th",{className:"border border-black p-2 w-[15%] text-left",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-black p-2 w-[40%] text-left",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-black p-2 w-[15%] text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-black p-2 w-[10%] text-center",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("th",{className:"border border-black p-2 w-[20%] text-left",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"print:break-inside-avoid",children:[e.jsx("td",{className:"border border-black p-2 valign-top text-xs font-bold",children:s.productCode==="N/A"?"":s.productCode}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsx("div",{className:"font-bold",children:s.productName==="N/A"?"":s.productName}),s.destinationCustomer&&e.jsxs("div",{className:"text-slate-500 text-[10px]",children:["‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: ",s.destinationCustomer]})]}),e.jsx("td",{className:"border border-black p-2 text-center valign-top font-bold",children:s.quantity}),e.jsx("td",{className:"border border-black p-2 text-center valign-top text-xs",children:s.unit}),e.jsx("td",{className:"border border-black p-2 valign-top text-xs",children:s.notes||"-"})]})})]})}),e.jsx("div",{className:"mt-8 border-t-2 border-black pt-4 print:break-inside-avoid page-break-avoid",children:e.jsxs("div",{className:"flex justify-between mt-8 text-xs text-center px-8 pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("div",{className:"font-bold",children:"(..........................)"}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsx("div",{className:"font-bold",children:"(..........................)"}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("div",{className:"font-bold",children:"(..........................)"}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]})]})})]})}),e.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap');
        
        .print-content-root {
          font-family: 'Sarabun', 'TH Sarabun New', sans-serif;
        }

        .a4-paper-container {
          width: 210mm;
          min-height: 297mm;
          padding: 10mm 15mm;
        }

        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body {
            background: white !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          .print-content-root {
            width: 100%;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:table-header-group {
            display: table-header-group !important;
          }
          .print\\:break-inside-avoid {
             page-break-inside: avoid !important;
             break-inside: avoid !important;
          }
        }
      `})]})},Kl=()=>{const{items:s,updateReturnRecord:r,deleteReturnRecord:d,getNextCollectionNumber:g}=Ie(),[t,x]=k.useState({query:"",status:"All",startDate:"",endDate:""}),[u,a]=k.useState(null),[C,o]=k.useState(!1),[v,n]=k.useState(!1),[f,c]=k.useState(null),[N,b]=k.useState(!1),[P,p]=k.useState(null),[i,m]=k.useState(1),[R,h]=k.useState(20),[O,w]=k.useState(new Set);k.useEffect(()=>{const E="R68121552",Q=s.filter(U=>U.documentNo&&U.documentNo.includes(E)||U.refNo&&U.refNo.includes(E));if(Q.length>0){const U=Q[0],le={Draft:"Step 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Draft) - ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö",Requested:"Step 1: ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Requested) - ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ",JobAccepted:"Step 2: ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Job Accepted)",COL_JobAccepted:"Step 2: ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Job Accepted)",BranchReceived:"Step 3: ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Rx)",COL_BranchReceived:"Step 3: ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Rx)",Consolidated:"Step 4: ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consol)",COL_Consolidated:"Step 4: ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consol)",InTransit:"Step 5: ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á",COL_InTransit:"Step 5: ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á",HubReceived:"Step 6: ‡∏ñ‡∏∂‡∏á Hub",COL_HubReceived:"Step 6: ‡∏ñ‡∏∂‡∏á Hub",Completed:"Step 7: ‡∏à‡∏ö‡∏á‡∏≤‡∏ô",Canceled:"‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Canceled)"}[U.status||""]||`‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${U.status}`;A.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,background:"#eff6ff",color:"#1e3a8a"}).fire({icon:"info",title:`üîé ‡∏û‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ${E}`,html:`<div class="text-xs text-left mt-1"><b>‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà:</b> ${le}<br/><b>(‡∏°‡∏µ ${Q.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</b></div>`})}},[s]);const j=k.useMemo(()=>s.filter(E=>{if(E.documentType==="NCR"||E.ncrNumber&&E.documentType!=="LOGISTICS"||t.startDate&&E.date<t.startDate||t.endDate&&E.date>t.endDate||t.status!=="All"&&E.status!==t.status)return!1;const Q=t.query.toLowerCase();return!(Q&&!`
          ${E.id}
          ${E.branch}
          ${E.invoiceNo||""}
          ${E.documentNo||""}
          ${E.tmNo||""}
          ${E.customerName||""}
          ${E.productCode||""}
          ${E.productName||""}
          ${E.destinationCustomer||""}
          ${E.notes||""}
          ${E.collectionOrderId||""}
        `.toLowerCase().includes(Q))}).sort((E,Q)=>new Date(Q.date).getTime()-new Date(E.date).getTime()),[s,t]),D=k.useMemo(()=>{const E={};return j.forEach(Q=>{const ee=(Q.documentNo?Q.documentNo.trim():`_NO_DOC_${Q.id}`).toLowerCase();E[ee]||(E[ee]=[]),E[ee].push(Q)}),Object.entries(E).map(([Q,U])=>({key:Q,items:U,rep:U[0]})).sort((Q,U)=>new Date(U.rep.date).getTime()-new Date(Q.rep.date).getTime())},[j]),S=Math.ceil(D.length/R),I=k.useMemo(()=>{const E=(i-1)*R;return D.slice(E,E+R)},[D,i,R]);k.useEffect(()=>{m(1)},[t,R]);const T=E=>{const Q=new Set(O);Q.has(E)?Q.delete(E):Q.add(E),w(Q)},$=async()=>{const E=new Zt.Workbook,Q=E.addWorksheet("COL Report");Q.columns=[{header:"Date",key:"date",width:15},{header:"Branch",key:"branch",width:15},{header:"Invoice No",key:"invoiceNo",width:15},{header:"Control Date",key:"controlDate",width:15},{header:"Doc No (R)",key:"documentNo",width:15},{header:"TM No",key:"tmNo",width:15},{header:"COL No",key:"collectionOrderId",width:20},{header:"Status",key:"status",width:15},{header:"Product Code",key:"productCode",width:15},{header:"Product Name",key:"productName",width:30},{header:"Quantity",key:"quantity",width:10},{header:"Unit",key:"unit",width:10},{header:"Destination",key:"destination",width:20},{header:"Notes",key:"notes",width:30}],j.forEach(le=>{Q.addRow({date:Fe(le.date),branch:le.branch,invoiceNo:le.invoiceNo||"-",controlDate:le.controlDate||"-",documentNo:le.documentNo||"-",tmNo:le.tmNo||"-",collectionOrderId:le.collectionOrderId||"-",status:le.status,productCode:le.productCode==="N/A"?"":le.productCode,productName:le.productName==="N/A"?"":le.productName,quantity:le.quantity,unit:le.unit||"",destination:le.destinationCustomer||"-",notes:le.notes||"-"})});const U=await E.xlsx.writeBuffer(),ee=new Blob([U],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});bs.saveAs(ee,`COL_Report_${new Date().toISOString().split("T")[0]}.xlsx`)},B=async E=>{const Q=new Zt.Workbook,U=Q.addWorksheet("COL Item");U.mergeCells("A1:E1"),U.getCell("A1").value="‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / Collection Receipt",U.getCell("A1").font={size:16,bold:!0},U.getCell("A1").alignment={horizontal:"center"},U.getCell("A3").value="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà / Date:",U.getCell("B3").value=Fe(E.date),U.getCell("D3").value="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà / Doc No:",U.getCell("E3").value=E.documentNo||E.id,U.getCell("A4").value="‡∏™‡∏≤‡∏Ç‡∏≤ / Branch:",U.getCell("B4").value=E.branch,U.getRow(6).values=["‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏à‡∏≥‡∏ô‡∏ß‡∏ô","‡∏´‡∏ô‡πà‡∏ß‡∏¢","‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"],U.getRow(6).font={bold:!0},U.getRow(7).values=[E.productCode==="N/A"?"":E.productCode,E.productName==="N/A"?"":E.productName,E.quantity,E.unit,E.notes||"-"],U.getColumn(1).width=15,U.getColumn(2).width=30,U.getColumn(3).width=10,U.getColumn(4).width=10,U.getColumn(5).width=20;const ee=await Q.xlsx.writeBuffer(),le=new Blob([ee],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});bs.saveAs(le,`COL_Item_${E.id}.xlsx`)},V=E=>{p(E),b(!0)},G=async E=>{const{value:Q}=await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",input:"password",inputLabel:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",inputPlaceholder:"Enter password",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",showCancelButton:!0,inputAttributes:{autocapitalize:"off",autocorrect:"off"}});Q==="1234"?(a({...E}),o(!0)):Q&&A.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error")},de=async E=>{const Q=(E.documentNo||"").trim().toLowerCase(),U=(E.refNo||"").trim().toLowerCase();if(!Q&&!U){await re(E.id);return}const ee=s.filter(ce=>{const be=(ce.documentNo||"").trim().toLowerCase(),ke=(ce.refNo||"").trim().toLowerCase();return Q&&(be===Q||ke===Q)||U&&(be===U||ke===U)});if(ee.length>1){const ce={};ee.forEach(ye=>{ce[ye.status||"Unknown"]=(ce[ye.status||"Unknown"]||0)+1});const be=Object.entries(ce).map(([ye,De])=>`${ye}: ${De}`).join(", "),ke=await A.fire({title:"‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö (System Clean)",html:`
                ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ <b>${E.documentNo||E.refNo}</b> ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô <b>${ee.length}</b> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                <br/><div class="text-xs text-slate-500 mt-2 mb-2 bg-slate-100 p-2 rounded text-left">
                   <b>Status Breakdown:</b><br/>
                   ${be}
                </div>
                <br/>
                <span class="text-red-500 font-bold">‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà)</span>
                <br/><span class="text-xs">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á</span>
            `,icon:"warning",showDenyButton:!0,showCancelButton:!0,confirmButtonText:`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${ee.length})`,denyButtonText:"‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ (1)",confirmButtonColor:"#d33",denyButtonColor:"#f59e0b"});if(ke.isConfirmed){const{value:ye}=await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Admin)",input:"password",inputPlaceholder:"Password",showCancelButton:!0,inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(ye==="888"){let De=0;await Promise.all(ee.map(async J=>{await d(J.id)&&De++})),A.fire("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",`‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${De} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`,"success")}else ye&&A.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏¥‡∏î","","error")}else ke.isDenied&&await re(E.id)}else await re(E.id)},re=async E=>{if((await A.fire({title:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?",text:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){const{value:U}=await A.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô",input:"password",inputLabel:"Password",inputPlaceholder:"Enter password",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});U==="1234"?await d(E)?A.fire("‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß","success"):A.fire("‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","error"):U&&A.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error")}},pe=async()=>{u&&(await r(u.id,u),o(!1),a(null),A.fire("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß","success"))},Se=E=>{c(E),n(!0)};return e.jsxs("div",{className:"h-full flex flex-col gap-4 p-4 font-inter text-slate-800 bg-slate-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm print:hidden",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-700 to-indigo-600 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(Ne,{className:"w-6 h-6 text-blue-600"}),"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô COL (Collection Report)"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Report)"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(Ge,{className:"absolute left-2 top-1.5 w-4 h-4 text-slate-400 group-hover:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (Inv, Doc, COL)...",value:t.query,onChange:E=>x({...t,query:E.target.value}),className:"pl-8 pr-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full md:w-64 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 border border-slate-200 rounded-lg p-0.5",children:[e.jsx("input",{type:"date",value:t.startDate,onChange:E=>x({...t,startDate:E.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:t.endDate,onChange:E=>x({...t,endDate:E.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î"})]}),e.jsxs("select",{value:t.status,onChange:E=>x({...t,status:E.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1.5 outline-none focus:ring-1 focus:ring-blue-500 max-w-[150px]","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (All Status)"}),e.jsx("option",{value:"Requested",children:"Requested (‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô)"}),e.jsx("option",{value:"COL_JobAccepted",children:"Job Accepted (‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)"}),e.jsx("option",{value:"COL_BranchReceived",children:"Branch Received (‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤)"}),e.jsx("option",{value:"COL_Consolidated",children:"Consolidated (‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)"}),e.jsx("option",{value:"COL_InTransit",children:"In Transit (‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á)"}),e.jsx("option",{value:"COL_HubReceived",children:"Hub Received (‡∏ñ‡∏∂‡∏á Hub)"}),e.jsx("option",{value:"Completed",children:"Completed (‡∏à‡∏ö‡∏á‡∏≤‡∏ô)"})]}),e.jsxs("div",{className:"flex gap-1 ml-auto",children:[e.jsxs("button",{onClick:$,className:"bg-green-600 text-white font-bold px-3 py-1 rounded-lg flex items-center gap-1 hover:bg-green-700 transition-colors shadow-sm text-xs whitespace-nowrap",children:[e.jsx(dt,{className:"w-3 h-3"}),"Excel (All)"]}),e.jsx("button",{onClick:()=>x({query:"",status:"All",startDate:"",endDate:""}),className:"px-2 py-1 text-slate-600 hover:bg-slate-100 font-medium rounded-lg border border-slate-200",title:"‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á (Clear)",children:e.jsx(Ue,{className:"w-3 h-3"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col print:hidden",children:[e.jsx("div",{className:"overflow-auto flex-1 relative table-scroll-container",children:e.jsxs("table",{className:"w-full text-left border-collapse min-w-[1200px]",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 border-r max-w-[50px] text-center",children:"#"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Date)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[150px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL (COL No)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[200px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product) - EXPAND (+)"}),e.jsx("th",{className:"px-3 py-3 text-center min-w-[100px]",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"}),e.jsx("th",{className:"px-3 py-3 text-center min-w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:I.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:11,className:"p-8 text-center text-slate-400 italic",children:["‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Collection ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ",e.jsx("div",{className:"text-xs mt-2",children:"‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏≠‡∏∑‡πà‡∏ô"})]})}):I.map((E,Q)=>{const{rep:U,items:ee,key:le}=E,ce=O.has(le);return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors text-xs text-slate-700 align-top",children:[e.jsxs("td",{className:"px-3 py-2 border-r text-center text-slate-400 relative",children:[e.jsx("button",{onClick:()=>Se(U),className:"absolute left-1 top-2 p-0.5 rounded-full hover:bg-blue-100 text-blue-400 hover:text-blue-600 transition-colors",title:"‡∏î‡∏π Timeline (View Infographic)",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-full p-0.5",children:e.jsx(Ge,{className:"w-2.5 h-2.5"})})}),(i-1)*R+Q+1]}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:Fe(U.date)}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:e.jsx("div",{className:"font-bold",children:U.branch})}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:U.invoiceNo?e.jsx("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 font-mono",children:U.invoiceNo}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:U.documentNo?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold text-blue-600 font-mono",children:U.documentNo}),ee.length>1&&e.jsxs("span",{className:"inline-flex items-center gap-1 w-fit bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[e.jsx(xt,{className:"w-3 h-3"})," ",ee.length," items"]})]}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:U.controlDate?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(lt,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{children:Fe(U.controlDate)})]}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:U.tmNo?e.jsx("span",{className:"text-slate-700 font-medium",children:U.tmNo}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:U.collectionOrderId?e.jsx("span",{className:"font-mono text-indigo-600 font-bold bg-indigo-50 px-1.5 py-0.5 rounded text-[10px]",children:U.collectionOrderId}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"group",children:[e.jsx("div",{className:"font-bold text-slate-800",children:ee[0].productCode==="N/A"?"":ee[0].productCode}),e.jsx("div",{className:"line-clamp-2",title:ee[0].productName,children:ee[0].productName==="N/A"?"":ee[0].productName}),e.jsx("div",{className:"mt-1 text-slate-500 text-[10px] flex gap-2",children:e.jsxs("span",{children:["Qty: ",e.jsx("span",{className:"font-semibold text-slate-700",children:ee[0].quantity})," ",ee[0].unit]})})]}),ee.length>1&&e.jsxs("button",{onClick:()=>T(le),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[10px] font-bold border transition-all mt-1
                                        ${ce?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-indigo-100"}`,"aria-label":ce?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",title:ce?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",children:[ce?e.jsx(et,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"}),ce?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Collapse)":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${ee.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),ce&&ee.length>1&&e.jsx("div",{className:"flex flex-col gap-3 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:ee.slice(1).map(be=>e.jsxs("div",{className:"pl-2 border-l-2 border-indigo-200 group relative",children:[e.jsx("div",{className:"font-bold text-slate-700 text-[11px]",children:be.productCode==="N/A"?"":be.productCode}),e.jsx("div",{className:"text-slate-600 text-[11px] leading-tight mb-0.5",children:be.productName==="N/A"?"":be.productName}),e.jsxs("div",{className:"text-[10px] text-slate-500",children:["Qty: ",e.jsxs("b",{children:[be.quantity," ",be.unit]})]}),e.jsxs("div",{className:"flex gap-1 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>G(be),className:"p-0.5 bg-amber-50 text-amber-600 rounded border border-amber-200 hover:bg-amber-100",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",children:e.jsx(Ot,{className:"w-2.5 h-2.5"})}),e.jsx("button",{onClick:()=>de(be),className:"p-0.5 bg-red-50 text-red-600 rounded border border-red-200 hover:bg-red-100",title:"‡∏•‡∏ö",children:e.jsx($e,{className:"w-2.5 h-2.5"})})]})]},be.id))})]})}),e.jsx("td",{className:"px-3 py-2 text-center align-top",children:e.jsx("span",{className:`
                          inline-flex px-2 py-0.5 rounded-full text-[10px] font-bold border
                          ${U.status==="Requested"?"bg-slate-100 text-slate-600 border-slate-200":""}
                          ${U.status==="COL_JobAccepted"?"bg-blue-50 text-blue-600 border-blue-200":""}
                          ${U.status==="COL_BranchReceived"?"bg-indigo-50 text-indigo-600 border-indigo-200":""}
                          ${U.status==="COL_Consolidated"?"bg-orange-50 text-orange-600 border-orange-200":""}
                          ${U.status==="COL_InTransit"||U.status==="COL_HubReceived"?"bg-purple-50 text-purple-600 border-purple-200":""}
                          ${U.status==="Completed"?"bg-green-50 text-green-600 border-green-200":""}
                        `,children:U.status})}),e.jsx("td",{className:"px-3 py-2 align-top text-center border-l",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>V(U),className:"p-1 hover:bg-slate-100 rounded text-slate-500 hover:text-blue-600 transition-colors",title:"‡∏û‡∏¥‡∏°‡∏û‡πå (Print)",children:e.jsx(Ke,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>G(U),className:"p-1 hover:bg-slate-100 rounded text-amber-500 hover:text-amber-600 transition-colors",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Edit)",children:e.jsx(Ot,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>B(U),className:"p-1 hover:bg-slate-100 rounded text-green-600 hover:text-green-700 transition-colors",title:"Export Excel",children:e.jsx(dt,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>de(U),className:"p-1 hover:bg-slate-100 rounded text-red-400 hover:text-red-600 transition-colors",title:"‡∏•‡∏ö (Delete)",children:e.jsx($e,{className:"w-3 h-3"})})]})})]},le)})})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-sm print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{children:"‡πÅ‡∏™‡∏î‡∏á"}),e.jsxs("select",{value:R,onChange:E=>h(Number(E.target.value)),className:"bg-white border border-slate-300 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500 font-bold","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ",D.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ - ",j.length," Products)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>m(E=>Math.max(E-1,1)),disabled:i===1,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-bold text-slate-800",children:["‡∏´‡∏ô‡πâ‡∏≤ ",i]}),e.jsxs("span",{className:"text-slate-500",children:["‡∏à‡∏≤‡∏Å ",S||1]})]}),e.jsx("button",{onClick:()=>m(E=>Math.min(E+1,S)),disabled:i===S||S===0,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"})]})]})]}),C&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden animate-scale-up",children:[e.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center border-b border-slate-800",children:[e.jsxs("h3",{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5 text-amber-500"})," ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Edit Return Record)"]}),e.jsx("button",{onClick:()=>o(!1),className:"text-slate-400 hover:text-white transition-colors","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(fe,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-date",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Date)"}),e.jsx("input",{id:"edit-date",type:"date",value:u.date,onChange:E=>a({...u,date:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-branch",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("input",{id:"edit-branch",type:"text",value:u.branch,onChange:E=>a({...u,branch:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-invoice",className:"block text-sm font-bold text-slate-700 mb-1",children:"Invoice No"}),e.jsx("input",{id:"edit-invoice",type:"text",value:u.invoiceNo||"",onChange:E=>a({...u,invoiceNo:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-docno",className:"block text-sm font-bold text-slate-700 mb-1",children:"Doc No (R)"}),e.jsx("input",{id:"edit-docno",type:"text",value:u.documentNo||"",onChange:E=>a({...u,documentNo:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-colno",className:"block text-sm font-bold text-slate-700 mb-1",children:"COL No"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"edit-colno",type:"text",value:u.collectionOrderId||"",onChange:E=>a({...u,collectionOrderId:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"COL-xxxx-xxx"}),e.jsx("button",{type:"button",onClick:async()=>{const E=await g();a({...u,collectionOrderId:E})},className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 text-xs font-bold whitespace-nowrap transition-colors",title:"Run Auto (‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)",children:"Auto"})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-tmno",className:"block text-sm font-bold text-slate-700 mb-1",children:"TM No"}),e.jsx("input",{id:"edit-tmno",type:"text",value:u.tmNo||"",onChange:E=>a({...u,tmNo:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-controldate",className:"block text-sm font-bold text-slate-700 mb-1",children:"Control Date"}),e.jsx("input",{id:"edit-controldate",type:"date",value:u.controlDate||"",onChange:E=>a({...u,controlDate:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("hr",{className:"my-2 border-slate-200"}),e.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Info)"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-productcode",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Code)"}),e.jsx("input",{id:"edit-productcode",type:"text",value:u.productCode,onChange:E=>a({...u,productCode:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-productname",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Name)"}),e.jsx("input",{id:"edit-productname",type:"text",value:u.productName,onChange:E=>a({...u,productName:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-quantity",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Qty)"}),e.jsx("input",{id:"edit-quantity",type:"number",value:u.quantity,onChange:E=>a({...u,quantity:Number(E.target.value)}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-unit",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Unit)"}),e.jsx("input",{id:"edit-unit",type:"text",value:u.unit,onChange:E=>a({...u,unit:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"edit-notes",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (Notes)"}),e.jsx("textarea",{id:"edit-notes",rows:2,value:u.notes||"",onChange:E=>a({...u,notes:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none resize-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"edit-status",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Status)"}),e.jsxs("select",{id:"edit-status",value:u.status,onChange:E=>a({...u,status:E.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white",children:[e.jsx("option",{value:"Requested",children:"Requested (‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô)"}),e.jsx("option",{value:"COL_JobAccepted",children:"Job Accepted (‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)"}),e.jsx("option",{value:"COL_BranchReceived",children:"Branch Received (‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤)"}),e.jsx("option",{value:"COL_Consolidated",children:"Consolidated (‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)"}),e.jsx("option",{value:"COL_InTransit",children:"In Transit (‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á)"}),e.jsx("option",{value:"COL_HubReceived",children:"Hub Received (‡∏ñ‡∏∂‡∏á Hub)"}),e.jsx("option",{value:"Completed",children:"Completed (‡∏à‡∏ö‡∏á‡∏≤‡∏ô)"})]})]})]})}),e.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"}),e.jsxs("button",{onClick:pe,className:"px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-lg shadow-blue-900/20 transition-all flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (Save)"]})]})]})}),v&&e.jsx(Vl,{isOpen:v,onClose:()=>n(!1),item:f}),N&&P&&e.jsx(Gl,{item:P,onClose:()=>b(!1)}),e.jsx("style",{children:`
        .table-scroll-container {
          max-height: calc(100vh - 220px);
        }
      `})]})},Jl=()=>{const[s,r]=k.useState("Ledger"),{items:d,loading:g}=Ie(),[t,x]=k.useState({query:"",startDate:"",endDate:"",movementType:"All"}),u=k.useMemo(()=>{const p=[];d.forEach(m=>{let R=m.dateGraded;!R&&m.disposition&&(R=m.date),!R&&(m.dateDocumented||m.dateCompleted)&&(R=m.dateDocumented||m.dateCompleted),R&&(p.push({...m,movementType:"IN",movementDate:R}),(m.dateDocumented||m.dateCompleted)&&p.push({...m,movementType:"OUT",movementDate:m.dateDocumented||m.dateCompleted}))}),p.sort((m,R)=>{const h=m.movementDate||"0",w=(R.movementDate||"0").localeCompare(h);return w!==0?w:m.movementType==="IN"&&R.movementType==="OUT"?-1:m.movementType==="OUT"&&R.movementType==="IN"?1:0});const i=m=>{const R=p.filter(w=>w.disposition===m),h=R.filter(w=>w.movementType==="IN").reduce((w,j)=>w+j.quantity,0),O=R.filter(w=>w.movementType==="OUT").reduce((w,j)=>w+j.quantity,0);return{totalIn:h,totalOut:O,onHand:h-O}};return{fullLedger:p,sellableStock:{stats:i("Restock")},rtvStock:{stats:i("RTV")},claimStock:{stats:i("Claim")},internalStock:{stats:i("InternalUse")},scrapStock:{stats:i("Recycle")}}},[d]),a=k.useMemo(()=>(s==="Ledger"?u.fullLedger:u.fullLedger.filter(i=>i.disposition===s)).filter(i=>{var R,h,O,w;const m=t.query.toLowerCase();return!(m&&!((R=i.productName)!=null&&R.toLowerCase().includes(m))&&!((h=i.productCode)!=null&&h.toLowerCase().includes(m))&&!((O=i.customerName)!=null&&O.toLowerCase().includes(m))&&!((w=String(i.branch))!=null&&w.toLowerCase().includes(m))||t.startDate&&(i.movementDate||"0")<t.startDate||t.endDate&&(i.movementDate||"0")>t.endDate||t.movementType!=="All"&&i.movementType!==t.movementType)}),[s,u.fullLedger,t]),C=()=>{var w;const p=["MovementDate","MovementType","Branch","Customer","ProductCode","ProductName","RefNo","NeoRefNo","Quantity","Unit","PriceBill","ExpiryDate","Disposition"],i=a.map(j=>[j.movementDate||"",j.movementType,`"${String(j.branch).replace(/"/g,'""')}"`,`"${j.customerName.replace(/"/g,'""')}"`,j.productCode,`"${j.productName.replace(/"/g,'""')}"`,j.refNo,j.neoRefNo||"",j.quantity,j.unit,j.priceBill,j.expiryDate||"",j.disposition||""].join(",")),m="\uFEFF"+[p.join(","),...i].join(`
`),R=new Blob([m],{type:"text/csv;charset=utf-8;"}),h=URL.createObjectURL(R),O=document.createElement("a");O.setAttribute("href",h),O.setAttribute("download",`inventory_report_${s}_${(w=Fe(new Date))==null?void 0:w.replace(/\//g,"-")}.csv`),document.body.appendChild(O),O.click(),document.body.removeChild(O)},o=[{id:"Ledger",label:"1. ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Full Ledger)",icon:rl,stats:null},{id:"Restock",label:"2. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏¢ (Sellable)",icon:Ue,stats:u.sellableStock.stats},{id:"RTV",label:"3. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô (RTV)",icon:Ne,stats:u.rtvStock.stats},{id:"Claim",label:"4. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",icon:es,stats:u.claimStock.stats},{id:"InternalUse",label:"5. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",icon:us,stats:u.internalStock.stats},{id:"Recycle",label:"6. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",icon:$e,stats:u.scrapStock.stats}],[v,n]=k.useState(1),[f,c]=k.useState(20);Y.useEffect(()=>{n(1)},[t,s]);const N=Math.ceil(a.length/f),b=k.useMemo(()=>{const p=(v-1)*f;return a.slice(p,p+f)},[a,v,f]),P=o.find(p=>p.id===s);return e.jsxs("div",{className:"p-6 h-full flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inventory)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"})]}),e.jsx("div",{className:"border-b border-slate-200",children:e.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:o.map(p=>{const i=p.icon;return e.jsxs("button",{onClick:()=>r(p.id),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2
                  ${s===p.id?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}
                `,children:[e.jsx(i,{className:"w-4 h-4"}),p.label]},p.id)})})}),s!=="Ledger"&&(P==null?void 0:P.stats)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 animate-fade-in",children:[e.jsx(is,{title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Total In)",value:P.stats.totalIn,color:"text-blue-600"}),e.jsx(is,{title:"‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß (Total Out)",value:P.stats.totalOut,color:"text-amber-600"}),e.jsx(is,{title:"‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å (On-Hand)",value:P.stats.onHand,color:"text-green-600",isHighlight:!0})]}),e.jsxs("div",{className:"bg-white p-2 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-grow max-w-sm",children:[e.jsx(Ge,{className:"w-3 h-3 absolute left-2 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...",value:t.query,onChange:p=>x({...t,query:p.target.value}),className:"w-full pl-7 pr-2 py-1 bg-slate-50 border border-slate-200 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none text-xs"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"date",value:t.startDate,onChange:p=>x({...t,startDate:p.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500 w-28","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô"}),e.jsx("input",{type:"date",value:t.endDate,onChange:p=>x({...t,endDate:p.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500 w-28","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("select",{value:t.movementType,onChange:p=>x({...t,movementType:p.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500","aria-label":"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß",title:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß",children:[e.jsx("option",{value:"All",children:"IN/OUT ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),e.jsx("option",{value:"IN",children:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (IN)"}),e.jsx("option",{value:"OUT",children:"‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å (OUT)"})]}),e.jsxs("button",{onClick:C,className:"bg-green-600 text-white font-bold px-3 py-1 rounded-lg flex items-center justify-center gap-1 hover:bg-green-700 transition-colors shadow-sm text-xs whitespace-nowrap ml-auto md:ml-0",children:[e.jsx(dt,{className:"w-3 h-3"}),"Excel"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col",children:[e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{className:"whitespace-nowrap",children:[e.jsx("th",{className:"px-1 py-1 w-[80px] text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà/‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"}),e.jsx("th",{className:"px-1 py-1 max-w-[150px] text-[10px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[180px] text-[10px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[100px] text-[10px]",children:"NCR No."}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref)"}),e.jsx("th",{className:"px-1 py-1 text-right w-[60px] text-[10px]",children:"Qty"}),e.jsx("th",{className:"px-1 py-1 text-right w-[60px] text-[10px]",children:"Price"}),e.jsx("th",{className:"px-1 py-1 w-[70px] text-[10px]",children:"Exp."}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:g?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center text-slate-400",children:"Loading data..."})}):b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center text-slate-400 italic",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á"})}):b.map(p=>e.jsxs("tr",{className:"text-[11px] hover:bg-slate-50",children:[e.jsxs("td",{className:"px-1 py-1",children:[e.jsx("div",{className:"font-mono text-[9px]",children:Fe(p.movementDate)}),p.movementType==="IN"?e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-green-600 font-bold text-[9px]",children:[e.jsx(nl,{className:"w-3 h-3"})," ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"]}):e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-red-600 font-bold text-[9px]",children:[e.jsx(ol,{className:"w-3 h-3"})," ‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å"]})]}),e.jsxs("td",{className:"px-1 py-1 max-w-[150px]",children:[e.jsx("div",{className:"font-medium text-slate-800 truncate",title:p.customerName,children:p.customerName}),e.jsxs("div",{className:"text-[9px] text-slate-500 truncate",title:`‡∏™‡∏≤‡∏Ç‡∏≤: ${p.branch}`,children:["‡∏™‡∏≤‡∏Ç‡∏≤: ",p.branch]})]}),e.jsxs("td",{className:"px-1 py-1 max-w-[180px]",children:[e.jsx("div",{className:"font-bold text-slate-800 truncate",title:p.productName,children:p.productName}),e.jsx("div",{className:"text-[9px] text-slate-500",children:p.productCode})]}),e.jsx("td",{className:"px-1 py-1 text-[9px] font-mono text-slate-600 max-w-[100px] truncate",title:p.ncrNumber||"-",children:p.ncrNumber||"-"}),e.jsxs("td",{className:"px-1 py-1 text-[9px] max-w-[120px]",children:[e.jsxs("div",{className:"truncate",title:`Ref: ${p.refNo}`,children:["Ref: ",p.refNo]}),e.jsxs("div",{className:"text-slate-500 truncate",title:`Neo: ${p.neoRefNo}`,children:["Neo: ",p.neoRefNo||"-"]})]}),e.jsxs("td",{className:"px-1 py-1 text-right font-mono text-[10px]",children:[p.quantity," ",p.unit]}),e.jsxs("td",{className:"px-1 py-1 text-right font-mono text-[10px]",children:["‡∏ø",(p.priceBill||0).toLocaleString()]}),e.jsx("td",{className:"px-1 py-1 text-[9px] text-red-600 font-medium font-mono",children:Fe(p.expiryDate)}),e.jsxs("td",{className:"px-1 py-1 text-[9px] text-slate-500 max-w-[120px]",children:[e.jsx("div",{className:"truncate",children:p.disposition}),p.destinationCustomer&&e.jsxs("div",{className:"text-blue-600 truncate",title:p.destinationCustomer,children:["T: ",p.destinationCustomer]})]})]},p.id+"-"+p.movementType+"-"+p.movementDate))})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-sm print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{children:"‡πÅ‡∏™‡∏î‡∏á"}),e.jsxs("select",{value:f,onChange:p=>c(Number(p.target.value)),className:"bg-white border border-slate-300 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500 font-bold","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ",a.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n(p=>Math.max(p-1,1)),disabled:v===1,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-bold text-slate-800",children:["‡∏´‡∏ô‡πâ‡∏≤ ",v]}),e.jsxs("span",{className:"text-slate-500",children:["‡∏à‡∏≤‡∏Å ",N||1]})]}),e.jsx("button",{onClick:()=>n(p=>Math.min(p+1,N)),disabled:v===N||N===0,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"})]})]})]})]})},is=({title:s,value:r,color:d,isHighlight:g=!1})=>e.jsxs("div",{className:`bg-white p-4 rounded-lg border shadow-sm ${g?"border-blue-200 bg-blue-50":"border-slate-200"}`,children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:s}),e.jsx("p",{className:`text-3xl font-bold ${d} ${g?"text-blue-600":""}`,children:r.toLocaleString()})]}),Yl={documentNo:["doc_no","docNo","r_no","rNo","‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£","‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô","document_no","documentNo","rnumber","returnno","refno","reference"],date:["date","‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà","‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£","dateofdoc"],customerCode:["soldto_id","customer_code","‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤","custcode","customercode"],customerName:["soldto_name","customer_name","‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤","customer","custname","shopname","‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"],destinationCustomer:["shipto_name","destination","‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á","‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á","‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á","shiptoname","receiver"],customerAddress:["shipto_address","address","‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà","‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á","shiptoaddress","deliveryaddress"],productCode:["sku_id","product_code","‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","itemcode","material","partno"],productName:["sku_name","product_name","‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","itemname","description","materialdescription","product","‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"],quantity:["total_qty","qty","quantity","‡∏à‡∏≥‡∏ô‡∏ß‡∏ô","amount","total"],unit:["unit","‡∏´‡∏ô‡πà‡∏ß‡∏¢","uom"],tmNo:["transportmanifest_no","transportmanifestno","tm_no","tmno","tm","‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°","‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà tm","manifresh","manifest"],controlDate:["doc_date","transportmanifest_date","tm_date","control_date","‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°","‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏ô‡∏™‡πà‡∏á","dateoftm"],notes:["comment","tmnotes","notes","remark","‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏","remarks","note"]},Ls=s=>s.toLowerCase().replace(/[\s_.-]/g,""),cs=s=>s&&typeof s=="object"&&s.text?s.text:String(s||""),Xl=async(s,r)=>{const d=await s.arrayBuffer(),g=new Zt.Workbook;await g.xlsx.load(d);const t=g.worksheets[0];if(!t)throw new Error("No worksheet found");let x=1,u=!1;t.eachRow((n,f)=>{if(u)return;const N=n.values.slice(1).map(P=>cs(P).toLowerCase()).join(" ");let b=0;(N.includes("doc")||N.includes("r no")||N.includes("‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà"))&&b++,(N.includes("cust")||N.includes("‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤")||N.includes("sold"))&&b++,(N.includes("product")||N.includes("item")||N.includes("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤")||N.includes("sku"))&&b++,(N.includes("qty")||N.includes("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"))&&b++,b>=1&&(x=f,u=!0)});const a={};if(t.getRow(x).eachCell((n,f)=>{const c=Ls(cs(n.value));for(const[N,b]of Object.entries(Yl))if(b.some(P=>Ls(P)===c)){a[f]=N;break}}),Object.keys(a).length===0)throw new Error("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÄ‡∏ä‡πà‡∏ô Doc No, Product, Qty)");new Set(r.filter(n=>n.status!=="Draft"&&n.status!=="Requested").map(n=>(n.documentNo||"").trim().toLowerCase()).filter(Boolean)),new Set(r.map(n=>`${(n.documentNo||"").trim().toLowerCase()}|${(n.productName||"").trim().toLowerCase()}`));const o=new Set,v=[];return t.eachRow((n,f)=>{if(f<=x)return;const c={documentType:"LOGISTICS",status:"Draft"};let N=!1;if(n.eachCell((b,P)=>{const p=a[P];if(p){let i=b.value;if(p==="date"||p==="controlDate"){if(i instanceof Date)i=i.toISOString().split("T")[0];else if(typeof i=="object"&&i.text)i=i.text;else if(typeof i=="string"){const m=i.trim().split("/");m.length===3&&(i=`${m[2]}-${m[1]}-${m[0]}`)}}i=cs(i),i&&(typeof i=="string"&&(i=i.trim()),c[p]=i,N=!0)}}),c.customerAddress){const b=c.customerAddress;let P="";const p=b.match(/(?:‡∏à\.|‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î)\s*([^\s0-9]+)/);p&&p[1]&&(P=p[1].trim());let i="";const m=b.match(/(?:‡∏≠\.|‡∏≠‡∏≥‡πÄ‡∏†‡∏≠)\s*([^\s0-9]+)/);m&&m[1]&&(i=m[1].trim());const R=(w,j)=>w.includes(j),h=(w,j)=>j.some(D=>w.includes(D)),O=(w,j)=>h(w,["‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢","‡πÅ‡∏û‡∏£‡πà","‡∏ô‡πà‡∏≤‡∏ô"])?"EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á":h(w,["‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","‡∏•‡∏≥‡∏û‡∏π‡∏ô","‡∏û‡∏∞‡πÄ‡∏¢‡∏≤","‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô"])?"‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà":R(w,"‡∏ï‡∏≤‡∏Å")&&R(j,"‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î")?"‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î":R(w,"‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£")||R(w,"‡∏ï‡∏≤‡∏Å")&&!R(j,"‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î")?"‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£":h(w,["‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢","‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå"])||R(w,"‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå")&&h(j,["‡∏´‡∏•‡πà‡∏°‡∏™‡∏±‡∏Å","‡∏´‡∏•‡πà‡∏°‡πÄ‡∏Å‡πà‡∏≤"])?"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å":h(w,["‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó","‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ","‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£"])||R(w,"‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå")&&!h(j,["‡∏´‡∏•‡πà‡∏°‡∏™‡∏±‡∏Å","‡∏´‡∏•‡πà‡∏°‡πÄ‡∏Å‡πà‡∏≤"])?"‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå":null;if(P){const w=O(P,i);w&&(c.branch=w)}if(!c.branch){const w=b;h(w,["‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢","‡πÅ‡∏û‡∏£‡πà","‡∏ô‡πà‡∏≤‡∏ô"])?c.branch="EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á":h(w,["‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","‡∏•‡∏≥‡∏û‡∏π‡∏ô","‡∏û‡∏∞‡πÄ‡∏¢‡∏≤","‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô"])?c.branch="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà":R(w,"‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î")?c.branch="‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î":R(w,"‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£")||R(w,"‡∏ï‡∏≤‡∏Å")?c.branch="‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£":h(w,["‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢","‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå"])?c.branch="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å":h(w,["‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó","‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ","‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£"])?c.branch="‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå":R(w,"‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå")&&(h(w,["‡∏´‡∏•‡πà‡∏°‡∏™‡∏±‡∏Å","‡∏´‡∏•‡πà‡∏°‡πÄ‡∏Å‡πà‡∏≤"])?c.branch="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å":c.branch="‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå")}}if(N){const b=c.customerName;b&&(c.destinationCustomer=b),c.customerName="‡∏ö‡∏à‡∏Å.‡∏ã‡∏µ‡πÇ‡∏ô-‡πÅ‡∏õ‡∏ã‡∏¥‡∏ü‡∏¥‡∏Ñ ‡πÄ‡∏ó‡∏£‡∏î‡∏î‡∏¥‡πâ‡∏á (‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢)",c.date=new Date().toISOString().split("T")[0];const P=(c.documentNo||"").trim().toLowerCase(),p=(c.productName||"").trim().toLowerCase(),i=`${P}|${p}`,m=r.find(R=>{const h=(R.documentNo||"").trim().toLowerCase(),O=(R.productName||"").trim().toLowerCase();return`${h}|${O}`===i});if(m){const R=new Set(["JobAccepted","COL_JobAccepted","NCR_JobAccepted","BranchReceived","COL_BranchReceived","NCR_BranchReceived","Consolidated","COL_Consolidated","InTransit","COL_InTransit","NCR_InTransit","InTransitToHub","HubReceived","COL_HubReceived","NCR_HubReceived","ReceivedAtHub","DocsCompleted","COL_Documented","Completed","ReturnToSupplier","DirectReturn"]);m.status&&R.has(m.status)?c.__isLocked=!0:(c.__isUpdate=!0,c.id=m.id)}else o.has(i)&&(c.__isDupInFile=!0);P&&o.add(i),v.push(c)}}),v},Zl=async s=>{const{value:r}=await A.fire({title:"Import Excel (Logistics)",input:"file",inputAttributes:{accept:".xlsx, .xls, .csv","aria-label":"Upload Excel File"},html:`
            <div class="text-sm text-slate-500 mb-2">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå .xlsx)</div>
        `,confirmButtonText:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Next)",showCancelButton:!0,cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",showLoaderOnConfirm:!0,preConfirm:async a=>{if(!a)return A.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå"),!1;try{return await Xl(a,s)}catch(C){return A.showValidationMessage(`Error: ${C}`),!1}}});if(!r)return null;let d=r;if(d.length===0)return A.fire("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","warning"),null;d.forEach(a=>{a.__selected===void 0&&(a.__selected=!a.__isLocked&&!a.__isDupInFile)});const g=d.filter(a=>a.__isDupInFile||a.__isLocked),t=g.length;if(t>0){const a=Array.from(new Set(g.map(b=>b.documentNo))).slice(0,10),C=new Set(g.map(b=>b.documentNo)).size-a.length,o=a.join(", ")+(C>0?` ...and ${C} more`:""),v=g.filter(b=>b.__isLocked).length,n=g.filter(b=>b.__isDupInFile).length;let f="";v>0&&(f+=`<p class="text-xs text-slate-500">‚Ä¢ <b>${v}</b> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ‡∏ï‡∏¥‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πá‡∏≠‡∏Ñ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß/‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)</p>`),n>0&&(f+=`<p class="text-xs text-slate-500">‚Ä¢ <b>${n}</b> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô‡πÄ‡∏≠‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå Excel (‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ + ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô)</p>`);const{isConfirmed:c,isDenied:N}=await A.fire({title:"‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥/‡∏ï‡∏¥‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Conflicts)",html:`
                <div class="text-left text-sm">
                    <p class="mb-2 text-red-600 font-bold">‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ${t} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                    <div class="bg-slate-100 p-2 rounded border border-slate-300 mb-2 text-xs text-slate-600 font-mono">
                        <b>Documents:</b> ${o||"N/A"}
                    </div>
                    <div class="mb-3 pl-2 border-l-2 border-red-200">
                        ${f}
                    </div>
                    <p class="mb-1">‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ <b>"‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"</b> (Force Import) ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>"‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡∏ö/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï"</b></p>
                    <p class="text-xs text-slate-400">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡∏ö‡∏•‡∏á‡πÑ‡∏õ</p>
                </div>
            `,icon:"warning",showDenyButton:!0,showCancelButton:!0,confirmButtonColor:"#3b82f6",denyButtonColor:"#f43f5e",cancelButtonColor:"#64748b",confirmButtonText:"‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡∏ö/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (Force Update)",denyButtonText:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å (Remove)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(c)d.forEach(b=>{if(b.__isLocked||b.__isDupInFile){if(!b.id){const P=(b.documentNo||"").trim().toLowerCase(),p=(b.productName||"").trim().toLowerCase(),i=s.find(m=>(m.documentNo||"").trim().toLowerCase()===P&&(m.productName||"").trim().toLowerCase()===p);i&&(b.id=i.id)}b.__isLocked=!1,b.__isDupInFile=!1,b.__isUpdate=!0,b.__selected=!0}}),A.fire({icon:"success",title:"‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:'‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï"',timer:1e3,showConfirmButton:!1});else if(N){if(d=d.filter(b=>!b.__isDupInFile&&!b.__isLocked),d.length===0)return A.fire("‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å","info"),null}else return null}let x=null,u=!0;for(;u;){const a=d.map((f,c)=>{const N=f.__isLocked,b=f.__isDupInFile,P=f.__isUpdate;let p="#ffffff",i="";N?(p="#f3f4f6",i='<span style="font-size:0.75em; background:#4b5563; color:white; padding:2px 6px; border-radius:4px; font-weight:bold;">Locked Step 2+</span>'):b?(p="#fff1f2",i='<span style="font-size:0.75em; background:#f43f5e; color:white; padding:2px 6px; border-radius:4px; font-weight:bold;">Duplicate In File</span>'):P&&(p="#eff6ff",i='<span style="font-size:0.75em; background:#3b82f6; color:white; padding:2px 6px; border-radius:4px; font-weight:bold;">Update Existing</span>');const m=Ee.map(R=>`<option value="${R}" ${R===f.branch?"selected":""}>${R}</option>`).join("");return`
                <tr style="background-color: ${p}; border-bottom: 1px solid #e2e8f0;">
                    <td style="padding: 10px; text-align:center;">
                        <input type="checkbox" class="row-checkbox" data-index="${c}" ${f.__selected?"checked":""} ${N?"disabled":""} style="transform: scale(1.2);">
                    </td>
                    <td style="padding: 8px;">
                        <select class="swal2-select row-branch" data-index="${c}" style="margin:0; width:100%; font-size:0.9em; padding: 6px; border-color:#cbd5e1;" ${N?"disabled":""}>
                            <option value="">- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -</option>
                            ${m}
                        </select>
                    </td>
                    <td style="padding: 8px; font-size: 0.9em; color:#334155;">
                        <div style="font-weight:bold; color:#1e293b;">${f.documentNo||"-"}</div>
                        ${i}
                    </td>
                     <td style="padding: 8px; font-size: 0.9em; color:#334155;">${f.destinationCustomer||"-"}</td>
                     <td style="padding: 8px; font-size: 0.9em; color:#334155;">${f.customerAddress||"-"}</td>
                     <td style="padding: 8px; font-size: 0.9em; color:#334155;">${f.productName||"-"}</td>
                     <td style="padding: 8px; font-size: 0.9em; text-align:right; font-weight:bold; color:#0f172a;">${f.quantity} ${f.unit||""}</td>
                </tr>
            `}).join(""),{isConfirmed:C,isDismissed:o,value:v,dismiss:n}=await A.fire({title:`‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (${d.length})`,width:"1000px",html:`
                <div style="text-align:left;">
                    <div style="margin-bottom:15px; padding:15px; background:#f0f9ff; border-radius:8px; display:flex; align-items:center; gap:15px; border:1px solid #bae6fd;">
                         <label style="font-weight:bold; font-size:0.95em; color:#0369a1;">üìç ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Batch):</label>
                         <select id="swal-batch-branch" class="swal2-select" style="margin:0; width:220px; font-size:0.95em; padding:8px; border-color:#7dd3fc;">
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --</option>
                            ${Ee.map(f=>`<option value="${f}">${f}</option>`).join("")}
                         </select>
                         <span style="font-size:0.85em; color:#0c4a6e;">(‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏Ç‡∏≤‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</span>
                    </div>
                     <div style="margin-bottom: 10px; display: flex; justify-content: flex-end;">
                         <button type="button" id="btn-remove-dups" style="font-size: 0.8em; padding: 6px 12px; border: 1px solid #f43f5e; color: #f43f5e; background: #fff1f2; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 5px; font-weight: bold;">
                             <span style="font-size: 1.2em;">üóëÔ∏è</span> ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Remove Conflicts)
                        </button>
                    </div>
                    <div style="max-height: 450px; overflow-y: auto; border: 1px solid #cbd5e1; border-radius: 8px; box-shadow: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);">
                        <table style="width:100%; border-collapse: collapse;">
                            <thead style="background: #f8fafc; position: sticky; top: 0; z-index:10; shadow: 0 1px 2px rgba(0,0,0,0.1);">
                                <tr>
                                    <th style="padding:10px; width:50px; text-align:center;">‚úì</th>
                                    <th style="padding:10px; width:180px; text-align:left;">‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)</th>
                                    <th style="padding:10px; text-align:left;">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R No)</th>
                                    <th style="padding:10px; text-align:left;">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
                                    <th style="padding:10px; text-align:left;">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Address)</th>
                                    <th style="padding:10px; text-align:left;">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                                    <th style="padding:10px; width:100px; text-align:right;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${a}
                            </tbody>
                        </table>
                    </div>
                    <div style="margin-top:15px; font-size:0.85em; color:#64748b; display:flex; gap:15px; justify-content:flex-end;">
                        <span style="display:flex; items-center; gap:4px;"><span style="width:12px; height:12px; background:#4b5563; border-radius:2px; display:inline-block;"></span> Locked (‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)</span>
                        <span style="display:flex; items-center; gap:4px;"><span style="width:12px; height:12px; background:#f43f5e; border-radius:2px; display:inline-block;"></span> Duplicate (‡∏ã‡πâ‡∏≥)</span>
                    </div>
                </div>
            `,showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ (Confirm Import)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#10b981",focusConfirm:!1,didOpen:()=>{const f=document.getElementById("swal-batch-branch"),c=document.getElementById("btn-remove-dups");c&&c.addEventListener("click",()=>{var N;(N=A.getPopup())==null||N.setAttribute("data-action","remove_dups"),A.clickConfirm()}),f&&f.addEventListener("change",N=>{const b=N.target.value;document.querySelectorAll(".row-branch").forEach(p=>{p.disabled||(p.value=b)})})},preConfirm:()=>{var p;if(((p=A.getPopup())==null?void 0:p.getAttribute("data-action"))==="remove_dups")return"REMOVE_CONFLICTS";const c=document.querySelectorAll(".row-branch"),N=document.querySelectorAll(".row-checkbox"),b=[],P=[];return d.forEach((i,m)=>{const R=N[m],h=c[m].value;if(i.branch=h,i.__selected=R.checked,!R.checked)return;!h&&!i.__isLocked&&P.push(i);const{__isLocked:O,__isDup:w,__isDupInFile:j,__isUpdate:D,__selected:S,...I}=i;I.branch=h,b.push(I)}),P.length>0?{action:"MISSING_BRANCH",items:P}:b.length===0?(A.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"),!1):b}});if(o&&(n===A.DismissReason.cancel||v!=="REMOVE_CONFLICTS"))return u=!1,null;if(v==="REMOVE_CONFLICTS"){d=d.filter(f=>!f.__isDup&&!f.__isLocked),d.forEach(f=>{f.__selected===void 0&&(f.__selected=!0)});continue}if(v&&v.action==="MISSING_BRANCH"){const f=v.items,{value:c}=await A.fire({title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",width:"1200px",html:`
                    <div class="text-left text-sm">
                        <p class="mb-2 text-red-600 font-bold">‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${f.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:</p>
                        
                        <div style="margin-bottom:15px; padding:10px; background:#f0f9ff; border-radius:6px; display:flex; align-items:center; gap:10px; border:1px solid #bae6fd;">
                             <label style="font-weight:bold; font-size:0.9em; color:#0369a1;">üìç ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Batch):</label>
                             <select id="swal-missing-batch-branch" class="swal2-select" style="margin:0; width:200px; font-size:0.9em; padding:6px; border-color:#7dd3fc; height: 36px;">
                                <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --</option>
                                ${Ee.map(N=>`<option value="${N}">${N}</option>`).join("")}
                             </select>
                        </div>

                        <div style="max-height: 400px; overflow-y: auto; border: 1px solid #e2e8f0; border-radius: 6px;">
                            <table style="width:100%; border-collapse: separate; border-spacing: 0; font-size:0.85em;">
                                <thead class="bg-slate-100 sticky top-0 z-10 shadow-sm">
                                    <tr>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b">Doc No</th>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b" style="min-width: 150px;">‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤ (Branch) <span class="text-red-500">*</span></th>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b" style="min-width: 180px;">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer)</th>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b" style="min-width: 200px;">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Address)</th>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b">Product</th>
                                        <th class="p-2 text-right font-semibold text-slate-700 bg-slate-100 border-b">Qty</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${f.map((N,b)=>`
                                        <tr class="border-b border-slate-100 hover:bg-slate-50 transition-colors">
                                            <td class="p-2 align-top text-slate-600 font-mono">${N.documentNo||"-"}</td>
                                            <td class="p-2 align-top">
                                                <select class="swal-fix-input-branch w-full p-1 border border-slate-300 rounded text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500" data-idx="${b}">
                                                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
                                                    ${Ee.map(P=>`<option value="${P}" ${P===N.branch?"selected":""}>${P}</option>`).join("")}
                                                </select>
                                            </td>
                                            <td class="p-2 align-top text-slate-600">
                                                ${N.destinationCustomer||"-"}
                                            </td>
                                            <td class="p-2 align-top text-slate-600">
                                                ${N.customerAddress||"-"}
                                            </td>
                                            <td class="p-2 align-top text-slate-700">${N.productName||"-"}</td>
                                            <td class="p-2 align-top text-right font-bold text-slate-700">${N.quantity}</td>
                                        </tr>
                                    `).join("")}
                                </tbody>
                            </table>
                        </div>
                    </div>
                `,icon:"warning",showCancelButton:!0,confirmButtonText:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡πà‡∏≠",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#3b82f6",focusConfirm:!1,didOpen:()=>{const N=document.getElementById("swal-missing-batch-branch");N&&N.addEventListener("change",b=>{const P=b.target.value;document.querySelectorAll(".swal-fix-input-branch").forEach(i=>{i.value=P})})},preConfirm:()=>{const N=document.querySelectorAll(".swal-fix-input-branch"),b=[];let P=!1;return N.forEach((p,i)=>{const m=p.value;m?p.classList.remove("border-red-500","bg-red-50"):(p.classList.add("border-red-500","bg-red-50"),P=!0),b.push({branch:m,destinationCustomer:f[i].destinationCustomer,customerAddress:f[i].customerAddress})}),P?(A.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"),!1):b}});c&&c.forEach((N,b)=>{const P=f[b];P&&(P.branch=N.branch,P.destinationCustomer=N.destinationCustomer,P.customerAddress=N.customerAddress)});continue}v&&Array.isArray(v)&&(x=v,u=!1)}return x?(A.fire({icon:"success",title:"‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:`‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${x.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,timer:1500,showConfirmButton:!1}),x):null},er=({formData:s,requestItems:r,setFormData:d,handleRequestSubmit:g,uniqueCustomers:t=[],uniqueDestinations:x=[],existingItems:u=[]})=>{Y.useEffect(()=>{d(o=>({...o,documentType:"LOGISTICS"}))},[d]);const a=(o,v)=>{d(n=>({...n,[o]:v}))},C=async()=>{try{const o=await Zl(u);o&&o.length>0&&g(o)}catch(o){console.error("Import/Submit Error:",o),A.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ Import ‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á"})}};return e.jsx("div",{className:"h-full overflow-auto p-6 bg-slate-50",children:e.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-slate-200 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-indigo-500"}),e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-blue-50 text-blue-600 shadow-inner",children:e.jsx(Oe,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"1. ‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Create Return Request)"}),e.jsx("p",{className:"text-sm text-slate-500",children:"‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Header)"})]})]}),e.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-4 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-bold transition-colors text-sm",children:[e.jsx(Bs,{className:"w-4 h-4"})," Import Excel"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö (Branch) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"relative",children:e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",required:!0,value:s.branch||"",onChange:o=>a("branch",o.target.value),className:"w-full p-3 bg-slate-50 border border-slate-300 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),e.jsx("option",{value:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å",children:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å"}),(Ee&&Array.isArray(Ee)?Ee:["‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","‡∏Ñ‡∏•‡∏≠‡∏á 13","‡∏ã‡∏µ‡πÇ‡∏ô‡πà","‡∏õ‡∏£‡∏∞‡∏î‡∏π‡πà"]).filter(o=>o!=="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å").map(o=>e.jsx("option",{value:o,children:o},o)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç Invoice",title:"‡πÄ‡∏•‡∏Ç Invoice",value:s.invoiceNo||"",onChange:o=>a("invoiceNo",o.target.value),placeholder:"INV-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ (Control Date)"}),e.jsx("input",{type:"date","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ",value:s.controlDate||s.date||"",onChange:o=>{a("controlDate",o.target.value),a("date",o.target.value)},className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (‡πÄ‡∏•‡∏Ç R)"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",value:s.documentNo||s.refNo||"",onChange:o=>{a("documentNo",o.target.value),a("refNo",o.target.value)},placeholder:"R-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM NO)"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM NO)",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM NO)",value:s.tmNo||"",onChange:o=>a("tmNo",o.target.value),placeholder:"TM-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",title:"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",value:s.customerCode||"",onChange:o=>a("customerCode",o.target.value),placeholder:"CUS-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Source Customer) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text","aria-label":"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",required:!0,value:s.customerName||"",onChange:o=>a("customerName",o.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm",list:"customer-list"}),e.jsx("datalist",{id:"customer-list",children:t.map(o=>e.jsx("option",{value:o},o))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination Customer)"}),e.jsx("input",{type:"text","aria-label":"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",title:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",value:s.destinationCustomer||"",onChange:o=>a("destinationCustomer",o.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm",list:"destination-list"}),e.jsx("datalist",{id:"destination-list",children:x.map(o=>e.jsx("option",{value:o},o))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (Province)"}),e.jsx("input",{type:"text","aria-label":"‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î",title:"‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î",value:s.province||"",onChange:o=>a("province",o.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Address)"}),e.jsx("textarea",{rows:2,"aria-label":"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",title:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",value:s.customerAddress||"",onChange:o=>a("customerAddress",o.target.value),placeholder:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Quantity)"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",min:"1",value:s.quantity||"",onChange:o=>a("quantity",parseFloat(o.target.value)),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none font-bold text-blue-600 transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Unit)"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢",value:s.unit||"",onChange:o=>a("unit",o.target.value),placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡πà‡∏≠‡∏á, ‡∏û‡∏≤‡πÄ‡∏•‡∏ó, ‡∏ä‡∏¥‡πâ‡∏ô...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (Notes)"}),e.jsx("textarea",{rows:3,"aria-label":"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",value:s.notes||"",onChange:o=>a("notes",o.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡πÜ...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"button",onClick:()=>{const o=[];if(s.branch||o.push("‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"),s.customerName||o.push("‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Source Customer)"),o.length>0){A.fire({icon:"warning",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:`‡∏Ç‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ${o.join(", ")}`,confirmButtonColor:"#f59e0b"});return}const v=(s.documentNo||s.refNo||"").trim();if(v){const n=v.toLowerCase();if(u.some(c=>{if(c.id===s.id)return!1;const N=(c.documentNo||"").trim().toLowerCase(),b=(c.refNo||"").trim().toLowerCase();return N===n||b===n})){A.fire({icon:"error",title:"‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å! (Duplicate R No)",html:`‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ <b>${v}</b> ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß<br/>‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ (‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å: ‡∏´‡πâ‡∏≤‡∏°‡∏ã‡πâ‡∏≥)`,confirmButtonColor:"#ef4444"});return}}if(s.invoiceNo&&u.some(f=>f.id!==s.id&&f.branch===s.branch&&f.invoiceNo===s.invoiceNo)){A.fire({icon:"error",title:"‡∏û‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏¥‡∏ô‡∏ß‡∏≠‡∏¢‡∏ã‡πå‡∏ã‡πâ‡∏≥",text:`‡πÄ‡∏•‡∏Ç Invoice: ${s.invoiceNo} ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏≤‡∏Ç‡∏≤ ${s.branch}`,confirmButtonColor:"#ef4444"});return}if(r.length===0){const n={...s,productName:"General Request",quantity:s.quantity||1,unit:s.unit||"Lot"};g([n])}else g()},className:"px-8 py-4 bg-blue-600 text-white rounded-xl font-bold shadow-lg hover:bg-blue-700 hover:shadow-xl transition-all flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Create Request)"]})})]})]})})})};class tr extends Y.Component{constructor(r){super(r),this.props=r,this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,d){console.error("Uncaught error:",r,d)}render(){var r;return this.state.hasError?e.jsxs("div",{className:"p-8 text-center text-red-600 bg-red-50 h-screen flex flex-col items-center justify-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (System Error)"}),e.jsx("p",{className:"mb-4",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á:"}),e.jsx("pre",{className:"bg-white p-4 rounded shadow text-left text-sm font-mono overflow-auto max-w-2xl border border-red-200",children:(r=this.state.error)==null?void 0:r.toString()}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ (Reload)"})]}):this.props.children}}const sr=({onNavigate:s})=>{const{items:r}=Ie(),{state:d,derived:g,actions:t}=Vs(),[x,u]=k.useState(1),[a,C]=k.useState(!1),[o,v]=k.useState(""),n=()=>{if(o!=="1234"){A.fire({icon:"error",title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",confirmButtonColor:"#ef4444"});return}C(!1),v("")};return!d||!g||!t?e.jsx("div",{className:"p-6 text-center",children:"Loading System..."}):e.jsx(tr,{children:e.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-slate-900 text-white flex flex-col shadow-xl z-20",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800",children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Inbound Collection System"})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[{id:1,label:"1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Create)",icon:Oe},{id:2,label:"2. ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Job Accept)",icon:mt},{id:3,label:"3. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Branch Rx)",icon:Ne},{id:4,label:"4. ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consolidate)",icon:Is}].map(f=>e.jsxs("button",{onClick:()=>u(f.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all duration-200
                                    ${x===f.id?"bg-blue-600 text-white shadow-lg shadow-blue-900/50 translate-x-1":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f.icon,{className:`w-5 h-5 ${x===f.id?"text-white":"text-slate-500"}`}),e.jsx("span",{children:f.label})]}),x===f.id&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse"})]},f.id))}),e.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2",children:[s&&e.jsxs("button",{onClick:()=>s(xe.DASHBOARD),className:"w-full bg-slate-800 hover:bg-slate-700 text-white rounded-lg p-3 transition-all flex items-center justify-center gap-2 font-medium text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å"]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö"}),e.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm font-bold",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),"Online"]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[e.jsxs("header",{className:"bg-white border-b border-slate-200 h-16 flex items-center px-6 justify-between shadow-sm z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[x>1&&e.jsxs("button",{onClick:()=>u(x-1),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition-all font-medium text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö"]}),e.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[x===1&&e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-5 h-5 text-blue-600"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Create Return Request)"]}),x===2&&e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"w-5 h-5 text-blue-600"})," ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Job Acceptance)"]}),x===3&&e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-5 h-5 text-blue-600"})," ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á (Physical Receive)"]}),x===4&&e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"w-5 h-5 text-blue-600"})," ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consolidation)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Data Entry Officer"})}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-100 to-indigo-100 border border-blue-200 flex items-center justify-center",children:e.jsx(Lt,{className:"w-5 h-5 text-blue-600"})})]})]}),e.jsxs("main",{className:"flex-1 overflow-auto bg-slate-50 p-6 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5 pointer-events-none"}),x===1&&e.jsx(er,{formData:d.formData,requestItems:d.requestItems,isCustomBranch:d.isCustomBranch,uniqueCustomers:g.uniqueCustomers,uniqueDestinations:g.uniqueDestinations,uniqueProductCodes:g.uniqueProductCodes,uniqueProductNames:g.uniqueProductNames,existingItems:r,setFormData:t.setFormData,setIsCustomBranch:t.setIsCustomBranch,setRequestItems:t.setRequestItems,handleAddItem:t.handleAddItem,handleRemoveItem:t.handleRemoveItem,handleRequestSubmit:t.handleRequestSubmit}),x===2&&e.jsx("div",{className:"h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx(Gs,{onComplete:()=>u(3)})}),x===3&&e.jsx("div",{className:"h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx(Ks,{onComplete:()=>u(4)})}),x===4&&e.jsx("div",{className:"h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx(Js,{onComplete:()=>{s?s(xe.OPERATIONS,2):A.fire({icon:"info",title:"Navigation Info",text:"Navigation not configured",timer:1500,showConfirmButton:!1})}})})]})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 p-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4 text-amber-400"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Authentication)"]}),e.jsx("button",{onClick:()=>C(!1),className:"text-slate-400 hover:text-white transition","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(fe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("input",{type:"password",autoFocus:!0,className:"w-full p-3 border border-slate-300 rounded-lg text-center text-2xl tracking-widest font-mono mb-4 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"PASSCODE",value:o,onChange:f=>v(f.target.value),onKeyDown:f=>f.key==="Enter"&&n()}),e.jsx("button",{onClick:n,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-slate-800 transition shadow-lg shadow-slate-900/20",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)"})]})]})})]})})},Ns=[{uid:"admin-001",email:"admin@neosiam.com",displayName:"System Admin",role:"ADMIN",photoURL:"https://ui-avatars.com/api/?name=Admin&background=ef4444&color=fff"},{uid:"ncr-op-001",email:"ncr@neosiam.com",displayName:"NCR Staff Operators",role:"NCR_OPERATOR",photoURL:"https://ui-avatars.com/api/?name=NCR&background=6366f1&color=fff"},{uid:"col-op-001",email:"col@neosiam.com",displayName:"COL Staff",role:"COL_OPERATOR",photoURL:"https://ui-avatars.com/api/?name=COL&background=f97316&color=fff"},{uid:"req-entry-001",email:"request@neosiam.com",displayName:"COL Staff REQUEST Operators",role:"REQUEST_ENTRY",photoURL:"https://ui-avatars.com/api/?name=REQUEST&background=eab308&color=fff"},{uid:"qc-op-001",email:"qc@neosiam.com",displayName:"QC Inspector",role:"QC_OPERATOR",photoURL:"https://ui-avatars.com/api/?name=QC&background=22c55e&color=fff"},{uid:"closure-op-001",email:"closure@neosiam.com",displayName:"Closure Staff",role:"CLOSURE_OPERATOR",photoURL:"https://ui-avatars.com/api/?name=Closure&background=a855f7&color=fff"},{uid:"viewer-001",email:"viewer@neosiam.com",displayName:"Ops Manager",role:"VIEWER",photoURL:"https://ui-avatars.com/api/?name=Manager&background=64748b&color=fff"}],ar=(s,r)=>{const d=Ns.find(t=>t.email===s);if(!d)return null;const g=d.role==="ADMIN"?"888":"1234";return r!==g?null:d};Ns.map(s=>s.email);const lr=({onLoginSuccess:s})=>{const[r,d]=k.useState(""),[g,t]=k.useState(""),[x,u]=k.useState(!1),[a,C]=k.useState(""),[o,v]=k.useState(!1),n=async c=>{c.preventDefault(),C(""),v(!0),await new Promise(b=>setTimeout(b,500));const N=ar(r,g);N?s(N):(C("‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"),v(!1))},f=c=>{d(c.email),t(""),setTimeout(()=>{const N=document.querySelector('input[type="password"]');N==null||N.focus()},100)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-indigo-50 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-4000"})]}),e.jsxs("div",{className:"w-full max-w-6xl flex gap-8 relative z-10",children:[e.jsxs("div",{className:"flex-1 bg-white rounded-2xl shadow-2xl p-8 backdrop-blur-sm bg-white/90",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl shadow-lg mb-4",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logo",className:"w-12 h-12 object-contain"})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Neosiam Return"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô (Return Management System)"})]}),e.jsxs("form",{onSubmit:n,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"User:"}),e.jsxs("div",{className:"relative",children:[e.jsx(Lt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"email",value:r,onChange:c=>d(c.target.value),placeholder:"admin@neosiam.com",required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password:"}),e.jsxs("div",{className:"relative",children:[e.jsx(ts,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:x?"text":"password",value:g,onChange:c=>t(c.target.value),placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢",required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"}),e.jsx("button",{type:"button",onClick:()=>u(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:x?e.jsx(il,{className:"w-5 h-5"}):e.jsx(Xt,{className:"w-5 h-5"})})]})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm",children:[e.jsx(qs,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{children:a})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-semibold py-3 rounded-lg hover:from-blue-700 hover:to-indigo-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(cl,{className:"w-5 h-5"}),e.jsx("span",{children:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö"})]})})]})]}),e.jsxs("div",{className:"flex-1 bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-6 h-6 text-blue-600"}),"Quick Login (Development)"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å Email ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏≠‡∏á)"}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:Ns.map(c=>e.jsx("button",{onClick:()=>f(c),className:"w-full text-left p-4 bg-white border border-slate-200 rounded-xl hover:border-blue-300 hover:shadow-md transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:c.photoURL||"https://ui-avatars.com/api/?name=User",alt:c.displayName,className:"w-12 h-12 rounded-full border-2 border-slate-100 group-hover:border-blue-200 transition-colors"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-slate-800 group-hover:text-blue-700 transition-colors",children:c.displayName}),e.jsx("div",{className:"text-xs text-slate-500",children:c.email})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Qs(c.role)}`,children:gs(c.role)})]})},c.uid))}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:[e.jsx("strong",{children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:"})," Quick Login ‡∏à‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡πÅ‡∏Ñ‡πà Email ‡πÉ‡∏´‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏≠‡∏á"]})})]})]}),e.jsx("style",{children:`
        @keyframes blob {
          0%, 100% { transform: translate(0, 0) scale(1); }
          25% { transform: translate(20px, -20px) scale(1.1); }
          50% { transform: translate(-20px, 20px) scale(0.9); }
          75% { transform: translate(20px, 20px) scale(1.05); }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
      `})]})},rr=()=>{var v,n,f;const{systemConfig:s,updateSystemConfig:r}=Ie(),[d,g]=k.useState(!1),[t,x]=k.useState(!1),[u,a]=k.useState({botToken:((v=s.telegram)==null?void 0:v.botToken)||"",chatId:((n=s.telegram)==null?void 0:n.chatId)||"",enabled:((f=s.telegram)==null?void 0:f.enabled)||!1}),C=async()=>{x(!0);const c=await r({telegram:u});x(!1),c?A.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡∏π‡∏Å‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1,background:"#fff",customClass:{popup:"rounded-2xl shadow-xl"}}):A.fire({icon:"error",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"})},o=async()=>{if(!u.botToken||!u.chatId){A.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Bot Token ‡πÅ‡∏•‡∏∞ Chat ID ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö"});return}g(!0);const c=`üß™ <b>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Notification</b>
----------------------------------
‡∏£‡∏∞‡∏ö‡∏ö Neosiam Return ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß!
----------------------------------
üìÖ ${new Date().toLocaleString("th-TH")}`,N=await at(u.botToken,u.chatId,c);g(!1),N?A.fire({icon:"success",title:"‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!",text:"‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Telegram ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",confirmButtonColor:"#10b981"}):A.fire({icon:"error",title:"‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Bot Token ‡πÅ‡∏•‡∏∞ Chat ID ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° Bot ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß"})};return e.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-100 text-blue-600",children:e.jsx($s,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (System Settings)"}),e.jsx("p",{className:"text-slate-500",children:"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 space-y-2",children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-blue-50 text-blue-700 rounded-xl font-bold shadow-sm ring-1 ring-blue-100",children:[e.jsx(Fs,{className:"w-5 h-5"}),"‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (Notifications)"]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-slate-500 hover:bg-slate-50 rounded-xl transition-colors",children:[e.jsx(dl,{className:"w-5 h-5"}),"‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (Security)"]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 text-slate-500 hover:bg-slate-50 rounded-xl transition-colors",children:[e.jsx(ps,{className:"w-5 h-5"}),"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö (System Info)"]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white",children:e.jsx(xl,{className:"w-4 h-4"})}),e.jsx("h2",{className:"font-bold text-slate-800 text-lg",children:"Telegram Notifications"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:u.enabled,onChange:c=>a(N=>({...N,enabled:c.target.checked}))}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-slate-600",children:u.enabled?"‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô":"‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô"})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Bot Token"}),e.jsx("input",{type:"password",value:u.botToken,onChange:c=>a(N=>({...N,botToken:c.target.value})),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all font-mono text-xs",placeholder:"8523483845:AAH63m..."}),e.jsx("p",{className:"mt-1 text-[10px] text-slate-400 font-medium",children:"* ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å @BotFather ‡∏ö‡∏ô Telegram"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1",children:"Telegram Chat ID (Group ID)"}),e.jsx("input",{type:"text",value:u.chatId,onChange:c=>a(N=>({...N,chatId:c.target.value})),className:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all font-mono text-xs",placeholder:"-100123456789"}),e.jsxs("div",{className:"mt-1 flex items-start gap-2 text-[10px] text-slate-500 bg-amber-50 p-2 rounded-lg border border-amber-100",children:[e.jsx(qs,{className:"w-3 h-3 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsx("span",{children:"‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ‡πÉ‡∏´‡πâ‡∏î‡∏∂‡∏á Bot ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ ID ‡∏ó‡∏µ‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ - (‡πÄ‡∏ä‡πà‡∏ô -100xxx)"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:o,disabled:d||!u.botToken||!u.chatId,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-slate-200 text-slate-600 rounded-xl font-bold hover:bg-slate-50 hover:border-slate-300 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö...":e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"w-5 h-5 text-green-500"})," ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô"]})}),e.jsx("button",{type:"button",onClick:C,disabled:t,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all disabled:opacity-50",children:t?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...":e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤"]})})]})]})]}),e.jsxs("div",{className:"bg-blue-600 rounded-2xl p-6 text-white shadow-xl relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/20 backdrop-blur-md flex items-center justify-center",children:e.jsx(ps,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏´‡∏±‡∏™ Chat ID"}),e.jsx("p",{className:"text-sm text-blue-100",children:"‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏≤ Bot ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏∂‡∏á Bot ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå /id ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ @userinfobot ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤ ID"})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 blur-2xl"})]})]})]})]})},nr=()=>{const{user:s,login:r}=Hs(),[d,g]=k.useState(xe.DASHBOARD),[t,x]=k.useState(null),[u,a]=k.useState(void 0),[C,o]=k.useState(!1),[v,n]=k.useState(!1);if(!s)return e.jsx(lr,{onLoginSuccess:r});const f=b=>{x(b),g(xe.OPERATIONS)},c=()=>{switch(d){case xe.DASHBOARD:return e.jsx(Es,{});case xe.OPERATIONS:return e.jsx(Ul,{initialData:t,onClearInitialData:()=>x(null),initialStep:u});case xe.NCR:return e.jsx(Hl,{});case xe.NCR_REPORT:return e.jsx(zl,{onTransfer:f});case xe.COL_REPORT:return e.jsx(Kl,{});case xe.INVENTORY:return e.jsx(Jl,{});case xe.COLLECTION:return e.jsx(sr,{onNavigate:(b,P)=>{g(b),P&&a(P)}});case xe.SETTINGS:return e.jsx(rr,{});default:return e.jsx(Es,{})}},N=()=>{switch(d){case xe.DASHBOARD:return"‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Dashboard)";case xe.OPERATIONS:return"‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ (Operations Hub)";case xe.NCR:return"‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (NCR System)";case xe.NCR_REPORT:return"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR";case xe.COL_REPORT:return"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô COL";case xe.INVENTORY:return"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inventory)";case xe.COLLECTION:return"‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection)";case xe.SETTINGS:return"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (Settings)";default:return"Neosiam Return"}};return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-slate-50 print:h-auto print:overflow-visible print:block relative",children:[e.jsx(gl,{currentView:d,onChangeView:g,isOpen:C,onClose:()=>o(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 print:h-auto print:overflow-visible w-full",children:[e.jsxs("header",{className:"bg-white border-b border-slate-200 h-16 flex items-center justify-between px-4 md:px-8 shadow-sm z-10 print:hidden shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>o(!0),className:"lg:hidden p-2 text-slate-500 hover:bg-slate-100 rounded-lg transition-colors","aria-label":"‡πÄ‡∏°‡∏ô‡∏π",children:e.jsx(_s,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800 truncate max-w-[200px] md:max-w-none",children:N()})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!v),className:"relative p-2 text-slate-500 hover:bg-slate-100 rounded-full transition-colors","aria-label":"‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",title:"‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",children:[e.jsx(Fs,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1.5 right-2 w-2 h-2 bg-red-500 rounded-full border border-white animate-pulse"})]}),v&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 animate-fade-in-up origin-top-right",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (Notifications)"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium cursor-pointer hover:underline",children:"‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:[{id:1,title:"NCR ‡πÉ‡∏´‡∏°‡πà",desc:"‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR #NCR-2024-001 ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà",time:"10 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß",type:"alert"},{id:2,title:"‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠",desc:"‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ #REQ-998 ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",time:"1 ‡∏ä‡∏°. ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß",type:"info"},{id:3,title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub",desc:"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô 71-0139 ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÅ‡∏•‡πâ‡∏ß",time:"2 ‡∏ä‡∏°. ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß",type:"success"}].map(b=>e.jsxs("div",{className:"p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors cursor-pointer flex gap-3 items-start group",children:[e.jsx("div",{className:`w-2 h-2 mt-2 rounded-full flex-shrink-0 ${b.type==="alert"?"bg-red-500":b.type==="success"?"bg-green-500":"bg-blue-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-700 group-hover:text-blue-600 transition-colors",children:b.title}),e.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:b.desc}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:b.time})]})]},b.id))}),e.jsx("div",{className:"p-3 text-center border-t border-slate-100 bg-slate-50/50",children:e.jsx("button",{className:"text-xs text-slate-500 hover:text-slate-800 font-medium",children:"‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-3 md:pl-4 border-l border-slate-200",children:[e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800",children:s.displayName}),e.jsx("p",{className:"text-xs text-slate-500",children:gs(s.role)})]}),e.jsx("img",{src:s.photoURL||"https://img2.pic.in.th/pic/logo-neo.png",alt:"User Avatar",className:"w-8 h-8 md:w-9 md:h-9 rounded-full object-cover bg-white p-1 border border-slate-200"})]})]})]}),e.jsx("main",{className:"flex-1 overflow-auto print:overflow-visible print:h-auto w-full relative",children:c()})]})]})},or=()=>e.jsx(fl,{children:e.jsx(bl,{children:e.jsx(nr,{})})}),Zs=document.getElementById("root");if(!Zs)throw new Error("Could not find root element to mount to");const ir=ml.createRoot(Zs);ir.render(e.jsx(Y.StrictMode,{children:e.jsx(or,{})}));
