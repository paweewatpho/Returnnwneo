import{i as cl,g as dl,a as xl,r as C,o as ml,j as e,s as pl,L as bl,S as ul,O as It,F as hl,b as Et,T as fe,C as gl,X as je,W as fl,c as Nl,d as we,e as vt,f as T,h as ps,k as $t,l as Wt,u as bt,m as Ce,M as Be,B as Pt,P as Xe,n as wt,p as Le,A as yt,q as ze,t as De,R as Ee,D as et,v as jl,w as Ot,x as vl,y as Vt,z as Gt,Y as Dt,E as Tt,G as wl,H as yl,I as bs,J as us,K as Cl,N as Rl,Q as Sl,U as kl,V as te,Z as qe,_ as Fe,$ as Yt,a0 as Ct,a1 as Lt,a2 as We,a3 as Bt,a4 as Ol,a5 as Dl,a6 as st,a7 as Ue,a8 as Qe,a9 as Tl,aa as Xt,ab as hs,ac as Zt,ad as ft,ae as Al,af as Il,ag as _e,ah as El,ai as $l,aj as Ft,ak as ts,al as Pl,am as _t,an as Ll,ao as Cs,ap as Rs,aq as Bl,ar as Ss,as as Mt,at as es,au as tt,av as gs,aw as _l,ax as Ml,ay as qt,az as dt,aA as Nt,aB as ks,aC as fs,aD as Fl,aE as ql,aF as Ul,aG as Ns,aH as Ql,aI as Hl,aJ as zl,aK as Wl,aL as Vl}from"./vendor-CjW054tx.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))g(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const m of s.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&g(m)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function g(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();var ue=(l=>(l.DASHBOARD="DASHBOARD",l.OPERATIONS="OPERATIONS",l.NCR="NCR",l.NCR_REPORT="NCR_REPORT",l.INVENTORY="INVENTORY",l.COLLECTION="COLLECTION",l.COL_REPORT="COL_REPORT",l))(ue||{});const Gl={apiKey:"AIzaSyCu4-qBECAiA2Bqgzt0JB52dBx3d4WKsFo",authDomain:"returnneosiam.firebaseapp.com",databaseURL:"https://returnneosiam-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"returnneosiam",storageBucket:"returnneosiam.firebasestorage.app",messagingSenderId:"46662606762",appId:"1:46662606762:web:29d41bf680226753f4d5d3",measurementId:"G-38PCJ8VXLS"},ss=cl(Gl);console.log("‚úÖ Firebase App Initialized (RTDB):",ss.name);const ye=dl(ss),js=xl(ss),Os=C.createContext(void 0),Kl=({children:l})=>{const[c,i]=C.useState(null),[g,t]=C.useState(!0);C.useEffect(()=>{t(!1);const h=ml(js,S=>{if(S){const v={uid:S.uid,email:S.email||"",displayName:S.displayName||"User",role:"ADMIN",photoURL:S.photoURL||void 0};i(v)}});return()=>h()},[]);const s=async h=>{i(h)},m=async()=>{await pl(js).catch(h=>console.error("Firebase Signout Error",h)),i(null)};return e.jsx(Os.Provider,{value:{user:c,loading:g,login:s,logout:m},children:l})},Ds=()=>{const l=C.useContext(Os);if(l===void 0)throw new Error("useAuth must be used within an AuthProvider");return l},ut=(l,c)=>{if(!l)return"NONE";switch(l){case"ADMIN":return"FULL";case"NCR_OPERATOR":return c==="NCR_SYSTEM"||c==="NCR_REPORT"||c==="OPERATIONS"?"FULL":c==="DASHBOARD"||c==="COL_REPORT"||c==="INVENTORY"?"READ":c==="COL_SYSTEM"||c==="SETTINGS"?"NONE":"READ";case"COL_OPERATOR":return c==="COL_SYSTEM"||c==="COL_REPORT"||c==="OPERATIONS"?"FULL":c==="DASHBOARD"||c==="NCR_REPORT"||c==="INVENTORY"?"READ":c==="NCR_SYSTEM"||c==="SETTINGS"?"NONE":"READ";case"REQUEST_ENTRY":return c==="COL_SYSTEM"?"FULL":c==="OPERATIONS"||c==="DASHBOARD"||c==="NCR_REPORT"||c==="COL_REPORT"||c==="INVENTORY"?"READ":c==="NCR_SYSTEM"||c==="SETTINGS"?"NONE":"READ";case"QC_OPERATOR":return c==="OPERATIONS"?"FULL":c==="DASHBOARD"||c==="NCR_REPORT"||c==="COL_REPORT"||c==="INVENTORY"?"READ":c==="NCR_SYSTEM"||c==="COL_SYSTEM"||c==="SETTINGS"?"NONE":"READ";case"CLOSURE_OPERATOR":return c==="OPERATIONS"?"FULL":c==="DASHBOARD"||c==="NCR_REPORT"||c==="COL_REPORT"||c==="INVENTORY"?"READ":c==="NCR_SYSTEM"||c==="COL_SYSTEM"||c==="SETTINGS"?"NONE":"READ";case"VIEWER":return c==="SETTINGS"?"NONE":"READ";default:return"NONE"}},Jl=(l,c)=>{if(!l)return!1;switch(c){case ue.DASHBOARD:return!0;case ue.OPERATIONS:return!0;case ue.NCR:return ut(l,"NCR_SYSTEM")!=="NONE";case ue.NCR_REPORT:return ut(l,"NCR_REPORT")!=="NONE";case ue.COLLECTION:return ut(l,"COL_SYSTEM")!=="NONE";case ue.COL_REPORT:return ut(l,"COL_REPORT")!=="NONE";case ue.INVENTORY:return ut(l,"INVENTORY")!=="NONE";default:return!1}},ls=l=>({ADMIN:"‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö",NCR_OPERATOR:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô NCR",COL_OPERATOR:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô Collection",REQUEST_ENTRY:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô",QC_OPERATOR:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô QC",CLOSURE_OPERATOR:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô",VIEWER:"‡∏ú‡∏π‡πâ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"})[l]||"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏",Ts=l=>({ADMIN:"text-red-600 bg-red-50",NCR_OPERATOR:"text-indigo-600 bg-indigo-50",COL_OPERATOR:"text-orange-600 bg-orange-50",REQUEST_ENTRY:"text-yellow-600 bg-yellow-50",QC_OPERATOR:"text-green-600 bg-green-50",CLOSURE_OPERATOR:"text-purple-600 bg-purple-50",VIEWER:"text-slate-600 bg-slate-50"})[l]||"text-gray-600 bg-gray-50",Yl=({currentView:l,onChangeView:c,isOpen:i=!1,onClose:g})=>{const{user:t,logout:s}=Ds(),m=C.useRef(null);C.useEffect(()=>{const d=w=>{i&&m.current&&!m.current.contains(w.target)&&window.innerWidth<1024&&(g==null||g())};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[i,g]);const S=[{id:ue.DASHBOARD,label:"‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Dashboard)",icon:bl},{id:ue.OPERATIONS,label:"‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ (Operations)",icon:ul},{id:ue.NCR,label:"NCR (‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡∏µ‡∏Å‡∏•‡∏±‡∏ö)",icon:It},{id:ue.NCR_REPORT,label:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR",icon:hl},{id:ue.INVENTORY,label:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inventory)",icon:Et},{id:ue.COLLECTION,label:"‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Tasks)",icon:fe},{id:ue.COL_REPORT,label:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô COL",icon:gl}].filter(d=>Jl(t==null?void 0:t.role,d.id)),p=async()=>{try{const d=we(ye,"connection_test");await vt(d,{status:"online",timestamp:new Date().toISOString(),message:"System is connected to Realtime Database"}),alert(`‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Realtime Database ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! (Connection Successful)
‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏õ‡∏¢‡∏±‡∏á path: /connection_test`)}catch(d){alert(`‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (Failed): ${d.message}
‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Config ‡∏´‡∏£‡∏∑‡∏≠ Security Rules`)}},v=async()=>{(await T.fire({title:"‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?",text:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"‡πÉ‡∏ä‡πà, ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",background:"#fff",customClass:{popup:"rounded-2xl shadow-xl border border-slate-100"}})).isConfirmed&&await s()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 bg-black/50 z-40 transition-opacity duration-300 lg:hidden ${i?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,"aria-hidden":"true"}),e.jsxs("div",{ref:m,className:`fixed inset-y-0 left-0 w-64 bg-slate-900/80 backdrop-blur-md text-white shadow-2xl transform transition-transform duration-300 ease-in-out z-50 lg:translate-x-0 lg:static lg:shadow-none flex flex-col h-full print:hidden ${i?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"p-6 flex items-center justify-between border-b border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-10 h-10 object-contain bg-white rounded-lg p-1"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold tracking-tight",children:"Neosiam Return"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Management System"})]})]}),e.jsx("button",{onClick:g,className:"lg:hidden p-1 text-slate-400 hover:text-white rounded-md hover:bg-slate-800","aria-label":"‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π",title:"‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π",children:e.jsx(je,{className:"w-6 h-6"})})]}),t&&e.jsx("div",{className:"px-4 py-3 border-b border-slate-800 bg-slate-800/50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.photoURL||"https://ui-avatars.com/api/?name=User",alt:t.displayName,className:"w-10 h-10 rounded-full border-2 border-slate-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:t.displayName}),e.jsx("p",{className:`text-xs px-2 py-0.5 rounded-full inline-block ${Ts(t.role)}`,children:ls(t.role)})]})]})}),e.jsx("nav",{className:"flex-1 px-3 py-6 space-y-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700",children:S.map(d=>{const w=d.icon,o=l===d.id;return e.jsxs("button",{onClick:()=>{c(d.id),g==null||g()},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 outline-none focus:ring-2 focus:ring-blue-500
                  ${o?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"}
                `,children:[e.jsx(w,{className:`w-5 h-5 flex-shrink-0 ${o?"text-white":"text-slate-400"}`}),e.jsx("span",{className:"truncate",children:d.label})]},d.id)})}),e.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2 mt-auto",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-3 text-green-400 hover:text-green-300 hover:bg-slate-800 px-4 py-3 w-full text-sm rounded-lg transition-colors border border-transparent hover:border-slate-700",children:[e.jsx(fl,{className:"w-5 h-5"}),e.jsx("span",{className:"truncate",children:"‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ DB"})]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-3 text-red-400 hover:text-red-300 hover:bg-slate-800 px-4 py-3 w-full text-sm transition-colors rounded-lg border border-transparent hover:border-slate-700",children:[e.jsx(Nl,{className:"w-5 h-5"}),e.jsx("span",{className:"truncate",children:"‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö"})]})]})]})]})},As=C.createContext({items:[],ncrReports:[],loading:!0,addReturnRecord:async()=>!1,updateReturnRecord:async()=>!1,deleteReturnRecord:async()=>!1,addNCRReport:async()=>!1,updateNCRReport:async()=>!1,deleteNCRReport:async()=>!1,getNextNCRNumber:async()=>"NCR-ERROR-0000",getNextReturnNumber:async()=>"RT-ERROR-0000",getNextCollectionNumber:async()=>"COL-ERROR-0000",runDataIntegrityCheck:async()=>0}),Se=()=>C.useContext(As),Xl=({children:l})=>{const[c,i]=C.useState([]),[g,t]=C.useState([]),[s,m]=C.useState(!0);C.useEffect(()=>{console.log("üîÑ Connecting to Realtime Database...");const n=we(ye,"return_records"),r=ps(n,x=>{const k=x.val(),R=k?Object.values(k).map(f=>({...f,date:f.date||new Date().toISOString().split("T")[0],productName:f.productName||"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})).filter(f=>{if(!f||typeof f!="object")return!1;const $=["id","date","status","branch","customerName","productCode"];for(const A of $)if(typeof f[A]!="string")return console.warn(`üõ°Ô∏è Data Hardening: Filtering out invalid ReturnRecord (missing/bad ${A})`,f),!1;if(typeof f.quantity!="number")if(typeof f.quantity=="string"&&!isNaN(parseFloat(f.quantity)))f.quantity=parseFloat(f.quantity);else return console.warn("üõ°Ô∏è Data Hardening: Filtering out invalid ReturnRecord (bad quantity)",f),!1;return!0}):[];i(R.sort((f,$)=>new Date($.date).getTime()-new Date(f.date).getTime())),m(!1),console.log(`‚úÖ RTDB Connected: Loaded ${R.length} valid Return Records`)},x=>{console.warn("‚ö†Ô∏è RTDB Permission/Connection Error (Returns).",x.message),i([]),m(!1)}),b=we(ye,"ncr_reports"),u=ps(b,x=>{const k=x.val(),R=k?Object.values(k).filter(f=>{const $=f;if(!$||typeof $!="object")return!1;if(typeof $.id!="string"||typeof $.date!="string"||typeof $.status!="string")return console.warn("üõ°Ô∏è Data Hardening: Filtering out invalid NCR (missing header fields).",f),!1;const A=$.item||$;return!A||typeof A!="object"?(console.warn("üõ°Ô∏è Data Hardening: Invalid NCR Item structure.",f),!1):(typeof A.productName!="string"&&console.warn("‚ö†Ô∏è Data Warning: NCR report missing valid productName.",f),!0)}):[];t(R.sort((f,$)=>new Date($.date).getTime()-new Date(f.date).getTime())),console.log(`‚úÖ RTDB Connected: Loaded ${R.length} valid NCR Reports`)},x=>{console.warn("‚ö†Ô∏è RTDB Permission/Connection Error (NCR).",x.message),t([])});return()=>{r(),u()}},[]);const h=async n=>{const r=(n.documentNo||n.refNo||"").trim(),b=(n.productCode||n.productName||"").trim();if(r){const u=r.toLowerCase(),x=b.toLowerCase(),k=c.filter(R=>(R.documentNo||R.refNo||"").trim().toLowerCase()===u);if(k.length>0){if(k.some($=>$.status!=="Draft"&&$.status!=="Requested")){const $=`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ: ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ "${r}" ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (Step 2+) ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥)`;return console.warn("üö´ "+$),T.fire({icon:"error",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",html:`
              <div class="text-left">
                 <p class="font-bold text-red-600 mb-2">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ${r} ‡∏ñ‡∏π‡∏Å‡∏•‡πá‡∏≠‡∏Ñ (In Process)</p>
                 <p class="text-sm text-slate-600">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Step 2 ‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ) ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ</p>
              </div>
            `,confirmButtonText:"‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö",confirmButtonColor:"#334155"}),!1}if(k.some($=>($.productCode||$.productName||"").trim().toLowerCase()===x)){const $=`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ: ‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥ (‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ "${r}" + ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ "${b}")`;return console.warn("üö´ "+$),T.fire({icon:"warning",title:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥ (Duplicate)",html:`
              <div class="text-left">
                 <p class="font-bold text-amber-600 mb-2">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ${r} ‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß</p>
                 <div class="bg-amber-50 p-2 rounded border border-amber-200 text-xs text-amber-800 mb-2 font-mono">
                    Product: ${b||"Unknown"}
                 </div>
                 <p class="text-sm text-slate-600">‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô</p>
              </div>
            `,confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á",confirmButtonColor:"#d97706"}),!1}}}try{return await vt(we(ye,"return_records/"+n.id),n),!0}catch(u){return u.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Write Permission Denied: Cannot save return record."),alert("Access Denied: Check Firebase Realtime Database Rules. Developer tip: Set rules to 'allow read, write: if true;' for testing.")):(console.error("Error adding return record:",u),alert("Failed to save record.")),!1}},S=async(n,r)=>{const b=(r.documentNo||r.refNo||"").trim();if(b){const u=b.toLowerCase(),x=c.find($=>$.id===n),k=(r.productCode||r.productName||(x==null?void 0:x.productCode)||(x==null?void 0:x.productName)||"").trim(),R=k.toLowerCase(),f=c.filter($=>$.id===n?!1:($.documentNo||$.refNo||"").trim().toLowerCase()===u);if(f.length>0){if(f.some(M=>M.status!=="Draft"&&M.status!=="Requested")){const M=`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ: ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ "${b}" ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (Step 2+) (‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥)`;return console.warn("üö´ "+M),alert(M),!1}if(f.some(M=>(M.productCode||M.productName||"").trim().toLowerCase()===R)){const M=`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ: ‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥ (‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ "${b}" + ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ "${k}")`;return console.warn("üö´ "+M),alert(M),!1}}}try{return await bt(we(ye,"return_records/"+n),r),!0}catch(u){return u.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Update Permission Denied."),alert("Access Denied: Cannot update record.")):(console.error("Error updating return record:",u),alert("Failed to update record.")),!1}},p=async n=>{try{return await $t(we(ye,"return_records/"+n)),!0}catch(r){return r.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Delete Permission Denied."),alert("Access Denied: Cannot delete this return record.")):(console.error("Error deleting return record:",r),alert("Failed to delete this return record.")),!1}},v=async n=>{try{return await vt(we(ye,"ncr_reports/"+n.id),n),!0}catch(r){return r.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Write Permission Denied: Cannot save NCR report."),alert("Access Denied: Check Firebase Realtime Database Rules. Developer tip: Set rules to 'allow read, write: if true;' for testing.")):(console.error("Error adding NCR report:",r),alert("Failed to save NCR report.")),!1}},d=async(n,r)=>{try{const b=g.find(R=>R.id===n),u=b==null?void 0:b.ncrNo,x=(b==null?void 0:b.item)||b,k=x==null?void 0:x.productCode;if(await bt(we(ye,"ncr_reports/"+n),r),u&&k){const R=c.filter(f=>f.ncrNumber===u&&f.productCode===k);if(R.length>0){const f={...b,...r},$=f.item||f,A={date:f.date,dateRequested:f.date,productName:$.productName,productCode:$.productCode,quantity:$.quantity,unit:$.unit,customerName:$.customerName,destinationCustomer:$.destinationCustomer,branch:$.branch,founder:f.founder,amount:$.priceBill||0,priceBill:$.priceBill||0,pricePerUnit:$.pricePerUnit||0,neoRefNo:$.neoRefNo||"-",ncrNumber:f.ncrNo,problemDamaged:f.problemDamaged,problemDamagedInBox:f.problemDamagedInBox,problemLost:f.problemLost,problemMixed:f.problemMixed,problemWrongInv:f.problemWrongInv,problemLate:f.problemLate,problemDuplicate:f.problemDuplicate,problemWrong:f.problemWrong,problemIncomplete:f.problemIncomplete,problemOver:f.problemOver,problemWrongInfo:f.problemWrongInfo,problemShortExpiry:f.problemShortExpiry,problemTransportDamage:f.problemTransportDamage,problemAccident:f.problemAccident,problemPOExpired:f.problemPOExpired,problemNoBarcode:f.problemNoBarcode,problemNotOrdered:f.problemNotOrdered,problemOther:f.problemOther,problemOtherText:f.problemOtherText,problemDetail:f.problemDetail,rootCause:$.problemSource,problemSource:$.problemSource,hasCost:$.hasCost,costAmount:$.costAmount,costResponsible:$.costResponsible,toDept:f.toDept,copyTo:f.copyTo,poNo:f.poNo};for(const M of R)await bt(we(ye,"return_records/"+M.id),A);console.log(`‚úÖ Synced NCR ${f.ncrNo} update to ${R.length} Return Records`)}}return!0}catch(b){return b.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Update Permission Denied."),alert("Access Denied: Cannot update NCR report.")):(console.error("Error updating NCR report:",b),alert("Failed to update NCR report.")),!1}},w=async n=>{try{const r=g.find(b=>b.id===n);if(await bt(we(ye,"ncr_reports/"+n),{status:"Canceled"}),r&&r.ncrNo){const b=r.item||r,u=c.filter(x=>x.ncrNumber===r.ncrNo&&x.productCode===b.productCode);for(const x of u)await bt(we(ye,"return_records/"+x.id),{status:"Canceled"});u.length>0&&console.log(`üö´ Canceled ${u.length} linked Return Records in Hub`)}return!0}catch(r){return r.code==="PERMISSION_DENIED"?(console.warn("‚ö†Ô∏è Cancel Permission Denied."),alert("Access Denied: Cannot cancel NCR report.")):(console.error("Error canceling NCR report:",r),alert("Failed to cancel NCR report.")),!1}},o=async()=>{const n=we(ye,"counters/ncr_counter"),r=new Date().getFullYear();try{const{committed:b,snapshot:u}=await Wt(n,x=>x===null?{year:r,lastNumber:1}:(x.year===r?x.lastNumber++:(x.year=r,x.lastNumber=1),x));if(b){const x=u.val(),k=String(x.lastNumber).padStart(4,"0");return`NCR-${x.year}-${k}`}else throw new Error("Failed to get next NCR number, transaction aborted.")}catch(b){return console.error("Error getting next NCR number:",b),`NCR-${r}-ERR${Math.floor(Math.random()*100)}`}},O=async()=>{const n=we(ye,"counters/return_counter"),r=new Date().getFullYear();try{const{committed:b,snapshot:u}=await Wt(n,x=>x===null?{year:r,lastNumber:1}:(x.year===r?x.lastNumber++:(x.year=r,x.lastNumber=1),x));if(b){const x=u.val(),k=String(x.lastNumber).padStart(4,"0");return`RT-${x.year}-${k}`}else throw new Error("Failed to get next Return number, transaction aborted.")}catch(b){return console.error("Error getting next Return number:",b),`RT-${r}-ERR${Math.floor(Math.random()*100)}`}},a=async()=>{const n=we(ye,"counters/collection_counter"),r=new Date().getFullYear();try{const{committed:b,snapshot:u}=await Wt(n,x=>{const k=new Date().getMonth()+1;return x===null?{year:r,month:k,lastNumber:1}:(x.year===r&&x.month===k?x.lastNumber++:(x.year=r,x.month=k,x.lastNumber=1),x)});if(b){const x=u.val(),k=String(x.month).padStart(2,"0"),R=String(x.lastNumber).padStart(4,"0");return`COL-${x.year}${k}-${R}`}else throw new Error("Failed to get next Collection number, transaction aborted.")}catch(b){return console.error("Error getting next Collection number:",b),`COL-${r}-ERR${Math.floor(Math.random()*100)}`}},N=async()=>{console.log("üîÑ Starting Data Integrity Check...");const n=c.filter(b=>{if(!b.ncrNumber&&!b.id.startsWith("NCR"))return!1;let u=b.ncrNumber;if(!u&&b.id.startsWith("NCR")&&(u=b.id),!u)return!1;u=u.trim();const x=g.find(k=>k.ncrNo===u||k.id===u);return!x||x.status==="Canceled"});if(n.length===0)return console.log("‚úÖ System Integrity Verified: No orphans found."),0;console.warn(`‚ö†Ô∏è Found ${n.length} orphaned records. Cleaning up...`,n);let r=0;for(const b of n)try{await $t(we(ye,`return_records/${b.id}`)),r++}catch(u){console.error(`‚ùå Failed to delete orphan ${b.id}`,u)}return console.log(`üßπ Cleanup Complete. Removed ${r} records.`),r};return e.jsx(As.Provider,{value:{items:c,ncrReports:g,loading:s,addReturnRecord:h,updateReturnRecord:S,deleteReturnRecord:p,addNCRReport:v,updateNCRReport:d,deleteNCRReport:w,getNextNCRNumber:o,getNextReturnNumber:O,getNextCollectionNumber:a,runDataIntegrityCheck:N},children:l})},ht={Restock:"#22c55e",RTV:"#f59e0b",Recycle:"#ef4444",Claim:"#3b82f6",InternalUse:"#a855f7"},vs=()=>{const{items:l,ncrReports:c,runDataIntegrityCheck:i}=Se(),g=async()=>{const{value:d}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Authentication)",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",input:"password",inputPlaceholder:"Enter password",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#64748b",confirmButtonText:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Verify)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(!d)return;if(d!=="1234"){await T.fire({title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"Access Denied",icon:"error",confirmButtonColor:"#ef4444"});return}if((await T.fire({title:"‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?",text:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡∏ñ‡∏≤‡∏ß‡∏£ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ! ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"‡πÉ‡∏ä‡πà, ‡∏â‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed)try{T.fire({title:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...",text:"Please wait while we reset the system",allowOutsideClick:!1,didOpen:()=>{T.showLoading()}}),await $t(we(ye,"return_records")),await $t(we(ye,"ncr_reports")),await vt(we(ye,"ncr_counter"),0),await T.fire("‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!","‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß","success"),location.reload()}catch(o){console.error(o),T.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà","error")}},t=async()=>{const{value:d}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Authentication)",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞",input:"password",inputPlaceholder:"Enter password",icon:"question",showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#64748b",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Verify)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(d){if(d!=="1234"){await T.fire({title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"Access Denied",icon:"error",confirmButtonColor:"#ef4444"});return}T.fire({title:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö...",text:"Scanning for orphaned records...",allowOutsideClick:!1,didOpen:()=>{T.showLoading()}});try{const w=await i();w>0?await T.fire("‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",`‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á (Orphaned Records) ‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô ${w} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,"success"):await T.fire("‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥","‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö","success")}catch(w){console.error(w),T.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ","error")}}},s=C.useMemo(()=>({requests:l.filter(d=>d.status==="Draft"||d.status==="Requested").length,logistics:l.filter(d=>d.status==="InTransitHub").length,receiving:l.filter(d=>d.status==="ReceivedAtHub"||d.status==="Received").length,qc:l.filter(d=>d.status==="QCPassed"||d.status==="QCFailed"||d.status==="Graded").length,disposition:l.filter(d=>d.status==="ReturnToSupplier"||d.status==="Documented").length,completed:l.filter(d=>d.status==="Completed").length}),[l]),m=C.useMemo(()=>{const d=w=>{let o=0,O=0;return l.filter(a=>a.disposition===w).forEach(a=>{a.dateGraded&&(o++,(a.dateDocumented||a.dateCompleted)&&O++)}),o-O};return{restock:d("Restock"),rtv:d("RTV"),claim:d("Claim"),internal:d("InternalUse"),scrap:d("Recycle"),directReturn:l.filter(w=>w.disposition==="RTV"&&!w.dateGraded&&(w.dateDocumented||w.dateCompleted)).length}},[l]),h=C.useMemo(()=>{const d=l.filter(w=>!(w.documentType==="NCR"||w.ncrNumber&&w.documentType!=="LOGISTICS"));return{requests:d.filter(w=>w.status==="Requested").length,assigned:d.filter(w=>w.status==="COL_JobAccepted").length,collected:d.filter(w=>w.status==="COL_BranchReceived").length,consolidated:d.filter(w=>w.status==="COL_Consolidated").length,transit:d.filter(w=>w.status==="COL_InTransit").length,pendingCompletion:d.filter(w=>w.status==="COL_HubReceived"||w.status==="COL_Documented").length,completed:d.filter(w=>w.status==="Completed").length}},[l]),S=C.useMemo(()=>{let d=0,w=0,o=0,O=0;const a={},N={};l.forEach(r=>{const b=r.quantity||0,u=r.priceBill||0;if(d+=u*b,r.disposition==="Restock"&&(w+=(r.priceSell||0)*b),r.disposition==="RTV"&&(o+=u*b),r.hasCost&&r.costAmount){const x=r.costResponsible||"Unassigned",k=r.problemSource||"Other";a[x]=(a[x]||0)+r.costAmount,N[k]=(N[k]||0)+r.costAmount}}),c.filter(r=>r.status!=="Canceled").forEach(r=>{var u;const b=((u=r.item)==null?void 0:u.costAmount)||r.costAmount||0;O+=b});const n=Object.entries(a).map(([r,b])=>({name:r,value:b})).sort((r,b)=>b.value-r.value).slice(0,5);return{totalIntakeValue:d,recoveryValue:w,rtvValue:o,ncrCost:O,costResponsibleData:n}},[l,c]),p=C.useMemo(()=>{const d={Restock:0,RTV:0,Recycle:0,Claim:0,InternalUse:0};return l.forEach(w=>{w.disposition&&w.disposition!=="Pending"&&d[w.disposition]!==void 0&&d[w.disposition]++}),[{name:"‡∏Ç‡∏≤‡∏¢ (Restock)",value:d.Restock,color:ht.Restock},{name:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (RTV)",value:d.RTV,color:ht.RTV},{name:"‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",value:d.Claim,color:ht.Claim},{name:"‡∏ó‡∏¥‡πâ‡∏á (Scrap)",value:d.Recycle,color:ht.Recycle},{name:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",value:d.InternalUse,color:ht.InternalUse}].filter(w=>w.value>0)},[l]),v=C.useMemo(()=>{const d={},w={Packaging:0,Transport:0,Operation:0,Environment:0};c.filter(a=>a.status!=="Canceled").forEach(a=>{var r;let N=((r=a.item)==null?void 0:r.problemSource)||a.problemSource||"Other";const n=N.trim().toLowerCase();n==="other"||n==="others"||n.startsWith("other")||n.includes("‡∏≠‡∏∑‡πà‡∏ô‡πÜ")||n==="-"?N="‡∏≠‡∏∑‡πà‡∏ô‡πÜ":n==="customer"?N="‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer)":(n==="transport"||n.includes("transport")||N.startsWith("‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á"))&&(N="‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transport)"),d[N]=(d[N]||0)+1,a.causePackaging&&w.Packaging++,a.causeTransport&&w.Transport++,a.causeOperation&&w.Operation++,a.causeEnv&&w.Environment++});const o=Object.entries(d).map(([a,N])=>({name:a,value:N})).sort((a,N)=>N.value-a.value),O=[{name:"Packaging",value:w.Packaging},{name:"Transport",value:w.Transport},{name:"Operation",value:w.Operation},{name:"Environment",value:w.Environment}].filter(a=>a.value>0);return{rootCauseData:o,causeData:O}},[c]);return e.jsxs("div",{className:"p-6 space-y-8 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô (Operation Performance)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô‡∏Ñ‡∏á‡∏Ñ‡πâ‡∏≤‡∏á (Pipeline), ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (Inventory), ‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Analysis)"})]}),e.jsxs("div",{className:"bg-blue-50 px-4 py-2 rounded-lg border border-blue-100 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),e.jsx("span",{className:"text-sm font-bold text-blue-700",children:"Live Status"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-teal-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inbound Collection System)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[e.jsx(Ae,{step:"1",title:"‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô (Request)",count:h.requests,icon:Ce,variant:"teal",desc:"‡∏£‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏á‡∏≤‡∏ô"}),e.jsx(Ae,{step:"2",title:"‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Job)",count:h.assigned,icon:Be,variant:"blue",desc:"‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏±‡∏ö"}),e.jsx(Ae,{step:"3",title:"‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á (Collected)",count:h.collected,icon:Pt,variant:"emerald",desc:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx(Ae,{step:"4",title:"‡∏à‡∏∏‡∏î‡∏û‡∏±‡∏Å (Hub)",count:h.consolidated,icon:Xe,variant:"purple",desc:"‡∏£‡∏≠‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsx(Ae,{step:"5",title:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transit)",count:h.transit,icon:fe,variant:"indigo",desc:"‡πÄ‡∏Ç‡πâ‡∏≤ Ops Hub"}),e.jsx(Ae,{step:"6",title:"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Pending)",count:h.pendingCompletion,icon:wt,variant:"amber",desc:"Direct/Docs"}),e.jsx(Ae,{step:"7",title:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô (Completed)",count:h.completed,icon:Le,variant:"rose",desc:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4"})," ‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Operations Hub)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[e.jsx(Ae,{step:"1",title:"‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô (Request)",count:s.requests,icon:Ce,variant:"slate",desc:"‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"}),e.jsx(Ae,{step:"2",title:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (Logistics)",count:s.logistics,icon:fe,variant:"amber",desc:"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á"}),e.jsx(Ae,{step:"3",title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (Receive)",count:s.receiving,icon:Xe,variant:"blue",desc:"‡∏ñ‡∏∂‡∏á Hub"}),e.jsx(Ae,{step:"4",title:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (QC)",count:s.qc,icon:yt,variant:"purple",desc:"‡∏£‡∏≠‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"}),e.jsx(Ae,{step:"5",title:"‡∏Ñ‡∏•‡∏±‡∏á/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",count:s.disposition,icon:Ce,variant:"indigo",desc:"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"}),e.jsx(Ae,{step:"6",title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Done)",count:s.completed,icon:Le,variant:"emerald",desc:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"})," ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Ñ‡∏á‡∏Ñ‡∏•‡∏±‡∏á (Inventory On-Hand)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsx(ot,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢ (Sellable)",count:m.restock,variant:"green",icon:Le,subTitle:"Fully Recovered"}),e.jsx(ot,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô (RTV)",count:m.rtv,variant:"orange",icon:fe,subTitle:"To Vendor"}),e.jsx(ot,{title:"‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",count:m.claim,variant:"blue",icon:ze,subTitle:"Awaiting Claim"}),e.jsx(ot,{title:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",count:m.internal,variant:"purple",icon:Pt,subTitle:"In-House Use"}),e.jsx(ot,{title:"‡∏ã‡∏≤‡∏Å (Scrap)",count:m.scrap,variant:"red",icon:De,subTitle:"Scrapped"}),e.jsx(ot,{title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ï‡∏£‡∏á (Direct)",count:m.directReturn,variant:"slate",icon:Ee,subTitle:"Bypassed Hub"})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"})," ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô (Financial Impact)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(At,{title:"Total Intake",value:`‡∏ø${S.totalIntakeValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö",icon:Xe,variant:"dark"}),e.jsx(At,{title:"Recovery Value",value:`‡∏ø${S.recoveryValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏ô (Restock)",icon:jl,variant:"green"}),e.jsx(At,{title:"RTV Credit",value:`‡∏ø${S.rtvValue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (RTV)",icon:fe,variant:"orange"}),e.jsx(At,{title:"Cost Impact",value:`‡∏ø${S.ncrCost.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,subText:"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (NCR & Costs)",icon:It,variant:"red"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100 flex flex-col",children:[e.jsxs("div",{className:"mb-8 flex flex-col justify-between items-start gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-1.5 h-8 bg-indigo-600 rounded-full"}),e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡∏∞‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤ (Return Trends)"})]}),e.jsx("p",{className:"text-sm text-slate-400 pl-4",children:"‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏ä‡∏¥‡πâ‡∏ô) ‡∏Å‡∏±‡∏ö‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"})]}),e.jsxs("div",{className:"flex items-center gap-6 pl-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-indigo-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (Qty)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-amber-500 border-2 border-white ring-1 ring-amber-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (Cost)"})]})]})]}),e.jsx("div",{className:"flex-1 min-h-[350px] w-full",children:e.jsx(Ot,{width:"100%",height:"100%",children:e.jsxs(vl,{data:[{name:"Mon",qty:120,cost:5e3},{name:"Tue",qty:132,cost:4500},{name:"Wed",qty:101,cost:8e3},{name:"Thu",qty:134,cost:2e3},{name:"Fri",qty:190,cost:6e3},{name:"Sat",qty:230,cost:9e3},{name:"Sun",qty:210,cost:12e3}],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorQty",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),e.jsx(Vt,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),e.jsx(Gt,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12},dy:10}),e.jsx(Dt,{yAxisId:"left",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:12}}),e.jsx(Dt,{yAxisId:"right",orientation:"right",axisLine:!1,tickLine:!1,tick:{fill:"#f59e0b",fontSize:12},unit:"‡∏ø"}),e.jsx(Tt,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"}}),e.jsx(wl,{yAxisId:"left",type:"monotone",dataKey:"qty",stroke:"#6366f1",strokeWidth:3,fillOpacity:1,fill:"url(#colorQty)"}),e.jsx(yl,{yAxisId:"right",type:"monotone",dataKey:"cost",stroke:"#f59e0b",strokeWidth:3,dot:{r:4,strokeWidth:2,fill:"#fff",stroke:"#f59e0b"}})]})})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100 flex flex-col",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-1.5 h-8 bg-pink-500 rounded-full"}),e.jsxs("h3",{className:"text-xl font-bold text-slate-800 leading-tight",children:["5 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",e.jsx("br",{}),"(Top Critical Costs)"]})]})}),e.jsx("div",{className:"flex-1 min-h-[300px]",children:S.costResponsibleData.length>0?e.jsx("div",{className:"w-full h-full",children:e.jsx(Ot,{width:"100%",height:"100%",children:e.jsxs(bs,{data:S.costResponsibleData,layout:"vertical",margin:{left:0,right:20},children:[e.jsx(Vt,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#f8fafc"}),e.jsx(Gt,{type:"number",hide:!0}),e.jsx(Dt,{dataKey:"name",type:"category",width:80,tick:{fontSize:11,fill:"#64748b",fontWeight:600},axisLine:!1,tickLine:!1}),e.jsx(Tt,{cursor:{fill:"#fee2e2",opacity:.4,radius:8},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},formatter:d=>`‡∏ø${d.toLocaleString()}`}),e.jsx(us,{dataKey:"value",fill:"#ec4899",radius:[0,10,10,0],barSize:12,background:{fill:"#fce7f3",radius:[0,10,10,0]}})]})})}):e.jsx("div",{className:"h-full flex items-center justify-center text-slate-400 text-sm",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-12",children:[e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-800"}),"‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Disposition Mix)"]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(Ot,{width:"100%",height:"100%",children:e.jsxs(Cl,{children:[e.jsx(Rl,{data:p,innerRadius:80,outerRadius:110,paddingAngle:5,dataKey:"value",cornerRadius:8,children:p.map((d,w)=>e.jsx(Sl,{fill:d.color,stroke:"none"},`cell-${w}`))}),e.jsx(Tt,{contentStyle:{borderRadius:"12px"}}),e.jsx(kl,{verticalAlign:"middle",align:"right",layout:"vertical",iconType:"circle"})]})})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-600"}),"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Sources)"]}),e.jsx("div",{className:"h-[300px]",children:e.jsx(Ot,{width:"100%",height:"100%",children:e.jsxs(bs,{data:v.rootCauseData,layout:"vertical",margin:{left:20},children:[e.jsx(Vt,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"#f8fafc"}),e.jsx(Gt,{type:"number",hide:!0}),e.jsx(Dt,{dataKey:"name",type:"category",width:100,tick:{fontSize:11},axisLine:!1,tickLine:!1}),e.jsx(Tt,{cursor:{fill:"#f3e8ff"},contentStyle:{borderRadius:"12px"}}),e.jsx(us,{dataKey:"value",fill:"#8b5cf6",radius:[0,8,8,0],barSize:20,background:{fill:"#f3e8ff",radius:[0,8,8,0]}})]})})})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center mt-12 mb-8 opacity-70 hover:opacity-100 transition-opacity",children:[e.jsxs("div",{className:"border border-blue-200 bg-blue-50 rounded-lg p-6 flex flex-col items-center w-64 hover:shadow-md transition-shadow",children:[e.jsxs("h3",{className:"text-blue-700 font-bold text-sm mb-2 flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"})," Sync & Cleanup Data"]}),e.jsx("button",{onClick:t,"aria-label":"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞",className:"text-blue-600 underline text-xs cursor-pointer hover:text-blue-800 font-semibold",children:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞"}),e.jsx("div",{className:"text-[10px] text-blue-400 mt-1",children:"Remove orphaned NCR records"})]}),e.jsxs("div",{className:"border border-red-200 bg-red-50 rounded-lg p-6 flex flex-col items-center w-64 hover:shadow-md transition-shadow",children:[e.jsxs("h3",{className:"text-red-700 font-bold text-sm mb-2 flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"})," Data Factory Reset"]}),e.jsx("button",{onClick:g,"aria-label":"‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Reset All)",className:"text-red-600 underline text-xs cursor-pointer hover:text-red-800",children:"‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Reset All)"}),e.jsx("div",{className:"text-[10px] text-red-300 mt-1",children:"Delete all 100%"})]})]})]})},Is=({end:l,duration:c=1500})=>{const[i,g]=C.useState(0);return C.useEffect(()=>{let t=null;const s=m=>{t||(t=m);const h=m-t,S=Math.min(h/c,1);g(Math.floor((v=>v===1?1:1-Math.pow(2,-10*v))(S)*l)),h<c?requestAnimationFrame(s):g(l)};requestAnimationFrame(s)},[l,c]),e.jsx(e.Fragment,{children:i.toLocaleString()})},Ae=({step:l,title:c,count:i,icon:g,variant:t="blue",desc:s})=>{const m={teal:{border:"border-teal-200",bg:"bg-teal-50",iconColor:"text-teal-600",blob:"bg-teal-100",hoverBorder:"group-hover:border-teal-400"},blue:{border:"border-blue-200",bg:"bg-blue-50",iconColor:"text-blue-600",blob:"bg-blue-100",hoverBorder:"group-hover:border-blue-400"},indigo:{border:"border-indigo-200",bg:"bg-indigo-50",iconColor:"text-indigo-600",blob:"bg-indigo-100",hoverBorder:"group-hover:border-indigo-400"},purple:{border:"border-purple-200",bg:"bg-purple-50",iconColor:"text-purple-600",blob:"bg-purple-100",hoverBorder:"group-hover:border-purple-400"},amber:{border:"border-amber-200",bg:"bg-amber-50",iconColor:"text-amber-600",blob:"bg-amber-100",hoverBorder:"group-hover:border-amber-400"},emerald:{border:"border-emerald-200",bg:"bg-emerald-50",iconColor:"text-emerald-600",blob:"bg-emerald-100",hoverBorder:"group-hover:border-emerald-400"},rose:{border:"border-rose-200",bg:"bg-rose-50",iconColor:"text-rose-600",blob:"bg-rose-100",hoverBorder:"group-hover:border-rose-400"},slate:{border:"border-slate-200",bg:"bg-slate-50",iconColor:"text-slate-600",blob:"bg-slate-200",hoverBorder:"group-hover:border-slate-400"}},h=m[t]||m.blue;return e.jsxs("div",{className:`relative p-5 rounded-[2rem] border ${h.border} ${h.bg} flex flex-col items-center text-center transition-all duration-300 hover:-translate-y-2 hover:shadow-xl hover:ring-2 hover:ring-offset-2 hover:ring-transparent ${h.hoverBorder} cursor-pointer overflow-hidden group h-full min-h-[220px]`,children:[e.jsx("div",{className:`absolute -top-6 -right-6 w-24 h-24 rounded-full ${h.blob} opacity-60 blur-2xl transition-transform duration-500 group-hover:scale-150`}),e.jsxs("div",{className:"relative z-10 text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4 transition-colors group-hover:text-slate-600",children:["Step ",l]}),e.jsx("div",{className:`relative z-10 mb-4 p-4 rounded-full shadow-sm bg-white ring-4 ring-white/50 ${h.iconColor} transition-transform duration-300 group-hover:scale-110 group-hover:shadow-md`,children:e.jsx(g,{className:"w-6 h-6",strokeWidth:1.5})}),e.jsx("div",{className:"relative z-10 text-4xl font-black text-slate-800 mb-2 transition-all group-hover:scale-105",children:e.jsx(Is,{end:i})}),e.jsx("div",{className:"relative z-10 text-xs font-bold text-slate-600 truncate w-full mb-1 px-2",children:c}),e.jsx("div",{className:"relative z-10 text-[10px] text-slate-400 font-medium",children:s})]})},At=({title:l,value:c,subText:i,icon:g,variant:t="default"})=>{const s={dark:"bg-slate-900 text-white border-none shadow-xl shadow-slate-200 hover:shadow-slate-400/50",green:"bg-gradient-to-br from-emerald-500 to-teal-600 text-white border-none shadow-xl shadow-emerald-200 hover:shadow-emerald-400/50",orange:"bg-gradient-to-br from-amber-400 to-orange-600 text-white border-none shadow-xl shadow-orange-200 hover:shadow-orange-400/50",red:"bg-gradient-to-br from-red-500 to-rose-600 text-white border-none shadow-xl shadow-red-200 hover:shadow-red-400/50",default:"bg-white text-slate-800 border-slate-100 shadow-sm hover:border-blue-300"},m=s[t]||s.default,h=t!=="default";return e.jsxs("div",{className:`relative overflow-hidden rounded-[2rem] p-6 flex flex-col justify-between h-40 transition-all duration-300 hover:-translate-y-2 hover:scale-[1.02] hover:shadow-2xl cursor-pointer group ${m}`,children:[h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-5 rounded-full -mr-10 -mt-10 blur-2xl transition-transform group-hover:scale-125 duration-700"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-black opacity-10 rounded-full -ml-8 -mb-8 blur-xl transition-transform group-hover:scale-150 duration-700"})]}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-bold uppercase tracking-widest mb-1 ${h?"text-white/70":"text-slate-500"}`,children:l}),e.jsx("div",{className:`p-2 rounded-lg inline-flex ${h?"bg-white/20 backdrop-blur-sm text-white":"bg-slate-100 text-slate-600"}`,children:e.jsx("span",{className:"text-[10px] font-medium",children:i})})]}),e.jsx("div",{className:`p-3 rounded-2xl ${h?"bg-white/20 backdrop-blur-md text-white":"bg-slate-100 text-slate-600"} transition-transform group-hover:rotate-12`,children:e.jsx(g,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"relative z-10 mt-auto",children:e.jsx("h3",{className:"text-3xl font-black tracking-tight group-hover:scale-105 transition-transform origin-left",children:c})})]})},ot=({title:l,count:c,variant:i,icon:g,subTitle:t})=>{const s={blue:"bg-gradient-to-br from-[#4f46e5] to-[#3b82f6] shadow-indigo-300",orange:"bg-gradient-to-br from-[#f97316] to-[#ef4444] shadow-orange-300",green:"bg-gradient-to-br from-[#10b981] to-[#059669] shadow-emerald-300",purple:"bg-gradient-to-br from-[#a855f7] to-[#d946ef] shadow-purple-300",red:"bg-gradient-to-br from-[#ef4444] to-[#be123c] shadow-rose-300",amber:"bg-gradient-to-br from-[#f59e0b] to-[#d97706] shadow-amber-300",slate:"bg-gradient-to-br from-[#64748b] to-[#475569] shadow-slate-300"},m=s[i]||s.slate;return e.jsxs("div",{className:`relative overflow-hidden rounded-[2rem] p-6 h-44 flex flex-col justify-between shadow-xl transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl cursor-pointer group ${m}`,children:[g&&e.jsx("div",{className:"absolute -bottom-6 -right-6 opacity-20 transform rotate-[-10deg] group-hover:scale-110 group-hover:rotate-0 transition-all duration-500 ease-out",children:e.jsx(g,{className:"w-36 h-36 text-white",strokeWidth:1})}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"text-white/90 text-sm font-bold tracking-wide mb-1 drop-shadow-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-white rounded-full inline-block"}),l]})}),e.jsxs("div",{className:"relative z-10 text-white font-black text-6xl leading-none tracking-tight drop-shadow-md flex items-baseline gap-2 my-2",children:[e.jsx(Is,{end:c}),e.jsx("span",{className:"text-xl font-bold opacity-70 tracking-normal",children:"‡∏ä‡∏¥‡πâ‡∏ô"})]}),e.jsx("div",{className:"relative z-10 self-start mt-auto",children:e.jsx("div",{className:"bg-white/20 backdrop-blur-md rounded-full px-4 py-1.5 border border-white/10 text-[10px] font-bold text-white tracking-widest uppercase shadow-sm",children:t||"STATUS"})})]})},ws=l=>{if(isNaN(l)||l===0)return"‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏≤‡∏ó‡∏ñ‡πâ‡∏ß‡∏ô";const c=["‡∏®‡∏π‡∏ô‡∏¢‡πå","‡∏´‡∏ô‡∏∂‡πà‡∏á","‡∏™‡∏≠‡∏á","‡∏™‡∏≤‡∏°","‡∏™‡∏µ‡πà","‡∏´‡πâ‡∏≤","‡∏´‡∏Å","‡πÄ‡∏à‡πá‡∏î","‡πÅ‡∏õ‡∏î","‡πÄ‡∏Å‡πâ‡∏≤"],i=["","‡∏™‡∏¥‡∏ö","‡∏£‡πâ‡∏≠‡∏¢","‡∏û‡∏±‡∏ô","‡∏´‡∏°‡∏∑‡πà‡∏ô","‡πÅ‡∏™‡∏ô","‡∏•‡πâ‡∏≤‡∏ô"],g=Math.abs(l),t=Math.floor(g).toString(),s=Math.round(g*100%100).toString().padStart(2,"0");let m="";const h=p=>{let v="";for(let d=0;d<p.length;d++){let w=parseInt(p.charAt(d)),o=p.length-d-1;w!==0&&(o===1&&w===2?v+="‡∏¢‡∏µ‡πà":o===1&&w===1||(o===0&&w===1&&p.length>1?v+="‡πÄ‡∏≠‡πá‡∏î":v+=c[w]),v+=i[o])}return v};if(parseInt(t)>0){let p=parseInt(t),v="",d=0;for(;p>0;){const w=(p%1e6).toString(),o=h(w);o&&(v=o+(d>0?"‡∏•‡πâ‡∏≤‡∏ô":"")+v),p=Math.floor(p/1e6),d++}m=v}else m="‡∏®‡∏π‡∏ô‡∏¢‡πå";if(m+="‡∏ö‡∏≤‡∏ó",parseInt(s)===0)m+="‡∏ñ‡πâ‡∏ß‡∏ô";else{let p="",v=parseInt(s.charAt(0)),d=parseInt(s.charAt(1));v>0&&(v===2?p+="‡∏¢‡∏µ‡πà":v===1||(p+=c[v]),p+="‡∏™‡∏¥‡∏ö"),d>0&&(d===1&&v!==1?p+="‡πÄ‡∏≠‡πá‡∏î":d>1&&(p+=c[d])),m+=p+"‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå"}return(l<0?"‡∏•‡∏ö":"")+m},ct=l=>{switch(l){case"RTV":return{code:"FM-LOG-05",rev:"00",th:"‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",en:"GOODS RETURN NOTE"};case"Restock":return{code:"FM-SAL-02",rev:"00",th:"‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ",en:"SALES DISPOSAL APPROVAL FORM"};case"Claim":return{code:"FM-CLM-01",rev:"00",th:"‡πÉ‡∏ö‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô",en:"INSURANCE CLAIM DELIVERY NOTE"};case"InternalUse":return{code:"FM-ADM-09",rev:"00",th:"‡πÉ‡∏ö‡πÄ‡∏ö‡∏¥‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô",en:"INTERNAL REQUISITION FORM"};case"Recycle":return{code:"FM-AST-04",rev:"00",th:"‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏±‡∏î‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢/‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô",en:"ASSET WRITE-OFF / SCRAP AUTHORIZATION FORM"};default:return{code:"FM-GEN-00",rev:"00",th:"‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô",en:"RETURN MANAGEMENT DOCUMENT"}}},it={New:"‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ (Good)",BoxDamage:"‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ö‡∏∏‡∏ö (Box Dmg)",WetBox:"‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å (Wet Box)",LabelDefect:"‡∏â‡∏•‡∏≤‡∏Å‡∏•‡∏≠‡∏Å (Label)",Expired:"‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (Expired)",Damaged:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î/‡∏ã‡∏≤‡∏Å (Damaged)",Defective:"‡πÄ‡∏™‡∏µ‡∏¢ (Defective)"},Ze={RTV:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return)",Restock:"‡∏Ç‡∏≤‡∏¢ (Sell)",Recycle:"‡∏ó‡∏¥‡πâ‡∏á (Scrap)",InternalUse:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",Claim:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (Claim)"},Ut={‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏ö‡∏ô‡∏£‡∏ñ:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏Ñ‡∏ô‡∏£‡∏ñ",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏±‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏°‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÑ‡∏°‡πà‡∏î‡∏µ:"‡πÄ‡∏Ñ‡∏•‡∏°‡πÅ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏Ñ‡∏ô‡∏£‡∏ñ",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏±‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö‡∏£‡∏∏‡πà‡∏ô‡∏à‡∏≤‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö‡∏£‡∏∏‡πà‡∏ô‡∏à‡∏≤‡∏Å‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏Ñ‡∏ô‡∏£‡∏ñ",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏Å‡∏±‡∏î:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏°‡∏π‡∏•‡∏ô‡∏Å:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤",‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡πÅ‡∏°‡∏•‡∏á:"‡πÄ‡∏Ñ‡∏•‡∏° ‡∏™‡∏≤‡∏Ç‡∏≤"},Es=(l,c)=>{const{items:i,addReturnRecord:g,updateReturnRecord:t,addNCRReport:s,getNextNCRNumber:m,getNextReturnNumber:h,getNextCollectionNumber:S}=Se(),[p,v]=C.useState(1),[d,w]=C.useState(!1),[o,O]=C.useState(null),[a,N]=C.useState(null),[n,r]=C.useState(!1),[b,u]=C.useState(0),[x,k]=C.useState("Damaged"),[R,f]=C.useState(!1),[$,A]=C.useState(1),[M,B]=C.useState(""),[E,P]=C.useState(null),[F,le]=C.useState(null),[Y,me]=C.useState({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""}),[se,G]=C.useState(!1),[D,Q]=C.useState(!1),[q,ee]=C.useState(null),[ae,be]=C.useState(!0),[he,ve]=C.useState(7),[j,I]=C.useState(!1),[U,Z]=C.useState(0),[V,K]=C.useState(!1),[oe,_]=C.useState({companyNameTH:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î",companyNameEN:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD.",address:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000",contact:"Tel: 056-275-841 Email: info_nw@neosiamlogistics.com",titleTH:"",titleEN:"",remarks:"1. ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 7 ‡∏ß‡∏±‡∏ô",signatory1:"‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥ (Prepared By)",signatory2:"‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Checked By)",signatory3:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Approved By)"}),[ne,ge]=C.useState(!1),[X,y]=C.useState(null),[z,ce]=C.useState([]),[pe,Ne]=C.useState(new Set),[de,Re]=C.useState(!1),[Me,Ve]=C.useState(null),[lt,xt]=C.useState(!1),[at,mt]=C.useState(null),[Rt,ns]=C.useState(!1),Qt={branch:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å",date:new Date().toISOString().split("T")[0],quantity:1,unit:"‡∏ä‡∏¥‡πâ‡∏ô",pricePerUnit:0,priceBill:0,priceSell:0,status:"Draft",disposition:"Pending",condition:"Unknown",productCode:"",productName:"",expiryDate:"",notes:"",ncrNumber:"",refNo:"",neoRefNo:"",customerName:"",destinationCustomer:"",problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAcceptance:!1,actionSpecialAcceptanceQty:0,actionSpecialAcceptanceReason:"",actionScrap:!1,actionScrapQty:0,actionReplace:!1,actionReplaceQty:0,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",images:[],hasCost:!1,costAmount:0,costResponsible:"",problemSource:"",problemAnalysis:void 0,problemAnalysisSub:"",problemAnalysisCause:"",problemAnalysisDetail:"",preliminaryDecision:void 0,preliminaryRoute:"",isFieldSettled:!1,fieldSettlementAmount:0,fieldSettlementEvidence:"",fieldSettlementName:"",fieldSettlementPosition:""},[Ge,Ke]=C.useState(Qt),[$e,St]=C.useState([]),[Fs,os]=C.useState(""),[qs,is]=C.useState(""),cs=i.filter(L=>L.status==="Requested"&&L.documentType!=="NCR"),Us=i.filter(L=>L.documentType==="NCR"||!!L.ncrNumber?L.status==="Requested"||L.status==="COL_JobAccepted":L.status==="COL_Consolidated"),Qs=i.filter(L=>L.status==="JobAccepted"),Hs=i.filter(L=>L.status==="BranchReceived"),ds=i.filter(L=>L.status==="ReadyForLogistics"),Ht=i.filter(L=>L.status==="InTransitToHub"||L.status==="NCR_InTransit"||L.status==="COL_InTransit"),kt=i.filter(L=>{const W=L.documentType==="NCR"||!!L.ncrNumber||L.status.startsWith("NCR_");return W?W?L.status==="NCR_QCPassed"||L.status==="NCR_QCCompleted"||L.status==="QCPassed"||L.status==="QCCompleted"||L.status==="Settled_OnField":!1:L.status==="COL_HubReceived"||L.status==="ReceivedAtHub"||L.status==="HubReceived"||L.status==="QCCompleted"}),xs=i.filter(L=>L.status==="DocsCompleted"||L.status==="ReturnToSupplier"||L.status==="DirectReturn"),zs=i.filter(L=>L.status==="Completed"),Ws=ds,Vs=Ht,Gs=kt,Ks=xs,Js=cs,Ys=Ht,Xs=[],Zs=kt,el=te.useMemo(()=>{const L=i.map(J=>J.customerName).filter(Boolean),W=$e.map(J=>J.customerName).filter(Boolean);return Array.from(new Set([...L,...W])).sort()},[i,$e]),tl=te.useMemo(()=>{const L=i.map(J=>J.destinationCustomer).filter(Boolean),W=$e.map(J=>J.destinationCustomer).filter(Boolean);return Array.from(new Set([...L,...W])).sort()},[i,$e]),sl=te.useMemo(()=>{const L=i.map(J=>J.founder).filter(Boolean),W=$e.map(J=>J.founder).filter(Boolean);return Array.from(new Set([...L,...W])).sort()},[i,$e]),ll=te.useMemo(()=>{const L=i.map(J=>J.productCode).filter(Boolean),W=$e.map(J=>J.productCode).filter(Boolean);return Array.from(new Set([...L,...W])).sort()},[i,$e]),al=te.useMemo(()=>{const L=i.map(J=>J.productName).filter(Boolean),W=$e.map(J=>J.productName).filter(Boolean);return Array.from(new Set([...L,...W])).sort()},[i,$e]);C.useEffect(()=>{l&&(v(1),Ke(L=>({...L,...l,date:l.date||L.date,branch:l.branch||L.branch})),c&&c())},[l,c]);const rl=(L,W)=>{me(J=>({...J,[L]:W}))};return C.useEffect(()=>{if(Ge.hasCost&&Ge.problemSource){const L=Ut[Ge.problemSource];L&&Ke(W=>({...W,costResponsible:L}))}},[Ge.problemSource,Ge.hasCost]),{state:{activeStep:p,isCustomBranch:d,qcSelectedItem:o,customInputType:a,showSplitMode:n,splitQty:b,splitCondition:x,isBreakdownUnit:R,conversionRate:$,newUnitName:M,splitDisposition:E,selectedDisposition:F,dispositionDetails:Y,isCustomRoute:se,showDocModal:D,docData:q,includeVat:ae,vatRate:he,includeDiscount:j,discountRate:U,isDocEditable:V,docConfig:oe,showSelectionModal:ne,selectionStatus:X,selectionItems:z,selectedItemIds:pe,formData:Ge,requestItems:$e,customProblemType:Fs,customRootCause:qs,docSelectedItem:Me,showStep4SplitModal:lt,isSubmittingDoc:Rt},derived:{uniqueCustomers:el,uniqueDestinations:tl,uniqueFounders:sl,uniqueProductCodes:ll,uniqueProductNames:al,step2Items:cs,step3Items:Qs,step4Items:Hs,step5Items:ds,step6Items:Ht,step7Items:kt,step8Items:xs,ncrStep2Items:Us,completedItems:zs,logisticItems:Ws,hubReceiveItems:Vs,hubDocItems:Gs,closureItems:Ks,requestedItems:Js,receivedItems:Ys,gradedItems:Xs,docItems:Zs,processedItems:kt},actions:{setActiveStep:v,setIsCustomBranch:w,setFormData:Ke,setRequestItems:St,handleImageUpload:L=>{L.target.files&&Array.from(L.target.files).forEach(J=>{const re=new FileReader;re.onloadend=()=>{Ke(ie=>({...ie,images:[...ie.images||[],re.result]}))},re.readAsDataURL(J)})},handleRemoveImage:L=>{Ke(W=>({...W,images:(W.images||[]).filter((J,re)=>re!==L)}))},handleAddItem:(L,W)=>{L&&L.preventDefault();const re={...W||Ge};St(ie=>[...ie,re]),Ke(ie=>({...Qt,founder:ie.founder,branch:ie.branch,date:ie.date,customerName:ie.customerName,destinationCustomer:ie.destinationCustomer,neoRefNo:ie.neoRefNo,refNo:ie.refNo,documentNo:ie.documentNo,invoiceNo:ie.invoiceNo,tmNo:ie.tmNo,controlDate:ie.controlDate,documentType:ie.documentType,problemAnalysis:ie.problemAnalysis})),os(""),is("")},handleRemoveItem:L=>{St(W=>W.filter((J,re)=>re!==L))},handleRequestSubmit:async L=>{const W=L&&L.length>0?L:[...$e];if(W.length===0){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",confirmButtonColor:"#3085d6"});return}if(!de){Re(!0);try{let J=0;for(const re of W){let ie=re.ncrNumber;re.documentType==="NCR"&&!ie&&(ie=await m());let ke=re.collectionOrderId;re.documentType==="LOGISTICS"&&!ke&&(ke=await S());const Te=await h(),H={...re,id:Te,refNo:Te,collectionOrderId:ke,amount:(re.quantity||0)*(re.priceBill||0),reason:re.problemDetail||re.notes||"‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",status:re.isFieldSettled?"Settled_OnField":"Requested",dateRequested:re.date||new Date().toISOString().split("T")[0],disposition:re.isFieldSettled?"RTV":"Pending",condition:"Unknown",productName:re.productName||"Unknown Product",productCode:re.productCode||"N/A",customerName:re.customerName||"Unknown Customer",category:"General",ncrNumber:ie},He=JSON.parse(JSON.stringify(H));if(await g(He)){if(H.documentType==="NCR"){const rt={id:ie+"-"+H.id,ncrNo:ie,date:H.dateRequested,toDept:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",founder:H.founder||"Operations Hub",poNo:"",copyTo:"",problemDamaged:H.problemDamaged,problemDamagedInBox:H.problemDamagedInBox,problemLost:H.problemLost,problemMixed:H.problemMixed,problemWrongInv:H.problemWrongInv,problemLate:H.problemLate,problemDuplicate:H.problemDuplicate,problemWrong:H.problemWrong,problemIncomplete:H.problemIncomplete,problemOver:H.problemOver,problemWrongInfo:H.problemWrongInfo,problemShortExpiry:H.problemShortExpiry,problemTransportDamage:H.problemTransportDamage,problemAccident:H.problemAccident,problemPOExpired:H.problemPOExpired,problemNoBarcode:H.problemNoBarcode,problemNotOrdered:H.problemNotOrdered,problemOther:H.problemOther,problemOtherText:H.problemOtherText,problemDetail:H.problemDetail||H.reason||"",problemAnalysis:H.problemAnalysis,problemAnalysisSub:H.problemAnalysisSub,problemAnalysisCause:H.problemAnalysisCause,problemAnalysisDetail:H.problemAnalysisDetail,item:{id:H.id,branch:H.branch,refNo:H.refNo,neoRefNo:H.neoRefNo,productCode:H.productCode,productName:H.productName,customerName:H.customerName,destinationCustomer:H.destinationCustomer,quantity:H.quantity,unit:H.unit||"PCS",priceBill:H.priceBill,pricePerUnit:H.pricePerUnit||0,expiryDate:H.expiryDate,hasCost:H.hasCost,costAmount:H.costAmount,costResponsible:H.costResponsible,problemSource:H.problemSource||H.problemAnalysis||"-",isFieldSettled:H.isFieldSettled,fieldSettlementAmount:H.fieldSettlementAmount,fieldSettlementEvidence:H.fieldSettlementEvidence,fieldSettlementName:H.fieldSettlementName,fieldSettlementPosition:H.fieldSettlementPosition},actionReject:H.actionReject,actionRejectQty:H.actionRejectQty,actionRejectSort:H.actionRejectSort,actionRejectSortQty:H.actionRejectSortQty,actionRework:H.actionRework,actionReworkQty:H.actionReworkQty,actionReworkMethod:H.actionReworkMethod,actionSpecialAcceptance:H.actionSpecialAcceptance,actionSpecialAcceptanceQty:H.actionSpecialAcceptanceQty,actionSpecialAcceptanceReason:H.actionSpecialAcceptanceReason,actionScrap:H.actionScrap,actionScrapQty:H.actionScrapQty,actionReplace:H.actionReplace,actionReplaceQty:H.actionReplaceQty,causePackaging:H.causePackaging,causeTransport:H.causeTransport,causeOperation:H.causeOperation,causeEnv:H.causeEnv,causeDetail:H.causeDetail,preventionDetail:H.preventionDetail,preventionDueDate:"",responsiblePerson:"",responsiblePosition:"",qaAccept:!1,qaReject:!1,qaReason:"",dueDate:"",approver:"",approverPosition:"",approverDate:"",status:"Open"},nt=JSON.parse(JSON.stringify(rt));await s(nt)}J++}}J>0&&(await T.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ",timer:2e3,showConfirmButton:!1}),Ke(Qt),St([]),os(""),is(""),w(!1),v(2))}catch(J){console.error("Submission error:",J),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà",confirmButtonColor:"#d33"})}finally{Re(!1)}}},handleLogisticsSubmit:async(L,W,J)=>{try{if(console.log(`[Logistics] HandleSubmit Called. IDs: ${L.length}, Route: ${W}`),!L||L.length===0){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"});return}const re=J.destination||(W==="Hub"?"Hub (Nakhon Sawan)":"Unknown"),ie=J.transportCompany==="‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"?J.driverName:"-",ke=J.transportCompany==="‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"?J.plateNumber:"-",Te=J.transportCompany==="‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"?"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó":J.transportCompany,H=`[Transport] Driver: ${ie}, Plate: ${ke}, Company: ${Te} | Dest: ${re}`,He=W==="Hub"?{status:"NCR_InTransit",notes:H,dispositionRoute:re,dateInTransit:new Date().toISOString(),transportPlate:ke,transportDriver:ie,transportCompany:Te,disposition:null}:{status:"DirectReturn",notes:H,dispositionRoute:re,disposition:"RTV",destinationCustomer:re,dateInTransit:new Date().toISOString(),transportPlate:ke,transportDriver:ie,transportCompany:Te},Je=i.filter(Ye=>L.includes(String(Ye.id)));if(!Je||Je.length===0){console.error("Critical Error: Items not found for IDs:",L),console.log("Current Items:",i.map(Ye=>Ye.id)),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:`‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
Selected: ${L.join(", ")}`});return}mt({ids:L,updatePayload:He});const rt=W==="Hub"?"‡πÉ‡∏ö‡∏ô‡∏≥‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub (Transfer Note)":"‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Note)",nt=W==="Hub"?"TRANSFER NOTE":"RETURN NOTE";_(Ye=>({...Ye,titleTH:rt,titleEN:nt})),ee({type:"RTV",items:Je}),be(!0),I(!1),Z(0),K(!1),console.log("Opening Document Modal for Logistics..."),Q(!0)}catch(re){console.error("HandleLogisticsSubmit Error:",re),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö",text:String(re)})}},handleIntakeReceive:async L=>{var ie,ke,Te,H,He;const W=i.find(Je=>Je.id===L);if(!W)return;const J=new Date().toISOString().split("T")[0];((ie=W.refNo)==null?void 0:ie.startsWith("R-"))||((ke=W.refNo)==null?void 0:ke.startsWith("COL-"))||((Te=W.refNo)==null?void 0:Te.startsWith("RT-"))||((H=W.neoRefNo)==null?void 0:H.startsWith("R-"))||((He=W.neoRefNo)==null?void 0:He.startsWith("COL-"))?(await t(L,{status:"Graded",dateReceived:J,dateGraded:J,disposition:"RTV",condition:"Good",notes:(W.notes||"")+" [Auto-Pass QC: Collection Item]"}),await T.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!",text:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Collection ‡∏Ç‡πâ‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô QC ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",timer:2e3,showConfirmButton:!1})):await t(L,{status:"ReceivedAtHub",dateReceived:J})},selectQCItem:L=>{O(L),N(null),le(null),me({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""}),G(!1)},handleConditionSelect:(L,W)=>{o&&(L==="Other"?(N(W||null),O({...o,condition:""})):(N(null),O({...o,condition:L})))},setQcSelectedItem:O,setCustomInputType:N,setSelectedDisposition:le,setIsCustomRoute:G,handleDispositionDetailChange:rl,handleQCSubmit:async()=>{if(!o||!F)return;if(!o.condition||o.condition==="Unknown"){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","","warning");return}const L=new Date().toISOString().split("T")[0];await t(o.id,{condition:o.condition,disposition:F,status:"QCPassed",dateGraded:L,dispositionRoute:Y.route,sellerName:Y.sellerName,contactPhone:Y.contactPhone,internalUseDetail:Y.internalUseDetail,claimCompany:Y.claimCompany,claimCoordinator:Y.claimCoordinator,claimPhone:Y.claimPhone})&&(O(null),le(null),N(null),G(!1),T.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏• QC ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:"Ready for Docs",timer:1500,showConfirmButton:!1}))},setShowSplitMode:r,setIsBreakdownUnit:f,setConversionRate:A,setNewUnitName:B,setSplitQty:u,setSplitCondition:k,setSplitDisposition:P,handleSplitSubmit:async()=>{const L=(o==null?void 0:o.quantity)||0,W=R?L*$:L;if(!Number.isInteger(b)){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°","","warning");return}if(!o||b<=0||b>=W){T.fire("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",`‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0 ‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${W})`,"warning");return}if(!o.condition||o.condition==="Unknown"){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å","","warning");return}if(!F){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)","","warning");return}const J=o.priceBill||0,re=o.pricePerUnit||J/(o.quantity||1);let ie=re;R&&$>1&&(ie=re/$);const ke=R?M||"Sub-unit":o.unit,Te=W-b,H=Te*ie,He=b*ie,rt=(o.priceSell||0)/(o.quantity||1),nt=R&&$>1?rt/$:rt,ms=Te*nt,Ye=b*nt,zt=new Date().toISOString().split("T")[0],nl=await t(o.id,{quantity:Te,unit:ke,priceBill:H,pricePerUnit:ie,priceSell:ms,condition:o.condition,disposition:F,status:"QCPassed",dateGraded:zt,dispositionRoute:Y.route,sellerName:Y.sellerName,contactPhone:Y.contactPhone,internalUseDetail:Y.internalUseDetail,claimCompany:Y.claimCompany,claimCoordinator:Y.claimCoordinator,claimPhone:Y.claimPhone}),ol=`${o.id}-S${Math.floor(Math.random()*100)}`,pt={...o,id:ol,quantity:b,unit:ke,priceBill:He,pricePerUnit:ie,priceSell:Ye,condition:x,status:E?"QCPassed":"ReceivedAtHub",refNo:`${o.refNo} (Split)`,dateReceived:zt};E?(pt.disposition=E,pt.dateGraded=zt):(pt.disposition=void 0,pt.dateGraded=void 0);const il=await g(pt);nl&&il?(O(null),le(null),N(null),G(!1),r(!1),u(0),f(!1),A(1),B(""),P(null),T.fire({icon:"success",title:"‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})):T.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","","error")},toggleSplitMode:()=>{n||(u(0),P(null),k("New"),f(!1),A(1),B("")),r(!n)},handlePrintClick:(L,W)=>{if(!W||W.length===0){T.fire("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡∏µ‡πâ","","info");return}y(L),ce(W),Ne(new Set(W.map(J=>J.id))),ge(!0)},toggleSelection:L=>{const W=new Set(pe);W.has(L)?W.delete(L):W.add(L),Ne(W)},setShowSelectionModal:ge,handleGenerateDoc:()=>{if(!X)return;const L=z.filter(re=>pe.has(re.id));if(L.length===0){T.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£","","warning");return}const W=ct(X);_(re=>({...re,titleTH:W.th,titleEN:W.en})),ee({type:X,items:L}),be(!0);const J=X==="Restock";I(J),Z(J?30:0),ge(!1),Q(!0),K(!1)},setIncludeVat:be,setVatRate:ve,setIncludeDiscount:I,setDiscountRate:Z,setIsDocEditable:K,setDocConfig:_,setShowDocModal:Q,handleConfirmDocGeneration:async()=>{if(!q||Rt)return;ns(!0);const L=new Date().toISOString().split("T")[0];try{if(at){let J=0;for(const re of at.ids)await t(re,{...at.updatePayload})&&J++;J>0?(T.fire({icon:"success",title:"‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:`‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! (${J} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`,timer:2e3,showConfirmButton:!1}),Q(!1),mt(null)):T.fire("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ (Update Failed)","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console","error");return}let W=0;for(const J of q.items){const ie=J.documentType==="NCR"||!!J.ncrNumber||J.status.startsWith("NCR_")?"NCR_Documented":"COL_Documented";await t(J.id,{status:ie,dateDocumented:L})&&W++}W>0&&(T.fire({icon:"success",title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:`${W} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ -> ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô "‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"`,timer:2e3,showConfirmButton:!1}),Q(!1))}catch(W){console.error("Document Generation Error:",W),T.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà","error")}finally{ns(!1)}},handleUpdateDocItem:async(L,W)=>{await t(L,W),ee(J=>J?{...J,items:J.items.map(re=>re.id===L?{...re,...W}:re)}:null)},setDocSelectedItem:Ve,setShowStep4SplitModal:xt,handleDocItemClick:L=>{Ve(L),xt(!0)},handleStep4SplitSubmit:async(L,W)=>{Me&&T.fire("Split functionality pending","This feature is pending implementation for Step 4 direct usage.","info")}}}},Zl=({isOpen:l,onClose:c,onConfirm:i,itemCount:g})=>l?e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden animate-scale-in",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(qe,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•"}),e.jsxs("p",{className:"text-slate-500 mb-6",children:["‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ",e.jsx("span",{className:"font-bold text-slate-800",children:g})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?",e.jsx("br",{}),e.jsx("span",{className:"text-xs text-slate-400",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ"})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:c,className:"px-5 py-2.5 rounded-xl border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-colors w-full",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:i,className:"px-5 py-2.5 rounded-xl bg-green-600 text-white font-bold hover:bg-green-700 shadow-lg shadow-green-200 transition-all w-full",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"})]})]})})}):null,Oe=["‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","‡∏Ñ‡∏•‡∏≠‡∏á 13","‡∏ã‡∏µ‡πÇ‡∏ô‡πà","‡∏õ‡∏£‡∏∞‡∏î‡∏π‡πà"],Pe=["‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","Sino Pacific Trading","NEO CORPORATE"],ea=new Date,xe=l=>{const c=new Date(ea);return c.setDate(c.getDate()-l),c.toISOString().split("T")[0]};xe(0),xe(0),xe(1),xe(2),xe(1),xe(1),xe(3),xe(2),xe(1),xe(2),xe(4),xe(3),xe(2),xe(3),xe(6),xe(5),xe(4),xe(3),xe(4),xe(8),xe(7),xe(6),xe(5),xe(4),xe(5),xe(7),xe(6),xe(6),xe(5),xe(5),xe(6),xe(6),xe(6);xe(1),xe(2),xe(1);const ta=({isOpen:l,onClose:c,item:i,onSave:g})=>{const[t,s]=C.useState({}),[m,h]=C.useState("problem"),[S,p]=C.useState(""),[v,d]=C.useState("");C.useEffect(()=>{l&&i&&(s({...i}),p(i.preliminaryRoute||""),i.preliminaryRoute&&!Pe.includes(i.preliminaryRoute)&&i.preliminaryRoute!=="Other"?(p("Other"),d(i.preliminaryRoute)):i.preliminaryRoute==="Other"&&d(""))},[l,i]);const w=r=>{s(b=>b[r]?{...b,[r]:!1}:{...b,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,[r]:!0})},o=r=>{s(b=>b[r]?{...b,[r]:!1}:{...b,problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,[r]:!0})},O=r=>{s(b=>b[r]?{...b,[r]:!1}:{...b,actionReject:!1,actionRejectSort:!1,actionRework:!1,actionSpecialAcceptance:!1,actionScrap:!1,actionReplace:!1,[r]:!0})},a=r=>{if(r.target.files&&r.target.files.length>0){const u=Array.from(r.target.files).map(x=>new Promise((k,R)=>{const f=new FileReader;f.onloadend=()=>k(f.result),f.onerror=R,f.readAsDataURL(x)}));Promise.all(u).then(x=>{s(k=>({...k,images:[...k.images||[],...x]}))})}},N=r=>{s(b=>({...b,images:(b.images||[]).filter((u,x)=>x!==r)}))},n=()=>{if(!t.problemAnalysis){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Analysis)"});return}if(!S){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"});return}if(S==="Other"&&!v){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ"});return}g({...t,preliminaryDecision:"Return",preliminaryRoute:S==="Other"?v:S}),c()};return l?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full h-full shadow-2xl flex flex-col animate-scale-in",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-100 bg-slate-50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ & ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[i.productCode," - ",i.productName]})]}),e.jsx("button",{onClick:c,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:e.jsx(je,{className:"w-5 h-5 text-slate-500"})})]}),e.jsxs("div",{className:"flex border-b border-slate-200 bg-white sticky top-0 z-10",children:[e.jsxs("button",{onClick:()=>h("problem"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${m==="problem"?"border-red-500 text-red-600 bg-red-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(ze,{className:"w-4 h-4"})," ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö"]}),e.jsxs("button",{onClick:()=>h("analysis"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${m==="analysis"?"border-indigo-500 text-indigo-600 bg-indigo-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Fe,{className:"w-4 h-4"})," ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå & ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à"]}),e.jsxs("button",{onClick:()=>h("action"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${m==="action"?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Yt,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsxs("button",{onClick:()=>h("cost"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors flex items-center justify-center gap-2 ${m==="cost"?"border-amber-500 text-amber-600 bg-amber-50":"border-transparent text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(et,{className:"w-4 h-4"})," ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"]})]}),e.jsxs("div",{className:"p-6 overflow-y-auto flex-1 bg-slate-50/50",children:[m==="problem"&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-red-50 px-4 py-2 border-b border-red-100 font-bold text-red-700 flex items-center gap-2 text-sm",children:[e.jsx(ze,{className:"w-4 h-4"})," ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border-r border-slate-100 pr-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 min-h-[150px] border-2 border-dashed border-slate-300 rounded-lg hover:bg-slate-50 transition-colors relative",children:[e.jsx("input",{type:"file","aria-label":"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",title:"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",multiple:!0,accept:"image/*",onChange:a,className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx(Ct,{className:"w-8 h-8 mb-2 opacity-50"}),e.jsx("span",{className:"text-xs font-bold",children:"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"})]}),t.images&&t.images.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-4",children:t.images.map((r,b)=>e.jsxs("div",{className:"relative group aspect-square bg-slate-100 rounded overflow-hidden border border-slate-200",children:[e.jsx("img",{src:r,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>N(b),"aria-label":"‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",title:"‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",type:"button",className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(De,{className:"w-3 h-3"})})]},b))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"mb-2 font-bold underline text-slate-800 text-sm",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-slate-700 text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemDamaged,onChange:()=>o("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemDamagedInBox,onChange:()=>o("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemLost,onChange:()=>o("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemMixed,onChange:()=>o("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemWrongInv,onChange:()=>o("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemLate,onChange:()=>o("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemDuplicate,onChange:()=>o("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemWrong,onChange:()=>o("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemIncomplete,onChange:()=>o("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemOver,onChange:()=>o("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemWrongInfo,onChange:()=>o("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemShortExpiry,onChange:()=>o("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemTransportDamage,onChange:()=>o("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemAccident,onChange:()=>o("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemPOExpired,onChange:()=>o("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemNoBarcode,onChange:()=>o("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:t.problemNotOrdered,onChange:()=>o("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",checked:t.problemOther,onChange:()=>o("problemOther")})," ",e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-dotted border-slate-400 bg-transparent outline-none flex-1 text-slate-700",value:t.problemOtherText||"",onChange:r=>s({...t,problemOtherText:r.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold underline text-sm text-slate-800",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",value:t.problemDetail||"",onChange:r=>s({...t,problemDetail:r.target.value}),className:"w-full mt-1 p-2 bg-slate-50 border rounded text-sm min-h-[80px]",placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."})]})]})]})]})}),m==="analysis"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"border rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-200 font-bold text-slate-700 flex items-center gap-2 text-sm",children:[e.jsx(Lt,{className:"w-4 h-4 text-indigo-500"})," ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (Problem Analysis)"]}),e.jsxs("div",{className:"p-4 bg-white space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Customer",onChange:()=>s({...t,problemAnalysis:"Customer"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="DestinationCustomer",onChange:()=>s({...t,problemAnalysis:"DestinationCustomer"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Accounting",onChange:()=>s({...t,problemAnalysis:"Accounting"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏ö‡∏±‡∏ç‡∏ä‡∏µ"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Keying",onChange:()=>s({...t,problemAnalysis:"Keying"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Ñ‡∏µ‡∏¢‡πå‡∏ú‡∏¥‡∏î"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Warehouse",onChange:()=>s({...t,problemAnalysis:"Warehouse"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Transport",onChange:()=>s({...t,problemAnalysis:"Transport"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Ç‡∏ô‡∏™‡πà‡∏á"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 hover:bg-slate-50 rounded border border-transparent hover:border-slate-200",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:t.problemAnalysis==="Other",onChange:()=>s({...t,problemAnalysis:"Other"}),className:"w-4 h-4 text-indigo-600"})," ",e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]}),t.problemAnalysis==="Warehouse"&&e.jsx("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"}),e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",value:t.problemAnalysisSub||"",onChange:r=>s({...t,problemAnalysisSub:r.target.value}),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --"}),Oe.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"whCause",checked:t.problemAnalysisCause==="Checker",onChange:()=>s({...t,problemAnalysisCause:"Checker"})})," ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"whCause",checked:t.problemAnalysisCause==="Unloader",onChange:()=>s({...t,problemAnalysisCause:"Unloader"})})," ‡∏•‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]})]})]})]})}),t.problemAnalysis==="Transport"&&e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200 text-sm",children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:t.problemAnalysisSub==="CompanyDriver",onChange:()=>s({...t,problemAnalysisSub:"CompanyDriver"})})," ‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:t.problemAnalysisSub==="JointTransport",onChange:()=>s({...t,problemAnalysisSub:"JointTransport"})})," ‡∏£‡∏ñ‡∏£‡πà‡∏ß‡∏°"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:t.problemAnalysisSub==="Other",onChange:()=>s({...t,problemAnalysisSub:"Other"})})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]})]})]}),t.problemAnalysis==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",value:t.problemAnalysisDetail||"",onChange:r=>s({...t,problemAnalysisDetail:r.target.value}),className:"w-full p-2 border rounded text-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..."})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-indigo-50/30",children:[e.jsxs("div",{className:"bg-indigo-100 px-4 py-2 border-b border-indigo-200 font-bold text-indigo-800 flex items-center gap-2 text-sm",children:[e.jsx(fe,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return Route)"]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsxs("div",{className:"p-3 bg-white rounded border border-indigo-100 text-sm",children:[e.jsxs("label",{className:"block font-bold mb-2",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Pe.map(r=>e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${S===r?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio",name:"route",value:r,checked:S===r,onChange:b=>{p(b.target.value)},className:"hidden"}),r]},r)),e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${S==="Other"?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio",name:"route",value:"Other",checked:S==="Other",onChange:r=>{p(r.target.value)},className:"hidden"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]})]}),S==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",value:v,onChange:r=>d(r.target.value),className:"w-full mt-2 p-2 border rounded text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á..."})]})]})]})]}),m==="action"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-blue-50 px-4 py-2 border-b border-blue-100 font-bold text-blue-700 flex items-center gap-2 text-sm",children:[e.jsx(Yt,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsxs("div",{className:"p-4 bg-white space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-b border-slate-100 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",checked:t.actionReject,onChange:()=>O("actionReject"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",value:t.actionRejectQty,onChange:r=>s({...t,actionRejectQty:Number(r.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",title:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",checked:t.actionRejectSort,onChange:()=>O("actionRejectSort"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-40",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",value:t.actionRejectSortQty,onChange:r=>s({...t,actionRejectSortQty:Number(r.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",checked:t.actionRework,onChange:()=>O("actionRework"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",value:t.actionReworkQty,onChange:r=>s({...t,actionReworkQty:Number(r.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:"}),e.jsx("input",{type:"text","aria-label":"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",value:t.actionReworkMethod,onChange:r=>s({...t,actionReworkMethod:r.target.value}),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",checked:t.actionSpecialAcceptance,onChange:()=>O("actionSpecialAcceptance"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",value:t.actionSpecialAcceptanceQty,onChange:r=>s({...t,actionSpecialAcceptanceQty:Number(r.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö:"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",value:t.actionSpecialAcceptanceReason,onChange:r=>s({...t,actionSpecialAcceptanceReason:r.target.value}),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",title:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",checked:t.actionScrap,onChange:()=>O("actionScrap"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",value:t.actionScrapQty,onChange:r=>s({...t,actionScrapQty:Number(r.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",title:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",checked:t.actionReplace,onChange:()=>O("actionReplace"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",value:t.actionReplaceQty,onChange:r=>s({...t,actionReplaceQty:Number(r.target.value)}),className:"w-20 border rounded px-2 py-1"})]})]})]})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm mt-6",children:[e.jsxs("div",{className:"bg-purple-50 px-4 py-2 border-b border-purple-100 font-bold text-purple-700 flex items-center gap-2 text-sm",children:[e.jsx(Fe,{className:"w-4 h-4"})," ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 bg-white text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold underline text-slate-800",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å:"}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causePackaging,onChange:()=>w("causePackaging")})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causeTransport,onChange:()=>w("causeTransport")})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causeOperation,onChange:()=>w("causeOperation")})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:t.causeEnv,onChange:()=>w("causeEnv")})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("textarea",{"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",value:t.causeDetail||"",onChange:r=>s({...t,causeDetail:r.target.value}),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:"}),e.jsx("textarea",{"aria-label":"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô",title:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô",value:t.preventionDetail||"",onChange:r=>s({...t,preventionDetail:r.target.value}),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô..."})]})]})]})]})]}),m==="cost"&&e.jsx("div",{className:"animate-fade-in",children:e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsxs("div",{className:"bg-amber-50 px-4 py-2 border-b border-amber-100 font-bold text-amber-700 flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4"})," ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Cost Tracking)"]}),e.jsxs("div",{className:"p-4 bg-white",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.hasCost||!1,onChange:r=>s({...t,hasCost:r.target.checked}),className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-500 border-slate-300"}),e.jsx("span",{className:"font-bold text-amber-600",children:"‚ö† ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Has Cost)"})]}),e.jsxs("div",{className:`mb-4 p-4 rounded-lg border flex flex-col gap-3 transition-colors ${t.isFieldSettled?"bg-amber-50 border-amber-200 shadow-sm":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:t.isFieldSettled||!1,onChange:r=>{const b=r.target.checked;s({...t,isFieldSettled:b,preliminaryRoute:b?"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô":t.preliminaryRoute}),b&&p("‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô")},className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-500"}),e.jsx("span",{className:`text-sm font-bold transition-colors ${t.isFieldSettled?"text-amber-800":"text-slate-600 group-hover:text-amber-700"}`,children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Field Settlement)"})]}),t.isFieldSettled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in pl-8 border-l-2 border-amber-200 ml-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (Amount)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white",value:t.fieldSettlementAmount||"",onChange:r=>s({...t,fieldSettlementAmount:parseFloat(r.target.value)||0}),placeholder:"0.00"}),e.jsx("span",{className:"text-sm font-bold text-amber-800",children:"‡∏ö‡∏≤‡∏ó"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (Evidence Ref)"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",title:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white",value:t.fieldSettlementEvidence||"",onChange:r=>s({...t,fieldSettlementEvidence:r.target.value}),placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white",value:t.fieldSettlementName||"",onChange:r=>s({...t,fieldSettlementName:r.target.value}),placeholder:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1",children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text","aria-label":"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white",value:t.fieldSettlementPosition||"",onChange:r=>s({...t,fieldSettlementPosition:r.target.value}),placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢"})]})]})]}),t.hasCost&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in bg-amber-50 p-4 rounded-lg border border-amber-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (Problem Source)"}),e.jsxs("select",{"aria-label":"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",title:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",value:t.problemSource||"",onChange:r=>s({...t,problemSource:r.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"-- ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ --"}),Object.keys(Ut).map(r=>e.jsx("option",{value:r,children:r},r)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",step:"0.01",value:t.costAmount||"",onChange:r=>s({...t,costAmount:Number(r.target.value)}),onBlur:r=>s({...t,costAmount:parseFloat(parseFloat(r.target.value).toFixed(2))}),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsx("input",{type:"text","aria-label":"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",value:t.costResponsible||"",onChange:r=>s({...t,costResponsible:r.target.value}),className:"w-full p-2 border border-slate-300 rounded-lg bg-white text-slate-800 font-bold",placeholder:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á"})]})]})]})]})})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-end gap-3 bg-slate-50",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{onClick:n,className:"px-6 py-2 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 flex items-center gap-2 shadow-sm",children:[e.jsx(qe,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå"]})]})]})}):null},sa=({isOpen:l,onClose:c,onConfirm:i})=>{const[g,t]=C.useState(""),[s,m]=C.useState(""),[h,S]=C.useState(""),[p,v]=C.useState(!1),[d,w]=C.useState(0),[o,O]=C.useState(""),[a,N]=C.useState(""),[n,r]=C.useState("");if(!l)return null;const b=()=>{if(!p&&!g){S("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô");return}if(!p&&g==="Other"&&!s){S("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ");return}i("Return",g==="Other"?s:g,{isFieldSettled:p,amount:d,evidence:o,name:a,position:n}),t(""),m(""),S(""),v(!1),w(0),O(""),N(""),r("")};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white shadow-xl w-full max-w-2xl rounded-2xl overflow-hidden animate-scale-in flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-blue-50 flex-shrink-0",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(fe,{className:"w-6 h-6 text-indigo-600"})," ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return Route)"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto flex-1",children:[h&&e.jsxs("div",{className:"bg-red-50 text-red-600 px-3 py-2 rounded-lg text-sm font-bold border border-red-100 mb-2",children:["‚ö† ",h]}),e.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${p?"bg-amber-50 border-amber-500 shadow-md":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:u=>v(u.target.checked),className:"w-5 h-5 accent-amber-600"}),e.jsx("span",{className:`text-lg font-bold ${p?"text-amber-800":"text-slate-600"}`,children:"üí∞ ‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô / ‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Field Settlement)"})]}),e.jsx("p",{className:"text-xs text-slate-500 ml-8 mt-1",children:"‡∏ï‡∏¥‡πä‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏≤‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô Hub"}),p&&e.jsxs("div",{className:"mt-4 ml-8 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (‡∏ö.)"}),e.jsx("input",{type:"number",value:d||"",onChange:u=>w(Number(u.target.value)),className:"w-full p-3 border border-amber-300 rounded-lg text-sm font-bold focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (Ref.)"}),e.jsx("input",{type:"text",value:o,onChange:u=>O(u.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô / ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",value:a,onChange:u=>N(u.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",value:n,onChange:u=>r(u.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢"})]})]})]}),!p&&e.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Select Route) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[Pe.map(u=>e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200 hover:border-indigo-300 cursor-pointer transition-all hover:shadow-sm",children:[e.jsx("input",{type:"radio",name:"route",value:u,checked:g===u,onChange:x=>{t(x.target.value),S("")},className:"w-4 h-4 text-indigo-600"}),e.jsx("span",{className:"font-medium",children:u})]},u)),e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200 hover:border-indigo-300 cursor-pointer transition-all hover:shadow-sm",children:[e.jsx("input",{type:"radio",name:"route",value:"Other",checked:g==="Other",onChange:u=>{t(u.target.value),S("")},className:"w-4 h-4 text-indigo-600"}),e.jsx("span",{className:"font-medium",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]}),g==="Other"&&e.jsx("input",{type:"text",value:s,onChange:u=>m(u.target.value),className:"w-full p-3 mt-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",autoFocus:!0})]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-between items-center gap-3 flex-shrink-0",children:[e.jsx("button",{onClick:c,className:"px-6 py-2.5 rounded-xl border border-slate-300 text-slate-600 font-bold hover:bg-slate-100 transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"}),e.jsx("button",{onClick:b,className:`px-8 py-2.5 rounded-xl text-white font-bold shadow-lg transition-all flex items-center gap-2 ${p?"bg-amber-600 hover:bg-amber-700 shadow-amber-200":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200"}`,children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)"})]})]})})},la=({formData:l,updateField:c,isCustomBranch:i,setIsCustomBranch:g})=>e.jsxs("div",{className:"bg-slate-50 p-6 rounded-xl border border-slate-200 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô (To Dept)"}),e.jsx("input",{type:"text","aria-label":"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô",title:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô",value:l.toDept||"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",onChange:t=>c("toDept",t.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô",required:!0,value:l.date,onChange:t=>c("date",t.target.value),className:"w-full p-2.5 pl-10 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm"}),e.jsx(We,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤ (Copy To)"}),e.jsx("input",{type:"text","aria-label":"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ñ‡∏∂‡∏á",title:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ñ‡∏∂‡∏á",value:l.copyTo||"",onChange:t=>c("copyTo",t.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏≥‡πÄ‡∏ô‡∏≤..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),i?e.jsxs("div",{className:"flex gap-2 animate-fade-in relative",children:[e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏≠‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏≠‡∏á",required:!0,value:l.branch,onChange:t=>c("branch",t.target.value),className:"w-full p-2.5 pl-10 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏Ç‡∏≤...",autoFocus:!0}),e.jsx(Be,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"}),e.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-xs text-blue-600 hover:underline absolute right-3 top-3 bg-white px-2",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",required:!0,value:l.branch,onChange:t=>{t.target.value==="Other"?g(!0):c("branch",t.target.value)},className:"w-full p-2.5 pl-10 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm appearance-none",children:[e.jsx("option",{value:"",disabled:!0,children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),Oe.map(t=>e.jsx("option",{value:t,children:t},t)),e.jsx("option",{value:"Other",children:"+ ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏≠‡∏á..."})]}),e.jsx(Be,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï (PO No.)"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠",value:l.poNo||"",onChange:t=>c("poNo",t.target.value),className:"w-full p-2.5 bg-white border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-slate-700 shadow-sm",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà PO..."})]})]})]}),jt=({label:l,value:c,onChange:i,options:g,placeholder:t,required:s})=>{const[m,h]=C.useState(!1),S=C.useRef(null);C.useEffect(()=>{function v(d){S.current&&!S.current.contains(d.target)&&h(!1)}return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const p=g.filter(v=>v.toLowerCase().includes((c||"").toLowerCase()));return e.jsxs("div",{className:"relative",ref:S,children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[l," ",s&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",value:c,onChange:v=>{i(v.target.value),h(!0)},onFocus:()=>h(!0),placeholder:t,required:s}),m&&p.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:p.map((v,d)=>e.jsx("button",{type:"button",className:"w-full text-left px-4 py-2 text-sm hover:bg-blue-50 text-slate-700 block border-b border-slate-50 last:border-0",onClick:()=>{i(v),h(!1)},children:v},d))})]})},aa=({formData:l,updateField:c,uniqueCustomers:i,uniqueDestinations:g,uniqueFounders:t})=>e.jsxs("div",{className:"border border-slate-200 rounded-xl p-6 bg-white shadow-sm relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500 rounded-tl-xl rounded-bl-xl"}),e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2",children:[e.jsx(Bt,{className:"w-5 h-5 text-blue-500"})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (Header Info)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Founder)"}),e.jsx(jt,{label:"",value:l.founder||"",onChange:s=>c("founder",s),options:t,placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer Name)"}),e.jsx(jt,{label:"",value:l.customerName||"",onChange:s=>c("customerName",s),options:i,placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (Destination / Site) "}),e.jsx(jt,{label:"",value:l.destinationCustomer||"",onChange:s=>c("destinationCustomer",s),options:g,placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á..."})]})]})]}),ra=({formData:l,updateField:c,uniqueProductCodes:i,uniqueProductNames:g})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref No.) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á",required:!0,value:l.refNo||"",onChange:t=>c("refNo",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-mono",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Neo Ref No. (Optional)"}),e.jsx("input",{type:"text","aria-label":"Neo Ref No.",title:"Neo Ref No.",value:l.neoRefNo||"",onChange:t=>c("neoRefNo",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-mono",placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà Neo..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Code)"}),e.jsx(jt,{label:"",value:l.productCode||"",onChange:t=>c("productCode",t),options:i})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Name)"}),e.jsx(jt,{label:"",value:l.productName||"",onChange:t=>c("productName",t),options:g})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",required:!0,min:"1",value:l.quantity||"",onChange:t=>{const s=parseFloat(t.target.value)||0;c("quantity",s);const m=l.pricePerUnit||0;c("priceBill",s*m)},className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-bold text-blue-600 text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢",value:l.unit||"‡∏ä‡∏¥‡πâ‡∏ô",onChange:t=>c("unit",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all text-center"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-blue-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Price/Unit)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number","aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",step:"0.01",value:l.pricePerUnit||"",onChange:t=>{const s=parseFloat(t.target.value)||0;c("pricePerUnit",s);const m=l.quantity||0;c("priceBill",m*s)},className:"w-full p-2.5 pl-9 bg-white border border-blue-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all font-medium text-blue-700",placeholder:"0.00"}),e.jsx(et,{className:"w-4 h-4 text-blue-500 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("input",{type:"date","aria-label":"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",title:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",value:l.expiryDate||"",onChange:t=>c("expiryDate",t.target.value),className:"w-full p-2.5 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏•‡∏£‡∏ß‡∏° (Total Price Bill)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number","aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏•‡∏£‡∏ß‡∏°",title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏•‡∏£‡∏ß‡∏°",step:"0.01",value:l.priceBill||0,readOnly:!0,className:"w-full p-2.5 pl-9 bg-slate-100 border border-slate-300 rounded text-sm outline-none font-bold text-slate-700",placeholder:"Auto-calculated"}),e.jsx(et,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ (Price Sell)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number","aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢",title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢",step:"0.01",value:l.priceSell||"",onChange:t=>c("priceSell",parseFloat(t.target.value)),onBlur:t=>c("priceSell",parseFloat(parseFloat(t.target.value).toFixed(2))),className:"w-full p-2.5 pl-9 bg-slate-50 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-blue-500 transition-all",placeholder:"0.00"}),e.jsx(et,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})]})]})]}),na=["‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå","‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏•‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏≠‡∏∑‡πà‡∏ô‡πÜ"],oa=({formData:l,updateField:c,handleCheckboxToggle:i,handleImageUpload:g,handleRemoveImage:t})=>e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-red-500"})," ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 bg-white grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"border-r border-slate-200 pr-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 min-h-[200px] border-2 border-dashed border-slate-300 rounded-lg hover:bg-slate-50 transition-colors relative",children:[e.jsx("input",{type:"file","aria-label":"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",title:"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",multiple:!0,accept:"image/*",onChange:g,className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx(Ct,{className:"w-12 h-12 mb-2 opacity-50"}),e.jsx("span",{className:"text-sm font-bold",children:"‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"}),e.jsx("span",{className:"text-xs text-slate-400 mt-1",children:"‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà"})]}),l.images&&l.images.length>0&&e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-4",children:l.images.map((s,m)=>e.jsxs("div",{className:"relative group aspect-square bg-slate-100 rounded overflow-hidden border border-slate-200",children:[e.jsx("img",{src:s,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>t(m),"aria-label":"‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",title:"‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û",type:"button",className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(De,{className:"w-3 h-3"})})]},m))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"mb-4 bg-slate-50 p-3 rounded border border-slate-200",children:[e.jsxs("div",{className:"mb-3 font-bold text-slate-800 text-sm border-b border-slate-200 pb-2",children:["‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (Problem Source) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-3 gap-x-2 text-sm text-slate-700",children:[[{value:"Customer",label:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Source Customer)"},{value:"DestinationCustomer",label:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination Customer)"},{value:"Accounting",label:"‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Accounting)"},{value:"Keying",label:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ñ‡∏µ‡∏¢‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î (Keying)"}].map(s=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",required:!0,checked:l.problemAnalysis===s.value,onChange:()=>c("problemAnalysis",s.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.label]},s.value)),e.jsxs("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors mb-2",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:l.problemAnalysis==="Warehouse",onChange:()=>c("problemAnalysis","Warehouse"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),"‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Warehouse)"]}),l.problemAnalysis==="Warehouse"&&e.jsxs("div",{className:"ml-6 p-3 bg-slate-50 border border-slate-200 rounded grid grid-cols-1 md:grid-cols-2 gap-3 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"}),e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",className:"w-full border rounded p-1.5 text-sm",value:l.problemAnalysisSub||"",onChange:s=>c("problemAnalysisSub",s.target.value),children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),Oe.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ (Cause)"}),e.jsx("div",{className:"flex flex-wrap gap-2 text-sm mt-1",children:na.map(s=>e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"whCause",checked:l.problemAnalysisCause===s,onChange:()=>c("problemAnalysisCause",s)}),s]},s))}),l.problemAnalysisCause==="‡∏≠‡∏∑‡πà‡∏ô‡πÜ"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-slate-400 outline-none text-sm w-full mt-1",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏...",value:l.problemAnalysisDetail||"",onChange:s=>c("problemAnalysisDetail",s.target.value)})]})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors mb-2",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:l.problemAnalysis==="Transport",onChange:()=>c("problemAnalysis","Transport"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transport)"]}),l.problemAnalysis==="Transport"&&e.jsxs("div",{className:"ml-6 p-3 bg-slate-50 border border-slate-200 rounded animate-fade-in",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 mb-1 block",children:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsxs("div",{className:"flex gap-4 mb-2",children:[e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"transType",checked:l.problemAnalysisSub==="CompanyDriver",onChange:()=>c("problemAnalysisSub","CompanyDriver")})," ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"transType",checked:l.problemAnalysisSub==="JointTransport",onChange:()=>c("problemAnalysisSub","JointTransport")})," ‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏°"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"transType",checked:l.problemAnalysisSub==="Other",onChange:()=>c("problemAnalysisSub","Other")})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]})]}),l.problemAnalysisSub==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-slate-400 outline-none text-sm w-full",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:l.problemAnalysisDetail||"",onChange:s=>c("problemAnalysisDetail",s.target.value)})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2 lg:col-span-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 transition-colors",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:l.problemAnalysis==="Other",onChange:()=>c("problemAnalysis","Other"),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]}),l.problemAnalysis==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-dotted border-slate-400 bg-transparent outline-none flex-1 text-slate-700 ml-2",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏...",value:l.problemAnalysisDetail||"",onChange:s=>c("problemAnalysisDetail",s.target.value)})]})})]})]}),e.jsxs("div",{className:"mb-2 font-bold underline text-slate-800 text-sm",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-slate-700 text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemDamaged,onChange:()=>i("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemDamagedInBox,onChange:()=>i("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemLost,onChange:()=>i("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemMixed,onChange:()=>i("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemWrongInv,onChange:()=>i("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemLate,onChange:()=>i("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemDuplicate,onChange:()=>i("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemWrong,onChange:()=>i("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemIncomplete,onChange:()=>i("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemOver,onChange:()=>i("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemWrongInfo,onChange:()=>i("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemShortExpiry,onChange:()=>i("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemTransportDamage,onChange:()=>i("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemAccident,onChange:()=>i("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemPOExpired,onChange:()=>i("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemNoBarcode,onChange:()=>i("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:l.problemNotOrdered,onChange:()=>i("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",checked:l.problemOther,onChange:()=>i("problemOther")}),e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-dotted border-slate-400 bg-transparent outline-none flex-1 text-slate-700",value:l.problemOtherText||"",onChange:s=>c("problemOtherText",s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold underline text-sm text-slate-800",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",value:l.problemDetail||"",onChange:s=>c("problemDetail",s.target.value),className:"w-full mt-1 p-2 bg-slate-50 border rounded text-sm min-h-[80px]",placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..."})]})]})]})]}),ia=({formData:l,updateField:c,handleCheckboxToggle:i})=>{const g=["actionReject","actionRejectSort","actionRework","actionSpecialAcceptance","actionScrap","actionReplace"],t=s=>{const m=g.filter(h=>h!==s);i(s,m)};return e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden mt-6",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(Yt,{className:"w-4 h-4 text-blue-500"})," ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsxs("div",{className:"p-4 bg-white space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-b border-slate-100 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",checked:l.actionReject,onChange:()=>t("actionReject"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",value:l.actionRejectQty,onChange:s=>c("actionRejectQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",title:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",checked:l.actionRejectSort,onChange:()=>t("actionRejectSort"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-40",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",value:l.actionRejectSortQty,onChange:s=>c("actionRejectSortQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",checked:l.actionRework,onChange:()=>t("actionRework"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",value:l.actionReworkQty,onChange:s=>c("actionReworkQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:"}),e.jsx("input",{type:"text","aria-label":"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",value:l.actionReworkMethod,onChange:s=>c("actionReworkMethod",s.target.value),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 border-b border-slate-100 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",checked:l.actionSpecialAcceptance,onChange:()=>t("actionSpecialAcceptance"),className:"w-4 h-4 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("span",{className:"font-bold w-32",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",value:l.actionSpecialAcceptanceQty,onChange:s=>c("actionSpecialAcceptanceQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-600",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö:"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",value:l.actionSpecialAcceptanceReason,onChange:s=>c("actionSpecialAcceptanceReason",s.target.value),className:"flex-1 border-b border-dotted border-slate-400 outline-none px-1"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",title:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",checked:l.actionScrap,onChange:()=>t("actionScrap"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",value:l.actionScrapQty,onChange:s=>c("actionScrapQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",title:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",checked:l.actionReplace,onChange:()=>t("actionReplace"),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold w-32",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà",value:l.actionReplaceQty,onChange:s=>c("actionReplaceQty",Number(s.target.value)),className:"w-20 border rounded px-2 py-1"})]})]})]})]})]})},ca=({formData:l,updateField:c,handleCheckboxToggle:i})=>{const g=t=>{i(t,[])};return e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden mt-6",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-4 h-4 text-purple-500"})," ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"]}),e.jsxs("div",{className:"p-4 bg-white text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-bold underline text-slate-800",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å:"}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:l.causePackaging,onChange:()=>g("causePackaging")})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:l.causeTransport,onChange:()=>g("causeTransport")})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:l.causeOperation,onChange:()=>g("causeOperation")})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-4",children:[e.jsx("input",{type:"checkbox",checked:l.causeEnv,onChange:()=>g("causeEnv")})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("textarea",{value:l.causeDetail||"",onChange:t=>c("causeDetail",t.target.value),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-bold text-slate-700 block mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:"}),e.jsx("textarea",{value:l.preventionDetail||"",onChange:t=>c("preventionDetail",t.target.value),className:"w-full p-2 bg-slate-50 border rounded min-h-[60px]",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô..."})]})]})]})]})},da=({formData:l,updateField:c})=>e.jsxs("div",{className:"border-2 border-slate-300 rounded-xl overflow-hidden mt-6",children:[e.jsxs("div",{className:"bg-slate-100 px-4 py-2 border-b border-slate-300 font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-red-500"})," ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Cost Tracking)"]}),e.jsxs("div",{className:"p-4 bg-white",children:[e.jsxs("label",{className:"flex items-center gap-2 mb-4 cursor-pointer",children:[e.jsx("input",{type:"checkbox","aria-label":"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",checked:l.hasCost||!1,onChange:i=>c("hasCost",i.target.checked),className:"w-5 h-5 text-red-600 rounded focus:ring-red-500 border-slate-300"}),e.jsx("span",{className:"font-bold text-red-600",children:"‚ö† ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Has Cost)"})]}),e.jsxs("div",{className:`mb-4 p-4 rounded-lg border flex flex-col gap-3 transition-colors ${l.isFieldSettled?"bg-amber-50 border-amber-200 shadow-sm":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",checked:l.isFieldSettled||!1,onChange:i=>{const g=i.target.checked;c("isFieldSettled",g),g&&c("preliminaryRoute","‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô")},className:"w-5 h-5 text-amber-600 rounded focus:ring-amber-500"}),e.jsx("span",{className:`text-sm font-bold transition-colors ${l.isFieldSettled?"text-amber-800":"text-slate-600 group-hover:text-amber-700"}`,children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Field Settlement)"})]}),l.isFieldSettled&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in pl-8 border-l-2 border-amber-200 ml-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1 uppercase tracking-wider",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (Amount)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white font-bold text-amber-700 shadow-sm",value:l.fieldSettlementAmount||"",onChange:i=>c("fieldSettlementAmount",parseFloat(i.target.value)||0),placeholder:"0.00"}),e.jsx("span",{className:"text-sm font-bold text-amber-800",children:"‡∏ö‡∏≤‡∏ó"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1 uppercase tracking-wider",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (Evidence Ref)"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",title:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white placeholder-amber-300",value:l.fieldSettlementEvidence||"",onChange:i=>c("fieldSettlementEvidence",i.target.value),placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏• / ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1 uppercase tracking-wider",children:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white placeholder-amber-300",value:l.fieldSettlementName||"",onChange:i=>c("fieldSettlementName",i.target.value),placeholder:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-amber-900 mb-1 uppercase tracking-wider",children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text","aria-label":"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",className:"w-full p-2 text-sm border border-amber-300 rounded focus:ring-2 focus:ring-amber-500 bg-white placeholder-amber-300",value:l.fieldSettlementPosition||"",onChange:i=>c("fieldSettlementPosition",i.target.value),placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢"})]})]})]}),l.hasCost&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in bg-red-50 p-4 rounded-lg border border-red-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢ (Problem Source)"}),e.jsxs("select",{"aria-label":"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",title:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",value:l.problemSource||"",onChange:i=>c("problemSource",i.target.value),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"-- ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ --"}),Object.keys(Ut).map(i=>e.jsx("option",{value:i,children:i},i)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",step:"0.01",value:l.costAmount||"",onChange:i=>c("costAmount",Number(i.target.value)),onBlur:i=>c("costAmount",parseFloat(parseFloat(i.target.value).toFixed(2))),className:"w-full p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsx("input",{type:"text","aria-label":"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",value:l.costResponsible||"",onChange:i=>c("costResponsible",i.target.value),className:"w-full p-2 border border-slate-300 rounded-lg bg-white text-slate-800 font-bold",placeholder:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏≠‡∏á"})]})]})]})]}),xa=({requestItems:l,handleRemoveItem:c,handleAnalyzeClick:i})=>e.jsxs("div",{className:"mt-8 border border-slate-200 rounded-xl overflow-hidden shadow-sm",children:[e.jsx("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200 flex justify-between items-center",children:e.jsxs("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:[e.jsx(Ol,{className:"w-5 h-5"})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (",l.length,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-100 text-slate-600 font-bold uppercase text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"#"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Source)"}),e.jsx("th",{className:"px-4 py-3",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("th",{className:"px-4 py-3 w-10",children:"‡∏•‡∏ö"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:l.map((g,t)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>i(t),children:[e.jsx("td",{className:"px-4 py-3 text-slate-500",children:t+1}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-bold text-slate-800",children:g.productName}),e.jsx("div",{className:"text-xs text-slate-500",children:g.productCode})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-mono font-bold bg-slate-100 px-2 py-1 rounded",children:[g.quantity," ",g.unit]})}),e.jsx("td",{className:"px-4 py-3",children:g.problemAnalysis?e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-bold bg-purple-100 text-purple-700",children:g.problemAnalysis}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsxs("td",{className:"px-4 py-3 max-w-[200px] truncate text-slate-600",children:[g.problemDetail||g.reason||"-",g.problemDamaged&&e.jsx("span",{className:"ml-2 text-xs bg-red-100 text-red-600 px-1 rounded",children:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î"}),g.problemWrong&&e.jsx("span",{className:"ml-2 text-xs bg-orange-100 text-orange-600 px-1 rounded",children:"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"})]}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("button",{type:"button","aria-label":"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",title:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",onClick:s=>{s.stopPropagation(),s.preventDefault(),c(t)},className:"text-red-500 hover:bg-red-50 p-1.5 rounded-lg transition-colors",children:e.jsx(De,{className:"w-4 h-4"})})})]},t))}),e.jsx("tfoot",{className:"bg-slate-50 border-t border-slate-200 font-bold text-slate-700",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:"px-4 py-3 text-right",children:"‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),e.jsxs("td",{className:"px-4 py-3 bg-yellow-50 text-yellow-800",children:[l.reduce((g,t)=>g+(t.quantity||0),0)," ‡∏´‡∏ô‡πà‡∏ß‡∏¢"]}),e.jsx("td",{colSpan:3})]})})]})})]}),ma=({formData:l,requestItems:c,isCustomBranch:i,uniqueCustomers:g,uniqueDestinations:t,uniqueFounders:s,uniqueProductCodes:m,uniqueProductNames:h,initialData:S,setFormData:p,setIsCustomBranch:v,setRequestItems:d,handleAddItem:w,handleRemoveItem:o,handleImageUpload:O,handleRemoveImage:a,handleRequestSubmit:N})=>{const[n,r]=C.useState(!1),[b,u]=C.useState(!1),[x,k]=C.useState(null);te.useEffect(()=>{p(G=>({...G,documentType:"NCR"}))},[p]);const[R,f]=C.useState(!1),[$,A]=C.useState(null),[M,B]=C.useState(null),E=(G,D)=>{p(Q=>({...Q,[G]:D}))},P=(G,D=[])=>{p(Q=>{const q=Q[G],ee={[G]:!q};return!q&&D.length>0&&D.forEach(ae=>ee[ae]=!1),{...Q,...ee}})},F=G=>{if(G.preventDefault(),!l.quantity||l.quantity<=0){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (> 0)"});return}k(l),u(!0)},le=(G,D,Q)=>{if(x){const q={...x,preliminaryDecision:G,preliminaryRoute:D||"",isFieldSettled:(Q==null?void 0:Q.isFieldSettled)||!1,fieldSettlementAmount:(Q==null?void 0:Q.amount)||0,fieldSettlementEvidence:(Q==null?void 0:Q.evidence)||"",fieldSettlementName:(Q==null?void 0:Q.name)||"",fieldSettlementPosition:(Q==null?void 0:Q.position)||""};w(null,q),k(null)}u(!1)},Y=()=>{if(c.length===0){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"});return}if(l.productName||l.productCode){T.fire({icon:"warning",title:"‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà",text:"‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£' ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô"});return}const G=c.filter(D=>!D.problemAnalysis);if(G.length>0){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏î‡πâ: ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Problem Source) ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${G.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`});return}r(!0)},me=G=>{A(G),B(c[G]),f(!0)},se=G=>{$!==null&&d(D=>{const Q=[...D];return Q[$]=G,Q}),f(!1),A(null),B(null)};return e.jsxs(e.Fragment,{children:[e.jsx(ta,{isOpen:R,onClose:()=>f(!1),item:M,onSave:se}),e.jsx(Zl,{isOpen:n,onClose:()=>r(!1),onConfirm:()=>{r(!1),N()},itemCount:c.length}),e.jsx("div",{className:"h-full overflow-auto p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-slate-200 shadow-sm p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-slate-100 pb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 text-indigo-600",children:e.jsx(Ce,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"1. ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (NCR / Return Request)"}),e.jsx("p",{className:"text-sm text-slate-500",children:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ NCR ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏"})]}),(S==null?void 0:S.ncrNumber)&&e.jsxs("div",{className:"ml-auto bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-bold border border-orange-200",children:["Ref NCR: ",S.ncrNumber]})]}),e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsx(la,{formData:l,updateField:E,isCustomBranch:i,setIsCustomBranch:v}),e.jsx(aa,{formData:l,updateField:E,uniqueCustomers:g,uniqueDestinations:t,uniqueFounders:s}),e.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex items-center justify-between",children:[e.jsxs("h4",{className:"flex items-center gap-2 font-bold text-slate-800",children:[e.jsx(Xe,{className:"w-5 h-5 text-indigo-500"})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Item Details - NCR)"]}),e.jsxs("div",{className:"text-xs text-slate-500 bg-white px-3 py-1 rounded-full border border-slate-200 shadow-sm",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ",c.length+1]})]}),e.jsxs("div",{className:"p-6 bg-white space-y-6",children:[e.jsx(ra,{formData:l,updateField:E,uniqueProductCodes:m,uniqueProductNames:h}),e.jsx(oa,{formData:l,updateField:E,handleCheckboxToggle:P,handleImageUpload:O,handleRemoveImage:a}),e.jsx(ia,{formData:l,updateField:E,handleCheckboxToggle:P})]})]}),e.jsx(ca,{formData:l,updateField:E,handleCheckboxToggle:P}),e.jsx(da,{formData:l,updateField:E}),e.jsx("div",{className:"flex justify-center mt-8 mb-4 py-4 bg-slate-50 rounded-xl border border-dashed border-slate-300",children:e.jsxs("button",{type:"submit",className:"w-full md:w-2/3 px-6 py-4 bg-indigo-600 text-white rounded-xl font-bold text-lg shadow-lg hover:bg-indigo-700 hover:shadow-xl transition-all flex items-center justify-center gap-3 active:scale-95",children:[e.jsx(Dl,{className:"w-6 h-6"})," ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á (Add Item)"]})}),c.length>0&&e.jsx(xa,{requestItems:c,handleRemoveItem:o,handleAnalyzeClick:me}),e.jsx("div",{className:"flex justify-end items-center pt-4 border-t border-slate-100 mt-6",children:e.jsxs("button",{type:"button",onClick:Y,className:"px-8 py-3 rounded-xl text-white font-bold shadow-lg flex items-center gap-2 transform hover:scale-105 transition-all bg-indigo-600 hover:bg-indigo-700",children:[e.jsx(qe,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ NCR (Save)"]})})]})]})}),e.jsx(sa,{isOpen:b,onClose:()=>{u(!1),k(null)},onConfirm:le})]})},$s=({onComplete:l})=>{const{items:c,updateReturnRecord:i,deleteReturnRecord:g,getNextCollectionNumber:t}=Se(),[s,m]=te.useState([]),[h,S]=te.useState(!1),[p,v]=te.useState(""),[d,w]=te.useState(new Set),o=te.useMemo(()=>c.filter(x=>{if(x.status!=="Requested")return!1;if(x.documentType!=="LOGISTICS"){if(x.documentType==="NCR"||x.ncrNumber)return!1}return!(p&&x.branch!==p)}),[c,p]),O=te.useMemo(()=>{const x={};return o.forEach(k=>{const f=(k.documentNo?k.documentNo.trim():`_NO_DOC_${k.id}`).toLowerCase();x[f]||(x[f]=[]),x[f].push(k)}),Object.entries(x).map(([k,R])=>({key:k,items:R,rep:R[0]})).sort((k,R)=>{const f=new Date(k.rep.date||0).getTime();return new Date(R.rep.date||0).getTime()-f})},[o]),a=x=>{const k=new Set(d);k.has(x)?k.delete(x):k.add(x),w(k)},N=x=>{const k=x.map(f=>f.id),R=k.every(f=>s.includes(f));m(R?f=>f.filter($=>!k.includes($)):f=>Array.from(new Set([...f,...k])))},n=async(x,k,R)=>{for(const f of x)await i(f.id,{[k]:R})},r=async()=>{if(s.length===0||h)return;const x=c.filter(f=>s.includes(f.id)),k=Array.from(new Set(x.map(f=>(f.documentNo||"").trim()))).filter(Boolean);if(k.length>1){await T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ",html:`‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å: <b>1 COL (‡πÉ‡∏ö‡∏á‡∏≤‡∏ô) ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö 1 ‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R) ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</b><br/><br/>(‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡∏à‡∏≤‡∏Å ${k.length} ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£: ${k.join(", ")})<br/>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏Ç R ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô`,confirmButtonText:"‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡πâ‡∏ß"});return}const{value:R}=await T.fire({title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Create Job)",html:`
                <div style="text-align:left;">
                    <label style="display:block; font-weight:bold; margin-bottom:5px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Date)</label>
                    <input id="swal-job-date" type="date" class="swal2-input" style="margin:0; width:100%;" value="${new Date().toISOString().split("T")[0]}">
                </div>
            `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#2563eb",preConfirm:()=>{const f=document.getElementById("swal-job-date").value;return f||T.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"),f}});if(R){S(!0);try{const f=await t(),$={id:f,driverId:"Unspecified",vehiclePlate:"Unspecified",linkedRmaIds:s,pickupLocation:{name:"Multiple Customers",address:"Multiple Addresses",contactName:"-",contactPhone:"-"},pickupDate:R,packageSummary:{totalBoxes:1,description:"Batch Collection"},status:"ASSIGNED",createdDate:new Date().toISOString()};await vt(we(ye,`collection_orders/${f}`),$);for(const A of s)await i(A,{status:"COL_JobAccepted",collectionOrderId:f,dateJobAccepted:new Date().toISOString()});await T.fire({icon:"success",title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:`‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß: ${f}`,timer:2e3,showConfirmButton:!1}),m([]),l&&l()}catch(f){console.error("Error creating job:",f),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà",confirmButtonColor:"#d33"})}finally{S(!1)}}},b=async x=>{if(h)return;const{value:k}=await T.fire({title:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Undo)",input:"password",inputLabel:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password)",inputPlaceholder:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(k==="1234"&&(await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?",text:"‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏ñ‡∏≤‡∏ß‡∏£ ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Delete)"})).isConfirmed){S(!0);try{await g(x),await T.fire({icon:"success",title:"‡∏•‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}catch{T.fire("Error","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏î‡πâ","error")}finally{S(!1)}}},u=async()=>{if(s.length===0||h)return;const{value:x}=await T.fire({title:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",input:"password",inputLabel:`‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password) - ‡∏•‡∏ö ${s.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,inputPlaceholder:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(x==="1234"&&(await T.fire({title:`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö ${s.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö (Delete All)"})).isConfirmed){S(!0);try{let R=0;for(const f of s)await g(f)&&R++;await T.fire({icon:"success",title:`‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ${R} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,timer:2e3,showConfirmButton:!1}),m([])}catch{T.fire("Error","‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","error")}finally{S(!1)}}};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Lt,{className:"w-6 h-6 text-blue-600"})," 2. ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Receive Job)"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:p,onChange:x=>v(x.target.value),className:"p-2 border border-slate-300 rounded-lg text-sm text-slate-700 font-medium outline-none focus:ring-2 focus:ring-blue-500 bg-white shadow-sm","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",children:[e.jsx("option",{value:"",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (All Branches)"}),Oe.map(x=>e.jsx("option",{value:x,children:x},x))]}),s.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:u,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"})," ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (",s.length,")"]}),e.jsxs("button",{onClick:r,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (",s.length,")"]})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b text-center w-12",children:"#"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (DATE)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (BRANCH)"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç INVOICE"}),e.jsx("th",{className:"p-3 border-b min-w-[130px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL (COL NO)"}),e.jsx("th",{className:"p-3 border-b min-w-[300px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (PRODUCT) - EXPAND (+)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:O.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Lt,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô"})]})})}):O.map((x,k)=>{const{rep:R,items:f,key:$}=x,A=d.has($),M=f.every(E=>s.includes(E.id)),B=f.some(E=>s.includes(E.id));return e.jsxs("tr",{className:`hover:bg-slate-50 transition-colors text-xs align-top ${M?"bg-blue-50/30":""}`,children:[e.jsx("td",{className:"p-3 text-center border-r border-slate-100 bg-slate-50/30",children:e.jsx("input",{type:"checkbox",checked:M,"aria-label":`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${R.documentNo||$}`,title:`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${R.documentNo||$}`,ref:E=>{E&&(E.indeterminate=B&&!M)},onChange:()=>N(f),className:"accent-blue-600 w-4 h-4 cursor-pointer"})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-medium text-slate-700",children:R.date?new Date(R.date).toLocaleDateString("th-TH"):"-"}),e.jsxs("td",{className:"p-3 border-r border-slate-100",children:[e.jsxs("select",{onChange:E=>n(f,"branch",E.target.value),value:R.branch||"","aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",className:"w-full bg-transparent border-none p-0 font-bold text-slate-700 focus:ring-0 text-xs cursor-pointer truncate",children:[e.jsx("option",{value:"",disabled:!0,children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤"}),Oe.map(E=>e.jsx("option",{value:E,children:E},E))]}),f.length>1&&e.jsxs("div",{className:"text-[9px] text-slate-400 mt-1",children:["*‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó ",f.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:R.customerName,children:R.customerName||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:R.destinationCustomer,children:R.destinationCustomer||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-500",children:e.jsx("input",{type:"text",disabled:!0,value:R.invoiceNo||"-","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà Invoice",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà Invoice",placeholder:"Invoice NO",className:"w-full bg-transparent border-none p-0 text-xs truncate"})}),e.jsxs("td",{className:"p-3 border-r border-slate-100",children:[e.jsx("input",{type:"text",value:R.documentNo||"",onChange:E=>n(f,"documentNo",E.target.value),className:"w-full bg-transparent border-b border-dashed border-slate-300 focus:border-blue-500 outline-none text-blue-600 font-bold px-1 py-0.5",placeholder:"R...","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ R",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ R"}),f.length>1&&e.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 px-1.5 py-0.5 rounded bg-blue-100 text-blue-700 text-[9px] font-bold",children:[e.jsx(st,{className:"w-3 h-3"})," ",f.length," Items"]})]}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3 text-slate-400"}),R.controlDate?new Date(R.controlDate).toLocaleDateString("th-TH"):"-"]})}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:e.jsx("input",{type:"text",value:R.tmNo||"",onChange:E=>n(f,"tmNo",E.target.value),className:"w-full bg-transparent border-b border-dashed border-slate-300 focus:border-blue-500 outline-none text-slate-700 font-mono px-1 py-0.5",placeholder:"TM...","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° TM",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° TM"})}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:R.collectionOrderId?e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded text-[10px] font-mono border border-indigo-100 block w-fit",children:R.collectionOrderId}):e.jsx("span",{className:"text-slate-300",children:"-"})}),e.jsx("td",{className:"p-3 border-r border-slate-100 relative",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-800 text-xs",children:f[0].productCode||""}),e.jsx("div",{className:"text-slate-600 text-[11px] leading-tight",children:f[0].productName||"-"}),e.jsxs("div",{className:"text-slate-500 text-[10px] font-medium bg-slate-100 w-fit px-1.5 py-0.5 rounded mt-0.5",children:["Qty: ",e.jsxs("span",{className:"text-slate-900 font-bold",children:[f[0].quantity," ",f[0].unit]})]})]}),e.jsx("button",{onClick:E=>{E.stopPropagation(),b(f[0].id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ","aria-label":"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ",children:e.jsx(je,{className:"w-3 h-3"})})]}),f.length>1&&e.jsxs("button",{onClick:()=>a($),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                                ${A?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-indigo-100"}`,"aria-label":A?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",title:A?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",children:[A?e.jsx(Ue,{className:"w-3 h-3"}):e.jsx(Qe,{className:"w-3 h-3"}),A?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Collapse)":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${f.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),A&&f.length>1&&e.jsx("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:f.slice(1).map((E,P)=>e.jsxs("div",{className:"flex justify-between items-start pl-2 border-l-2 border-indigo-200 group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-700 text-xs",children:E.productCode||""}),e.jsx("div",{className:"text-slate-500 text-[11px]",children:E.productName||"-"}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["Qty: ",e.jsxs("b",{children:[E.quantity," ",E.unit]})]})]}),e.jsx("button",{onClick:F=>{F.stopPropagation(),b(E.id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ","aria-label":"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ",children:e.jsx(je,{className:"w-3 h-3"})})]},E.id))})]})})]},$)})})]})})})]})},Ps=({onComplete:l})=>{const{items:c,updateReturnRecord:i}=Se(),[g,t]=te.useState(!1),[s,m]=te.useState(""),[h,S]=te.useState([]),[p,v]=te.useState(new Set),d=te.useMemo(()=>c.filter(n=>!(!(n.status==="COL_JobAccepted"||n.status==="JobAccepted")||!(n.documentType==="LOGISTICS")&&(n.documentType==="NCR"||n.ncrNumber)||s&&n.branch!==s)),[c,s]),w=te.useMemo(()=>{const n={};return d.forEach(r=>{const u=(r.documentNo?r.documentNo.trim():`_NO_DOC_${r.id}`).toLowerCase();n[u]||(n[u]=[]),n[u].push(r)}),Object.entries(n).map(([r,b])=>({key:r,items:b,rep:b[0]})).sort((r,b)=>{const u=new Date(r.rep.date||0).getTime();return new Date(b.rep.date||0).getTime()-u})},[d]),o=n=>{const r=new Set(p);r.has(n)?r.delete(n):r.add(n),v(r)},O=n=>{const r=n.map(u=>u.id),b=r.every(u=>h.includes(u));S(b?u=>u.filter(x=>!r.includes(x)):u=>Array.from(new Set([...u,...r])))},a=async()=>{if(h.length===0||g)return;const n=new Date().toISOString().split("T")[0],r=c.filter(x=>h.includes(x.id)),b=r.map(x=>`
            <tr data-id="${x.id}" class="item-row">
                <td style="padding: 5px;"><input type="text" class="swal2-input product-name" style="margin:0; width:100%; font-size:0.9em;" value="${x.productName||""}" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"></td>
                <td style="padding: 5px;"><input type="number" class="swal2-input product-qty" style="margin:0; width:80px; font-size:0.9em;" value="${x.quantity}" min="0"></td>
                <td style="padding: 5px;"><input type="text" class="swal2-input product-unit" style="margin:0; width:60px; font-size:0.9em;" value="${x.unit||""}" placeholder="‡∏´‡∏ô‡πà‡∏ß‡∏¢"></td>
                <td style="padding: 5px; text-align:center;">-</td>
            </tr>
        `).join(""),{value:u}=await T.fire({title:`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (${h.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`,width:"800px",html:`
                <div style="text-align: left; font-size: 0.9rem; color: #334155;">
                     <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                        <div>
                            <label style="display:block; font-weight:bold; margin-bottom:4px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á <span style="color:red">*</span></label>
                            <input id="swal-date" type="date" class="swal2-input" style="margin:0; width:100%; box-sizing:border-box;" value="${n}">
                        </div>
                        <div>
                            <label style="display:block; font-weight:bold; margin-bottom:4px;">‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö <span style="color:red">*</span></label>
                            <input id="swal-driver" type="text" class="swal2-input" style="margin:0; width:100%; box-sizing:border-box;" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠...">
                        </div>
                        <div>
                            <label style="display:block; font-weight:bold; margin-bottom:4px;">‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ <span style="color:red">*</span></label>
                            <input id="swal-plate" type="text" class="swal2-input" style="margin:0; width:100%; box-sizing:border-box;" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô...">
                        </div>
                    </div>

                    <div style="max-height: 300px; overflow-y: auto; border: 1px solid #e2e8f0; border-radius: 8px;">
                        <table style="width:100%; border-collapse: collapse;">
                            <thead style="background: #f1f5f9; position: sticky; top: 0;">
                                <tr>
                                    <th style="padding: 8px; text-align: left; font-size: 0.85rem;">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)</th>
                                    <th style="padding: 8px; text-align: left; font-size: 0.85rem; width: 80px;">Qty</th>
                                    <th style="padding: 8px; text-align: left; font-size: 0.85rem; width: 60px;">Unit</th>
                                    <th style="padding: 8px; width: 40px;"></th>
                                </tr>
                            </thead>
                            <tbody id="swal-items-body">
                                ${b}
                            </tbody>
                        </table>
                    </div>
                    <button type="button" id="btn-add-row" style="margin-top: 10px; width: 100%; padding: 8px; border: 1px dashed #cbd5e1; background: #f8fafc; color: #475569; font-weight: bold; cursor: pointer; border-radius: 6px;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Add Product)</button>
                </div>
            `,didOpen:()=>{const x=document.getElementById("btn-add-row"),k=document.getElementById("swal-items-body");x&&k&&x.addEventListener("click",()=>{var $,A;const R=document.createElement("tr");R.classList.add("item-row"),R.setAttribute("data-new","true"),R.innerHTML=`
                             <td style="padding: 5px;"><input type="text" class="swal2-input product-name" style="margin:0; width:100%; font-size:0.9em;" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"></td>
                            <td style="padding: 5px;"><input type="number" class="swal2-input product-qty" style="margin:0; width:80px; font-size:0.9em;" value="1" min="0"></td>
                            <td style="padding: 5px;"><input type="text" class="swal2-input product-unit" style="margin:0; width:60px; font-size:0.9em;" placeholder="‡∏´‡∏ô‡πà‡∏ß‡∏¢"></td>
                            <td style="padding: 5px; text-align:center;"><button type="button" class="btn-remove-row" style="color: red; border: none; background: none; cursor: pointer;">X</button></td>
                        `,k.appendChild(R);const f=($=k.parentElement)==null?void 0:$.parentElement;f&&(f.scrollTop=f.scrollHeight),(A=R.querySelector(".btn-remove-row"))==null||A.addEventListener("click",()=>{R.remove()})})},focusConfirm:!1,showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#4f46e5",preConfirm:()=>{const x=document.getElementById("swal-date"),k=document.getElementById("swal-driver"),R=document.getElementById("swal-plate");if(!x.value||!k.value||!R.value)return T.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö ‡πÅ‡∏•‡∏∞‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ"),!1;const f=document.querySelectorAll(".item-row"),$=[];let A=!0;return f.forEach(M=>{const B=M.getAttribute("data-id"),E=M.getAttribute("data-new")==="true",P=M.querySelector(".product-name").value,F=Number(M.querySelector(".product-qty").value),le=M.querySelector(".product-unit").value;if(!P){A=!1;return}$.push({id:B,isNew:E,productName:P,quantity:F,unit:le})}),A?{date:x.value,driver:k.value,plate:R.value,items:$}:(T.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô"),!1)}});if(u){t(!0);try{const x={driverName:u.driver,plateNumber:u.plate,transportCompany:"Company"};for(const k of u.items)if(!k.isNew&&k.id)await i(k.id,{status:"COL_BranchReceived",dateReceived:u.date,dateBranchReceived:u.date,quantity:k.quantity,unit:k.unit,productName:k.productName,transportInfo:x});else if(k.isNew){let R=r[0];if(!R&&r.length===0)return;const f=`EXTRA_${Date.now()}_${Math.floor(Math.random()*1e3)}`,$={...R,id:f,status:"COL_BranchReceived",dateReceived:u.date,dateBranchReceived:u.date,productCode:k.productName,productName:k.productName,quantity:k.quantity,unit:k.unit,transportInfo:x,documentNo:R.documentNo,invoiceNo:R.invoiceNo,tmNo:R.tmNo,collectionOrderId:R.collectionOrderId,branch:R.branch};await i(f,$)}await T.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${u.items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,timer:1500,showConfirmButton:!1}),S([])}catch(x){console.error("Error receiving items:",x),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ"})}finally{t(!1)}}},N=async n=>{if(g)return;const{value:r}=await T.fire({title:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Undo)",input:"password",inputLabel:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password)",inputPlaceholder:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(r==="1234"){t(!0);try{await i(n,{status:"Requested"}),await T.fire({icon:"success",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡πÑ‡∏õ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô Step 2",timer:2e3,showConfirmButton:!1})}catch{T.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ","error")}finally{t(!1)}}else r&&T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","","error")};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(yt,{className:"w-6 h-6 text-indigo-600"})," 3. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Branch Physical Receive)"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:s,onChange:n=>m(n.target.value),className:"p-2 border border-slate-300 rounded-lg text-sm text-slate-700 font-medium outline-none focus:ring-2 focus:ring-blue-500 bg-white shadow-sm","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",children:[e.jsx("option",{value:"",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (All Branches)"}),Oe.map(n=>e.jsx("option",{value:n,children:n},n))]}),h.length>0&&e.jsxs("button",{onClick:a,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all flex items-center gap-2",children:[e.jsx(Tl,{className:"w-5 h-5"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á (",h.length,")"]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b text-center w-12",children:"#"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (DATE)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (BRANCH)"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç INVOICE"}),e.jsx("th",{className:"p-3 border-b min-w-[130px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL (COL NO)"}),e.jsx("th",{className:"p-3 border-b min-w-[300px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (PRODUCT) - EXPAND (+)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:w.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Pt,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]})})}):w.map(n=>{const{rep:r,items:b,key:u}=n,x=p.has(u),k=b.every(f=>h.includes(f.id)),R=b.some(f=>h.includes(f.id));return e.jsxs("tr",{className:`hover:bg-slate-50 transition-colors text-xs align-top ${k?"bg-indigo-50/30":""}`,children:[e.jsx("td",{className:"p-3 text-center border-r border-slate-100 bg-slate-50/30",children:e.jsx("input",{type:"checkbox",checked:k,"aria-label":`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${r.documentNo||u}`,title:`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${r.documentNo||u}`,ref:f=>{f&&(f.indeterminate=R&&!k)},onChange:()=>O(b),className:"accent-indigo-600 w-4 h-4 cursor-pointer"})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-medium text-slate-700",children:r.date?new Date(r.date).toLocaleDateString("th-TH"):"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:e.jsx("div",{className:"font-bold text-slate-700",children:r.branch})}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:r.customerName,children:r.customerName||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:r.destinationCustomer,children:r.destinationCustomer||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-500",children:r.invoiceNo||"-"}),e.jsxs("td",{className:"p-3 border-r border-slate-100",children:[e.jsx("span",{className:"font-bold text-blue-600 dashed-underline cursor-help",title:r.documentNo,children:r.documentNo||"-"}),b.length>1&&e.jsxs("div",{className:"inline-flex items-center gap-1 mt-1 px-1.5 py-0.5 rounded bg-blue-100 text-blue-700 text-[9px] font-bold",children:[e.jsx(st,{className:"w-3 h-3"})," ",b.length," Items"]})]}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3 text-slate-400"}),r.controlDate?new Date(r.controlDate).toLocaleDateString("th-TH"):"-"]})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-mono text-slate-600",children:r.tmNo||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:r.collectionOrderId?e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded text-[10px] font-mono border border-indigo-100 block w-fit",children:r.collectionOrderId}):"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 relative",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-800 text-xs",children:b[0].productCode||""}),e.jsx("div",{className:"text-slate-600 text-[11px] leading-tight",children:b[0].productName||"-"}),e.jsxs("div",{className:"text-slate-500 text-[10px] font-medium bg-slate-100 w-fit px-1.5 py-0.5 rounded mt-0.5",children:["Qty: ",e.jsxs("span",{className:"text-slate-900 font-bold",children:[b[0].quantity," ",b[0].unit]})]})]}),e.jsx("button",{onClick:f=>{f.stopPropagation(),N(b[0].id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",children:e.jsx(Ee,{className:"w-3 h-3"})})]}),b.length>1&&e.jsxs("button",{onClick:()=>o(u),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                                ${x?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-indigo-100"}`,children:[x?e.jsx(Ue,{className:"w-3 h-3"}):e.jsx(Qe,{className:"w-3 h-3"}),x?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Collapse)":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${b.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),x&&b.length>1&&e.jsx("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:b.slice(1).map(f=>e.jsxs("div",{className:"flex justify-between items-start pl-2 border-l-2 border-indigo-200 group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-700 text-xs",children:f.productCode||""}),e.jsx("div",{className:"text-slate-500 text-[11px]",children:f.productName||"-"}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["Qty: ",e.jsxs("b",{children:[f.quantity," ",f.unit]})]})]}),e.jsx("button",{onClick:$=>{$.stopPropagation(),N(f.id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",children:e.jsx(Ee,{className:"w-3 h-3"})})]},f.id))})]})})]},u)})})]})})})]})},Ls=({onComplete:l})=>{const{items:c,updateReturnRecord:i}=Se(),[g,t]=te.useState(!1),[s,m]=te.useState(new Date().toISOString().split("T")[0]),[h,S]=te.useState(""),[p,v]=te.useState([]),[d,w]=te.useState(new Set),[o,O]=te.useState(!1),[a,N]=te.useState([]),[n,r]=te.useState(""),[b,u]=te.useState({driverName:"",plateNumber:"",transportCompany:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"}),x=te.useMemo(()=>c.filter(B=>!(!(B.status==="BranchReceived"||B.status==="COL_BranchReceived")||h&&B.branch!==h)),[c,h]),k=te.useMemo(()=>{const B={};return x.forEach(E=>{const F=(E.documentNo?E.documentNo.trim():`_NO_DOC_${E.id}`).toLowerCase();B[F]||(B[F]=[]),B[F].push(E)}),Object.entries(B).map(([E,P])=>({key:E,items:P,rep:P[0]})).sort((E,P)=>new Date(P.rep.date).getTime()-new Date(E.rep.date).getTime())},[x]),R=B=>{const E=new Set(d);E.has(B)?E.delete(B):E.add(B),w(E)},f=B=>{const E=B.map(F=>F.id),P=E.every(F=>p.includes(F));v(P?F=>F.filter(le=>!E.includes(le)):F=>Array.from(new Set([...F,...E])))},$=async()=>{p.length!==0&&(g||(N(p),r(""),O(!0)))},A=async()=>{if(!n||n==="Other"){await T.fire({icon:"warning",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",text:"‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"});return}if(!g){t(!0);try{for(const B of a)await i(B,{status:"COL_Consolidated",dateConsolidated:s,preliminaryDecision:"Return",preliminaryRoute:n,transportInfo:b});await T.fire({icon:"success",title:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1}),O(!1),N([]),v([]),r("")}finally{t(!1)}}},M=async B=>{if(g)return;const{value:E}=await T.fire({title:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Undo)",input:"password",inputLabel:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Password)",inputPlaceholder:"‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(E==="1234"){t(!0);try{await i(B,{status:"COL_JobAccepted"}),await T.fire({icon:"success",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡πÑ‡∏õ‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô Step 3",timer:2e3,showConfirmButton:!1})}catch{T.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î","‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ","error")}finally{t(!1)}}else E&&T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","","error")};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Et,{className:"w-6 h-6 text-slate-600"})," 4. ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Branch Consolidation)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:h,onChange:B=>S(B.target.value),className:"p-2 border border-slate-300 rounded-lg text-sm text-slate-700 font-medium outline-none focus:ring-2 focus:ring-blue-500 bg-white shadow-sm mr-2","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏Ç‡∏≤",children:[e.jsx("option",{value:"",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (All Branches)"}),Oe.map(B=>e.jsx("option",{value:B,children:B},B))]}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-2 rounded-lg border border-slate-200 shadow-sm mr-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°:"}),e.jsx("input",{type:"date",value:s,onChange:B=>m(B.target.value),className:"outline-none text-slate-700 font-medium text-sm","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),p.length>0&&e.jsxs("button",{onClick:$,disabled:g,className:"bg-slate-800 hover:bg-black text-white px-4 py-2 rounded-lg font-bold shadow-sm transition-all disabled:opacity-50 disabled:cursor-wait flex items-center gap-2",children:[e.jsx(hs,{className:"w-5 h-5"})," ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (",p.length,")"]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex-1 flex flex-col",children:e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold sticky top-0 shadow-sm z-10 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-b text-center w-12",children:"#"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (DATE)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (BRANCH)"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-3 border-b min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç INVOICE"}),e.jsx("th",{className:"p-3 border-b min-w-[130px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"p-3 border-b min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL (COL NO)"}),e.jsx("th",{className:"p-3 border-b min-w-[300px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (PRODUCT) - EXPAND (+)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:k.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(hs,{className:"w-8 h-8 opacity-20"}),e.jsx("span",{children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]})})}):k.map(B=>{const{rep:E,items:P,key:F}=B,le=d.has(F),Y=P.every(se=>p.includes(se.id)),me=P.some(se=>p.includes(se.id));return e.jsxs("tr",{className:`hover:bg-slate-50 transition-colors text-xs align-top ${Y?"bg-indigo-50/30":""}`,children:[e.jsx("td",{className:"p-3 text-center border-r border-slate-100 bg-slate-50/30",children:e.jsx("input",{type:"checkbox",checked:Y,ref:se=>{se&&(se.indeterminate=me&&!Y)},onChange:()=>f(P),className:"accent-slate-800 w-4 h-4 cursor-pointer","aria-label":`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${E.documentNo||F}`,title:`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° ${E.documentNo||F}`})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-medium text-slate-700",children:E.date?new Date(E.date).toLocaleDateString("th-TH"):"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:e.jsx("div",{className:"font-bold text-slate-700",children:E.branch})}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:E.customerName,children:E.customerName||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600 truncate max-w-[150px]",title:E.destinationCustomer,children:E.destinationCustomer||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-500",children:E.invoiceNo||"-"}),e.jsxs("td",{className:"p-3 border-r border-slate-100",children:[e.jsx("span",{className:"font-bold text-blue-600 dashed-underline cursor-help",title:E.documentNo,children:E.documentNo||"-"}),P.length>1&&e.jsxs("div",{className:"inline-flex items-center gap-1 mt-1 px-1.5 py-0.5 rounded bg-blue-100 text-blue-700 text-[9px] font-bold",children:[e.jsx(st,{className:"w-3 h-3"})," ",P.length," Items"]})]}),e.jsx("td",{className:"p-3 border-r border-slate-100 text-slate-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3 text-slate-400"}),E.controlDate?new Date(E.controlDate).toLocaleDateString("th-TH"):"-"]})}),e.jsx("td",{className:"p-3 border-r border-slate-100 font-mono text-slate-600",children:E.tmNo||"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100",children:E.collectionOrderId?e.jsx("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded text-[10px] font-mono border border-indigo-100 block w-fit",children:E.collectionOrderId}):"-"}),e.jsx("td",{className:"p-3 border-r border-slate-100 relative",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-start group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-800 text-xs",children:P[0].productCode||""}),e.jsx("div",{className:"text-slate-600 text-[11px] leading-tight",children:P[0].productName||"-"}),e.jsxs("div",{className:"text-slate-500 text-[10px] font-medium bg-slate-100 w-fit px-1.5 py-0.5 rounded mt-0.5",children:["Qty: ",e.jsxs("span",{className:"text-slate-900 font-bold",children:[P[0].quantity," ",P[0].unit]})]})]}),e.jsx("button",{onClick:se=>{se.stopPropagation(),M(P[0].id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",children:e.jsx(Ee,{className:"w-3 h-3"})})]}),P.length>1&&e.jsxs("button",{onClick:()=>R(F),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                                ${le?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-slate-100"}`,children:[le?e.jsx(Ue,{className:"w-3 h-3"}):e.jsx(Qe,{className:"w-3 h-3"}),le?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Collapse)":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${P.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),le&&P.length>1&&e.jsx("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:P.slice(1).map(se=>e.jsxs("div",{className:"flex justify-between items-start pl-2 border-l-2 border-indigo-200 group",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("div",{className:"font-bold text-slate-700 text-xs",children:se.productCode||""}),e.jsx("div",{className:"text-slate-500 text-[11px]",children:se.productName||"-"}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:["Qty: ",e.jsxs("b",{children:[se.quantity," ",se.unit]})]})]}),e.jsx("button",{onClick:G=>{G.stopPropagation(),M(se.id)},className:"text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",children:e.jsx(Ee,{className:"w-3 h-3"})})]},se.id))})]})})]},F)})})]})})}),o&&Xt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto animate-scale-up",children:[e.jsx("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-slate-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Zt,{className:"w-6 h-6 text-indigo-600"}),"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (",a.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]}),e.jsx("button",{onClick:()=>O(!1),className:"text-slate-400 hover:text-slate-600","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(je,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"p-6 space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-800 mb-2",children:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return Route)"}),e.jsx("div",{className:"border rounded-xl overflow-hidden bg-indigo-50/30",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"p-3 bg-white rounded border border-indigo-100 text-sm",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Pe.map(B=>e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${n===B?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio",name:"tempRoute",value:B,checked:n===B,onChange:E=>r(E.target.value),className:"hidden"}),B]},B)),e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${n==="Other"||n&&!Pe.includes(n)?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio",name:"tempRoute",value:"Other",checked:n==="Other"||n&&!Pe.includes(n),onChange:()=>r("Other"),className:"hidden"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]})]}),(n==="Other"||n&&!Pe.includes(n))&&e.jsx("input",{type:"text",value:n==="Other"?"":n,onChange:B=>r(B.target.value),className:"w-full mt-2 p-2 border rounded text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",autoFocus:!0})]})})})]})}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>O(!1),className:"px-5 py-2.5 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:A,disabled:g,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md transition-all disabled:opacity-50 disabled:cursor-wait",children:g?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...":"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (Save)"})]})]})}),document.body)]})},pa=()=>{const{items:l,updateReturnRecord:c,addReturnRecord:i,ncrReports:g}=Se(),[t,s]=C.useState(null),[m,h]=C.useState(null),[S,p]=C.useState(null),[v,d]=C.useState({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""}),[w,o]=C.useState(!1),[O,a]=C.useState(!1),[N,n]=C.useState(!1),[r,b]=C.useState(!1),[u,x]=C.useState(1),[k,R]=C.useState(""),[f,$]=C.useState(0),[A,M]=C.useState("New"),[B,E]=C.useState(null),P=te.useMemo(()=>l.filter(I=>{if(I.ncrNumber){const U=g.find(Z=>Z.ncrNo===I.ncrNumber);if(U&&U.status==="Canceled")return!1}return I.status==="NCR_HubReceived"||I.status==="ReceivedAtHub"}),[l,g]),[F,le]=C.useState(new Set),Y=te.useMemo(()=>{const I={};return P.forEach(U=>{const Z=ne=>ne?ne.replace(/\s+/g,"").toLowerCase():"",V=Z(U.colNumber),K=Z(U.ncrNumber),_=Z(U.documentNo)||V||K||U.id;I[_]||(I[_]=[]),I[_].push(U)}),Object.entries(I).map(([U,Z])=>({key:U,items:Z,rep:Z[0]})).sort((U,Z)=>Z.rep.date.localeCompare(U.rep.date))},[P]),me=I=>{le(U=>{const Z=new Set(U);return Z.has(I)?Z.delete(I):Z.add(I),Z})},[se,G]=C.useState(!1),D=te.useMemo(()=>t?Y.find(I=>I.items.some(U=>U.id===t.id)):null,[t,Y]),Q=D&&D.items.length>1,q=I=>{s(I),G(!1),p(null),h(null),n(!1),$(0),d({route:"",sellerName:"",contactPhone:"",internalUseDetail:"",claimCompany:"",claimCoordinator:"",claimPhone:""})},ee=(I,U)=>{t&&(s({...t,condition:I}),U&&h(U))},ae=(I,U)=>{d(Z=>({...Z,[I]:U}))},be=()=>{n(!N)},he=async()=>{if(!t)return;const I=se&&D?D.items:[t],U=I.length,{value:Z}=await T.fire({title:se?`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏° (${U})`:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö (Undo)",text:se?`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á ${U} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ Step 3 (Receive) ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ Step 3 (Receive)",input:"password",icon:"warning",showCancelButton:!0,confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",inputPlaceholder:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"});Z==="1234"?(await Promise.all(I.map(V=>c(V.id,{status:"NCR_InTransit"}))),s(null),G(!1),await T.fire({icon:"success",title:se?`‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö ${U} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`:"‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö Step 3 ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})):Z&&T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","","error")},ve=async()=>{if(!t||!S||O)return;a(!0);const I=se&&D?D.items:[t];try{const U={status:"NCR_QCCompleted",condition:t.condition,disposition:S,destinationCustomer:S==="RTV"?v.route:S==="Restock"?v.sellerName:S==="InternalUse"?v.internalUseDetail:"",problemDetail:S==="Claim"?`Claim: ${v.claimCompany} / ${v.claimCoordinator}`:t.problemDetail||""};await Promise.all(I.map(Z=>c(Z.id,U))),s(null),G(!1),await T.fire({icon:"success",title:se?`‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏• QC ‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏° (${I.length}) ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏• QC ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}catch(U){console.error("QC Submit Error:",U),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:U instanceof Error?U.message:"Unknown error"})}finally{a(!1)}},j=async()=>{if(!(!t||f<=0)&&!O){a(!0);try{const I=t.quantity,U=r?I*u:I;if(f>=U){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",text:"Cannot split entire quantity via split function. Use normal Submit."});return}const Z=U-f,K={quantity:(r&&Z>0,Z),unit:r?k:t.unit,status:"NCR_QCCompleted",disposition:S||"Pending",condition:t.condition};await c(t.id,K);const oe={...t,id:`${t.id}-SP${Date.now().toString().slice(-4)}`,quantity:f,unit:r?k:t.unit,condition:A,disposition:B||"Pending",status:B?"NCR_QCCompleted":"NCR_HubReceived",refNo:`${t.refNo}-SP`};await i(oe),s(null),await T.fire({icon:"success",title:"‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}catch(I){console.error("Split Error:",I),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",text:I instanceof Error?I.message:"Unknown error"})}finally{a(!1)}}};return e.jsxs("div",{className:"h-full flex",children:[e.jsxs("div",{className:"w-80 border-r border-slate-200 bg-white flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 font-bold text-slate-700 flex justify-between items-center",children:[e.jsxs("span",{children:["‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (",P.length,")"]}),e.jsx(yt,{className:"w-4 h-4 text-blue-500"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:Y.length===0?e.jsx("div",{className:"p-4 text-center text-slate-400 text-xs italic",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö"}):Y.map(I=>{const{key:U,items:Z,rep:V}=I,K=F.has(U),oe=(t==null?void 0:t.id)===V.id,_=Z.length>1;return e.jsxs("div",{className:`bg-white rounded-lg border transition-all overflow-hidden
                                    ${oe?"border-emerald-500 shadow-md ring-1 ring-emerald-100":"border-slate-100 shadow-sm hover:shadow"}
                                `,children:[e.jsxs("div",{onClick:()=>{q(V)},className:`p-3 cursor-pointer relative transition-colors ${oe?"bg-blue-50/30":"hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700 truncate max-w-[60%]",title:V.productCode,children:V.productCode}),e.jsx("span",{className:"text-[10px] text-slate-400",children:V.dateReceived})]}),e.jsx("div",{className:"text-sm font-medium text-slate-800 truncate mb-1",title:V.productName,children:V.productName}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-1",children:[V.documentNo&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-slate-100 text-slate-600 rounded border border-slate-200 font-bold",children:["R: ",V.documentNo]}),V.colNumber&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 bg-indigo-50 text-indigo-600 rounded border border-indigo-100",children:["COL: ",V.colNumber]})]}),e.jsxs("div",{className:"flex justify-between items-end mt-2",children:[e.jsx("div",{className:"text-xs text-slate-500",children:V.branch}),_&&e.jsxs("div",{className:"flex items-center gap-1 text-[10px] bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full font-bold",children:[e.jsx(st,{className:"w-3 h-3"})," ",Z.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]})]}),_&&e.jsxs("div",{className:"border-t border-slate-100",children:[e.jsxs("button",{onClick:ne=>{ne.stopPropagation(),me(U)},className:`flex items-center justify-center gap-2 w-full py-2 text-xs font-bold transition-colors
                                                    ${K?"bg-slate-100 text-slate-600":"bg-blue-50 text-blue-600 hover:bg-blue-100"}`,children:[K?e.jsx(Ue,{className:"w-4 h-4"}):e.jsx(Qe,{className:"w-4 h-4"}),K?"‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô":`‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô (${Z.length})`]}),K&&e.jsx("div",{className:"bg-slate-50 border-t border-slate-100 divide-y divide-slate-100 animate-slide-down",children:Z.map((ne,ge)=>{const X=(t==null?void 0:t.id)===ne.id;return e.jsxs("div",{onClick:()=>q(ne),className:`p-2 pl-4 cursor-pointer text-xs flex flex-col gap-1
                                                                    ${X?"bg-blue-100 text-blue-800 font-bold border-l-4 border-blue-500":"text-slate-600 hover:bg-slate-200 border-l-4 border-transparent"}
                                                                `,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"truncate w-3/4 font-medium",children:ne.productName}),e.jsxs("span",{className:"shrink-0",children:[ne.quantity," ",ne.unit]})]}),e.jsxs("div",{className:"text-[10px] text-slate-400",children:[ne.productCode," | ",ne.branch]})]},ne.id)})})]})]},U)})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50/50",children:t?e.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[Q&&e.jsxs("div",{className:`mb-6 p-3 rounded-lg flex items-center justify-between border transition-all ${se?"bg-indigo-600 text-white border-indigo-700 shadow-md transform scale-[1.01]":"bg-indigo-50 text-indigo-800 border-indigo-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${se?"bg-white/20":"bg-indigo-100"}`,children:e.jsx(st,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:se?`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏° (${D==null?void 0:D.items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)`:`‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ${D==null?void 0:D.items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`}),e.jsx("div",{className:`text-xs ${se?"text-indigo-100":"text-indigo-500"}`,children:se?"‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Grading/Disposition) ‡∏à‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ":"‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ"})]})]}),e.jsx("button",{onClick:()=>G(!se),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all shadow-sm ${se?"bg-white text-indigo-600 hover:bg-indigo-50":"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md ring-2 ring-indigo-200 ring-offset-1"}`,children:se?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (‡∏ó‡∏≥‡∏ó‡∏µ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)":"‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏° (Batch QC)"})]}),e.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-1",children:t.productName}),e.jsxs("div",{className:"flex gap-4 text-sm text-slate-500",children:[e.jsxs("span",{children:["R No: ",e.jsx("b",{children:t.documentNo||"-"})]}),e.jsxs("span",{children:["COL No: ",e.jsx("b",{children:t.colNumber||"-"})]}),e.jsxs("span",{children:["Qty: ",e.jsxs("b",{children:[t.quantity," ",t.unit]})]})]}),t.preliminaryDecision&&e.jsxs("div",{className:"mt-3 p-4 bg-white/50 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô:"}),t.preliminaryRoute&&e.jsx("span",{className:"text-xs bg-indigo-50 text-indigo-700 px-2 py-1 rounded font-bold border border-indigo-100",children:t.preliminaryRoute})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg text-white font-bold text-center text-sm shadow-md border ${t.preliminaryDecision==="Return"?"bg-blue-600 border-blue-700":t.preliminaryDecision==="Sell"?"bg-green-600 border-green-700":t.preliminaryDecision==="Scrap"?"bg-red-600 border-red-700":t.preliminaryDecision==="Internal"?"bg-amber-500 border-amber-600":t.preliminaryDecision==="Claim"?"bg-orange-500 border-orange-600":"bg-slate-500 border-slate-600"}`,children:t.preliminaryDecision==="Return"?"üöö ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤":t.preliminaryDecision==="Sell"?"üíµ ‡∏Ç‡∏≤‡∏¢":t.preliminaryDecision==="Scrap"?"üóëÔ∏è ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢":t.preliminaryDecision==="Internal"?"üè† ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô":t.preliminaryDecision==="Claim"?"üìÑ ‡πÄ‡∏Ñ‡∏•‡∏°":t.preliminaryDecision})]})]}),e.jsx("div",{className:"bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-xs font-bold",children:"In Progress"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3 uppercase tracking-wider",children:"1. ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏†‡∏≤‡∏û (Grading)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-bold text-green-600 bg-green-50 p-1.5 rounded w-fit mb-2",children:"Good (‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["New","BoxDamage","WetBox","LabelDefect","Other"].map(I=>e.jsx("button",{onClick:()=>ee(I==="Other"?"Other":I,"Good"),className:`py-2 px-3 rounded-lg border text-sm font-medium transition-all ${t.condition===I||I==="Other"&&m==="Good"?"bg-green-600 text-white border-green-600 shadow-md":"bg-white border-slate-200 text-slate-600 hover:border-green-300 hover:text-green-600"}`,children:it[I]||"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)"},I))}),m==="Good"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...",className:"w-full mt-2 p-2 border rounded-lg text-sm focus:ring-1 focus:ring-green-500 outline-none",value:Object.keys(it).includes(t.condition||"")?"":t.condition,onChange:I=>s({...t,condition:I.target.value}),autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-bold text-red-600 bg-red-50 p-1.5 rounded w-fit mb-2",children:"Bad (‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Expired","Damaged","Defective","Other"].map(I=>e.jsx("button",{onClick:()=>ee(I==="Other"?"Other":I,"Bad"),className:`py-2 px-3 rounded-lg border text-sm font-medium transition-all ${t.condition===I||I==="Other"&&m==="Bad"?"bg-red-600 text-white border-red-600 shadow-md":"bg-white border-slate-200 text-slate-600 hover:border-red-300 hover:text-red-600"}`,children:it[I]||"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)"},I))}),m==="Bad"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢...",className:"w-full mt-2 p-2 border rounded-lg text-sm focus:ring-1 focus:ring-red-500 outline-none",value:Object.keys(it).includes(t.condition||"")?"":t.condition,onChange:I=>s({...t,condition:I.target.value}),autoFocus:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3 uppercase tracking-wider",children:"2. ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:Object.keys(Ze).map(I=>e.jsxs("button",{onClick:()=>{p(I),o(!1)},className:`flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${S===I?"bg-blue-600 text-white border-blue-700 shadow-md":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[e.jsx(fe,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-xs font-bold",children:Ze[I]})]},I))}),S==="RTV"&&e.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border border-amber-100 animate-fade-in",children:[e.jsx("label",{className:"block text-xs font-bold text-amber-800 mb-2",children:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Select Route)"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[Pe.map(I=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-3 py-2 rounded border border-amber-200 text-sm text-slate-700 hover:border-amber-400",children:[e.jsx("input",{type:"radio","aria-label":I,title:I,name:"route",value:I,checked:v.route===I,onChange:U=>{ae("route",U.target.value),o(!1)},className:"text-amber-500 focus:ring-amber-500"}),I]},I)),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-white px-3 py-2 rounded border border-amber-200 text-sm text-slate-700 hover:border-amber-400",children:[e.jsx("input",{type:"radio","aria-label":"‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",name:"route",checked:w,onChange:()=>{o(!0),ae("route","")},className:"text-amber-500 focus:ring-amber-500"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]})]}),w&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",className:"w-full mt-2 p-2 border rounded-lg text-sm focus:ring-1 focus:ring-amber-500 outline-none",value:v.route,onChange:I=>ae("route",I.target.value),autoFocus:!0})]}),S==="Restock"&&e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 animate-fade-in grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-800 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠ (Buyer Name)"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠",className:"w-full p-2 border border-green-200 rounded text-sm focus:ring-1 focus:ring-green-500 outline-none",value:v.sellerName,onChange:I=>ae("sellerName",I.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-green-800 mb-1",children:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",title:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",className:"w-full p-2 border border-green-200 rounded text-sm focus:ring-1 focus:ring-green-500 outline-none",value:v.contactPhone,onChange:I=>ae("contactPhone",I.target.value)})]})]}),S==="InternalUse"&&e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100 animate-fade-in",children:[e.jsx("label",{className:"block text-xs font-bold text-purple-800 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ (Department/User)"}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ",className:"w-full p-2 border border-purple-200 rounded text-sm focus:ring-1 focus:ring-purple-500 outline-none",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡πÅ‡∏ú‡∏ô‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ, ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ä‡∏≤‡∏¢",value:v.internalUseDetail,onChange:I=>ae("internalUseDetail",I.target.value)})]}),S==="Claim"&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 animate-fade-in space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (Insurance Company)"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô",className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:v.claimCompany,onChange:I=>ae("claimCompany",I.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô"}),e.jsx("input",{type:"text","aria-label":"‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô",title:"‡∏ú‡∏π‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ô‡∏á‡∏≤‡∏ô",className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:v.claimCoordinator,onChange:I=>ae("claimCoordinator",I.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£",title:"‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£",className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:v.claimPhone,onChange:I=>ae("claimPhone",I.target.value)})]})]})]})]}),e.jsxs("div",{className:"border-t border-slate-100 pt-4 mb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("button",{onClick:be,className:"text-sm font-bold text-blue-600 flex items-center gap-2 hover:bg-blue-50 px-3 py-1.5 rounded-lg transition-colors",children:[e.jsx(ft,{className:"w-4 h-4"})," ",N?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Cancel Split)":"‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Split Item)"]})}),N&&e.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 animate-fade-in",children:[e.jsxs("h5",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(ft,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å (Split Details)"]}),e.jsxs("div",{className:"mb-4 bg-blue-50/50 p-3 rounded-lg border border-blue-100",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:I=>{b(I.target.checked),I.target.checked?x(12):(x(1),R(""))},className:"w-4 h-4 text-blue-600 rounded"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢ (Unit Breakdown)"})]}),r&&e.jsxs("div",{className:"animate-fade-in pl-6 mt-2 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏ô 1 ‡πÅ‡∏û‡πá‡∏Ñ/‡∏•‡∏±‡∏á (Qty per Pack)"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏ô 1 ‡πÅ‡∏û‡πá‡∏Ñ",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏ô 1 ‡πÅ‡∏û‡πá‡∏Ñ",min:"1",value:u,onChange:I=>x(parseInt(I.target.value)||1),className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500"}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:"‡πÄ‡∏ä‡πà‡∏ô 1 ‡∏•‡∏±‡∏á ‡∏°‡∏µ 12 ‡∏ä‡∏¥‡πâ‡∏ô ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢ (New Unit Name)"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡∏ß‡∏î, ‡∏ä‡∏¥‡πâ‡∏ô, ‡∏≠‡∏±‡∏ô",value:k,onChange:I=>R(I.target.value),className:"w-full p-2 border border-blue-200 rounded text-sm focus:ring-1 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"bg-white p-2 rounded border border-blue-100 flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô (Price/Unit):"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[((t.pricePerUnit||(t.priceBill||0)/(t.quantity||1))/u).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ‡∏ö‡∏≤‡∏ó"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(()=>{const I=t.pricePerUnit||(t.priceBill||0)/(t.quantity||1),U=r&&u>1?I/u:I,Z=r?t.quantity*u:t.quantity,V=Z-f;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-green-600",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å (Main Item)"}),e.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["‡∏ø",(V*U).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"text-sm text-slate-500 mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (",r?k||"Unit":t.unit,"s):"]}),e.jsxs("div",{className:"text-2xl font-bold text-slate-800",children:[V,e.jsx("span",{className:"text-sm font-normal text-slate-400 ml-1",children:r?k||"Unit":t.unit})]}),e.jsxs("div",{className:"space-y-3 mt-3 pt-3 border-t border-slate-100",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Condition)"}),e.jsxs("select",{"aria-label":"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",value:t.condition||"",onChange:K=>ee(K.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm text-slate-700",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏†‡∏≤‡∏û --"}),Object.entries(it).map(([K,oe])=>e.jsx("option",{value:K,children:oe},K)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)"}),e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à",value:S||"",onChange:K=>p(K.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm text-slate-700",children:[e.jsx("option",{value:"",children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à --"}),Object.entries(Ze).map(([K,oe])=>e.jsx("option",{value:K,children:oe},K))]})]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-red-600",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ (New Item)"}),e.jsxs("span",{className:"text-xs font-bold text-slate-500",children:["‡∏ø",(f*U).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-slate-500 block mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏°‡∏≤ (",r?k||"Unit":t.unit,")"]}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏°‡∏≤",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å‡∏°‡∏≤",min:"1",max:Z-1,value:f,onChange:K=>$(parseInt(K.target.value)||0),className:"w-full p-2 border border-slate-300 rounded text-sm font-bold text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Condition)"}),e.jsxs("select",{"aria-label":"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏™‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",value:A,onChange:K=>M(K.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm",children:[Object.entries(it).map(([K,oe])=>e.jsx("option",{value:K,children:oe},K)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]})]}),e.jsx("div",{className:"text-[10px] text-orange-500 bg-orange-50 p-2 rounded mt-3",children:'* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà "‡∏Ñ‡∏¥‡∏ß‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition) ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'}),e.jsxs("div",{className:"pt-2 border-t border-blue-100 mt-2",children:[e.jsx("label",{className:"text-xs text-slate-500 block mb-1",children:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (Immediate Disposition)"}),e.jsxs("select",{"aria-label":"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ",title:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ó‡∏±‡∏ô‡∏ó‡∏µ",value:B||"",onChange:K=>E(K.target.value?K.target.value:null),className:"w-full p-2 border border-slate-300 rounded text-sm text-slate-700 bg-white",children:[e.jsx("option",{value:"",children:"-- ‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏¥‡∏ß QC (Default) --"}),Object.entries(Ze).map(([K,oe])=>e.jsx("option",{value:K,children:oe},K))]}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:B?e.jsx("span",{className:"text-green-600 font-bold",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏õ‡∏ó‡∏µ‡πà Step 4 (Docs) ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"}):"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ"})]})]})]})})()})]})]}),e.jsx("div",{className:"mt-4 flex justify-end pt-6 border-t border-slate-200",children:N?e.jsx("button",{onClick:j,"aria-label":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",disabled:O||f<=0||f>=(r?t.quantity*u:t.quantity)||!S,className:"px-8 py-3 rounded-lg bg-orange-600 text-white font-bold hover:bg-orange-700 shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-wait",children:O?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•..."}):e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"w-5 h-5"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Confirm Split)"]})}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:he,"aria-label":"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",title:"‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Step 3)",disabled:O,className:"px-6 py-3 rounded-lg bg-white border border-slate-300 text-slate-600 font-bold hover:bg-red-50 hover:text-red-600 hover:border-red-200 shadow-sm flex items-center gap-2 mr-auto disabled:opacity-50",children:[e.jsx(Al,{className:"w-5 h-5"})," ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)"]}),e.jsx("button",{onClick:ve,"aria-label":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Confirm QC)",disabled:O||!S||!(t!=null&&t.condition)||t.condition==="Unknown",className:"px-8 py-3 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-wait",children:O?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å..."}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-5 h-5"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Confirm QC)"]})})]})})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx(Lt,{className:"w-16 h-16 mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-bold",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß"}),e.jsx("p",{className:"text-sm",children:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏Ñ‡∏¥‡∏ß‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"})]})})]})},ba=({onConfirm:l})=>{const{items:c,updateReturnRecord:i,ncrReports:g}=Se(),[t,s]=C.useState(new Set),[m,h]=C.useState(!1),[S,p]=C.useState(!1),[v,d]=C.useState(!1),[w,o]=C.useState(null),[O,a]=C.useState(""),[N,n]=C.useState(!1),[r,b]=C.useState(0),[u,x]=C.useState(""),[k,R]=C.useState(""),[f,$]=C.useState(""),[A,M]=C.useState("Company"),[B,E]=C.useState({driverName:"",plateNumber:"",transportCompany:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"}),[P,F]=C.useState("Hub"),[le,Y]=C.useState(""),[me,se]=C.useState(""),[G,D]=C.useState("All"),Q=C.useMemo(()=>c.filter(_=>{if(_.ncrNumber){const ge=g.find(X=>X.ncrNo===_.ncrNumber);if(ge&&ge.status==="Canceled")return!1}return _.documentType==="NCR"||!!_.ncrNumber&&_.documentType!=="LOGISTICS"?_.status==="Requested"||_.status==="COL_JobAccepted":_.status==="COL_Consolidated"}),[c,g]),q=C.useMemo(()=>Array.from(new Set(Q.map(_=>_.branch))).filter(Boolean),[Q]),ee=C.useMemo(()=>Q.filter(_=>G==="All"||_.branch===G),[Q,G]),[ae,be]=C.useState(new Set),he=C.useMemo(()=>{const _={};return ee.forEach(ne=>{const X=!!ne.collectionOrderId||ne.status==="COL_Consolidated"||ne.id&&ne.id.startsWith("COL")?ne.collectionOrderId||`COL-${ne.id}`:ne.ncrNumber||ne.id;_[X]||(_[X]=[]),_[X].push(ne)}),Object.entries(_).map(([ne,ge])=>({key:ne,items:ge,rep:ge[0]}))},[ee]),ve=_=>{be(ne=>{const ge=new Set(ne);return ge.has(_)?ge.delete(_):ge.add(_),ge})},j=_=>{const ne=_.map(y=>y.id),ge=ne.every(y=>t.has(y)),X=new Set(t);ge?ne.forEach(y=>X.delete(y)):ne.forEach(y=>X.add(y)),s(X)},I=()=>{t.size===ee.length&&ee.length>0?s(new Set):s(new Set(ee.map(_=>_.id)))},U=_=>{o(_),a(""),n(!1),b(0),x(""),R(""),$(""),d(!0)},Z=async()=>{if(!N&&(!O||O==="Other")){await T.fire({icon:"warning",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",text:"‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}if(!S){p(!0);try{await i(w,{status:N?"Settled_OnField":void 0,preliminaryDecision:"Return",preliminaryRoute:N?"":O,isFieldSettled:N,fieldSettlementAmount:r,fieldSettlementEvidence:u,fieldSettlementName:k,fieldSettlementPosition:f,disposition:N?"RTV":void 0}),await T.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1}),d(!1),o(null)}finally{p(!1)}}},V=()=>{if(t.size===0){T.fire({icon:"warning",title:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}h(!0)},K=async()=>{if(A==="Company"){if(!B.driverName||!B.plateNumber){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡πÅ‡∏•‡∏∞‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}}else if(A==="3PL"){if(!B.transportCompany){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á (3PL)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}if(!B.driverName||!B.plateNumber){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡πÅ‡∏•‡∏∞‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 3PL",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}}else if(A==="Other"&&!B.transportCompany){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á (‡∏≠‡∏∑‡πà‡∏ô‡πÜ)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}let _="";if(P==="Direct"){if(!le){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}if(le==="Other"&&!me){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (‡∏≠‡∏∑‡πà‡∏ô‡πÜ)",confirmButtonText:"‡∏ï‡∏Å‡∏•‡∏á"});return}_=le==="Other"?me:le}if(l){p(!0);try{const ne={...B,destination:P==="Direct"?_:void 0};await l(Array.from(t),P,ne),h(!1),T.fire({icon:"success",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1})}finally{p(!1)}}},oe=ee.length>0&&ee.every(_=>t.has(_.id));return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in relative",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx(fe,{className:"w-6 h-6 text-indigo-600"})," 2. ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡∏ô‡∏™‡πà‡∏á (Consolidation & Logistics)"]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6 flex flex-wrap justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 px-3 py-1.5 rounded-lg border border-slate-200",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsxs("select",{"aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤",value:G,onChange:_=>D(_.target.value),className:"bg-transparent text-sm font-medium outline-none text-slate-800",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤"}),q.map(_=>e.jsx("option",{value:_,children:_},_))]})]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£: ",e.jsx("span",{className:"font-bold text-indigo-600",children:ee.length})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{"aria-label":oe?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",title:oe?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",onClick:I,className:"px-4 py-2 text-sm bg-white border border-slate-300 rounded-lg hover:bg-slate-50 text-slate-600 font-bold transition-colors",children:oe?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),e.jsxs("button",{onClick:V,"aria-label":`‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ ${t.size} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,title:`‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ ${t.size} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,disabled:t.size===0,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold text-sm hover:bg-indigo-700 shadow-md flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:[e.jsx(fe,{className:"w-4 h-4"})," ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (",t.size,")"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pb-20",children:he.length===0?e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50",children:[e.jsx(Xe,{className:"w-16 h-16 mb-4 text-slate-300"}),e.jsx("p",{className:"font-medium text-lg",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏à‡∏±‡∏î‡∏™‡πà‡∏á"}),e.jsx("p",{className:"text-sm mt-1",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:he.map(_=>{const{key:ne,items:ge,rep:X}=_,y=ge.every(de=>t.has(de.id)),z=ae.has(ne),ce=!!X.collectionOrderId||X.status==="COL_Consolidated"||X.id&&X.id.startsWith("COL"),pe=!ce&&(X.documentType==="NCR"||!!X.ncrNumber),Ne=ce?X.collectionOrderId||`COL-${X.id}`:X.ncrNumber||X.id;return e.jsxs("div",{onClick:()=>j(ge),className:`group relative p-4 rounded-xl border transition-all cursor-pointer shadow-sm hover:shadow-md 
                                        ${y?"bg-indigo-50 border-indigo-400 ring-2 ring-indigo-200":"bg-white border-slate-200 hover:border-indigo-300"}
                                    `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[ce&&e.jsx("span",{className:"text-[10px] bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full font-bold border border-orange-200",children:"COL"}),pe&&e.jsx("span",{className:"text-[10px] bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full font-bold border border-indigo-200",children:"NCR"}),e.jsx("span",{className:"text-xs font-mono text-slate-500 bg-slate-100 px-1.5 py-0.5 rounded border border-slate-200",children:Ne})]}),e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors 
                                            ${y?"bg-indigo-600 border-indigo-600":"bg-transparent border-slate-300 group-hover:border-indigo-400"}
                                        `,children:y&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),e.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-2 line-clamp-2 min-h-[1.25rem]",title:X.productName,children:X.productName||"Unknown Product"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsxs("span",{className:"font-bold text-slate-700",children:[X.quantity," ",X.unit]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsx("span",{className:"text-slate-700",children:X.branch})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("span",{className:"text-slate-700",children:X.dateRequested||X.date})]}),ge.length>1&&e.jsxs("div",{onClick:de=>de.stopPropagation(),className:"mt-2",children:[e.jsxs("button",{onClick:()=>ve(ne),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                        ${z?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-slate-100"}`,children:[z?e.jsx(Ue,{className:"w-3 h-3"}):e.jsx(Qe,{className:"w-3 h-3"}),z?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${ge.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),z&&e.jsx("div",{className:"flex flex-col gap-2 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:ge.slice(1).map(de=>e.jsxs("div",{className:"pl-2 border-l-2 border-indigo-200 text-xs",children:[e.jsx("div",{className:"font-bold text-slate-700 truncate",title:de.productName,children:de.productName}),e.jsxs("div",{className:"text-slate-500 flex justify-between",children:[e.jsxs("span",{children:["Qty: ",e.jsxs("b",{children:[de.quantity," ",de.unit]})]}),e.jsx("span",{children:de.branch})]})]},de.id))})]}),ce&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mt-1",children:[e.jsx("span",{className:"text-slate-500",children:"‡πÄ‡∏•‡∏Ç R:"}),e.jsx("span",{className:"font-mono text-slate-700",children:X.documentNo||"-"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"}),e.jsx("span",{className:"text-slate-700 truncate max-w-[120px]",title:X.destinationCustomer,children:X.destinationCustomer||"-"})]})]})]}),X.preliminaryDecision&&e.jsx("div",{className:"mt-3 pt-2 border-t border-slate-100",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-500 font-bold",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô:"}),X.preliminaryRoute&&e.jsx("span",{className:"text-[10px] text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded font-bold border border-indigo-100",children:X.preliminaryRoute})]}),e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-center font-bold text-xs shadow-sm border ${X.preliminaryDecision==="Return"?"bg-blue-600 text-white border-blue-700":X.preliminaryDecision==="Sell"?"bg-green-600 text-white border-green-700":X.preliminaryDecision==="Scrap"?"bg-red-600 text-white border-red-700":X.preliminaryDecision==="Internal"?"bg-amber-500 text-white border-amber-600":X.preliminaryDecision==="Claim"?"bg-orange-500 text-white border-orange-600":"bg-slate-500 text-white border-slate-600"}`,children:X.preliminaryDecision==="Return"?"üöö ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤":X.preliminaryDecision==="Sell"?"üíµ ‡∏Ç‡∏≤‡∏¢":X.preliminaryDecision==="Scrap"?"üóëÔ∏è ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢":X.preliminaryDecision==="Internal"?"üè† ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô":X.preliminaryDecision==="Claim"?"üìÑ ‡πÄ‡∏Ñ‡∏•‡∏°":X.preliminaryDecision})]})}),!X.preliminaryDecision&&e.jsx("div",{className:"mt-3 pt-2 border-t border-dashed border-amber-200 bg-amber-50/30",children:e.jsxs("button",{onClick:de=>{de.stopPropagation(),U(X.id)},className:"w-full py-2 px-3 text-xs font-bold text-amber-700 hover:text-amber-800 hover:bg-amber-100 rounded transition-colors flex items-center justify-center gap-1.5",children:[e.jsx(Zt,{className:"w-3.5 h-3.5"}),"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô"]})}),X.founder&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-100 text-[10px] text-slate-500 flex items-center gap-1",children:[e.jsx(Il,{className:"w-3 h-3"})," ‡∏ú‡∏π‡πâ‡∏û‡∏ö: ",X.founder]})]},ne)})})}),m&&Xt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh] animate-slide-up",children:[e.jsxs("div",{className:"px-6 py-4 bg-white border-b border-slate-100 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(fe,{className:"w-6 h-6 text-indigo-600"})," ‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("p",{className:"text-sm text-slate-500 mt-0.5",children:["‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ",t.size," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å"]})]}),e.jsx("button",{onClick:()=>h(!1),"aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(je,{className:"w-6 h-6 text-slate-400"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-800 mb-2",children:"1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("label",{className:`cursor-pointer rounded-xl border p-4 transition-all ${A==="Company"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-700 mb-2",children:[e.jsx("input",{type:"radio","aria-label":"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó",title:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó",name:"transportType",checked:A==="Company",onChange:()=>{M("Company"),E({driverName:"",plateNumber:"",transportCompany:"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"})},className:"text-indigo-600 focus:ring-indigo-500"}),"‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",value:A==="Company"?B.driverName:"",onChange:_=>E({...B,driverName:_.target.value}),disabled:A!=="Company",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"}),e.jsx("input",{type:"text","aria-label":"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",title:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",placeholder:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",value:A==="Company"?B.plateNumber:"",onChange:_=>E({...B,plateNumber:_.target.value}),disabled:A!=="Company",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"})]})]}),e.jsxs("label",{className:`cursor-pointer rounded-xl border p-4 transition-all ${A==="3PL"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-700 mb-2",children:[e.jsx("input",{type:"radio","aria-label":"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏° (3PL)",title:"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏° (3PL)",name:"transportType",checked:A==="3PL",onChange:()=>{M("3PL"),E({driverName:"",plateNumber:"",transportCompany:""})},className:"text-indigo-600 focus:ring-indigo-500"}),"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏£‡πà‡∏ß‡∏° (3PL)"]}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏ô‡∏™‡πà‡∏á...",value:A==="3PL"?B.transportCompany:"",onChange:_=>E({...B,transportCompany:_.target.value}),disabled:A!=="3PL",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"}),e.jsx("input",{type:"text","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",placeholder:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ",value:A==="3PL"?B.driverName:"",onChange:_=>E({...B,driverName:_.target.value}),disabled:A!=="3PL",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"}),e.jsx("input",{type:"text","aria-label":"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",title:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",placeholder:"‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ",value:A==="3PL"?B.plateNumber:"",onChange:_=>E({...B,plateNumber:_.target.value}),disabled:A!=="3PL",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none"})]})]}),e.jsxs("label",{className:`cursor-pointer rounded-xl border p-4 transition-all ${A==="Other"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-200":"border-slate-200 hover:border-slate-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-700 mb-2",children:[e.jsx("input",{type:"radio","aria-label":"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",name:"transportType",checked:A==="Other",onChange:()=>{M("Other"),E({driverName:"",plateNumber:"",transportCompany:""})},className:"text-indigo-600 focus:ring-indigo-500"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:A==="Other"?B.transportCompany:"",onChange:_=>E({...B,transportCompany:_.target.value}),disabled:A!=="Other",className:"w-full text-sm p-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-200 outline-none mt-2"})]})]})]}),e.jsx("hr",{className:"border-slate-100"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-800 mb-2",children:"2. ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("label",{className:`flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all ${P==="Hub"?"bg-indigo-50 border-indigo-500 shadow-sm ring-1 ring-indigo-200":"border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"radio","aria-label":"‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå",title:"‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå",name:"route",checked:P==="Hub",onChange:()=>F("Hub"),className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 text-base",children:"Hub ‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC) ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("label",{className:`flex items-start gap-4 p-4 rounded-xl border cursor-pointer transition-all ${P==="Direct"?"bg-green-50 border-green-500 shadow-sm ring-1 ring-green-200":"border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"radio","aria-label":"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)",title:"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)",name:"route",checked:P==="Direct",onChange:()=>F("Direct"),className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 text-base",children:"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ú‡∏π‡πâ‡∏ú‡∏•‡∏¥‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô Hub)"})]})]}),P==="Direct"&&e.jsxs("div",{className:"p-4 bg-green-50/50 rounded-xl border border-green-100 animate-fade-in",children:[e.jsx("div",{className:"text-sm font-bold text-green-800 mb-2",children:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"}),e.jsxs("div",{className:"space-y-2",children:[["‡∏™‡∏≤‡∏¢ 3","‡∏ã‡∏µ‡πÇ‡∏ô","‡∏ô‡∏µ‡πÇ‡∏≠‡∏Ñ‡∏≠‡πÄ‡∏õ‡∏≠‡πÄ‡∏£‡∏ó"].map(_=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm hover:bg-green-100/50 p-1 rounded",children:[e.jsx("input",{type:"radio","aria-label":_,title:_,name:"directDest",value:_,checked:le===_,onChange:ne=>Y(ne.target.value),className:"text-green-600"})," ",_]},_)),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-sm hover:bg-green-100/50 p-1 rounded",children:[e.jsx("input",{type:"radio","aria-label":"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô",title:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô",name:"directDest",value:"Other",checked:le==="Other",onChange:_=>Y(_.target.value),className:"text-green-600"})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ",le==="Other"&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",value:me,onChange:_=>se(_.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á...",className:"flex-1 ml-2 p-1.5 text-xs border border-green-300 rounded focus:ring-1 focus:ring-green-500 outline-none bg-white",autoFocus:!0})]})]})]})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"px-5 py-2.5 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:K,disabled:S,className:`px-6 py-2.5 text-white font-bold rounded-lg shadow-md flex items-center gap-2 transition-all disabled:opacity-50 disabled:cursor-wait ${P==="Hub"?"bg-indigo-600 hover:bg-indigo-700":"bg-green-600 hover:bg-green-700"}`,children:S?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å..."}):P==="Hub"?e.jsxs(e.Fragment,{children:["‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô / ‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ",e.jsx(fe,{className:"w-5 h-5"})]}):e.jsxs(e.Fragment,{children:["‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô / ‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ",e.jsx(_e,{className:"w-5 h-5"})]})})]})]})}),document.body),v&&Xt.createPortal(e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-indigo-50 to-blue-50",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Zt,{className:"w-6 h-6 text-indigo-600"}),"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô"]}),e.jsx("button",{onClick:()=>d(!1),"aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",className:"text-slate-400 hover:text-slate-600",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsx("p",{className:"text-sm text-slate-600 mt-2",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border-2 transition-all ${N?"bg-amber-50 border-amber-500 shadow-md":"bg-slate-50 border-slate-200"}`,children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:_=>n(_.target.checked),className:"w-5 h-5 accent-amber-600"}),e.jsx("span",{className:`text-lg font-bold ${N?"text-amber-800":"text-slate-600"}`,children:"üí∞ ‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô / ‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Field Settlement)"})]}),e.jsx("p",{className:"text-xs text-slate-500 ml-8 mt-1",children:"‡∏ï‡∏¥‡πä‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏≤‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô Hub"}),N&&e.jsxs("div",{className:"mt-4 ml-8 grid grid-cols-1 md:grid-cols-2 gap-4 animate-fade-in",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (‡∏ö.)"}),e.jsx("input",{type:"number",value:r||"",onChange:_=>b(Number(_.target.value)),className:"w-full p-3 border border-amber-300 rounded-lg text-sm font-bold focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô (Ref.)"}),e.jsx("input",{type:"text",value:u,onChange:_=>x(_.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô / ‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",value:k,onChange:_=>R(_.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-bold text-amber-900 leading-none",children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",value:f,onChange:_=>$(_.target.value),className:"w-full p-3 border border-amber-300 rounded-lg text-sm focus:ring-2 focus:ring-amber-500 bg-white",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢"})]})]})]}),!N&&e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-indigo-50/30",children:[e.jsxs("div",{className:"bg-indigo-100 px-4 py-2 border-b border-indigo-200 font-bold text-indigo-800 flex items-center gap-2 text-sm",children:[e.jsx(fe,{className:"w-4 h-4"})," ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return Route)"]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsxs("div",{className:"p-3 bg-white rounded border border-indigo-100 text-sm",children:[e.jsxs("label",{className:"block font-bold mb-2",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[Pe.map(_=>e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${O===_?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio","aria-label":_,title:_,name:"tempRoute",value:_,checked:O===_,onChange:ne=>{a(ne.target.value)},className:"hidden"}),_]},_)),e.jsxs("label",{className:`px-3 py-1 rounded border cursor-pointer transition-all ${O==="Other"||O&&!Pe.includes(O)?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-slate-50 hover:bg-indigo-50/50"}`,children:[e.jsx("input",{type:"radio","aria-label":"‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ",name:"tempRoute",value:"Other",checked:O==="Other"||O&&!Pe.includes(O),onChange:()=>{a("Other")},className:"hidden"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]})]}),(O==="Other"||O&&!Pe.includes(O))&&e.jsx("input",{type:"text","aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á",value:O==="Other"?"":O,onChange:_=>a(_.target.value),className:"w-full mt-2 p-2 border rounded text-sm focus:ring-2 focus:ring-indigo-500",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",autoFocus:!0})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-5 py-2.5 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:Z,disabled:S,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 shadow-md transition-all disabled:opacity-50 disabled:cursor-wait",children:S?"...":"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"})]})]})}),document.body)]})},ua=()=>{const{items:l,updateReturnRecord:c,ncrReports:i}=Se(),[g,t]=te.useState(""),[s,m]=te.useState(""),[h,S]=te.useState(""),[p,v]=te.useState(!1),d=te.useMemo(()=>l.filter(u=>{if(u.ncrNumber){const x=i.find(k=>k.ncrNo===u.ncrNumber);if(x&&x.status==="Canceled")return!1}return u.status==="InTransitToHub"||u.status==="COL_InTransit"||u.status==="NCR_InTransit"}),[l,i]),w=async(u,x=[])=>{if(p)return;const k=x&&x.length>1;let R=[u],f="SINGLE";if(k){const{isConfirmed:$,isDenied:A,isDismissed:M}=await T.fire({title:"‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (Receive Options)",html:`
                    <div class="text-left">
                        <p class="mb-2">‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô <b>${x.length}</b> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                        <ul class="text-xs text-slate-500 mb-2 list-disc pl-4 bg-slate-50 p-2 rounded">
                            <li>‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£: ${u.documentNo||"-"}</li>
                            <li>NCR/COL: ${u.ncrNumber||u.collectionOrderId||"-"}</li>
                        </ul>
                        <p class="text-sm">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ <b>"‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°"</b> ‡∏´‡∏£‡∏∑‡∏≠ <b>"‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ"</b>?</p>
                    </div>
                `,icon:"question",showDenyButton:!0,showCancelButton:!0,confirmButtonText:`‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏° (${x.length})`,denyButtonText:"‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ",confirmButtonColor:"#f59e0b",denyButtonColor:"#3b82f6",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",reverseButtons:!0});if(M)return;$&&(R=x,f="GROUP")}else{const A=u.documentType==="NCR"||!!u.ncrNumber||u.status==="NCR_InTransit"?"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ NCR ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Hub ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC)?":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ Collection ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Hub (‡∏Ç‡πâ‡∏≤‡∏° QC ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)?";if(!(await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤",text:A,icon:"question",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"})).isConfirmed)return}v(!0);try{await Promise.all(R.map(async $=>{const M=$.documentType==="NCR"||!!$.ncrNumber||$.status==="NCR_InTransit"?"NCR_HubReceived":"COL_HubReceived";await c($.id,{status:M,dateReceived:new Date().toISOString().split("T")[0],dateHubReceived:new Date().toISOString().split("T")[0]})})),await T.fire({icon:"success",title:f==="GROUP"?`‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏° ${R.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à`:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",timer:1500,showConfirmButton:!1})}catch($){console.error("Receive Error:",$),T.fire("Error","Failed to receive item","error")}finally{v(!1)}},o=async()=>{if(a.length===0)return;if((await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?",text:`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ${a.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?`,icon:"warning",showCancelButton:!0,confirmButtonText:"‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Receive All)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){T.fire({title:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...",allowOutsideClick:!1,didOpen:()=>{T.showLoading()}});for(const x of a){const R=x.documentType==="NCR"||!!x.ncrNumber||x.status==="NCR_InTransit"?"NCR_HubReceived":"COL_HubReceived";await c(x.id,{status:R,dateReceived:new Date().toISOString().split("T")[0],dateHubReceived:new Date().toISOString().split("T")[0]})}await T.fire({icon:"success",title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}},O=te.useMemo(()=>{const u=new Set(d.map(x=>x.branch).filter(Boolean));return Array.from(u).sort()},[d]),a=te.useMemo(()=>d.filter(u=>{const x=!g||u.branch===g,k=!s||u.customerName&&u.customerName.toLowerCase().includes(s.toLowerCase()),R=!h||u.destinationCustomer&&u.destinationCustomer.toLowerCase().includes(h.toLowerCase());return x&&k&&R}),[d,g,s,h]),[N,n]=te.useState(new Set),r=te.useMemo(()=>{const u={};return a.forEach(x=>{const k=x.collectionOrderId||x.ncrNumber||x.documentNo||x.id;u[k]||(u[k]=[]),u[k].push(x)}),Object.entries(u).map(([x,k])=>({key:x,items:k,rep:k[0]}))},[a]),b=u=>{n(x=>{const k=new Set(x);return k.has(u)?k.delete(u):k.add(u),k})};return e.jsxs("div",{className:"h-full overflow-auto p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(fe,{className:"w-5 h-5 text-amber-500"})," ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub (Received at Hub)"]}),a.length>0&&e.jsxs("button",{onClick:o,"aria-label":`‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${a.length})`,title:`‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${a.length})`,className:"w-full md:w-auto bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm transition-all flex justify-center",children:["‡∏£‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (",a.length,")"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm mb-4 space-y-3 sticky top-0 z-10",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700 mb-2",children:"‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á (Filters)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsxs("select",{className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none","aria-label":"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",value:g,onChange:u=>t(u.target.value),children:[e.jsx("option",{value:"",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),O.map(u=>e.jsx("option",{value:u,children:u},u))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none","aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤...",value:s,onChange:u=>m(u.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none","aria-label":"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)",title:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á...",value:h,onChange:u=>S(u.target.value)})]})]})]}),a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-400 bg-white rounded-xl border border-slate-200",children:[e.jsx(El,{className:"w-12 h-12 mb-2 opacity-50"}),e.jsx("p",{children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏°‡∏≤‡∏¢‡∏±‡∏á Hub"})]}):e.jsxs("div",{className:"space-y-4",children:[") : (",e.jsx("div",{className:"space-y-4",children:[...r].sort((u,x)=>(x.rep.ncrNumber||x.rep.id).localeCompare(u.rep.ncrNumber||u.rep.id)).map(u=>{const{key:x,items:k,rep:R}=u,f=N.has(x);return e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm hover:shadow-md transition-all text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-9 gap-4 mb-4 border-b border-slate-100 pb-3 relative",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsxs("span",{className:"font-bold text-slate-800 flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3 text-slate-400"})," ",R.branch]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á"}),e.jsx("span",{className:"font-bold text-slate-800",children:R.dateRequested||R.date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"COL No"}),e.jsx("span",{className:"font-mono font-bold text-blue-600",children:R.collectionOrderId||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:R.documentNo||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"NCR No."}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:R.ncrNumber||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Neo Ref"}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:R.neoRefNo||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",title:R.customerName,children:R.customerName||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",title:R.founder,children:R.founder||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"}),e.jsx("span",{className:"font-bold text-slate-800 line-clamp-1",title:R.destinationCustomer,children:R.destinationCustomer||"-"})]}),k.length>1&&e.jsx("div",{className:"absolute top-0 right-0 -mt-2 -mr-2",children:e.jsxs("span",{className:"bg-slate-800 text-white text-[10px] px-2 py-0.5 rounded-full flex items-center gap-1 shadow-sm",children:[e.jsx(st,{className:"w-3 h-3"})," ",k.length]})})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-1",children:[e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded font-mono font-bold",title:"System Ref",children:R.refNo}),R.documentNo&&e.jsx("span",{className:"bg-emerald-100 text-emerald-800 text-xs px-2 py-0.5 rounded font-mono font-bold",title:"Document No (R)",children:R.documentNo}),R.collectionOrderId&&e.jsx("span",{className:"bg-indigo-100 text-indigo-800 text-xs px-2 py-0.5 rounded font-mono font-bold",title:"COL No",children:R.collectionOrderId}),e.jsx("span",{className:"text-slate-600 font-mono font-bold",children:R.productCode})]}),e.jsx("div",{className:"font-bold text-slate-900 text-base mb-1 truncate",title:R.productName,children:R.productName}),R.problemDetail&&e.jsx("p",{className:"text-xs text-slate-500 truncate",children:R.problemDetail})]}),e.jsxs("div",{className:"text-center min-w-[80px] bg-white px-3 py-1 rounded border border-slate-200",children:[e.jsx("span",{className:"text-slate-400 text-[10px] block",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("span",{className:"font-bold text-lg text-blue-600",children:R.quantity})," ",e.jsx("span",{className:"text-xs text-slate-500",children:R.unit})]}),e.jsx("button",{onClick:()=>w(R,k),"aria-label":"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub",title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub",disabled:p,className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm flex items-center gap-2 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-wait",children:p?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö..."}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-4 h-4"})," ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ Hub"]})})]}),k.length>1&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("button",{onClick:()=>b(x),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[11px] font-bold border transition-all
                                                    ${f?"bg-slate-100 text-slate-600 border-slate-200":"bg-slate-50 text-slate-600 border-slate-100 hover:bg-slate-100"}`,children:[f?e.jsx(Ue,{className:"w-3 h-3"}):e.jsx(Qe,{className:"w-3 h-3"}),f?"‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô":`‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô‡∏≠‡∏µ‡∏Å ${k.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),f&&e.jsx("div",{className:"flex flex-col gap-2 mt-2 pt-2 border-t border-slate-100 animate-slide-down",children:k.slice(1).map($=>e.jsxs("div",{className:"bg-slate-50/50 p-2 rounded border border-slate-100 flex flex-col md:flex-row gap-3 items-center ml-4 border-l-4 border-l-slate-300",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex gap-2 mb-0.5",children:e.jsx("span",{className:"text-[10px] font-mono text-slate-500",children:$.productCode})}),e.jsx("div",{className:"font-bold text-slate-700 text-sm truncate",title:$.productName,children:$.productName})]}),e.jsxs("div",{className:"text-center min-w-[60px]",children:[e.jsx("span",{className:"font-bold text-slate-600",children:$.quantity})," ",e.jsx("span",{className:"text-[10px] text-slate-400",children:$.unit})]}),e.jsx("button",{onClick:()=>w($,[]),disabled:p,className:"px-3 py-1 bg-amber-100 text-amber-700 text-xs font-bold rounded hover:bg-amber-200 disabled:opacity-50",children:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"})]},$.id))})]})]},x)})})]})]})},gt=({title:l,status:c,icon:i,color:g,items:t,onPrintClick:s,onItemClick:m,onSplitClick:h,onUndoClick:S,overrideFilter:p})=>{const v=C.useMemo(()=>p?t:t.filter(n=>n.disposition===c&&(c==="RTV"?!n.documentNo:!0)),[t,c,p]),d=C.useMemo(()=>{const n={};return v.forEach(r=>{const b=f=>f?f.trim().replace(/\s+/g,"").toLowerCase():"",u=b(r.documentNo),x=b(r.collectionOrderId),k=b(r.ncrNumber),R=u||x||k||r.id;n[R]||(n[R]=[]),n[R].push(r)}),Object.entries(n).map(([r,b])=>({key:r,items:b,rep:b[0]})).sort((r,b)=>(b.rep.date||"").localeCompare(r.rep.date||""))},[v]),[w,o]=C.useState(new Set),O=n=>{o(r=>{const b=new Set(r);return b.has(n)?b.delete(n):b.add(n),b})},a=g.replace("bg-","border-").replace("500","200"),N=(n,r=!1)=>{var b;return e.jsxs("div",{onClick:()=>m&&m(n),draggable:!r,className:`bg-white p-3 rounded-lg border cursor-pointer hover:shadow-md transition-all group relative
                ${r?"border-l-4 border-l-slate-300 ml-4 mt-2":"shadow-sm border-slate-200 hover:ring-2 hover:ring-blue-400"}
            `,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1 mr-2",children:[e.jsx("span",{className:"font-bold text-slate-700 text-sm line-clamp-1",children:n.productName}),n.parentId&&e.jsx("div",{className:"flex items-center gap-1 mt-0.5",children:e.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-50 text-blue-600 border border-blue-100",children:[e.jsx($l,{className:"w-3 h-3 mr-1"}),"‡πÅ‡∏¢‡∏Å‡∏°‡∏≤"]})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[S&&e.jsx("button",{onClick:u=>{u.stopPropagation(),S(n)},className:"p-1 rounded hover:bg-red-50 text-slate-400 hover:text-red-600 transition-colors","aria-label":"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Reverse)",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Reverse Status)",children:e.jsx(Ee,{className:"w-3 h-3"})}),h&&e.jsx("button",{onClick:u=>{u.stopPropagation(),h(n)},className:"p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-blue-600 transition-colors","aria-label":`‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item) - ${n.quantity} ${n.unit}`,title:`‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item) - ${n.quantity} ${n.unit}`,children:e.jsx(ft,{className:"w-3 h-3"})}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded border ${n.condition==="New"?"bg-green-50 text-green-600 border-green-100":"bg-red-50 text-red-600 border-red-100"}`,children:n.condition})]})]}),e.jsxs("div",{className:"text-xs text-slate-500 space-y-1 mt-2 border-t pt-2 border-slate-100",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("span",{className:"font-bold text-slate-700 truncate",children:n.branch})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á"}),e.jsx("span",{className:"font-bold text-slate-700 truncate",children:n.date})]})]}),(n.neoRefNo||n.ncrNumber||n.collectionOrderId||n.documentNo)&&e.jsxs("div",{className:"grid grid-cols-2 gap-1 mt-1",children:[n.documentNo&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-emerald-600 font-bold",children:"R No."}),e.jsx("span",{className:"font-mono text-xs text-emerald-700 bg-emerald-50 px-1 rounded w-fit truncate",title:n.documentNo,children:n.documentNo})]}),n.collectionOrderId&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-indigo-600 font-bold",children:"COL No."}),e.jsx("span",{className:"font-mono text-xs text-indigo-700 bg-indigo-50 px-1 rounded w-fit truncate",title:n.collectionOrderId,children:n.collectionOrderId})]}),n.neoRefNo&&!n.documentNo&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"Ref Neo"}),e.jsx("span",{className:"font-medium text-slate-700 truncate",title:n.neoRefNo,children:n.neoRefNo})]}),n.ncrNumber&&e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-red-500",children:"NCR No"}),e.jsx("span",{className:"font-bold text-red-600 truncate",title:n.ncrNumber,children:n.ncrNumber})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("span",{className:"font-medium text-slate-700 truncate",title:n.customerName,children:n.customerName||"-"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] text-slate-400",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á (‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)"}),e.jsx("span",{className:"font-medium text-slate-700 truncate",title:n.destinationCustomer,children:n.destinationCustomer||"-"})]}),e.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-1.5 rounded mt-1",children:[e.jsx("span",{className:"text-slate-500",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsxs("span",{className:"font-bold text-slate-800 text-sm",children:[n.quantity," ",n.unit]})]}),c==="RTV"&&n.destinationCustomer&&e.jsxs("div",{className:"text-[10px] text-amber-600 bg-amber-50 p-1 rounded mt-1",children:["Route: ",n.destinationCustomer]}),n.isFieldSettled&&e.jsxs("div",{className:"mt-2 p-2 bg-amber-50 border border-amber-200 rounded-lg shadow-sm border-l-4 border-l-amber-500",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-[10px] font-bold text-amber-800 uppercase tracking-tighter",children:"üí∞ ‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô (Settled)"}),e.jsxs("span",{className:"text-sm font-black text-amber-900 underline decoration-amber-300 decoration-2",children:[(b=n.fieldSettlementAmount)==null?void 0:b.toLocaleString()," ‡∏ö."]})]}),n.fieldSettlementEvidence&&e.jsxs("div",{className:"text-[10px] text-amber-700 font-medium truncate italic bg-white/50 px-1 rounded",children:["Ref: ",n.fieldSettlementEvidence]}),(n.fieldSettlementName||n.fieldSettlementPosition)&&e.jsxs("div",{className:"mt-1 flex flex-col border-t border-amber-200/50 pt-1 text-[9px] text-amber-900/70 font-bold",children:[e.jsxs("span",{children:["üë§ ",n.fieldSettlementName||"-"]}),n.fieldSettlementPosition&&e.jsxs("span",{className:"text-[8px] font-normal opacity-75 ml-4",children:["(",n.fieldSettlementPosition,")"]})]})]}),n.preliminaryDecision&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 flex flex-col gap-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à:"}),n.preliminaryRoute&&e.jsx("span",{className:"text-[9px] bg-indigo-50 text-indigo-700 px-1.5 py-0.5 rounded border border-indigo-100 font-bold",children:n.preliminaryRoute})]}),e.jsx("span",{className:`px-2 py-1 rounded text-center font-bold text-[10px] text-white shadow-sm border ${n.preliminaryDecision==="Return"?"bg-blue-600 border-blue-700":n.preliminaryDecision==="Sell"?"bg-green-600 border-green-700":n.preliminaryDecision==="Scrap"?"bg-red-600 border-red-700":n.preliminaryDecision==="Internal"?"bg-amber-500 border-amber-600":n.preliminaryDecision==="Claim"?"bg-orange-500 border-orange-600":"bg-slate-500 border-slate-600"}`,children:n.preliminaryDecision==="Return"?"üöö ‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤":n.preliminaryDecision==="Sell"?"üíµ ‡∏Ç‡∏≤‡∏¢":n.preliminaryDecision==="Scrap"?"üóëÔ∏è ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢":n.preliminaryDecision==="Internal"?"üè† ‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô":n.preliminaryDecision==="Claim"?"üìÑ ‡πÄ‡∏Ñ‡∏•‡∏°":n.preliminaryDecision})]})]})]},n.id)};return e.jsxs("div",{className:"min-w-[300px] bg-slate-100 rounded-xl p-4 flex flex-col h-full border border-slate-200",children:[e.jsxs("div",{className:`font-bold text-slate-700 mb-4 flex justify-between items-center pb-2 border-b-2 ${a}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${g} text-white`,children:e.jsx(i,{className:"w-4 h-4"})}),e.jsx("span",{children:l})]}),e.jsx("span",{className:"bg-white px-2 py-0.5 rounded-full text-xs border shadow-sm",children:v.length})]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:d.map(n=>{const r=w.has(n.key);return n.items.length>1?e.jsxs("div",{className:"bg-slate-200/50 p-1.5 rounded-xl border border-slate-300",children:[e.jsxs("div",{className:"px-2 mb-1.5 flex justify-between items-center",children:[e.jsxs("span",{className:"text-[10px] font-bold text-slate-600 truncate max-w-[70%]",children:[n.items.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ",n.rep.productName]}),n.items.some(u=>u.productCode!==n.rep.productCode)&&e.jsx("span",{className:"text-[9px] bg-white px-1.5 py-0.5 rounded border border-slate-200 text-slate-400",children:"‡∏Ñ‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),N(n.rep),e.jsxs("button",{onClick:()=>O(n.key),className:`flex items-center justify-center gap-2 w-full py-2 mt-1 rounded-lg text-xs font-bold transition-all
                                    ${r?"bg-slate-200 text-slate-600":"bg-blue-100 text-blue-700 hover:bg-blue-200"}
                                `,children:[r?e.jsx(Ue,{className:"w-4 h-4"}):e.jsx(Qe,{className:"w-4 h-4"}),r?"‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô":`‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° (${n.items.length-1})`]}),r&&e.jsx("div",{className:"mt-2 space-y-2 pl-2 border-l-2 border-slate-300 animate-slide-down",children:n.items.slice(1).map(u=>N(u,!0))})]},n.key):N(n.rep)})}),v.length>0&&e.jsxs("button",{onClick:()=>s(c,v),"aria-label":`‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (${v.length})`,className:"mt-4 w-full py-2 bg-white border border-slate-300 rounded-lg text-sm font-bold text-slate-600 hover:bg-slate-50 hover:text-blue-600 flex items-center justify-center gap-2 transition-colors",children:[e.jsx(_e,{className:"w-4 h-4"})," ‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (",v.length,")"]})]})},ha=({onPrintDocs:l})=>{const{items:c,updateReturnRecord:i,ncrReports:g}=Se(),[t,s]=te.useState("NCR"),m=te.useMemo(()=>c.filter(x=>{if(x.ncrNumber){const f=g.find($=>$.ncrNo===x.ncrNumber);if(f&&f.status==="Canceled")return!1}const k=x.documentType==="NCR"||!!x.ncrNumber||x.status.startsWith("NCR_");return k?k?x.status==="NCR_QCCompleted"||x.status==="QCCompleted"||x.status==="Settled_OnField":!1:x.status==="COL_HubReceived"||x.status==="ReceivedAtHub"||x.status==="HubReceived"||x.status==="QCCompleted"}),[c,g]),h=async(x,k)=>{l?l(x,k):console.error("onPrintDocs prop missing")},S=()=>{T.fire({icon:"info",title:"‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Under Construction)",text:"‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split) ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤",confirmButtonText:"‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö"})},p=async x=>{const k=x.documentType==="NCR"||!!x.ncrNumber||x.status.startsWith("NCR_");let R="",f="";if(k?(R="NCR_HubReceived",f='‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ "‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC)"'):(R="COL_InTransit",f='‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ "‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub"'),x.status==="QCCompleted"&&(R="ReceivedAtHub"),x.status==="HubReceived"&&(R="InTransitToHub"),(await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo)",text:`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£${f} ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`,icon:"warning",showCancelButton:!0,confirmButtonText:"‡πÉ‡∏ä‡πà, ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#f59e0b"})).isConfirmed)try{await i(x.id,{status:R}),await T.fire({icon:"success",title:"‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:"‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß",timer:1500,showConfirmButton:!1})}catch(A){console.error("Undo Error:",A),T.fire("Error","Failed to undo action","error")}},v=x=>x.ncrNumber||x.id.startsWith("NCR")||x.documentType==="NCR",d=x=>!v(x),w=te.useMemo(()=>m.filter(v),[m]),o=te.useMemo(()=>m.filter(d),[m]),a=(t==="NCR"?w:o).map(x=>({...x,disposition:x.disposition||"RTV"})),N=a.filter(x=>x.disposition==="RTV"),n=a.filter(x=>x.disposition==="Restock"),r=a.filter(x=>x.disposition==="Claim"),b=a.filter(x=>x.disposition==="InternalUse"),u=a.filter(x=>x.disposition==="Recycle"||x.disposition==="Scrap");return e.jsxs("div",{className:"h-full flex flex-col p-4",children:[e.jsxs("div",{className:"flex gap-4 mb-4 border-b border-slate-200 pb-2",children:[e.jsxs("button",{onClick:()=>s("NCR"),className:`px-6 py-2 rounded-lg font-bold transition-all flex items-center gap-2 ${t==="NCR"?"bg-amber-100 text-amber-700 border border-amber-200 shadow-sm":"bg-white text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(It,{className:"w-5 h-5"}),"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR (",w.length,")"]}),e.jsxs("button",{onClick:()=>s("COLLECTION"),className:`px-6 py-2 rounded-lg font-bold transition-all flex items-center gap-2 ${t==="COLLECTION"?"bg-teal-100 text-teal-700 border border-teal-200 shadow-sm":"bg-white text-slate-500 hover:bg-slate-50"}`,children:[e.jsx(Ce,{className:"w-5 h-5"}),"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Collection (",o.length,")"]})]}),e.jsxs("div",{className:"flex-1 overflow-x-auto flex gap-4",children:[e.jsx(gt,{title:t==="NCR"?"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô NCR (RTV)":"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô Collection (RTV)",status:"RTV",icon:t==="NCR"?It:Ce,color:t==="NCR"?"bg-amber-600":"bg-teal-600",items:N,onPrintClick:h,onSplitClick:S,onUndoClick:p,overrideFilter:!0}),t==="NCR"&&e.jsxs(e.Fragment,{children:[e.jsx(gt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏¢ (Restock)",status:"Restock",icon:Ee,color:"bg-green-500",items:n,onPrintClick:h,onSplitClick:S,onUndoClick:p}),e.jsx(gt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",status:"Claim",icon:Ft,color:"bg-blue-500",items:r,onPrintClick:h,onSplitClick:S,onUndoClick:p}),e.jsx(gt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",status:"InternalUse",icon:ts,color:"bg-purple-500",items:b,onPrintClick:h,onSplitClick:S,onUndoClick:p}),e.jsx(gt,{title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",status:"Recycle",icon:De,color:"bg-red-500",items:u,onPrintClick:h,onSplitClick:S,onUndoClick:p})]})]})]})},as=({disposition:l})=>{if(!l||l==="Pending")return e.jsx("span",{className:"text-slate-400",children:"-"});const c={RTV:{color:"bg-amber-50 text-amber-700 border-amber-200",icon:fe,label:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Return)"},Restock:{color:"bg-green-50 text-green-700 border-green-200",icon:Ee,label:"‡∏Ç‡∏≤‡∏¢ (Sell)"},Recycle:{color:"bg-red-50 text-red-700 border-red-200",icon:De,label:"‡∏ó‡∏¥‡πâ‡∏á (Scrap)"},InternalUse:{color:"bg-purple-50 text-purple-700 border-purple-200",icon:ts,label:"‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô"},Claim:{color:"bg-blue-50 text-blue-700 border-blue-200",icon:Ft,label:"‡πÄ‡∏Ñ‡∏•‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô"}}[l];if(!c)return e.jsxs("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-[10px] border border-slate-200 flex items-center gap-1",children:[e.jsx(ze,{className:"w-3 h-3"})," ‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏Ñ‡πà‡∏≤"]});const i=c.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold border ${c.color}`,children:[e.jsx(i,{className:"w-3 h-3"})," ",c.label]})},ga=()=>{const{items:l,updateReturnRecord:c,ncrReports:i}=Se(),[g,t]=C.useState(!1),[s,m]=C.useState(new Set),[h,S]=C.useState("ALL"),p=te.useMemo(()=>l.filter(N=>{if(N.ncrNumber){const b=i.find(u=>u.ncrNo===N.ncrNumber);if(b&&b.status==="Canceled")return!1}if(!(N.status==="DocsCompleted"||N.status==="COL_Documented"||N.status==="NCR_Documented"||N.status==="DirectReturn"||N.status==="ReturnToSupplier"))return!1;const r=N.documentType==="NCR"||!!N.ncrNumber||N.id&&N.id.startsWith("NCR");return h==="NCR"?r:h==="COL"?!r:!0}),[l,h,i]),v=te.useMemo(()=>{const N={};return p.forEach(n=>{const r=R=>R?R.trim().replace(/\s+/g,"").toLowerCase():"",b=r(n.documentNo),u=r(n.collectionOrderId),x=r(n.ncrNumber),k=b||u||x||n.id;N[k]||(N[k]=[]),N[k].push(n)}),Object.entries(N).map(([n,r])=>({key:n,items:r,rep:r[0]})).sort((n,r)=>(r.rep.dateRequested||"").localeCompare(n.rep.dateRequested||""))},[p]),d=te.useMemo(()=>l.filter(N=>N.status==="Completed").sort((N,n)=>new Date(n.dateCompleted||"").getTime()-new Date(N.dateCompleted||"").getTime()),[l]),w=async N=>{if(g)return;if((await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô",text:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ (Complete Job)?",icon:"question",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){t(!0);try{await c(N,{status:"Completed",dateCompleted:new Date().toISOString().split("T")[0]}),await T.fire({icon:"success",title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",timer:1500,showConfirmButton:!1})}finally{t(!1)}}},o=async N=>{if(g)return;const{value:n}=await T.fire({title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Undo)",text:'‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô "‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Docs)"',input:"password",inputPlaceholder:"‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô...",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#f59e0b",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(n){if(n!=="1234"){await T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error");return}t(!0);try{let r="ReceivedAtHub";N.documentType==="NCR"||N.ncrNumber||N.id&&N.id.startsWith("NCR")?r="QCPassed":r="ReceivedAtHub",await c(N.id,{status:r}),T.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}).fire({icon:"success",title:`‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ${N.id} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`})}finally{t(!1)}}},O=N=>{m(n=>{const r=new Set(n);return r.has(N)?r.delete(N):r.add(N),r})},a=(N,n=!1,r=!1,b=!1,u="")=>{var k;const x=N.documentType==="NCR"||!!N.ncrNumber||N.id&&N.id.startsWith("NCR");return e.jsxs("tr",{className:`transition-colors border-b last:border-0 align-top text-xs text-slate-700 
                ${x?"bg-amber-50/50 hover:bg-amber-100/50":"bg-teal-50/50 hover:bg-teal-100/50"}
                ${n?"bg-opacity-30":""}
            `,children:[e.jsx("td",{className:`px-3 py-2 border-r text-center align-top ${n?"pl-8 bg-slate-50/50":""}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>w(N.id),disabled:g,"aria-label":"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Complete)",className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1.5 rounded text-xs font-bold shadow-sm flex items-center gap-1 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-wait",title:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Complete)",children:g?"...":e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-3 h-3"})," ‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"]})}),e.jsx("button",{onClick:()=>o(N),disabled:g,"aria-label":"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo to Docs)",className:"bg-amber-100 hover:bg-amber-200 text-amber-700 px-2 py-1.5 rounded text-xs font-bold shadow-sm flex items-center gap-1 transition-all active:scale-95 border border-amber-300 disabled:opacity-50 disabled:cursor-wait",title:"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Undo to Docs)",children:e.jsx(Ee,{className:"w-3 h-3"})})]})}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:e.jsxs("span",{className:"font-bold flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3 text-slate-400"})," ",N.branch]})}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:e.jsxs("div",{className:"flex items-start gap-2",children:[!n&&r&&e.jsx("button",{onClick:()=>O(u),className:"mt-0.5 text-blue-600 hover:text-blue-800 transition-colors",title:b?"‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏¢":"‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏¢",children:b?e.jsx(Ue,{className:"w-4 h-4"}):e.jsx(Qe,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold text-slate-800 flex items-center gap-2",children:[N.productCode,r&&!n&&e.jsxs("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 rounded-full",children:["+",((k=v.find(R=>R.key===u))==null?void 0:k.items.length)-1," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsx("div",{className:"line-clamp-2",title:N.productName,children:N.productName})]})]})}),e.jsxs("td",{className:"px-3 py-2 border-r text-center font-bold text-slate-700",children:[N.quantity," ",N.unit]}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:N.dateRequested}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-700",children:N.ncrNumber||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-indigo-700 font-bold",children:N.collectionOrderId||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-700",children:N.neoRefNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-blue-700 font-bold",children:x?"-":N.documentNo||N.refNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-slate-700",children:N.tmNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-slate-700",children:N.invoiceNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-700",children:N.customerName}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-700",children:N.founder||"-"}),e.jsx("td",{className:"px-3 py-2 align-top",children:e.jsx("span",{className:"px-2 py-1 rounded-full bg-slate-100 border border-slate-200 text-slate-700 block text-center",children:N.destinationCustomer||N.dispositionRoute||"-"})})]},N.id)};return e.jsxs("div",{className:"h-full flex flex-col p-6 animate-fade-in overflow-hidden",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-6 h-6 text-green-600"})," 6. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Pending Completion)"]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col mb-6 max-h-[60%]",children:[e.jsx("div",{className:"p-4 bg-purple-50 border-b border-purple-100 flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-bold text-purple-800",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ (",p.length,")"]}),e.jsx("div",{className:"flex bg-white rounded-lg p-1 border border-purple-200 shadow-sm",children:["ALL","NCR","COL"].map(N=>e.jsx("button",{onClick:()=>S(N),className:`px-3 py-1 rounded text-xs font-bold transition-all ${h===N?"bg-purple-100 text-purple-700 shadow-sm":"text-slate-500 hover:bg-slate-50"}`,children:N==="ALL"?"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î":N},N))})]})}),e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 border-r text-center min-w-[100px]",children:"Action"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[200px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r text-center min-w-[80px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"NCR No."}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"COL No."}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"Neo Doc"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("th",{className:"px-3 py-3 min-w-[120px]",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:14,className:"p-8 text-center text-slate-400",children:"‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"})}):v.map(N=>{const n=N.items.length>1,r=s.has(N.key);return e.jsxs(te.Fragment,{children:[a(N.rep,!1,n,r,N.key),n&&r&&N.items.slice(1).map(b=>a(b,!0))]},N.key)})})]})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-green-500"})," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Completed)"]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 flex-1 overflow-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[200px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-3 py-3 border-r text-center min-w-[80px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"NCR No."}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"COL No."}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"Neo Doc"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[150px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-3 py-3 min-w-[100px]",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[d.slice(0,20).map(N=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors opacity-75 align-top text-xs text-slate-700",children:[e.jsx("td",{className:"px-3 py-2 border-r",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3 text-slate-400"})," ",N.branch]})}),e.jsxs("td",{className:"px-3 py-2 border-r",children:[e.jsx("div",{className:"font-bold text-slate-700",children:N.productCode}),e.jsx("div",{className:"text-slate-500",title:N.productName,children:N.productName})]}),e.jsxs("td",{className:"px-3 py-2 border-r text-center font-bold text-slate-600",children:[N.quantity," ",N.unit]}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:N.dateCompleted}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:N.ncrNumber||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-indigo-600 font-bold",children:N.collectionOrderId||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:N.neoRefNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-blue-600 font-bold",children:N.documentType==="NCR"||N.ncrNumber||N.id&&N.id.startsWith("NCR")?"-":N.documentNo||N.refNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-slate-600",children:N.tmNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r font-mono text-slate-600",children:N.invoiceNo||"-"}),e.jsx("td",{className:"px-3 py-2 border-r text-slate-600",children:N.customerName}),e.jsx("td",{className:"px-3 py-2",children:e.jsx(as,{disposition:N.disposition})})]},N.id)),d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:12,className:"p-8 text-center text-slate-400 italic",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô"})})]})]})})]})]})},fa=()=>{const{items:l,ncrReports:c}=Se(),[i,g]=C.useState(""),t=C.useMemo(()=>l.filter(m=>{var h,S,p;if(m.ncrNumber){const v=c.find(d=>d.ncrNo===m.ncrNumber);if(v&&v.status==="Canceled")return!1}return(m.status==="Completed"||m.status==="DirectReturn")&&(m.productName.toLowerCase().includes(i.toLowerCase())||((h=m.productCode)==null?void 0:h.toLowerCase().includes(i.toLowerCase()))||m.id.toLowerCase().includes(i.toLowerCase())||((S=m.customerName)==null?void 0:S.toLowerCase().includes(i.toLowerCase()))||((p=m.ncrNumber)==null?void 0:p.toLowerCase().includes(i.toLowerCase())))}).sort((m,h)=>{const S=m.dateCompleted||m.dateInTransit||m.date,p=h.dateCompleted||h.dateInTransit||h.date;return new Date(p).getTime()-new Date(S).getTime()}),[l,i,c]),s=C.useMemo(()=>({total:t.length,direct:t.filter(m=>m.status==="DirectReturn").length,processed:t.filter(m=>m.status==="Completed").length}),[t]);return e.jsxs("div",{className:"h-full flex flex-col p-6 space-y-6 overflow-hidden bg-slate-50/50",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(Le,{className:"w-8 h-8 text-green-600"}),"7. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Completed Items)"]}),e.jsx("p",{className:"text-slate-500 mt-1 ml-10",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏´‡∏£‡∏∑‡∏≠ ‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Total)"}),e.jsx("p",{className:"text-2xl font-bold text-slate-700",children:s.total})]}),e.jsx("div",{className:"bg-slate-100 p-2 rounded-lg text-slate-500",children:e.jsx(Pl,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-green-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-green-600 uppercase",children:"‡∏ú‡πà‡∏≤‡∏ô Hub (Processed)"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:s.processed})]}),e.jsx("div",{className:"bg-green-100 p-2 rounded-lg text-green-600",children:e.jsx(Le,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-orange-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-orange-600 uppercase",children:"‡∏™‡πà‡∏á‡∏ï‡∏£‡∏á (Direct Return)"}),e.jsx("p",{className:"text-2xl font-bold text-orange-700",children:s.direct})]}),e.jsx("div",{className:"bg-orange-100 p-2 rounded-lg text-orange-600",children:e.jsx(Be,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"relative w-72",children:[e.jsx("input",{type:"text",placeholder:"Search items...",value:i,onChange:m=>g(m.target.value),className:"pl-9 pr-4 py-2 w-full border border-slate-300 rounded-lg text-sm focus:ring-1 focus:ring-indigo-500 outline-none"}),e.jsx(Fe,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["Showing ",e.jsx("span",{className:"font-bold text-slate-800",children:t.length})," items"]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-white rounded-xl border border-slate-200 shadow-sm relative",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200 sticky top-0 shadow-sm z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Status"}),e.jsx("th",{className:"p-4",children:"ID / NCR No."}),e.jsx("th",{className:"p-4",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)"}),e.jsx("th",{className:"p-4 text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-4",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("th",{className:"p-4",children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ (Closed Date)"}),e.jsx("th",{className:"p-4",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à (Disposition)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"p-12 text-center text-slate-400 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(_t,{className:"w-8 h-8 text-slate-300"})}),e.jsx("p",{children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß"})]})}):t.map(m=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"p-4",children:m.status==="Completed"?e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-bold border border-green-200 inline-flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"})," Completed"]}):e.jsxs("span",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-bold border border-orange-200 inline-flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3"})," Direct"]})}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-slate-800",children:m.ncrNumber||m.id}),e.jsx("div",{className:"text-xs text-slate-400 font-mono",children:m.id})]}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-slate-800",children:m.productName}),e.jsx("div",{className:"text-xs text-slate-500",children:m.productCode})]}),e.jsxs("td",{className:"p-4 text-center",children:[e.jsx("span",{className:"font-bold text-slate-700",children:m.quantity})," ",e.jsx("span",{className:"text-xs text-slate-500",children:m.unit})]}),e.jsx("td",{className:"p-4 text-slate-600",children:m.branch}),e.jsx("td",{className:"p-4 text-slate-600 text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"}),m.dateCompleted?new Date(m.dateCompleted).toLocaleDateString():m.dateInTransit?new Date(m.dateInTransit).toLocaleDateString():"-"]})}),e.jsx("td",{className:"p-4",children:m.status==="Completed"?e.jsx(as,{disposition:m.disposition}):e.jsx("span",{className:"text-xs text-slate-500",children:"-"})})]},m.id))})]})})]})},Na=({isOpen:l,onClose:c,selectionItems:i,selectionStatus:g,selectedItemIds:t,toggleSelection:s,handleGenerateDoc:m,onSplit:h})=>l?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white shadow-xl w-full h-full flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5 text-blue-600"})," ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"]}),e.jsx("button",{onClick:c,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-100 rounded-full",children:e.jsx(je,{className:"w-5 h-5 text-slate-400"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center bg-blue-50 p-3 rounded-lg border border-blue-100",children:[e.jsx(as,{disposition:g||void 0}),e.jsxs("span",{className:"text-xs text-blue-600",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ",t.size," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsx("div",{className:"space-y-2",children:i.map(S=>e.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-lg border hover:bg-slate-50 transition-all ${t.has(S.id)?"border-blue-500 bg-blue-50/30":"border-slate-200"}`,children:[e.jsx("div",{className:"pt-1",children:e.jsx("input",{type:"checkbox","aria-label":`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ${S.productName}`,title:`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ${S.productName}`,checked:t.has(S.id),onChange:()=>s(S.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 cursor-pointer"})}),e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>s(S.id),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:S.productName}),e.jsx("span",{className:"text-xs font-mono text-slate-400",children:S.id})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex gap-2",children:[e.jsx("span",{children:S.branch}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:S.customerName})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-bold text-sm text-slate-700",children:[S.quantity," ",S.unit]}),e.jsx("button",{onClick:p=>{p.stopPropagation(),h(S)},className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors border border-blue-200",title:"‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item)",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-git-fork",children:[e.jsx("circle",{cx:"12",cy:"18",r:"3"}),e.jsx("circle",{cx:"6",cy:"6",r:"3"}),e.jsx("circle",{cx:"18",cy:"6",r:"3"}),e.jsx("path",{d:"M6 9v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9"}),e.jsx("path",{d:"M12 12v3"})]})})]})]},S.id))})]}),e.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-end gap-3 bg-slate-50",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 text-slate-500 hover:text-slate-700 hover:bg-slate-200 rounded-lg font-bold text-sm",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{onClick:m,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 shadow-sm flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Generate)"]})]})]})}):null,ja=({isOpen:l,onClose:c,docData:i,docConfig:g,setDocConfig:t,isDocEditable:s,setIsDocEditable:m,includeVat:h,setIncludeVat:S,vatRate:p,setVatRate:v,includeDiscount:d,setIncludeDiscount:w,discountRate:o,setDiscountRate:O,handleConfirmDocGeneration:a,onUpdateItem:N,isSubmitting:n=!1})=>{const[r,b]=C.useState({}),[u,x]=C.useState({});if(!l||!i)return null;const k=i.items.map(A=>{let M=A.pricePerUnit;r[A.id]!==void 0&&(M=r[A.id]);let B=A.discountPercent||0;return d?u[A.id]!==void 0?B=u[A.id]:A.discountPercent===void 0&&o>0&&(B=o):B=0,{...A,pricePerUnit:M,priceBill:M*(A.quantity||1),discountPercent:B}}),f=((A,M,B)=>{let E=0,P=0;A.forEach(me=>{const se=me.priceBill||0,G=se*((me.discountPercent||0)/100);E+=se,P+=G});const F=E-P,le=M?F*(B/100):0,Y=F+le;return{subtotal:E,discount:P,afterDiscount:F,vat:le,net:Y}})(k,h,p),$=()=>{const A=g.titleTH||ct(i.type).th,M=g.companyNameTH,B=ct(i.type);let E=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta charset="UTF-8">
                <!--[if gte mso 9]>
                <xml>
                    <x:ExcelWorkbook>
                        <x:ExcelWorksheets>
                            <x:ExcelWorksheet>
                                <x:Name>${A}</x:Name>
                                <x:WorksheetOptions>
                                    <x:DisplayGridlines/>
                                </x:WorksheetOptions>
                            </x:ExcelWorksheet>
                        </x:ExcelWorksheets>
                    </x:ExcelWorkbook>
                </xml>
                <![endif]-->
                <style>
                    th { font-weight: bold; background-color: #f0f0f0; border: 1px solid #000; padding: 5px; }
                    td { border: 1px solid #000; padding: 5px; }
                    .num { text-align: right; }
                    .center { text-align: center; }
                </style>
            </head>
            <body>
                <h2>${M}</h2>
                <h3>${A}</h3>
                <p>Document No: ${B.code} (${B.rev})</p>
                <p>Date: ${new Date().toLocaleDateString("th-TH")}</p>
                
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                            <th>‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th>‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th>‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${i.items.map((Y,me)=>`
                            <tr>
                                <td class="center">${me+1}</td>
                                <td style="mso-number-format:'@'">${Y.productCode}</td>
                                <td>${Y.productName}</td>
                                <td class="center">${Y.quantity}</td>
                                <td class="center">${Y.unit}</td>
                                <td class="num">${(Y.priceBill||0).toFixed(2)}</td>
                                <td class="num">${((Y.priceBill||0)*Y.quantity).toFixed(2)}</td>
                            </tr>
                        `).join("")}
                        <tr>
                            <td colspan="6" class="num" style="font-weight:bold;">‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (Subtotal)</td>
                            <td class="num" style="font-weight:bold;">${f.subtotal.toFixed(2)}</td>
                        </tr>
                        ${d?`
                        <tr>
                            <td colspan="6" class="num">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (Discount ${o}%)</td>
                            <td class="num" style="color:red;">-${f.discount.toFixed(2)}</td>
                        </tr>
                        <tr>
                            <td colspan="6" class="num" style="font-weight:bold;">‡∏¢‡∏≠‡∏î‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (After Discount)</td>
                            <td class="num" style="font-weight:bold;">${f.afterDiscount.toFixed(2)}</td>
                        </tr>
                        `:""}
                        ${h?`
                        <tr>
                            <td colspan="6" class="num">‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏° (VAT ${p}%)</td>
                            <td class="num">${f.vat.toFixed(2)}</td>
                        </tr>
                        <tr>
                            <td colspan="6" class="num" style="font-weight:bold;">‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ (Net Total)</td>
                            <td class="num" style="font-weight:bold;">${f.net.toFixed(2)}</td>
                        </tr>
                        `:""}
                    </tbody>
                </table>
            </body>
            </html>
        `;const P=new Blob([E],{type:"application/vnd.ms-excel"}),F=URL.createObjectURL(P),le=document.createElement("a");le.href=F,le.download=`${B.code}_${new Date().toISOString().split("T")[0]}.xls`,document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(F)};return e.jsxs("div",{className:"fixed inset-0 bg-black/60 z-50 flex flex-col animate-fade-in text-slate-900 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-800 text-white p-4 flex justify-between items-center shadow-md print:hidden w-full z-10",children:[e.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5 text-blue-400"})," ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Print Preview)"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-2 py-1 border border-slate-600",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:A=>w(A.target.checked),className:"rounded text-blue-500 focus:ring-blue-500 bg-slate-600 border-slate-500"}),e.jsx("span",{className:d?"text-white":"text-slate-400",children:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î"})]}),d&&e.jsxs("div",{className:"flex items-center gap-1 border-l border-slate-600 pl-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 mr-1",children:"All:"}),e.jsx("input",{type:"number","aria-label":"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå",title:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÄ‡∏õ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡πá‡∏ô‡∏ï‡πå",value:o,onChange:A=>{const M=Number(A.target.value);O(M);const B={};k.forEach(E=>{B[E.id]=M}),x(E=>({...E,...B}))},className:"w-12 bg-slate-800 border border-slate-500 rounded px-1 text-center text-xs text-white focus:ring-1 focus:ring-blue-500 outline-none",min:"0",max:"100"}),e.jsx("span",{className:"text-xs text-slate-400",children:"%"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-700 rounded-lg px-2 py-1 border border-slate-600",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:A=>S(A.target.checked),className:"rounded text-blue-500 focus:ring-blue-500 bg-slate-600 border-slate-500"}),e.jsx("span",{className:h?"text-white":"text-slate-400",children:"‡∏Ñ‡∏¥‡∏î VAT"})]}),h&&e.jsxs("div",{className:"flex items-center gap-1 border-l border-slate-600 pl-2",children:[e.jsx("input",{type:"number","aria-label":"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°",title:"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏†‡∏≤‡∏©‡∏µ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°",value:p,onChange:A=>v(Number(A.target.value)),className:"w-12 bg-slate-800 border border-slate-500 rounded px-1 text-center text-xs text-white focus:ring-1 focus:ring-blue-500 outline-none",min:"0",max:"100"}),e.jsx("span",{className:"text-xs text-slate-400",children:"%"})]})]}),e.jsx("div",{className:"h-6 w-px bg-slate-600 mx-2"}),e.jsxs("button",{onClick:()=>m(!s),className:`px-3 py-1.5 text-xs font-bold rounded-lg border flex items-center gap-1 transition-all ${s?"bg-amber-500 border-amber-500 text-white":"bg-transparent border-slate-600 text-slate-300 hover:border-slate-400"}`,children:[e.jsx(Ll,{className:"w-3 h-3"})," ",s?"Editing Mode":"Edit Header"]}),e.jsxs("button",{onClick:$,className:"px-3 py-2 bg-green-700 text-white rounded-lg hover:bg-green-600 font-bold text-sm flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"})," Excel"]}),e.jsxs("button",{onClick:()=>window.print(),className:"px-4 py-2 bg-white text-slate-900 rounded-lg hover:bg-slate-100 font-bold text-sm flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"})," ‡∏û‡∏¥‡∏°‡∏û‡πå"]}),e.jsx("button",{disabled:n,onClick:async()=>{(await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",text:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£? (Confirm Save & Generate Document)",icon:"question",showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"})).isConfirmed&&a()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-bold text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-wait",children:n?e.jsx(e.Fragment,{children:"‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å..."}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"]})}),e.jsx("button",{onClick:c,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"ml-2 p-2 hover:bg-slate-700 rounded-full",children:e.jsx(je,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-slate-100 p-8 print:p-0 print:bg-white print:overflow-visible",children:e.jsxs("div",{className:"bg-white shadow-lg mx-auto max-w-[210mm] min-h-[297mm] p-[15mm] print:shadow-none print:w-full print:max-w-none print:p-0 relative",children:[e.jsxs("div",{className:"flex border-b-2 border-slate-800 pb-4 mb-6",children:[e.jsx("div",{className:"w-[100px] h-[100px] flex items-center justify-center mr-6",children:e.jsx("img",{src:"/logo.png",alt:"Neo Siam Logo",className:"max-w-full max-h-full object-contain"})}),e.jsx("div",{className:"flex-1",children:s?e.jsxs("div",{className:"space-y-1",children:[e.jsx("input",{"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (TH)",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (TH)",value:g.companyNameTH,onChange:A=>t({...g,companyNameTH:A.target.value}),className:"w-full text-lg font-bold border rounded px-1"}),e.jsx("input",{"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (EN)",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (EN)",value:g.companyNameEN,onChange:A=>t({...g,companyNameEN:A.target.value}),className:"w-full text-sm border rounded px-1"}),e.jsx("input",{"aria-label":"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà",title:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà",value:g.address,onChange:A=>t({...g,address:A.target.value}),className:"w-full text-xs text-slate-600 border rounded px-1"}),e.jsx("input",{"aria-label":"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠",value:g.contact,onChange:A=>t({...g,contact:A.target.value}),className:"w-full text-xs text-slate-600 border rounded px-1"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-800",children:g.companyNameTH}),e.jsx("h2",{className:"text-sm font-bold text-slate-600",children:g.companyNameEN}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:g.address}),e.jsx("p",{className:"text-xs text-slate-500",children:g.contact})]})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"border inline-block px-4 py-2 rounded text-center mb-2",children:[e.jsx("div",{className:"text-[10px] text-slate-500",children:"Document No."}),e.jsx("div",{className:"font-bold font-mono text-lg",children:ct(i.type).code})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["Date: ",new Date().toLocaleDateString("th-TH")]})]})]}),e.jsxs("div",{className:"text-center mb-8",children:[s?e.jsx("input",{"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (TH)",title:"‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (TH)",value:g.titleTH,onChange:A=>t({...g,titleTH:A.target.value}),className:"text-CENTER text-2xl font-bold border rounded px-2 w-full mb-1"}):e.jsx("h2",{className:"text-2xl font-bold uppercase border-b border-black inline-block px-8 pb-1",children:g.titleTH||ct(i.type).th}),e.jsx("p",{className:"text-sm text-slate-500 mt-1 uppercase tracking-wide",children:g.titleEN||ct(i.type).en})]}),e.jsx("div",{className:"mb-6 text-sm",children:e.jsx("div",{className:"p-4 border rounded-lg print:border-none print:p-0",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 leading-loose",children:[e.jsxs("div",{className:"flex items-end border-b border-dotted border-slate-400 pb-1",children:[e.jsx("span",{className:"font-bold w-[60px]",children:"‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:"}),e.jsx("span",{className:"flex-1 px-2 text-slate-800"})]}),e.jsxs("div",{className:"flex items-end border-b border-dotted border-slate-400 pb-1",children:[e.jsx("span",{className:"font-bold w-[60px]",children:"‡∏ú‡πà‡∏≤‡∏ô:"}),e.jsx("span",{className:"flex-1 px-2 text-slate-800"})]})]})})}),e.jsxs("table",{className:"w-full border-collapse border border-slate-800 text-sm mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-100 print:bg-slate-200 text-center",children:[e.jsx("th",{className:"border border-slate-800 p-2 w-10",children:"#"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[120px]",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-slate-800 p-2",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[80px]",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[60px]",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[100px]",children:"‡∏™‡∏†‡∏≤‡∏û"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[100px]",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),d&&e.jsx("th",{className:"border border-slate-800 p-2 w-[80px]",children:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î %"}),e.jsx("th",{className:"border border-slate-800 p-2 w-[100px]",children:"‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô"})]})}),e.jsxs("tbody",{children:[k.map((A,M)=>((A.priceBill||0)*((A.discountPercent||0)/100),e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-800 p-2 text-center",children:M+1}),e.jsx("td",{className:"border border-slate-800 p-2",children:A.productCode}),e.jsxs("td",{className:"border border-slate-800 p-2",children:[e.jsx("div",{children:A.productName}),e.jsxs("div",{className:"text-[10px] text-slate-500",children:["Ref: ",A.refNo]})]}),e.jsx("td",{className:"border border-slate-800 p-2 text-center font-bold",children:A.quantity}),e.jsx("td",{className:"border border-slate-800 p-2 text-center",children:A.unit}),e.jsx("td",{className:"border border-slate-800 p-2 text-center text-xs",children:A.condition}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:s?e.jsx("input",{type:"number","aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢",className:"w-full text-right bg-transparent border-b border-dashed border-gray-300 focus:border-blue-500 outline-none text-sm font-bold print:border-none",value:A.pricePerUnit??(A.priceBill||0)/(A.quantity||1),onChange:E=>{const P=parseFloat(E.target.value);b(F=>({...F,[A.id]:isNaN(P)?0:P}))},onBlur:E=>{const P=parseFloat(E.target.value);N(A.id,{pricePerUnit:P,priceBill:P*(A.quantity||1)})}}):(A.pricePerUnit??(A.priceBill||0)/(A.quantity||1)).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),d&&e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:s?e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("input",{type:"number","aria-label":"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î %",className:"w-12 text-right bg-transparent border-b border-dashed border-gray-300 focus:border-blue-500 outline-none text-sm font-bold print:border-none",value:A.discountPercent||0,onChange:E=>{const P=parseFloat(E.target.value);x(F=>({...F,[A.id]:isNaN(P)?0:P}))},onBlur:E=>{const P=parseFloat(E.target.value);N(A.id,{discountPercent:P})}}),e.jsx("span",{className:"text-[10px] text-slate-500",children:"%"})]}):e.jsxs("span",{children:[A.discountPercent||0,"%"]})}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:(A.priceBill||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]},M))),e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsxs("td",{colSpan:d?7:6,rowSpan:d?h?5:3:h?3:1,className:"border border-slate-800 p-4 text-center align-middle text-lg italic bg-slate-50 text-slate-600 print:hidden",children:["(",ws(f.net),")"]}),e.jsxs("td",{colSpan:d?7:6,rowSpan:d?h?5:3:h?3:1,className:"border border-slate-800 p-4 text-center align-middle text-lg italic bg-slate-50 text-slate-600 hidden print:table-cell",children:["(",ws(f.net),")"]}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:"‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:f.subtotal.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsx("td",{className:"border border-slate-800 p-2 text-right text-red-600",children:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏£‡∏ß‡∏° (Discount Total)"}),e.jsxs("td",{className:"border border-slate-800 p-2 text-right text-red-600",children:["-",f.discount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:"‡∏¢‡∏≠‡∏î‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î"}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:f.afterDiscount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]})]}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"font-bold bg-slate-50 print:bg-transparent",children:[e.jsxs("td",{className:"border border-slate-800 p-2 text-right",children:["VAT ",p,"%"]}),e.jsx("td",{className:"border border-slate-800 p-2 text-right",children:f.vat.toLocaleString([],{minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.jsxs("tr",{className:"font-bold bg-slate-100 print:bg-slate-200",children:[e.jsx("td",{className:"border border-slate-800 p-2 text-right text-black",children:"‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥"}),e.jsx("td",{className:"border border-slate-800 p-2 text-right text-black",children:f.net.toLocaleString([],{minimumFractionDigits:2,maximumFractionDigits:2})})]})]})]})]}),e.jsxs("div",{className:"mb-8 p-4 border border-slate-300 rounded print:border-black",children:[e.jsx("span",{className:"font-bold underline text-sm",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:"}),s?e.jsx("textarea",{"aria-label":"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",value:g.remarks,onChange:A=>t({...g,remarks:A.target.value}),className:"w-full mt-1 p-1 border rounded",rows:2}):e.jsx("p",{className:"text-sm mt-1 indent-4",children:g.remarks})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-12 print:break-inside-avoid",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-black border-dotted h-8 w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold",children:g.signatory1}),e.jsx("div",{className:"text-xs text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-black border-dotted h-8 w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold",children:g.signatory2}),e.jsx("div",{className:"text-xs text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-b border-black border-dotted h-8 w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-sm font-bold",children:g.signatory3}),e.jsx("div",{className:"text-xs text-slate-500",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]})]})]})})]})},va=({isOpen:l,onClose:c,item:i,onConfirm:g})=>{const[t,s]=C.useState(0),[m,h]=C.useState("SAME"),[S,p]=C.useState(!1),[v,d]=C.useState(1),[w,o]=C.useState(""),[O,a]=C.useState(null);if(C.useEffect(()=>{l&&i&&(s(0),h("SAME"),p(!1),d(1),o(""),a(i.disposition||null))},[l,i]),!l||!i)return null;const N=S?i.quantity*v:i.quantity,n=S?w||"Unit":i.unit,r=b=>{b.preventDefault();const u=m==="SAME"?i.disposition:m,x=O||i.disposition;g(t,u,S,v,w,x)};return e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white shadow-xl w-full h-full flex flex-col animate-fade-in",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ft,{className:"w-5 h-5 text-blue-600"})," ‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Split Item)"]}),e.jsx("button",{"aria-label":"‡∏õ‡∏¥‡∏î (Close)",title:"‡∏õ‡∏¥‡∏î (Close)",onClick:c,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full hover:bg-slate-200 transition-colors",children:e.jsx(je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:r,className:"p-6 space-y-6 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700 mb-1",children:i.productName}),e.jsx("div",{className:"flex justify-between text-xs text-slate-500",children:e.jsxs("span",{children:["ID: ",i.id]})}),e.jsxs("div",{className:"mt-2 text-2xl font-bold text-blue-700",children:[i.quantity," ",e.jsx("span",{className:"text-sm font-normal text-slate-500",children:i.unit})]}),S&&e.jsxs("div",{className:"mt-1 text-xs text-amber-600 font-bold",children:["‚ûî ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô: ",N," ",n]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[e.jsx("label",{className:"block text-xs font-bold text-blue-800 mb-1",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å (Main Disposition)"}),e.jsx("select",{"aria-label":"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å",title:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å",value:O||"",onChange:b=>a(b.target.value),className:"w-full p-2 border border-blue-300 rounded text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none text-blue-900",children:Object.entries(Ze).map(([b,u])=>e.jsx("option",{value:b,children:u},b))})]})]}),e.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox","aria-label":"‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢",title:"‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢",checked:S,onChange:b=>p(b.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"‡πÅ‡∏ï‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢ (Unit Breakdown)"})]}),S&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 pl-6 animate-fade-in",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô (‡∏ï‡πà‡∏≠ 1 ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏´‡∏•‡∏±‡∏Å)"}),e.jsx("input",{type:"number","aria-label":"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô",title:"‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô",min:"1",value:v,onChange:b=>d(parseInt(b.target.value)||1),className:"w-full p-2 border border-slate-300 rounded text-sm",placeholder:"‡πÄ‡∏ä‡πà‡∏ô 12"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-slate-500 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà",title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏´‡∏°‡πà",value:w,onChange:b=>o(b.target.value),className:"w-full p-2 border border-slate-300 rounded text-sm",placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏¥‡πâ‡∏ô, ‡∏´‡πà‡∏≠"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å (",n,")"]}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å",min:"1",max:N-1,value:t===0?"":t,onChange:b=>s(parseInt(b.target.value)||0),className:"w-full p-3 border border-slate-300 rounded-lg text-lg font-bold text-center focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0",autoFocus:!0}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏∞‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ",N-t," ",n]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà: ",t," ",n]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å (New Disposition)"}),e.jsxs("select",{"aria-label":"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å",title:"‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÅ‡∏¢‡∏Å",value:m,onChange:b=>h(b.target.value),className:"w-full p-3 border border-slate-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none",children:[e.jsxs("option",{value:"SAME",children:["‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏° (Keep ",Ze[i.disposition],")"]}),e.jsx("option",{disabled:!0,children:"‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"}),Object.entries(Ze).map(([b,u])=>e.jsx("option",{value:b,children:u},b))]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button","aria-label":"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",onClick:c,className:"flex-1 py-3 px-4 rounded-lg border border-slate-200 text-slate-600 font-bold hover:bg-slate-50 transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{type:"submit","aria-label":"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å",title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å",disabled:t<=0||t>=N,className:"flex-1 py-3 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:["‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å ",e.jsx(Rs,{className:"w-4 h-4"})]})]})]})]})})},wa=({initialData:l,onClearInitialData:c,initialStep:i})=>{var v;const{state:g,actions:t,derived:s}=Es(l,c),[m,h]=C.useState(!0);te.useEffect(()=>{i&&t.setActiveStep(i)},[i]);const S=[{id:1,label:"1. ‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Request)",icon:Bl,count:void 0,color:"text-blue-600",group:"Return Request"},{id:2,label:"2. ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡∏ô‡∏™‡πà‡∏á (Consolidation & Logistics)",icon:fe,count:((v=s.ncrStep2Items)==null?void 0:v.length)||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:3,label:"3. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub (Received at Hub)",icon:Et,count:s.step6Items.length||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:4,label:"4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û (QC)",icon:Ft,count:void 0,color:"text-indigo-600",group:"NCR Hub"},{id:5,label:"5. ‡∏™‡πà‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô (Docs)",icon:Ce,count:s.step7Items.length||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:6,label:"6. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Pending Completion)",icon:yt,count:s.step8Items.length||void 0,color:"text-indigo-600",group:"NCR Hub"},{id:7,label:"7. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Completed)",icon:Le,count:void 0,color:"text-green-600",group:"NCR Hub"}],p=()=>{switch(g.activeStep){case 1:return e.jsx(ma,{formData:g.formData,requestItems:g.requestItems,isCustomBranch:g.isCustomBranch,uniqueCustomers:s.uniqueCustomers,uniqueDestinations:s.uniqueDestinations,uniqueFounders:s.uniqueFounders,uniqueProductCodes:s.uniqueProductCodes,uniqueProductNames:s.uniqueProductNames,setFormData:t.setFormData,setRequestItems:t.setRequestItems,setIsCustomBranch:t.setIsCustomBranch,handleImageUpload:t.handleImageUpload,handleRemoveImage:t.handleRemoveImage,handleAddItem:t.handleAddItem,handleRemoveItem:t.handleRemoveItem,handleRequestSubmit:t.handleRequestSubmit});case 12:return e.jsx($s,{});case 13:return e.jsx(Ps,{});case 14:return e.jsx(Ls,{});case 2:return e.jsx(ba,{onConfirm:t.handleLogisticsSubmit});case 3:return e.jsx(ua,{});case 4:return e.jsx(pa,{});case 5:return e.jsx(ha,{onPrintDocs:t.handlePrintClick});case 6:return e.jsx(ga,{});case 7:return e.jsx(fa,{});default:return e.jsx("div",{className:"p-8 text-center text-slate-400",children:"‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (Step Coming Soon)"})}};return e.jsxs("div",{className:"flex bg-slate-100 h-screen overflow-hidden font-sans",children:[e.jsxs("aside",{className:`${m?"w-72":"w-20"} 
        bg-white border-r border-slate-200 flex flex-col transition-all duration-300 shadow-xl z-20`,children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[m&&e.jsxs("div",{className:"font-extrabold text-xl text-slate-800 tracking-tight flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white shadow-lg shadow-blue-200",children:e.jsx(Et,{className:"w-5 h-5"})}),e.jsxs("span",{className:"bg-gradient-to-r from-blue-700 to-blue-500 bg-clip-text text-transparent transform scale-90 origin-left flex flex-col",children:[e.jsx("span",{className:"text-sm",children:"‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("span",{className:"text-[10px] text-slate-500",children:"Return Operations Hub"})]})]}),e.jsx("button",{onClick:()=>h(!m),"aria-label":"Toggle Sidebar",title:"Toggle Sidebar",className:"p-2 hover:bg-white rounded-lg transition-colors text-slate-400 hover:text-blue-600 hover:shadow-sm",children:e.jsx(Ss,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2 space-y-1",children:["Return Request","NCR Hub"].map(d=>{const w=S.filter(o=>o.group===d);return w.length===0?null:e.jsxs("div",{className:"mb-4",children:[m&&e.jsx("div",{className:"px-3 mb-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:d}),w.map(o=>e.jsxs("button",{onClick:()=>t.setActiveStep(o.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 group relative mb-1
                        ${g.activeStep===o.id?"bg-blue-50 text-blue-700 shadow-sm ring-1 ring-blue-100 font-bold":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[e.jsx("div",{className:`p-1.5 rounded-lg transition-all duration-200 ${g.activeStep===o.id?"bg-white shadow-sm":"bg-slate-100 group-hover:bg-white"}`,children:e.jsx(o.icon,{className:`w-4 h-4 ${g.activeStep===o.id?o.color:"text-slate-400"}`})}),m&&e.jsxs("div",{className:"flex-1 text-left flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium",children:o.label}),o.count&&e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full font-bold
                              ${g.activeStep===o.id?"bg-white text-blue-600 shadow-sm":"bg-slate-100 text-slate-500"}`,children:o.count})]})]},o.id))]},d)})}),e.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50",children:m?e.jsxs("div",{className:"text-xs text-slate-400 text-center font-medium",children:["Neo Siam Logistics",e.jsx("br",{}),"NCR Operations System v3.0"]}):e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})})})]}),e.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-white/50 relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-64 bg-slate-50 -z-10 skew-y-1 transform origin-top-left opacity-50"}),e.jsx("div",{className:"flex-1 overflow-hidden p-2 sm:p-4",children:p()})]}),g.showSelectionModal&&e.jsx(Na,{isOpen:g.showSelectionModal,onClose:()=>t.setShowSelectionModal(!1),selectionItems:g.selectionItems,selectedItemIds:g.selectedItemIds,toggleSelection:t.toggleSelection,handleGenerateDoc:t.handleGenerateDoc,selectionStatus:g.selectionStatus,onSplit:t.handleDocItemClick}),g.showDocModal&&g.docData&&e.jsx(ja,{isOpen:g.showDocModal,onClose:()=>t.setShowDocModal(!1),docData:g.docData,docConfig:g.docConfig,setDocConfig:t.setDocConfig,includeVat:g.includeVat,vatRate:g.vatRate,includeDiscount:g.includeDiscount,discountRate:g.discountRate,isDocEditable:g.isDocEditable,setIncludeVat:t.setIncludeVat,setVatRate:t.setVatRate,setIncludeDiscount:t.setIncludeDiscount,setDiscountRate:t.setDiscountRate,setIsDocEditable:t.setIsDocEditable,handleConfirmDocGeneration:t.handleConfirmDocGeneration,onUpdateItem:t.handleUpdateDocItem,isSubmitting:g.isSubmittingDoc}),g.showStep4SplitModal&&g.docSelectedItem&&e.jsx(va,{isOpen:g.showStep4SplitModal,onClose:()=>t.setShowStep4SplitModal(!1),item:g.docSelectedItem,onConfirm:t.handleStep4SplitSubmit})]})},Bs=({value:l,onChange:c,options:i,placeholder:g,className:t,disabled:s})=>{const[m,h]=C.useState(!1),S=C.useRef(null);C.useEffect(()=>{function v(d){S.current&&!S.current.contains(d.target)&&h(!1)}return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const p=i.filter(v=>v.toLowerCase().includes((l||"").toLowerCase()));return e.jsxs("div",{className:"relative flex-1",ref:S,children:[e.jsx("input",{type:"text",className:t,value:l,onChange:v=>{c(v.target.value),s||h(!0)},onFocus:()=>{s||h(!0)},placeholder:g,disabled:s}),m&&p.length>0&&e.jsx("div",{className:"absolute z-10 w-full left-0 mt-1 bg-white border border-slate-300 shadow-lg max-h-60 overflow-auto rounded-sm print:hidden",children:p.map((v,d)=>e.jsx("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 text-slate-700 block border-b border-slate-100 last:border-0",onClick:()=>{c(v),h(!1)},children:v},d))})]})},_s=async(l,c,i)=>{const g=new Mt.Workbook,t=g.addWorksheet("NCR Report");t.pageSetup={paperSize:9,orientation:"portrait",fitToPage:!0,fitToWidth:1,fitToHeight:0,margins:{left:.4,right:.4,top:.4,bottom:.4,header:.3,footer:.3}},t.columns=Array(20).fill({width:4.5});const s={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},m={top:{style:"medium"},left:{style:"medium"},bottom:{style:"medium"},right:{style:"medium"}},h={name:"TH Sarabun New",size:12},S={name:"TH Sarabun New",size:12,bold:!0},p={vertical:"middle",horizontal:"center"},v=P=>P?"‚òë":"‚òê";try{const le=await(await fetch("/logo.png")).arrayBuffer(),Y=g.addImage({buffer:le,extension:"png"});t.addImage(Y,{tl:{col:0,row:0},br:{col:4,row:5},editAs:"oneCell"})}catch(P){console.warn("Failed to load logo for Excel",P);const F=t.getCell("A1");F.value="NEO",F.font={name:"Arial",size:24,bold:!0,color:{argb:"FF1E3A8A"}},F.alignment=p}t.mergeCells("A1:D5");const d=t.getCell("A1");d.border=m,t.mergeCells("E1:T1");const w=t.getCell("E1");w.value="‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î",w.font={name:"TH Sarabun New",size:18,bold:!0},w.alignment={vertical:"bottom",horizontal:"left"},t.mergeCells("E2:T2");const o=t.getCell("E2");o.value="NEOSIAM LOGISTICS & TRANSPORT CO., LTD.",o.font={name:"TH Sarabun New",size:12,bold:!0},o.alignment={vertical:"top",horizontal:"left"},t.mergeCells("E3:T3"),t.getCell("E3").value="159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000",t.getCell("E3").font=h,t.mergeCells("E4:T4"),t.getCell("E4").value="Tax ID: 0105552087673 | Tel: 056-275-841",t.getCell("E4").font=h,t.mergeCells("A6:T7");const O=t.getCell("A6");O.value="‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô",O.font={name:"TH Sarabun New",size:18,bold:!0},O.alignment=p,O.border={top:{style:"medium"},bottom:{style:"medium"}};let a=9;t.mergeCells(`A${a}:C${a}`),t.getCell(`A${a}`).value="‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:",t.getCell(`A${a}`).font=S,t.mergeCells(`D${a}:G${a}`),t.getCell(`D${a}`).value=l.toDept,t.getCell(`D${a}`).font=h,t.getCell(`D${a}`).border={bottom:{style:"dotted"}},t.mergeCells(`I${a}:J${a}`),t.getCell(`I${a}`).value="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:",t.getCell(`I${a}`).font=S,t.mergeCells(`K${a}:M${a}`),t.getCell(`K${a}`).value=l.date,t.getCell(`K${a}`).font=h,t.getCell(`K${a}`).border={bottom:{style:"dotted"}},t.mergeCells(`O${a}:P${a}`),t.getCell(`O${a}`).value="‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:",t.getCell(`O${a}`).font=S,t.mergeCells(`Q${a}:T${a}`),t.getCell(`Q${a}`).value=l.copyTo,t.getCell(`Q${a}`).font=h,t.getCell(`Q${a}`).border={bottom:{style:"dotted"}},a+=2,t.mergeCells(`A${a}:C${a}`),t.getCell(`A${a}`).value="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR:",t.getCell(`A${a}`).font=S,t.mergeCells(`D${a}:G${a}`),t.getCell(`D${a}`).value=i,t.getCell(`D${a}`).font=S,t.getCell(`D${a}`).border={bottom:{style:"dotted"}},t.mergeCells(`I${a}:J${a}`),t.getCell(`I${a}`).value="‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤:",t.getCell(`I${a}`).font=S,t.mergeCells(`K${a}:M${a}`),t.getCell(`K${a}`).value=l.founder,t.getCell(`K${a}`).font=h,t.getCell(`K${a}`).border={bottom:{style:"dotted"}},t.mergeCells(`O${a}:P${a}`),t.getCell(`O${a}`).value="Ref/PO:",t.getCell(`O${a}`).font=S,t.mergeCells(`Q${a}:T${a}`),t.getCell(`Q${a}`).value=l.poNo,t.getCell(`Q${a}`).font=h,t.getCell(`Q${a}`).border={bottom:{style:"dotted"}},a+=2,t.mergeCells(`A${a}:T${a}`),t.getCell(`A${a}`).value="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items)",t.getCell(`A${a}`).font={name:"TH Sarabun New",size:12,bold:!0,underline:!0},a+=1;const N=a;if([{label:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",range:"A:C"},{label:"Ref/Neo Ref",range:"D:F"},{label:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",range:"G:K"},{label:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",range:"L:L"},{label:"‡∏´‡∏ô‡πà‡∏ß‡∏¢",range:"M:M"},{label:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",range:"N:P"},{label:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",range:"Q:T"}].forEach(P=>{const[F,le]=P.range.split(":");t.mergeCells(`${F}${N}:${le}${N}`);const Y=t.getCell(`${F}${N}`);Y.value=P.label,Y.font=S,Y.alignment={horizontal:"center",vertical:"middle"},Y.border=s,Y.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}}}),a+=1,c.length>0)c.forEach(P=>{var V,K;const F=a,le=t.getRow(F),Y=`[${P.productCode}] ${P.productName}
${P.customerName||""} ${P.destinationCustomer?"(‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: "+P.destinationCustomer+")":""}`,me=[];P.refNo&&me.push(`Ref: ${P.refNo}`),P.neoRefNo&&me.push(`Neo: ${P.neoRefNo}`);const se=me.join(`
`),G=`${P.problemSource}
${P.hasCost?`Cost: ${(V=P.costAmount)==null?void 0:V.toLocaleString()}`:""}`,D=(oe,_)=>{if(!oe)return 1;const ge=oe.toString().split(/\r\n|\r|\n/).reduce((X,y)=>{const z=y.length;return z===0?X+1:X+Math.ceil(z/_)},0);return Math.max(1,ge)},Q=D(Y,35),q=D(se,18),ee=D(G,22),ae=Math.max(Q,q,ee,1);le.height=ae*20+12,t.mergeCells(`A${F}:C${F}`);const be=t.getCell(`A${F}`);be.value=P.branch,be.font=h,be.alignment={vertical:"top",horizontal:"left",wrapText:!0},be.border=s,t.mergeCells(`D${F}:F${F}`);const he=t.getCell(`D${F}`);he.value=se,he.font=h,he.alignment={vertical:"top",horizontal:"left",wrapText:!0},he.border=s,t.mergeCells(`G${F}:K${F}`);const ve=t.getCell(`G${F}`);ve.value=Y,ve.font=h,ve.alignment={vertical:"top",horizontal:"left",wrapText:!0},ve.border=s,t.mergeCells(`L${F}:L${F}`);const j=t.getCell(`L${F}`);j.value=P.quantity,j.font=h,j.alignment={vertical:"top",horizontal:"center"},j.border=s,t.mergeCells(`M${F}:M${F}`);const I=t.getCell(`M${F}`);I.value=P.unit,I.font=h,I.alignment={vertical:"top",horizontal:"center"},I.border=s,t.mergeCells(`N${F}:P${F}`);const U=t.getCell(`N${F}`);U.value=`${(K=P.priceBill)==null?void 0:K.toLocaleString()} ‡∏ö.
Exp: ${P.expiryDate}`,U.font=h,U.alignment={vertical:"top",horizontal:"right",wrapText:!0},U.border=s,t.mergeCells(`Q${F}:T${F}`);const Z=t.getCell(`Q${F}`);Z.value=G,Z.font=h,Z.alignment={vertical:"top",horizontal:"left",wrapText:!0},Z.border=s,a+=1});else{t.mergeCells(`A${a}:T${a}`);const P=t.getCell(`A${a}`);P.value="‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",P.border=s,P.alignment=p,a+=1}a+=1,t.mergeCells(`A${a}:T${a}`);const r=t.getCell(`A${a}`);r.value="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)",r.font=S,r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}},r.border=s,a+=1;const b=(P,F,le,Y,me,se,G,D)=>{t.mergeCells(`A${a}:E${a}`),t.getCell(`A${a}`).value=`${v(F)} ${P}`,t.mergeCells(`F${a}:J${a}`),t.getCell(`F${a}`).value=`${v(Y)} ${le}`,t.mergeCells(`K${a}:O${a}`),t.getCell(`K${a}`).value=`${v(se)} ${me}`,t.mergeCells(`P${a}:T${a}`),t.getCell(`P${a}`).value=`${v(D)} ${G}`,["A","F","K","P"].forEach(Q=>{t.getCell(`${Q}${a}`).font=h}),a++};b("‡∏ä‡∏≥‡∏£‡∏∏‡∏î",l.problemDamaged,"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á",l.problemDamagedInBox,"‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢",l.problemLost,"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö",l.problemMixed),b("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV",l.problemWrongInv,"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤",l.problemLate,"‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥",l.problemDuplicate,"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î",l.problemWrong),b("‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö",l.problemIncomplete,"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô",l.problemOver,"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î",l.problemWrongInfo,"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô",l.problemShortExpiry),b("‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ",l.problemTransportDamage,"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏",l.problemAccident,"PO ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",l.problemPOExpired,"BarCode ‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô",l.problemNoBarcode),t.mergeCells(`A${a}:E${a}`),t.getCell(`A${a}`).value=`${v(l.problemOther)} ‡∏≠‡∏∑‡πà‡∏ô‡πÜ: ${l.problemOtherText||""}`,t.getCell(`A${a}`).font=h,a++,t.mergeCells(`A${a}:T${a}`),t.getCell(`A${a}`).value="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:",t.getCell(`A${a}`).font=S,a++,t.mergeCells(`A${a}:T${a+2}`);const u=t.getCell(`A${a}`);u.value=l.problemDetail||"-",u.alignment={vertical:"top",horizontal:"left",wrapText:!0},u.border=s,a+=3,t.mergeCells(`A${a}:T${a}`);const x=t.getCell(`A${a}`);x.value="‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",x.font=S,x.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}},x.border=s,a++;const k=(P,F,le,Y,me)=>{t.mergeCells(`A${a}:H${a}`),t.getCell(`A${a}`).value=`${v(P)} ${F} (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${le})`,t.getCell(`A${a}`).font=h,t.getCell(`A${a}`).border=s,t.mergeCells(`I${a}:T${a}`),t.getCell(`I${a}`).value=Y?`${Y}: ${me}`:"",t.getCell(`I${a}`).font=h,t.getCell(`I${a}`).border=s,a++};k(l.actionReject,"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",l.actionRejectQty,"",""),k(l.actionRejectSort,"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",l.actionRejectSortQty,"",""),k(l.actionRework,"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",l.actionReworkQty,"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£",l.actionReworkMethod),k(l.actionSpecialAcceptance,"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©",l.actionSpecialAcceptanceQty,"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•",l.actionSpecialAcceptanceReason),k(l.actionScrap,"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",l.actionScrapQty,"",""),k(l.actionReplace,"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",l.actionReplaceQty,"",""),t.mergeCells(`A${a}:D${a}`),t.getCell(`A${a}`).value=`‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à: ${l.dueDate||""}`,t.mergeCells(`E${a}:J${a}`),t.getCell(`E${a}`).value=`‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥: ${l.approver||""}`,t.mergeCells(`K${a}:O${a}`),t.getCell(`K${a}`).value=`‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ${l.approverPosition||""}`,t.mergeCells(`P${a}:T${a}`),t.getCell(`P${a}`).value=`‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${l.approverDate||""}`,["A","E","K","P"].forEach(P=>{const F=t.getCell(`${P}${a}`);F.font=h,F.border=s}),a++,a++,t.mergeCells(`A${a}:T${a}`);const R=t.getCell(`A${a}`);R.value="‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (Root Cause & Prevention)",R.font=S,R.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFEFEFEF"}},R.border=s,a++,t.mergeCells(`A${a}:E${a}`),t.getCell(`A${a}`).value=`‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏: ${[l.causePackaging?"‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå":"",l.causeTransport?"‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á":"",l.causeOperation?"‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô":"",l.causeEnv?"‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°":""].filter(Boolean).join(", ")}`,t.getCell(`A${a}`).font=h,t.getCell(`A${a}`).border=s,t.mergeCells(`F${a}:T${a}`),t.getCell(`F${a}`).value=`‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ${l.causeDetail}`,t.getCell(`F${a}`).font=h,t.getCell(`F${a}`).border=s,a++,t.mergeCells(`F${a}:T${a}`),t.getCell(`F${a}`).value=`‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô: ${l.preventionDetail}`,t.getCell(`F${a}`).font=h,t.getCell(`F${a}`).border=s,t.mergeCells(`A${a}:E${a}`),t.getCell(`A${a}`).value=`‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö: ${l.responsiblePerson} (${l.responsiblePosition})`,t.getCell(`A${a}`).font=h,t.getCell(`A${a}`).border=s,a++,a++,t.mergeCells(`A${a}:T${a}`),t.getCell(`A${a}`).value="‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î NCR",t.getCell(`A${a}`).font=S,t.getCell(`A${a}`).border=s,a++,t.mergeCells(`A${a}:T${a}`),t.getCell(`A${a}`).value=`${v(l.qaAccept)} ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á  ${v(l.qaReject)} ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö (‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•: ${l.qaReason||"-"})`,t.getCell(`A${a}`).font=h,t.getCell(`A${a}`).border=s,a++,a++,t.mergeCells(`B${a}:H${a}`);const f=t.getCell(`B${a}`);f.value="__________________________",f.alignment=p,t.mergeCells(`L${a}:R${a}`);const $=t.getCell(`L${a}`);$.value="__________________________",$.alignment=p,a++,t.mergeCells(`B${a}:H${a}`);const A=t.getCell(`B${a}`);A.value="‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° (QA)",A.alignment=p,A.font=h,t.mergeCells(`L${a}:R${a}`);const M=t.getCell(`L${a}`);M.value="‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏õ‡∏¥‡∏î (MD)",M.alignment=p,M.font=h;const B=await g.xlsx.writeBuffer(),E=new Blob([B],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});es.saveAs(E,`NCR_${i}_${new Date().toISOString().split("T")[0]}.xlsx`)},ya=["‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","Sino Pacific Trading","NEO CORPORATE"],Ca=()=>{const{addNCRReport:l,getNextNCRNumber:c,addReturnRecord:i,ncrReports:g}=Se(),t={toDept:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",date:new Date().toISOString().split("T")[0],copyTo:"",founder:"",poNo:"",branch:"",problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAcceptance:!1,actionSpecialAcceptanceQty:0,actionSpecialAcceptanceReason:"",actionScrap:!1,actionScrapQty:0,actionReplace:!1,actionReplaceQty:0,problemAnalysis:"Customer",problemSource:"Customer",problemAnalysisSub:"",problemAnalysisCause:"",problemAnalysisDetail:"",images:[],causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",preventionDueDate:"",dueDate:"",approver:"",approverPosition:"",approverDate:"",responsiblePerson:"",responsiblePosition:"",qaAccept:!1,qaReject:!1,qaReason:""},[s,m]=C.useState(t),[h,S]=C.useState([]),[p,v]=C.useState(!1),[d,w]=C.useState({branch:"",refNo:"",neoRefNo:"",productCode:"",productName:"",customerName:"",destinationCustomer:"",quantity:0,unit:"",pricePerUnit:0,priceBill:0,priceSell:0,expiryDate:"",hasCost:!1,costAmount:0,costResponsible:"",problemSource:"",preliminaryDecision:"Return",preliminaryRoute:"",isFieldSettled:!1,fieldSettlementAmount:0,fieldSettlementEvidence:"",fieldSettlementName:"",fieldSettlementPosition:"",problemAnalysis:"Customer",problemAnalysisSub:"",problemAnalysisCause:"",problemAnalysisDetail:"",images:[],problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAcceptance:!1,actionSpecialAcceptanceQty:0,actionSpecialAcceptanceReason:"",actionScrap:!1,actionScrapQty:0,actionReplace:!1,actionReplaceQty:0,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",preventionDueDate:""}),[o,O]=C.useState(!1),[a,N]=C.useState(!1),[n,r]=C.useState(!1),[b,u]=C.useState(null),[x,k]=C.useState(!1),[R,f]=C.useState(""),[$,A]=C.useState(!1),[M,B]=C.useState(null),[E,P]=C.useState(null),[F,le]=C.useState(""),Y=C.useMemo(()=>{const j=new Set(g.map(I=>I.founder).filter(Boolean));return Array.from(j).sort()},[g]);C.useEffect(()=>{},[p]),C.useEffect(()=>{if(d.hasCost&&d.problemSource){const j=Ut[d.problemSource];j&&w(I=>({...I,costResponsible:j}))}},[d.hasCost,d.problemSource]);const me=()=>{if(F!=="1234"){T.fire({icon:"error",title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",timer:1500,showConfirmButton:!1});return}if(M==="DELETE"&&E)S(h.filter(j=>j.id!==E));else if(M==="EDIT"&&E){const j=h.find(I=>I.id===E);if(j){w(j);const I=h.filter(U=>U.id!==E);S(I),v(!0)}}A(!1),le(""),B(null),P(null)},se=j=>{B("DELETE"),P(j),A(!0)},G=j=>{m(I=>({...I,[j]:!I[j]}))},D=j=>{m(I=>({...I,[j]:!I[j]}))},Q=j=>{if(j.target.files&&j.target.files.length>0){const U=Array.from(j.target.files).map(Z=>new Promise(V=>{const K=new FileReader;K.onloadend=()=>V(K.result),K.readAsDataURL(Z)}));Promise.all(U).then(Z=>{m(V=>({...V,images:[...V.images||[],...Z]}))})}},q=j=>{m(I=>({...I,images:(I.images||[]).filter((U,Z)=>Z!==j)}))},ee=(j=!0)=>{if(!d.productCode||!d.branch){T.fire({icon:"warning",title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏Ç‡∏≤"});return}const I={...d,id:Date.now().toString(),quantity:Number(d.quantity)||0,pricePerUnit:Number(d.pricePerUnit)||0,priceBill:Number(d.priceBill)||0,priceSell:Number(d.priceSell)||0,costAmount:Number(d.costAmount)||0,problemDetail:d.problemDetail||"",problemOtherText:d.problemOtherText||"",actionReworkMethod:d.actionReworkMethod||"",actionSpecialAcceptanceReason:d.actionSpecialAcceptanceReason||"",preliminaryDecision:d.isFieldSettled?"FieldSettlement":"Return",preliminaryRoute:d.preliminaryRoute==="Other"?d.preliminaryRouteOther||"Other":d.preliminaryRoute};S([...h,I]),w({branch:"",refNo:"",neoRefNo:"",productCode:"",productName:"",customerName:"",destinationCustomer:"",quantity:0,unit:"",pricePerUnit:0,priceBill:0,priceSell:0,expiryDate:"",hasCost:!1,costAmount:0,costResponsible:"",problemSource:"",preliminaryDecision:"Return",preliminaryRoute:"",isFieldSettled:!1,fieldSettlementAmount:0,fieldSettlementEvidence:"",fieldSettlementName:"",fieldSettlementPosition:"",problemDamaged:!1,problemDamagedInBox:!1,problemLost:!1,problemMixed:!1,problemWrongInv:!1,problemLate:!1,problemDuplicate:!1,problemWrong:!1,problemIncomplete:!1,problemOver:!1,problemWrongInfo:!1,problemShortExpiry:!1,problemTransportDamage:!1,problemAccident:!1,problemPOExpired:!1,problemNoBarcode:!1,problemNotOrdered:!1,problemOther:!1,problemOtherText:"",problemDetail:"",actionReject:!1,actionRejectQty:0,actionRejectSort:!1,actionRejectSortQty:0,actionRework:!1,actionReworkQty:0,actionReworkMethod:"",actionSpecialAcceptance:!1,actionSpecialAcceptanceQty:0,actionSpecialAcceptanceReason:"",actionScrap:!1,actionScrapQty:0,actionReplace:!1,actionReplaceQty:0,causePackaging:!1,causeTransport:!1,causeOperation:!1,causeEnv:!1,causeDetail:"",preventionDetail:"",preventionDueDate:""}),j?v(!1):T.fire({icon:"success",title:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3})},ae=()=>{const j=[];return s.founder.trim()||j.push("‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤"),h.length===0&&j.push("‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£')"),s.causePackaging||s.causeTransport||s.causeOperation||s.causeEnv||j.push("‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠)"),j},be=async()=>{N(!1),O(!0);const j=await c();if(j.includes("ERR")){u({success:!1,message:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"}),r(!0),O(!1);return}let I=0;for(const U of h){const Z={...s,id:`${j}-${U.id}`,ncrNo:j,item:U,status:U.isFieldSettled?"Settled_OnField":s.qaAccept?"Closed":"Open"};if(await l(Z)){const K={id:`RT-${new Date().getFullYear()}-${Date.now()}-${Math.floor(Math.random()*1e3)}`,refNo:U.refNo||"-",date:s.date,dateRequested:s.date,productName:U.productName||"Unknown",productCode:U.productCode||"N/A",quantity:U.quantity,unit:U.unit||"Unit",customerName:U.customerName||"Unknown",destinationCustomer:U.destinationCustomer||"",branch:U.branch||"Head Office",category:"General",ncrNumber:j,documentType:"NCR",founder:s.founder,status:U.isFieldSettled?"Settled_OnField":"Requested",isFieldSettled:U.isFieldSettled,fieldSettlementAmount:U.fieldSettlementAmount,fieldSettlementEvidence:U.fieldSettlementEvidence,fieldSettlementName:U.fieldSettlementName,fieldSettlementPosition:U.fieldSettlementPosition,preliminaryRoute:U.preliminaryRoute||"Other",disposition:"Pending",reason:`NCR: ${U.problemDetail||s.problemDetail||"-"}`,amount:U.priceBill||0,priceBill:U.priceBill||0,pricePerUnit:U.pricePerUnit||0,priceSell:U.priceSell||0,neoRefNo:U.neoRefNo||"-",problemDamaged:s.problemDamaged,problemDamagedInBox:s.problemDamagedInBox,problemLost:s.problemLost,problemMixed:s.problemMixed,problemWrongInv:s.problemWrongInv,problemLate:s.problemLate,problemDuplicate:s.problemDuplicate,problemWrong:s.problemWrong,problemIncomplete:s.problemIncomplete,problemOver:s.problemOver,problemWrongInfo:s.problemWrongInfo,problemShortExpiry:s.problemShortExpiry,problemTransportDamage:s.problemTransportDamage,problemAccident:s.problemAccident,problemPOExpired:s.problemPOExpired,problemNoBarcode:s.problemNoBarcode,problemNotOrdered:s.problemNotOrdered,problemOther:s.problemOther,problemOtherText:s.problemOtherText,problemDetail:s.problemDetail,actionReject:s.actionReject,actionRejectQty:s.actionRejectQty,actionRejectSort:s.actionRejectSort,actionRejectSortQty:s.actionRejectSortQty,actionRework:s.actionRework,actionReworkQty:s.actionReworkQty,actionReworkMethod:s.actionReworkMethod,actionSpecialAcceptance:s.actionSpecialAcceptance,actionSpecialAcceptanceQty:s.actionSpecialAcceptanceQty,actionSpecialAcceptanceReason:s.actionSpecialAcceptanceReason,actionScrap:s.actionScrap,actionScrapQty:s.actionScrapQty,actionReplace:s.actionReplace,actionReplaceQty:s.actionReplaceQty,rootCause:s.problemSource||"NCR",problemSource:s.problemSource||"Customer",problemAnalysis:s.problemAnalysis||"Customer",problemAnalysisSub:s.problemAnalysisSub,problemAnalysisCause:s.problemAnalysisCause,problemAnalysisDetail:s.problemAnalysisDetail,images:s.images,hasCost:U.hasCost,costAmount:U.costAmount,costResponsible:U.costResponsible,causePackaging:s.causePackaging,causeTransport:s.causeTransport,causeOperation:s.causeOperation,causeEnv:s.causeEnv,causeDetail:s.causeDetail,preventionDetail:s.preventionDetail,preventionDueDate:s.preventionDueDate,responsiblePerson:s.responsiblePerson,responsiblePosition:s.responsiblePosition,dueDate:s.dueDate,approver:s.approver,approverPosition:s.approverPosition,approverDate:s.approverDate};await i(K),I++}}O(!1),I===h.length?(f(j),u({success:!0,message:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",ncrNo:j}),r(!0),x&&setTimeout(()=>window.print(),500)):(u({success:!1,message:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô"}),r(!0))},he=()=>{const j=ae();if(j.length>0){T.fire({icon:"warning",html:j.join("<br>")});return}k(!0),N(!0)},ve=()=>{const j=ae();if(j.length>0){T.fire({icon:"warning",html:j.join("<br>")});return}k(!1),N(!0)};return e.jsxs("div",{className:"p-8 h-full overflow-auto bg-slate-50 flex flex-col items-center print:p-0 print:m-0 print:bg-white print:h-auto print:overflow-visible print:block",children:[e.jsx("style",{children:`
                @media screen { 
                    .a4-paper { width: 210mm; min-height: 297mm; margin: 40px auto; background: white; box-shadow: 0 0 20px rgba(0,0,0,0.15); padding: 20mm; border: 1px solid #e2e8f0; } 
                }
                @media print { 
                    @page { margin: 10mm; size: A4; } 
                    .a4-paper { width: 100%; margin: 0; padding: 0; box-shadow: none; border: none; }
                    .no-print { display: none !important; }
                    .print-border { border: 1px solid #000 !important; }
                    .print-border-2 { border: 2px solid #000 !important; }
                    input, textarea, select { border: none !important; background: transparent !important; padding: 0 !important; }
                    input[type="checkbox"] { border: 1px solid #000 !important; }
                }
                .input-line { border-bottom: 1px dotted #999; width: 100%; }
            `}),e.jsxs("div",{className:"w-full max-w-5xl flex justify-end gap-2 mb-6 print:hidden",children:[e.jsxs("button",{onClick:()=>_s(s,h,R||"Draft"),className:"bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-sm hover:bg-green-700",title:"Export Excel",children:[e.jsx(tt,{className:"w-4 h-4"})," Export Excel"]}),e.jsxs("button",{onClick:he,className:"bg-slate-800 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-sm hover:bg-slate-700",title:"Print Form",children:[e.jsx(_e,{className:"w-4 h-4"})," Print Form"]}),e.jsxs("button",{onClick:ve,disabled:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold shadow-sm hover:bg-blue-700 disabled:opacity-50",title:"Save Record",children:[e.jsx(qe,{className:"w-4 h-4"})," Save Record"]})]}),e.jsxs("div",{className:"a4-paper text-sm",children:[e.jsxs("div",{className:"flex border-2 border-black mb-4 print-border-2",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black print-border p-4 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo",className:"max-h-20"})}),e.jsxs("div",{className:"w-[70%] p-4 pl-6 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-lg font-bold",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-xs font-bold text-slate-700",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Tax ID: 0105552087673 | Tel: 056-275-841"})]})]}),e.jsx("h1",{className:"text-lg font-bold text-center border-2 border-black py-2 mb-4 bg-slate-200 print:bg-transparent print-border-2",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 mb-6",children:[e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:"}),e.jsx("input",{type:"text",className:"input-line",value:s.toDept,onChange:j=>m({...s,toDept:j.target.value}),title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR:"}),e.jsx("div",{className:"input-line bg-slate-100 px-2 font-mono font-bold text-center",children:R||"Auto-Generated"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("input",{type:"date",className:"input-line",value:s.date,onChange:j=>m({...s,date:j.target.value}),title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤:"}),e.jsx("div",{className:"w-full border-b border-dotted border-slate-400",children:e.jsx(Bs,{className:"w-full",value:s.founder,onChange:j=>m({...s,founder:j}),options:Y})})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:"}),e.jsx("input",{type:"text",className:"input-line",value:s.copyTo,onChange:j=>m({...s,copyTo:j.target.value}),title:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ñ‡∏∂‡∏á"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("label",{className:"font-bold w-24 shrink-0 whitespace-nowrap",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà PO/‡∏ú‡∏•‡∏¥‡∏ï:"}),e.jsx("input",{type:"text",className:"input-line",value:s.poNo,onChange:j=>m({...s,poNo:j.target.value}),title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠"})]})]}),e.jsxs("div",{className:"border-2 border-black mb-4 print-border-2",children:[e.jsxs("div",{className:"bg-slate-200 print:bg-transparent border-b-2 border-black p-2 font-bold flex justify-between items-center print-border",children:[e.jsx("span",{children:"1. ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items) *"}),e.jsxs("button",{onClick:()=>v(!0),className:"bg-blue-600 text-white px-2 py-0.5 rounded text-xs flex items-center gap-1 hover:bg-blue-700 no-print",title:"‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",children:[e.jsx(gs,{className:"w-3 h-3"})," ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"]})]}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-50 border-b border-black text-center",children:[e.jsx("th",{className:"p-1 border-r border-black w-10",children:"No."}),e.jsx("th",{className:"p-1 border-r border-black w-24",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-1 border-r border-black w-24",children:"Ref/Neo Ref"}),e.jsx("th",{className:"p-1 border-r border-black",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"p-1 border-r border-black w-16",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-1 border-r border-black w-20",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/Exp"}),e.jsx("th",{className:"p-1 border-r border-black w-32",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsx("th",{className:"p-1 w-8 no-print",children:"‡∏•‡∏ö"})]})}),e.jsx("tbody",{children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-4 text-center text-slate-400 italic",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° '+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£')"})}):h.map((j,I)=>e.jsxs("tr",{className:"border-b border-black last:border-0 hover:bg-slate-50",children:[e.jsx("td",{className:"p-1 text-center border-r border-black",children:I+1}),e.jsx("td",{className:"p-1 text-center border-r border-black",children:j.branch}),e.jsxs("td",{className:"p-1 text-center border-r border-black",children:[j.refNo||"-",e.jsx("br",{}),e.jsx("span",{className:"text-[10px] text-slate-500",children:j.neoRefNo})]}),e.jsxs("td",{className:"p-1 border-r border-black",children:[e.jsx("div",{className:"font-bold",children:j.productCode}),e.jsx("div",{className:"truncate max-w-[150px]",children:j.productName}),e.jsx("div",{className:"text-[10px] text-slate-500",children:j.customerName})]}),e.jsxs("td",{className:"p-1 text-center border-r border-black font-bold",children:[j.quantity," ",j.unit]}),e.jsxs("td",{className:"p-1 text-center border-r border-black",children:[j.pricePerUnit,e.jsx("br",{}),e.jsx("span",{className:"text-[10px]",children:j.expiryDate})]}),e.jsxs("td",{className:"p-1 border-r border-black text-[10px]",children:[[j.problemDamaged&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î",j.problemDamagedInBox&&"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á",j.problemLost&&"‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢",j.problemMixed&&"‡∏õ‡∏∞‡∏õ‡∏ô",j.problemWrongInv&&"‡∏ú‡∏¥‡∏î INV",j.problemLate&&"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤",j.problemDuplicate&&"‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥",j.problemWrong&&"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î",j.problemIncomplete&&"‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö",j.problemOver&&"‡πÄ‡∏Å‡∏¥‡∏ô",j.problemWrongInfo&&"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î",j.problemShortExpiry&&"‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô",j.problemTransportDamage&&"‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏ó‡∏≥‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢",j.problemAccident&&"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏",j.problemPOExpired&&"PO ‡∏´‡∏°‡∏î",j.problemNoBarcode&&"No Barcode",j.problemNotOrdered&&"‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á",j.problemOther&&"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"].filter(Boolean).join(", "),j.hasCost&&e.jsxs("div",{className:"text-red-500 font-bold mt-1",children:["Cost: ",j.costAmount]})]}),e.jsx("td",{className:"p-1 text-center no-print",children:e.jsx("button",{onClick:()=>se(j.id),className:"text-red-500 hover:text-red-700",title:"‡∏•‡∏ö",children:e.jsx(De,{className:"w-4 h-4"})})})]},j.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"border-2 border-black p-2 min-h-[100px] print-border-2",children:[e.jsxs("div",{className:"font-bold mb-2 flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"})," ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"]}),e.jsx("div",{className:"text-center text-slate-400 text-xs py-4 border-2 border-dashed border-slate-300 rounded mb-2 no-print",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!0,checked:!1,title:"‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ö"})," ",e.jsx("span",{className:"text-xs",children:"‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ö"})]})]}),e.jsxs("div",{className:"border-2 border-black p-2 min-h-[100px] print-border-2",children:[e.jsx("div",{className:"font-bold mb-2",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"}),e.jsx("textarea",{className:"w-full h-20 text-xs resize-none outline-none border-0 bg-transparent",placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:s.problemDetail,onChange:j=>m({...s,problemDetail:j.target.value}),title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤"})]})]}),e.jsxs("div",{className:"border-2 border-black mb-4 flex print-border-2",children:[e.jsxs("div",{className:"w-1/3 border-r-2 border-black p-2 print-border",children:[e.jsxs("div",{className:"font-bold mb-2 bg-slate-200 -mx-2 -mt-2 p-2 border-b-2 border-black print:bg-transparent print-border flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"})," ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (Images)"]}),e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-400 min-h-[120px] border-2 border-dashed border-slate-300 rounded hover:bg-slate-50 relative print:hidden",children:[e.jsx("input",{type:"file",title:"‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ",multiple:!0,accept:"image/*",onChange:Q,className:"absolute inset-0 opacity-0 cursor-pointer"}),e.jsx("span",{className:"text-xs font-bold",children:"+ ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û"})]}),s.images&&s.images.length>0&&e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:s.images.map((j,I)=>e.jsxs("div",{className:"relative group aspect-square bg-slate-100 rounded overflow-hidden border border-slate-200",children:[e.jsx("img",{src:j,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>q(I),type:"button",className:"absolute top-0 right-0 bg-red-500 text-white p-0.5 rounded-bl hover:bg-red-600 print:hidden",title:"‡∏•‡∏ö",children:e.jsx(je,{className:"w-3 h-3"})})]},I))})]}),e.jsxs("div",{className:"w-2/3 p-2",children:[e.jsxs("div",{className:"font-bold mb-2 bg-slate-200 -mx-2 -mt-2 p-2 border-b-2 border-black print:bg-transparent print-border flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4"})," ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å (Problem Source) *"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[["Customer","DestinationCustomer","Accounting","Keying"].map(j=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:s.problemAnalysis===j,onChange:()=>m({...s,problemAnalysis:j,problemSource:j}),className:"w-4 h-4",title:j}),j]},j)),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:s.problemAnalysis==="Warehouse",onChange:()=>m({...s,problemAnalysis:"Warehouse",problemSource:"Warehouse"}),className:"w-4 h-4",title:"Warehouse"}),"‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Warehouse)"]}),s.problemAnalysis==="Warehouse"&&e.jsxs("div",{className:"ml-6 mt-1 p-2 bg-slate-50 border rounded grid grid-cols-2 gap-2",children:[e.jsxs("select",{className:"border rounded p-1",value:s.branch,onChange:j=>m({...s,branch:j.target.value}),title:"‡∏™‡∏≤‡∏Ç‡∏≤",children:[e.jsx("option",{value:"",children:"-- ‡∏™‡∏≤‡∏Ç‡∏≤ --"}),["‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","‡∏Ñ‡∏•‡∏≠‡∏á 13","‡∏ã‡∏µ‡πÇ‡∏ô‡πà","‡∏õ‡∏£‡∏∞‡∏î‡∏π‡πà"].map(j=>e.jsx("option",{value:j,children:j},j))]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏≠‡∏£‡πå","‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏•‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏≠‡∏∑‡πà‡∏ô‡πÜ"].map(j=>e.jsxs("label",{className:"flex gap-1",children:[e.jsx("input",{type:"radio",name:"whCause",checked:s.problemAnalysisCause===j,onChange:()=>m({...s,problemAnalysisCause:j})})," ",j]},j))})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:s.problemAnalysis==="Transport",onChange:()=>m({...s,problemAnalysis:"Transport",problemSource:"Transport"}),className:"w-4 h-4",title:"Transport"}),"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á (Transport)"]}),s.problemAnalysis==="Transport"&&e.jsx("div",{className:"ml-6 mt-1 p-2 bg-slate-50 border rounded flex gap-4",children:["CompanyDriver","JointTransport","Other"].map(j=>e.jsxs("label",{className:"flex gap-1",children:[e.jsx("input",{type:"radio",name:"transType",checked:s.problemAnalysisSub===j,onChange:()=>m({...s,problemAnalysisSub:j})})," ",j]},j))})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-100 p-1 rounded col-span-2",children:[e.jsx("input",{type:"radio",name:"problemAnalysis",checked:s.problemAnalysis==="Other",onChange:()=>m({...s,problemAnalysis:"Other",problemSource:"Other"}),className:"w-4 h-4",title:"Other"}),"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"]}),s.problemAnalysis==="Other"&&e.jsx("input",{type:"text",className:"col-span-2 w-full p-2 ml-6 border border-slate-300 rounded text-xs",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î...",value:s.problemAnalysisDetail||"",onChange:j=>m({...s,problemAnalysisDetail:j.target.value})})]}),e.jsx("textarea",{className:"w-full p-2 border rounded text-xs bg-slate-50",rows:2,placeholder:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°...",value:s.problemDetail,onChange:j=>m({...s,problemDetail:j.target.value}),title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤"})]})]})]}),e.jsxs("div",{className:"border-2 border-black mb-4 flex print-border-2",children:[e.jsxs("div",{className:"w-1/2 border-r-2 border-black p-2 print-border",children:[e.jsx("div",{className:"font-bold mb-2 bg-slate-200 -mx-2 -mt-2 p-2 border-b-2 border-black print:bg-transparent print-border",children:"‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-1 text-xs",children:[e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemDamaged,onChange:()=>G("problemDamaged"),title:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î"})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemDamagedInBox,onChange:()=>G("problemDamagedInBox"),title:"‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemLost,onChange:()=>G("problemLost"),title:"‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemMixed,onChange:()=>G("problemMixed"),title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemWrongInv,onChange:()=>G("problemWrongInv"),title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemLate,onChange:()=>G("problemLate"),title:"‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemDuplicate,onChange:()=>G("problemDuplicate"),title:"‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemWrong,onChange:()=>G("problemWrong"),title:"‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemIncomplete,onChange:()=>G("problemIncomplete"),title:"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemOver,onChange:()=>G("problemOver"),title:"‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemWrongInfo,onChange:()=>G("problemWrongInfo"),title:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemShortExpiry,onChange:()=>G("problemShortExpiry"),title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemTransportDamage,onChange:()=>G("problemTransportDamage"),title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏ï‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemAccident,onChange:()=>G("problemAccident"),title:"‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemPOExpired,onChange:()=>G("problemPOExpired"),title:"PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemNoBarcode,onChange:()=>G("problemNoBarcode"),title:"‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.problemNotOrdered,onChange:()=>G("problemNotOrdered"),title:"‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"col-span-2 flex items-center gap-2 mt-1",children:[e.jsxs("label",{className:"flex gap-2 whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:s.problemOther,onChange:()=>G("problemOther"),title:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})," ‡∏≠‡∏∑‡πà‡∏ô‡πÜ"]}),e.jsx("input",{type:"text",className:"input-line text-xs expand",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",value:s.problemOtherText,onChange:j=>m({...s,problemOtherText:j.target.value}),title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ"})]})]})]}),e.jsxs("div",{className:"w-1/2 p-2 hidden-print-border",children:[e.jsx("div",{className:"font-bold mb-2 bg-slate-200 -mx-2 -mt-2 p-2 border-b-2 border-black print:bg-transparent print-border",children:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsxs("div",{className:"text-xs space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionReject,onChange:()=>D("actionReject"),title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"})," ",e.jsx("span",{className:"font-bold w-24",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsx("span",{className:"whitespace-nowrap",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center",value:s.actionRejectQty||"",onChange:j=>m({...s,actionRejectQty:Number(j.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionRejectSort,onChange:()=>D("actionRejectSort"),title:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"})," ",e.jsx("span",{className:"font-bold w-24",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsx("span",{className:"whitespace-nowrap",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center",value:s.actionRejectSortQty||"",onChange:j=>m({...s,actionRejectSortQty:Number(j.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionRework,onChange:()=>D("actionRework"),title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"})," ",e.jsx("span",{className:"font-bold w-24",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsx("span",{className:"whitespace-nowrap",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center",value:s.actionReworkQty||"",onChange:j=>m({...s,actionReworkQty:Number(j.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"}),e.jsxs("div",{className:"w-full flex items-center gap-2 pl-6",children:[e.jsx("span",{className:"whitespace-nowrap",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"}),e.jsx("input",{type:"text",className:"input-line",value:s.actionReworkMethod,onChange:j=>m({...s,actionReworkMethod:j.target.value}),title:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionSpecialAcceptance,onChange:()=>D("actionSpecialAcceptance"),title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©"})," ",e.jsx("span",{className:"font-bold w-24",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsx("span",{className:"whitespace-nowrap",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center",value:s.actionSpecialAcceptanceQty||"",onChange:j=>m({...s,actionSpecialAcceptanceQty:Number(j.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsxs("div",{className:"w-full flex items-center gap-2 pl-6",children:[e.jsx("span",{className:"whitespace-nowrap",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö"}),e.jsx("input",{type:"text",className:"input-line",value:s.actionSpecialAcceptanceReason,onChange:j=>m({...s,actionSpecialAcceptanceReason:j.target.value}),title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionScrap,onChange:()=>D("actionScrap"),title:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢"})," ",e.jsx("span",{className:"font-bold w-24",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsx("span",{className:"whitespace-nowrap",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center",value:s.actionScrapQty||"",onChange:j=>m({...s,actionScrapQty:Number(j.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.actionReplace,onChange:()=>D("actionReplace"),title:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"})," ",e.jsx("span",{className:"font-bold w-24",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsx("span",{className:"whitespace-nowrap",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",className:"input-line w-16 text-center",value:s.actionReplaceQty||"",onChange:j=>m({...s,actionReplaceQty:Number(j.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"})]}),e.jsxs("div",{className:"flex items-end gap-2 mt-2 pt-2 border-t border-dotted border-slate-400",children:[e.jsx("span",{className:"font-bold",children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",className:"input-line w-32",value:s.dueDate,onChange:j=>m({...s,dueDate:j.target.value}),title:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"})]})]})]})]}),e.jsxs("div",{className:"border-2 border-black mb-4 print-border-2",children:[e.jsx("div",{className:"bg-slate-200 print:bg-transparent border-b-2 border-black p-2 font-bold print-border",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"}),e.jsxs("div",{className:"p-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border-r border-black pr-4",children:[e.jsx("div",{className:"font-bold mb-2 text-xs",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å *"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs mb-3",children:[e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.causePackaging,onChange:()=>m({...s,causePackaging:!s.causePackaging}),title:"‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.causeTransport,onChange:()=>m({...s,causeTransport:!s.causeTransport}),title:"‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.causeOperation,onChange:()=>m({...s,causeOperation:!s.causeOperation}),title:"‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.causeEnv,onChange:()=>m({...s,causeEnv:!s.causeEnv}),title:"‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"font-bold mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ :"}),e.jsx("textarea",{className:"w-full h-16 resize-none input-line bg-transparent",value:s.causeDetail,onChange:j=>m({...s,causeDetail:j.target.value}),title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏"})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"text-xs h-full flex flex-col",children:[e.jsx("div",{className:"font-bold mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô :"}),e.jsx("textarea",{className:"w-full flex-1 resize-none input-line bg-transparent mb-2",value:s.preventionDetail,onChange:j=>m({...s,preventionDetail:j.target.value}),title:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",className:"input-line w-32",value:s.preventionDueDate,onChange:j=>m({...s,preventionDueDate:j.target.value}),title:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"})]})]})})]})]}),e.jsxs("div",{className:"flex border-2 border-black h-32 mb-4 print-border-2",children:[e.jsxs("div",{className:"w-1/4 border-r-2 border-black p-2 flex flex-col justify-between items-center print-border",children:[e.jsx("div",{className:"text-xs font-bold text-center w-full",children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Approver)"}),e.jsxs("div",{className:"text-center w-full",children:[e.jsx("input",{type:"text",className:"input-line text-center mb-1",placeholder:"(‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠)",value:s.approver,onChange:j=>m({...s,approver:j.target.value}),title:"‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"}),e.jsx("input",{type:"text",className:"input-line text-center text-xs mb-1",placeholder:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",value:s.approverPosition,onChange:j=>m({...s,approverPosition:j.target.value}),title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsxs("div",{className:"flex justify-center items-center gap-1 text-xs",children:[e.jsx("span",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"}),e.jsx("input",{type:"date",className:"input-line w-24 text-center",value:s.approverDate,onChange:j=>m({...s,approverDate:j.target.value}),title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"})]})]})]}),e.jsxs("div",{className:"w-1/4 border-r-2 border-black p-2 flex flex-col justify-between items-center print-border",children:[e.jsx("div",{className:"text-xs font-bold text-center w-full",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsxs("div",{className:"text-center w-full",children:[e.jsx("input",{type:"text",className:"input-line text-center mb-1",placeholder:"(‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠)",value:s.responsiblePerson,onChange:j=>m({...s,responsiblePerson:j.target.value}),title:"‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",className:"input-line text-center text-xs mb-1",placeholder:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",value:s.responsiblePosition,onChange:j=>m({...s,responsiblePosition:j.target.value}),title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsxs("div",{className:"flex justify-center items-center gap-1 text-xs",children:[e.jsx("span",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"}),e.jsx("input",{type:"date",className:"input-line w-24 text-center",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"})]})]})]}),e.jsx("div",{className:"w-2/4 p-2 text-[10px] italic",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ : ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≤‡∏á Supplier/Out source ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ö NCR ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏¢‡∏±‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå"})]}),e.jsxs("div",{className:"border-2 border-black print-border-2",children:[e.jsx("div",{className:"bg-slate-200 print:bg-transparent border-b-2 border-black p-2 font-bold text-center print-border",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î NCR"}),e.jsxs("div",{className:"flex h-32 divide-x-2 divide-black",children:[e.jsxs("div",{className:"w-1/3 p-2 flex flex-col justify-center",children:[e.jsxs("label",{className:"flex gap-2 items-center mb-2",children:[e.jsx("input",{type:"checkbox",checked:s.qaAccept,onChange:()=>m({...s,qaAccept:!0,qaReject:!1}),title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö"})," ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsxs("label",{className:"flex gap-2 items-center mb-2",children:[e.jsx("input",{type:"checkbox",checked:s.qaReject,onChange:()=>m({...s,qaAccept:!1,qaReject:!0}),title:"‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö"})," ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsx("input",{type:"text",className:"input-line text-xs",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",value:s.qaReason,onChange:j=>m({...s,qaReason:j.target.value}),title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•"})]}),e.jsxs("div",{className:"w-1/3 p-2 flex flex-col justify-between items-center",children:[e.jsx("div",{className:"text-xs font-bold text-center w-full",children:"‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsxs("div",{className:"text-center w-full mt-auto",children:[e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-1 h-6"}),e.jsx("div",{className:"text-xs font-bold",children:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"}),e.jsx("div",{className:"text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]})]}),e.jsxs("div",{className:"w-1/3 p-2 flex flex-col justify-between items-center",children:[e.jsx("div",{className:"text-xs font-bold text-center w-full",children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsxs("div",{className:"text-center w-full mt-auto",children:[e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-1 h-6"}),e.jsx("div",{className:"text-xs font-bold",children:"‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£"}),e.jsx("div",{className:"text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ...../...../.........."})]})]})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-slate-50",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 flex items-center gap-2",children:[e.jsx(gs,{className:"w-5 h-5 text-blue-600"})," ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsx("button",{onClick:()=>v(!1),title:"‡∏õ‡∏¥‡∏î",children:e.jsx(je,{className:"w-6 h-6 text-slate-400 hover:text-red-500"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[e.jsx("h4",{className:"font-bold text-slate-700",children:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Item Details - NCR)"}),e.jsxs("span",{className:"bg-slate-200 text-slate-600 px-2 py-1 rounded text-xs font-bold",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ",h.length+1]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold mb-1",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref No.) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded text-xs",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ö‡∏¥‡∏•...",value:d.refNo,onChange:j=>w({...d,refNo:j.target.value}),title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"Neo Ref No. (Optional)"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded text-xs",placeholder:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà Neo...",value:d.neoRefNo,onChange:j=>w({...d,neoRefNo:j.target.value}),title:"Neo Ref No"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Code)"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded text-xs",value:d.productCode,onChange:j=>w({...d,productCode:j.target.value}),title:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Name)"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded text-xs",value:d.productName,onChange:j=>w({...d,productName:j.target.value}),title:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-bold mb-1",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",className:"w-full p-2 border rounded text-xs",value:d.quantity,onChange:j=>w({...d,quantity:parseFloat(j.target.value)}),title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded text-xs",value:d.unit,onChange:j=>w({...d,unit:j.target.value}),title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Price/Unit)"}),e.jsx("input",{type:"number",className:"w-full p-2 border rounded text-xs",value:d.pricePerUnit,onChange:j=>w({...d,pricePerUnit:parseFloat(j.target.value)}),title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("input",{type:"date",className:"w-full p-2 border rounded text-xs",value:d.expiryDate,onChange:j=>w({...d,expiryDate:j.target.value}),title:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏•‡∏£‡∏ß‡∏° (Total Price Bill)"}),e.jsx("input",{type:"number",className:"w-full p-2 border rounded text-xs bg-slate-50",value:d.priceBill,onChange:j=>w({...d,priceBill:parseFloat(j.target.value)}),title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏¥‡∏•‡∏£‡∏ß‡∏°"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢ (Price Sell)"}),e.jsx("input",{type:"number",className:"w-full p-2 border rounded text-xs bg-slate-50",value:d.priceSell,onChange:j=>w({...d,priceSell:parseFloat(j.target.value)}),title:"‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢"})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded text-xs",value:d.branch,onChange:j=>w({...d,branch:j.target.value}),title:"‡∏™‡∏≤‡∏Ç‡∏≤"})]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-50 border rounded-lg",children:[e.jsxs("label",{className:"block text-sm font-bold mb-3 text-slate-700",children:["‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Select Route) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"space-y-2",children:[ya.map(j=>e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200 hover:border-indigo-300 cursor-pointer transition-all hover:shadow-sm",children:[e.jsx("input",{type:"radio",name:"route",className:"w-4 h-4 text-indigo-600",checked:d.preliminaryRoute===j,onChange:()=>w({...d,preliminaryRoute:j}),title:j}),e.jsx("span",{className:"font-medium text-slate-700",children:j})]},j)),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-slate-200 hover:border-indigo-300 cursor-pointer transition-all hover:shadow-sm",children:[e.jsx("input",{type:"radio",name:"route",className:"w-4 h-4 text-indigo-600",checked:d.preliminaryRoute==="Other",onChange:()=>w({...d,preliminaryRoute:"Other"}),title:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"}),e.jsx("span",{className:"font-medium text-slate-700",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]}),d.preliminaryRoute==="Other"&&e.jsx("input",{type:"text",className:"w-full p-2 ml-8 border border-slate-300 rounded text-sm outline-none focus:ring-2 focus:ring-indigo-500 animate-fade-in",placeholder:"‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ...",value:d.preliminaryRouteOther||"",onChange:j=>w({...d,preliminaryRoute:"Other",preliminaryRouteOther:j.target.value})})]})]})]}),e.jsxs("div",{className:"border rounded-xl overflow-hidden shadow-sm bg-white border-red-100",children:[e.jsxs("div",{className:"bg-red-50 px-4 py-2 border-b font-bold text-red-700 flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4"})," ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏î‡πÄ‡∏ä‡∏¢ (Cost & Settlement)"]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.hasCost,onChange:j=>w({...d,hasCost:j.target.checked}),className:"w-4 h-4",title:"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"}),e.jsx("span",{className:"font-bold text-red-600",children:"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (Has Cost)"})]}),d.hasCost&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in pl-6 bg-red-50/50 p-2 rounded",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ (Source)"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded text-xs bg-slate-100",value:d.problemAnalysis||"-",readOnly:!0,title:"Source"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö (Responsible)"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded text-xs bg-slate-100 font-bold text-blue-700",value:d.costResponsible||"-",readOnly:!0,title:"Responsible"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)"}),e.jsx("input",{type:"number",className:"w-full p-2 border rounded text-xs",value:d.costAmount,onChange:j=>w({...d,costAmount:parseFloat(j.target.value)}),title:"Cost Amount"})]})]}),e.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-200",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.isFieldSettled,onChange:j=>w({...d,isFieldSettled:j.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-sm",children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏á‡∏≤‡∏ô / ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡πÄ‡∏á‡∏¥‡∏ô (Field Settlement)"})]}),d.isFieldSettled&&e.jsxs("div",{className:"mt-3 pl-6 grid grid-cols-2 gap-4 animate-fade-in text-xs",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (Amount)"}),e.jsx("input",{type:"number",className:"w-full p-2 border rounded",value:d.fieldSettlementAmount,onChange:j=>w({...d,fieldSettlementAmount:parseFloat(j.target.value)}),title:"Amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded",placeholder:"URL/Note...",value:d.fieldSettlementEvidence,onChange:j=>w({...d,fieldSettlementEvidence:j.target.value}),title:"Evidence"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:d.fieldSettlementName,onChange:j=>w({...d,fieldSettlementName:j.target.value}),title:"Name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-bold mb-1",children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded",value:d.fieldSettlementPosition,onChange:j=>w({...d,fieldSettlementPosition:j.target.value}),title:"Position"})]})]})]})]})]})]}),e.jsxs("div",{className:"p-4 border-t bg-slate-50 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 border rounded text-slate-600 font-bold hover:bg-slate-200",title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:()=>ee(!0),className:"px-6 py-2 bg-blue-600 text-white rounded font-bold hover:bg-blue-700 shadow-lg",title:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",children:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 z-[80] bg-black/60 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm text-center",children:[e.jsx(_l,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-2 border rounded-lg hover:bg-slate-50",title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsxs("button",{onClick:be,disabled:o,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex justify-center items-center gap-2",title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",children:[o&&e.jsx(Ml,{className:"w-4 h-4 animate-spin"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"]})]})]})}),n&&b&&e.jsx("div",{className:"fixed inset-0 z-[90] bg-black/60 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm text-center",children:[b.success?e.jsx(Le,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}):e.jsx(_t,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:b.success?"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!":"‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4 whitespace-pre-line",children:b.message}),e.jsx("button",{onClick:()=>{r(!1),b.success&&(S([]),m(t),f(""))},className:"w-full py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-700",title:"‡∏ï‡∏Å‡∏•‡∏á",children:"‡∏ï‡∏Å‡∏•‡∏á"})]})}),$&&e.jsx("div",{className:"fixed inset-0 z-[70] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-xs text-center animate-fade-in-up",children:[e.jsx(qt,{className:"w-10 h-10 text-slate-700 mx-auto mb-3"}),e.jsx("h3",{className:"font-bold text-lg mb-4",children:"Admin Authentication"}),e.jsx("input",{type:"password",autoFocus:!0,className:"w-full p-2 text-center text-xl border rounded mb-4 tracking-widest",placeholder:"Password",value:F,onChange:j=>le(j.target.value),onKeyDown:j=>j.key==="Enter"&&me(),title:"Password"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(!1),className:"flex-1 py-2 border rounded hover:bg-slate-50",title:"Cancel",children:"Cancel"}),e.jsx("button",{onClick:me,className:"flex-1 py-2 bg-slate-800 text-white rounded hover:bg-slate-900",title:"Confirm",children:"Confirm"})]})]})})]})},Ra=({item:l,onUpdate:c,onClose:i,onSave:g})=>{var h,S;const t=()=>{window.print()},s=p=>{if(!p)return[];const v=[];return p.problemDamaged&&v.push("‡∏ä‡∏≥‡∏£‡∏∏‡∏î"),p.problemDamagedInBox&&v.push("‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"),p.problemLost&&v.push("‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"),p.problemMixed&&v.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"),p.problemWrongInv&&v.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."),p.problemLate&&v.push("‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"),p.problemDuplicate&&v.push("‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"),p.problemWrong&&v.push("‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"),p.problemIncomplete&&v.push("‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"),p.problemOver&&v.push("‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"),p.problemWrongInfo&&v.push("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"),p.problemShortExpiry&&v.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"),p.problemTransportDamage&&v.push("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"),p.problemAccident&&v.push("‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"),p.problemPOExpired&&v.push("PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"),p.problemNoBarcode&&v.push("‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"),p.problemNotOrdered&&v.push("‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"),p.problemOther&&v.push(`‡∏≠‡∏∑‡πà‡∏ô‡πÜ: ${p.problemOtherText||"-"}`),v},m=l.item||l;return e.jsxs("div",{className:"fixed inset-0 bg-slate-900/50 flex flex-col items-center justify-start z-[9999] overflow-y-auto no-scrollbar print:static print:bg-white print:overflow-visible print:p-0 print:block",children:[e.jsxs("div",{className:"sticky top-0 w-full bg-white border-b border-slate-200 shadow-sm p-4 flex justify-between items-center z-50 print:hidden shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"w-5 h-5 text-slate-600"}),e.jsx("h2",{className:"font-bold text-slate-800",children:"Print Preview (A4 Mode)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 font-bold text-sm transition-colors border border-blue-200",children:[e.jsx(qe,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]}),e.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-900 font-bold text-sm transition-colors shadow-sm",children:[e.jsx(_e,{className:"w-4 h-4"})," ‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå"]}),e.jsx("button",{onClick:i,className:"p-2 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(je,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"my-8 print:m-0 print:w-full",children:e.jsxs("div",{className:"bg-white shadow-2xl mx-auto print:shadow-none print:mx-0 relative flex flex-col print-content-root ncr-a4-container",children:[e.jsxs("div",{className:"flex border-2 border-black mb-4",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black p-2 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-20"})}),e.jsxs("div",{className:"w-[70%] p-2 flex flex-col justify-center pl-4",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 leading-none mb-1",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-xs font-bold text-slate-700 mb-2",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-xs text-slate-600 mb-0.5",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-xs text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-lg font-bold text-center border-2 border-black py-1.5 mb-4 bg-white text-slate-900 print:bg-transparent uppercase tracking-wide",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-todept",className:"font-bold w-24 text-slate-800",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:"}),e.jsx("input",{id:"ncr-todept",type:"text",value:l.toDept||"‡πÅ‡∏ú‡∏ô‡∏Å‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û",onChange:p=>c({...l,toDept:p.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-date",className:"font-bold w-20 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("input",{id:"ncr-date",type:"text",value:l.date,onChange:p=>c({...l,date:p.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-copyto",className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:"}),e.jsx("input",{id:"ncr-copyto",type:"text",value:l.copyTo||"",onChange:p=>c({...l,copyTo:p.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1 font-bold",children:l.ncrNo})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-founder",className:"font-bold w-24 text-slate-800",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤:"}),e.jsx("input",{id:"ncr-founder",type:"text",value:l.founder||"",onChange:p=>c({...l,founder:p.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"ncr-pono",className:"font-bold w-20 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠:"}),e.jsx("input",{id:"ncr-pono",type:"text",value:l.poNo||"",onChange:p=>c({...l,poNo:p.target.value}),className:"flex-1 border-b border-dotted border-black px-1 focus:outline-none bg-transparent"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-bold text-sm mb-2 underline decoration-2 decoration-black",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items)"}),e.jsxs("table",{className:"w-full border-collapse border border-black text-sm",children:[e.jsx("thead",{className:"print:table-header-group",children:e.jsxs("tr",{className:"bg-slate-100 print:bg-transparent",children:[e.jsx("th",{className:"border border-black p-2 w-[15%] text-left",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"border border-black p-2 w-[20%] text-left",children:"Ref / Neo Ref"}),e.jsx("th",{className:"border border-black p-2 w-[25%] text-left",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-black p-2 w-[10%] text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-black p-2 w-[15%] text-right",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("th",{className:"border border-black p-2 w-[15%] text-left",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"print:break-inside-avoid",children:[e.jsx("td",{className:"border border-black p-2 valign-top text-xs",children:m.branch}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Ref:"})," ",m.refNo||"-"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Neo:"})," ",m.neoRefNo||"-"]})]}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsx("div",{className:"font-bold",children:m.productCode}),e.jsx("div",{className:"mb-1",children:m.productName}),e.jsx("div",{className:"text-slate-500 italic",children:m.customerName}),e.jsxs("div",{className:"text-slate-500 text-[10px]",children:["‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: ",m.destinationCustomer||"-"]})]}),e.jsxs("td",{className:"border border-black p-2 text-center valign-top font-bold",children:[m.quantity," ",m.unit]}),e.jsxs("td",{className:"border border-black p-2 text-right valign-top text-xs",children:[e.jsxs("div",{className:"mb-1",children:[(h=m.priceBill)==null?void 0:h.toLocaleString()," ‡∏ö."]}),e.jsxs("div",{className:"text-red-500",children:["Exp: ",m.expiryDate||"-"]})]}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsx("div",{className:"font-bold underline",children:m.problemSource}),m.hasCost&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"text-red-600 font-bold",children:["Cost: ",(S=m.costAmount)==null?void 0:S.toLocaleString()," ‡∏ö."]}),e.jsxs("div",{className:"text-[10px]",children:["(",m.costResponsible,")"]})]})]})]})})]})]}),e.jsxs("div",{className:"border border-black flex flex-col flex-1 min-h-0 print:break-inside-avoid",children:[e.jsxs("div",{className:"bg-slate-50 border-b border-black p-2 flex justify-between font-bold text-sm print:bg-transparent",children:[e.jsx("div",{className:"w-1/2 text-center",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("div",{className:"w-1/2 text-center border-l border-black",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})]}),e.jsxs("div",{className:"flex flex-1 min-h-[300px]",children:[e.jsx("div",{className:"w-1/2 p-4 border-r border-black flex flex-col items-center justify-center text-slate-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{children:"[‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö]"}),e.jsx("p",{className:"text-xs mt-2 text-slate-300",children:"‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢"}),e.jsx("p",{className:"text-xs text-slate-300",children:"‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á"})]})}),e.jsxs("div",{className:"w-1/2 p-4 flex flex-col gap-3",children:[e.jsx("div",{className:"text-xs font-bold underline mb-2",children:"‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:s(l).length>0?s(l).map((p,v)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 border border-black bg-black flex items-center justify-center",children:e.jsx("span",{className:"text-white text-[10px] pb-1",children:"‚úì"})}),e.jsx("span",{children:p})]},v)):e.jsx("div",{className:"col-span-2 text-slate-400 italic",children:"‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤"})}),e.jsxs("div",{className:"mt-4 flex flex-col flex-1",children:[e.jsx("label",{htmlFor:"ncr-detail",className:"text-xs font-bold mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{id:"ncr-detail",value:l.problemDetail,onChange:p=>c({...l,problemDetail:p.target.value}),className:"w-full flex-1 border border-dotted border-black p-2 text-xs resize-none min-h-[100px] outline-none"})]})]})]})]}),e.jsxs("div",{className:"mt-4 border-t-2 border-black pt-4 print:break-inside-avoid page-break-avoid",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 text-sm",children:[e.jsxs("div",{className:"border border-black p-4",children:[e.jsx("h4",{className:"font-bold underline mb-3 text-center",children:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.actionReject||l.actionRejectSort,readOnly:!0}),e.jsx("span",{children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject) / ‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å (Sort)"}),l.actionRejectSortQty&&e.jsxs("span",{className:"ml-auto underline",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ",l.actionRejectSortQty]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.actionScrap,readOnly:!0}),e.jsx("span",{children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),l.actionScrapQty&&e.jsxs("span",{className:"ml-auto underline",children:["‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ",l.actionScrapQty]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:l.actionSpecialAcceptance,readOnly:!0}),e.jsx("span",{children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"})]})]})]}),e.jsxs("div",{className:"border border-black p-4",children:[e.jsx("h4",{className:"font-bold underline mb-3 text-center",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ & ‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex gap-4 mb-2",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:l.causePackaging,readOnly:!0})," Packaging"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:l.causeTransport,readOnly:!0})," Transport"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"checkbox",checked:l.causeOperation,readOnly:!0})," Operation"]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("div",{className:"border-b border-dotted border-black min-h-[20px]",children:l.causeDetail||"-"})]}),e.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô:"}),e.jsx("div",{className:"border-b border-dotted border-black min-h-[20px]",children:l.preventionDetail||"-"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between mt-8 text-xs text-center px-8 pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤"}),e.jsxs("div",{className:"font-bold",children:["(",l.founder||"..........................",")"]}),e.jsxs("div",{children:["‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ",l.date]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö / ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsxs("div",{className:"font-bold",children:["(",l.responsiblePerson||"..........................",")"]}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Manager)"}),e.jsxs("div",{className:"font-bold",children:["(",l.approver||"..........................",")"]}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]})]})]})]})}),e.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap');
        
        .print-content-root {
          font-family: 'Sarabun', 'TH Sarabun New', sans-serif;
        }

        .ncr-a4-container {
          width: 210mm;
          min-height: 297mm;
          padding: 10mm 15mm;
        }

        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body {
            background: white !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          .print-content-root {
            width: 100%;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:table-header-group {
            display: table-header-group !important;
          }
          .print\\:break-inside-avoid {
             page-break-inside: avoid !important;
             break-inside: avoid !important;
          }
        }
      `})]})},Ie=l=>{if(!l)return"-";const c=new Date(l);if(isNaN(c.getTime()))return"-";const i=String(c.getDate()).padStart(2,"0"),g=String(c.getMonth()+1).padStart(2,"0"),t=c.getFullYear();return`${i}/${g}/${t}`},Sa=({isOpen:l,onClose:c,report:i,correspondingReturn:g})=>{if(!l||!i)return null;const t=i.item||i,s=(O,a)=>{if(!O||!a)return null;const N=new Date(O),n=new Date(a),r=Math.abs(n.getTime()-N.getTime());return Math.ceil(r/(1e3*60*60*24))},m=[{id:1,label:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Request)",status:"‡∏£‡∏≠‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",date:(g==null?void 0:g.dateRequested)||i.date,icon:Ce,colorKey:"blue",description:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤/‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:2,label:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (In Transit)",status:"‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á",date:g==null?void 0:g.dateInTransit,icon:fe,colorKey:"purple",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏õ Hub"},{id:3,label:"‡∏ñ‡∏∂‡∏á Hub (Received)",status:"‡∏ñ‡∏∂‡∏á Hub",date:(g==null?void 0:g.dateHubReceived)||(g==null?void 0:g.dateReceived),icon:Be,colorKey:"pink",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:4,label:"‡∏Ñ‡∏•‡∏±‡∏á/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (QC/Docs)",status:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö",date:(g==null?void 0:g.dateGraded)||(g==null?void 0:g.dateDocumented),icon:Ce,colorKey:"yellow",description:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£/‡∏Ñ‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"},{id:5,label:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Done)",status:"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",date:g==null?void 0:g.dateCompleted,icon:dt,colorKey:"green",description:"‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå"}],h=m.filter(O=>O.date),S=h.length>0?h[0].date:null,p=h.length>0?h[h.length-1].date:null,v=s(S,p),d=i.status==="Canceled",w={blue:{bg:"bg-blue-100",border:"border-blue-500",text:"text-blue-600",badgeBg:"bg-blue-50",badgeText:"text-blue-700"},orange:{bg:"bg-orange-100",border:"border-orange-500",text:"text-orange-600",badgeBg:"bg-orange-50",badgeText:"text-orange-700"},indigo:{bg:"bg-indigo-100",border:"border-indigo-500",text:"text-indigo-600",badgeBg:"bg-indigo-50",badgeText:"text-indigo-700"},yellow:{bg:"bg-yellow-100",border:"border-yellow-500",text:"text-yellow-600",badgeBg:"bg-yellow-50",badgeText:"text-yellow-700"},purple:{bg:"bg-purple-100",border:"border-purple-500",text:"text-purple-600",badgeBg:"bg-purple-50",badgeText:"text-purple-700"},pink:{bg:"bg-pink-100",border:"border-pink-500",text:"text-pink-600",badgeBg:"bg-pink-50",badgeText:"text-pink-700"},green:{bg:"bg-green-100",border:"border-green-500",text:"text-green-600",badgeBg:"bg-green-50",badgeText:"text-green-700"},red:{bg:"bg-red-100",border:"border-red-500",text:"text-red-600",badgeBg:"bg-red-50",badgeText:"text-red-700"},gray:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-400",badgeBg:"bg-slate-100",badgeText:"text-slate-500"}},o=m.findIndex(O=>!O.date);return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl w-full max-w-5xl overflow-hidden flex flex-col max-h-[90vh] ${d?"border-4 border-red-500":""}`,children:[e.jsxs("div",{className:`border-b p-6 flex justify-between items-start ${d?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[d?e.jsx(je,{className:"w-8 h-8 text-red-600"}):e.jsx(We,{className:"w-6 h-6 text-blue-600"}),"Timeline ‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border shadow-sm ${d?"bg-red-100 text-red-700 border-red-200":"bg-blue-100 text-blue-700 border-blue-200"}`,children:d?"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (CANCELED)":`NCR No: ${i.ncrNo||i.id}`}),v!==null&&e.jsxs("div",{className:"flex items-center gap-1 ml-4 bg-indigo-50 px-3 py-1 rounded-full border border-indigo-100",children:[e.jsx(wt,{className:"w-4 h-4 text-indigo-600"}),e.jsxs("span",{className:"text-xs font-bold text-indigo-700",children:["‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ",v," ‡∏ß‡∏±‡∏ô"]})]})]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô (Status Tracking Infographic)"})]}),e.jsx("button",{onClick:c,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-200 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto bg-slate-50/30",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-10",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)"}),e.jsx("div",{className:"font-bold text-slate-800 text-sm",children:t.productName}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:t.productCode})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (Customer)"}),e.jsx("div",{className:"font-bold text-slate-800 text-sm",children:t.customerName}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:t.branch})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Issue)"}),e.jsx("div",{className:"font-bold text-red-600 text-sm",children:i.problemDetail}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Source: ",t.problemSource]})]})]}),e.jsxs("div",{className:"relative pt-10 pb-6 px-4",children:[e.jsx("div",{className:"hidden md:block absolute top-[85px] left-10 right-10 h-1.5 bg-slate-200 rounded-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 relative",children:m.map((O,a)=>{let N=w[O.colorKey],n=!!O.date;const r=m[a-1],b=n&&(r!=null&&r.date)?s(r.date,O.date):null;let u=O.label,x=O.status,k=O.icon;return d&&(O.date||(a===o?(N=w.red,n=!0,x="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",k=je):a>o&&(N=w.gray))),e.jsxs("div",{className:"flex flex-col items-center relative z-10 group",children:[b!==null&&e.jsx("div",{className:"hidden md:flex absolute -left-[50%] top-[-30px] w-full justify-center",children:e.jsxs("div",{className:"text-[10px] font-bold text-slate-500 bg-white px-2 py-1 rounded-full border border-slate-200 shadow-sm whitespace-nowrap",children:[b," ‡∏ß‡∏±‡∏ô ",e.jsx("span",{className:"text-slate-300 mx-1",children:"‚Üí"})]})}),e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center border-4 shadow-lg transition-transform duration-300 mb-4 bg-white
                      ${n?`${N.border} ${N.text} scale-110 group-hover:scale-115`:"border-slate-200 text-slate-300"}
                    `,children:e.jsx(k,{className:"w-7 h-7"})}),e.jsxs("div",{className:`w-full bg-white rounded-xl border p-3 shadow-sm text-center min-h-[140px] flex flex-col transition-all duration-300
                      ${n?"border-blue-100 shadow-md transform hover:-translate-y-1":"border-slate-100 opacity-70"}
                    `,children:[e.jsx("div",{className:`font-bold text-sm mb-1 ${n?"text-slate-800":"text-slate-400"}`,children:u}),e.jsx("div",{className:"flex-grow flex items-center justify-center my-2",children:e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold
                          ${n?`${N.badgeBg} ${N.badgeText}`:"bg-slate-100 text-slate-400"}
                        `,children:x})}),e.jsx("div",{className:"border-t border-slate-50 pt-2 mt-auto",children:O.date?e.jsxs("div",{className:"text-xs font-bold text-slate-600 flex items-center justify-center gap-1",children:[e.jsx(wt,{className:"w-3 h-3"}),Ie(O.date)]}):d&&a===o?e.jsxs("div",{className:"text-xs font-bold text-red-500 flex items-center justify-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),"CANCELED"]}):e.jsx("div",{className:"text-[10px] text-slate-300 italic",children:"Pending"})})]})]},O.id)})})]}),e.jsxs("div",{className:"mt-8 text-center text-xs text-slate-400 bg-blue-50/50 p-2 rounded-lg border border-blue-50 mx-auto max-w-2xl",children:["üí° ",e.jsx("strong",{children:"Infographic Info:"})," ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return Journey) ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô"]})]})]})})},ka=({onTransfer:l})=>{const{ncrReports:c,items:i,updateNCRReport:g,deleteNCRReport:t,updateReturnRecord:s,deleteReturnRecord:m}=Se(),[h,S]=C.useState(!1),[p,v]=C.useState(null),[d,w]=C.useState(!1),[o,O]=C.useState(null),[a,N]=C.useState(!1),[n,r]=C.useState(!1),[b,u]=C.useState(""),[x,k]=C.useState(null),[R,f]=C.useState(!1),[$,A]=C.useState(null);C.useEffect(()=>{d&&setTimeout(()=>{const y=document.getElementById("ncr-modal-overlay");y&&(y.scrollTop=0)},10)},[d]);const[M,B]=C.useState({query:"",action:"All",returnStatus:"All",hasCost:!1,startDate:"",endDate:""}),[E,P]=C.useState(1),[F,le]=C.useState(20),[Y,me]=C.useState(!1),[se,G]=C.useState(null),D=y=>{G(y),me(!0)},Q=C.useMemo(()=>{const y=new Set;return c.forEach(z=>{z.founder&&y.add(z.founder),z.item&&z.item.founder&&y.add(z.item.founder)}),i.forEach(z=>{z.founder&&y.add(z.founder)}),Array.from(y).sort()},[c,i]),q=C.useMemo(()=>[...c].filter(z=>{var de,Re,Me,Ve,lt,xt,at,mt;const ce=z.item||z,pe=i.find(Rt=>Rt.ncrNumber===z.ncrNo);if(M.startDate&&z.date<M.startDate||M.endDate&&z.date>M.endDate)return!1;const Ne=M.query.toLowerCase();return!(Ne&&!((de=z.ncrNo)!=null&&de.toLowerCase().includes(Ne))&&!((Re=ce.customerName)!=null&&Re.toLowerCase().includes(Ne))&&!((Me=ce.productName)!=null&&Me.toLowerCase().includes(Ne))&&!((Ve=ce.productCode)!=null&&Ve.toLowerCase().includes(Ne))&&!((lt=ce.branch)!=null&&lt.toLowerCase().includes(Ne))&&!((xt=ce.destinationCustomer)!=null&&xt.toLowerCase().includes(Ne))&&!((at=z.problemDetail)!=null&&at.toLowerCase().includes(Ne))&&!((mt=ce.problemSource)!=null&&mt.toLowerCase().includes(Ne))||M.action!=="All"&&(M.action==="Reject"&&!z.actionReject&&!z.actionRejectSort||M.action==="Scrap"&&!z.actionScrap)||M.returnStatus!=="All"&&(M.returnStatus==="NotReturned"&&pe||M.returnStatus!=="NotReturned"&&(!pe||pe.status!==M.returnStatus))||M.hasCost&&!ce.hasCost)}).sort((z,ce)=>{const pe=z.ncrNo||z.id;return(ce.ncrNo||ce.id).localeCompare(pe)}),[c,i,M]),ee=()=>{const z=`
        <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
        <head>
          <meta http-equiv="content-type" content="text/plain; charset=UTF-8"/>
          <!--[if gte mso 9]>
          <xml>
            <x:ExcelWorkbook>
              <x:ExcelWorksheets>
                <x:ExcelWorksheet>
                  <x:Name>NCR Report</x:Name>
                  <x:WorksheetOptions>
                    <x:DisplayGridlines/>
                  </x:WorksheetOptions>
                </x:ExcelWorksheet>
              </x:ExcelWorksheets>
            </x:ExcelWorkbook>
          </xml>
          <![endif]-->
          <style>
            th { font-weight: bold; background-color: #f0f0f0; border: 1px solid #000; padding: 5px; }
            td { border: 1px solid #000; padding: 5px; vertical-align: top; }
          </style>
        </head>
        <body>
          <table>
            <thead>
              <tr>
                ${["NCR No","Date","Status","Product Code","Product Name","Customer","From Branch","To Destination","Quantity","Unit","Problem Detail","Problem Source","Has Cost","Cost Amount","Cost Responsible","Action","Return Status"].map(de=>`<th>${de}</th>`).join("")}
              </tr>
            </thead>
            <tbody>
              ${q.map(de=>{const Re=de.item||de,Me=i.find(lt=>lt.ncrNumber===de.ncrNo),Ve=de.actionReject||de.actionRejectSort?"Reject":de.actionScrap?"Scrap":"N/A";return`<tr>
                  <td>${de.ncrNo||""}</td>
                  <td>${Ie(de.date)}</td>
                  <td>${de.status||""}</td>
                  <td style="mso-number-format:'@'">${Re.productCode||""}</td>
                  <td>${Re.productName||""}</td>
                  <td>${Re.customerName||""}</td>
                  <td>${Re.branch||""}</td>
                  <td>${Re.destinationCustomer||""}</td>
                  <td style="text-align:center;">${Re.quantity||0}</td>
                  <td style="text-align:center;">${Re.unit||""}</td>
                  <td>${de.problemDetail||""}</td>
                  <td>${Re.problemSource||""}</td>
                  <td style="text-align:center;">${Re.hasCost?"Yes":"No"}</td>
                  <td style="text-align:right;">${Re.costAmount||0}</td>
                  <td>${Re.costResponsible||""}</td>
                  <td>${Ve}</td>
                  <td>${(Me==null?void 0:Me.status)||"Not Returned"}</td>
                </tr>`}).join("")}
            </tbody>
          </table>
        </body>
        </html>
      `,ce=new Blob([z],{type:"application/vnd.ms-excel;charset=utf-8"}),pe=URL.createObjectURL(ce),Ne=document.createElement("a");Ne.setAttribute("href",pe),Ne.setAttribute("download",`ncr_report_${new Date().toISOString().split("T")[0]}.xls`),document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne)},ae=y=>{const z=y.ncrNo,ce=c.filter(de=>de.ncrNo===z);if(ce.length===0){alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö NCR ‡∏ô‡∏µ‡πâ");return}const pe=ce.map(de=>de.item||de);_s(y,pe,z)},be=Math.ceil(q.length/F),he=C.useMemo(()=>{const y=(E-1)*F;return q.slice(y,y+F)},[q,E,F]);C.useEffect(()=>{P(1)},[M,F]);const ve=y=>{O(y),N(!1),w(!0)},j=y=>{k(y),u(""),r(!0)},I=()=>{b==="1234"?(O(x),N(!0),w(!0),r(!1)):alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")},U=y=>{A(y),u(""),f(!0)},Z=async()=>{b==="1234"&&$?(await t($),f(!1),A(null)):alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á")},V=(y,z)=>{o&&O({...o,[y]:z})},K=(y,z)=>{o&&O({...o,item:{...o.item||{},[y]:z}})},oe=y=>{o&&O(z=>z?{...z,[y]:!z[y]}:null)},_=y=>{o&&O(z=>z?{...z,[y]:!z[y]}:null)},ne=async()=>{o&&confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")&&(await g(o.id,o),w(!1),N(!1))},ge=y=>{v(y),S(!0)},X=y=>{const z=y.item||y,ce={documentNo:y.ncrNo,documentType:"NCR",status:"Requested",date:new Date().toISOString().split("T")[0],productCode:z.productCode,productName:z.productName,quantity:z.quantity,unit:z.unit,customerName:z.customerName,branch:z.branch,ncrNumber:y.ncrNo,reason:y.problemDetail,notes:z.problemSource,founder:y.founder||z.founder,destinationCustomer:z.destinationCustomer,actionReject:y.actionReject,actionScrap:y.actionScrap,actionRejectSort:y.actionRejectSort};l(ce)};return e.jsxs("div",{className:"h-full flex flex-col gap-4 p-4 font-inter text-slate-800 bg-slate-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm print:hidden",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-700 to-indigo-600 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(Ce,{className:"w-6 h-6 text-blue-600"}),"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR (NCR Report)"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î (Non-Conformance Report)"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(Fe,{className:"absolute left-2 top-1.5 w-4 h-4 text-slate-400 group-hover:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (NCR No, ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤, ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)...",value:M.query,onChange:y=>B({...M,query:y.target.value}),className:"pl-8 pr-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full md:w-64 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 border border-slate-200 rounded-lg p-0.5",children:[e.jsx("input",{type:"date",value:M.startDate,onChange:y=>B({...M,startDate:y.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:M.endDate,onChange:y=>B({...M,endDate:y.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î"})]}),e.jsxs("select",{value:M.action,onChange:y=>B({...M,action:y.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"}),e.jsx("option",{value:"Reject",children:"Reject"}),e.jsx("option",{value:"Scrap",children:"Scrap"})]}),e.jsxs("select",{value:M.returnStatus,onChange:y=>B({...M,returnStatus:y.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏∑‡∏ô"}),e.jsx("option",{value:"NotReturned",children:"‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô"}),e.jsx("option",{value:"Requested",children:"‡∏£‡∏≠‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"}),e.jsx("option",{value:"PickupScheduled",children:"‡∏£‡∏≠‡∏£‡∏ñ‡∏£‡∏±‡∏ö (Job Assigned)"}),e.jsx("option",{value:"PickedUp",children:"‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß (Picked Up)"}),e.jsx("option",{value:"InTransitHub",children:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsx("option",{value:"ReceivedAtHub",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Hub (‡∏£‡∏≠ QC)"}),e.jsx("option",{value:"QCPassed",children:"‡∏ú‡πà‡∏≤‡∏ô QC (‡∏£‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)"}),e.jsx("option",{value:"ReturnToSupplier",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô/‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô"}),e.jsx("option",{value:"Completed",children:"‡∏à‡∏ö‡∏á‡∏≤‡∏ô"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs text-slate-600 px-2 py-1 bg-slate-50 border border-slate-200 rounded-lg cursor-pointer whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:M.hasCost,onChange:y=>B({...M,hasCost:y.target.checked})}),"‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"]}),e.jsxs("div",{className:"flex gap-1 ml-auto",children:[e.jsxs("button",{onClick:ee,className:"bg-green-600 text-white font-bold px-3 py-1 rounded-lg flex items-center gap-1 hover:bg-green-700 transition-colors shadow-sm text-xs whitespace-nowrap",children:[e.jsx(tt,{className:"w-3 h-3"}),"Excel"]}),e.jsx("button",{onClick:()=>B({query:"",action:"All",returnStatus:"All",hasCost:!1,startDate:"",endDate:"",docType:"All"}),className:"px-2 py-1 text-slate-600 hover:bg-slate-100 font-medium rounded-lg border border-slate-200",title:"‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á (Clear)",children:e.jsx(Ee,{className:"w-3 h-3"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col print:hidden",children:[e.jsx("div",{className:"overflow-auto flex-1 relative ncr-table-container",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{className:"whitespace-nowrap",children:[e.jsx("th",{className:"px-1 py-1 bg-slate-50 sticky left-0 z-10 border-r w-6 text-center text-[10px]",children:"#"}),e.jsx("th",{className:"px-1 py-1 bg-slate-50 sticky left-6 z-10 border-r w-[80px] text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà / ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà"}),e.jsx("th",{className:"px-1 py-1 max-w-[150px] text-[10px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[80px] text-[10px]",children:"‡∏ú‡∏π‡πâ‡∏û‡∏ö"}),e.jsx("th",{className:"px-1 py-1 max-w-[100px] text-[10px]",children:"F/T"}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Source)"}),e.jsx("th",{className:"px-1 py-1 text-right w-[60px] text-[10px]",children:"Cost"}),e.jsx("th",{className:"px-1 py-1 text-center w-[60px] text-[10px]",children:"Act"}),e.jsx("th",{className:"px-1 py-1 text-center w-[60px] text-[10px]",children:"Sts"}),e.jsx("th",{className:"px-1 py-1 text-center bg-slate-50 sticky right-0 z-10 border-l w-[100px] text-[10px]"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:he.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"p-8 text-center text-slate-400 italic",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ NCR ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ"})}):he.map(y=>{var Ne;const z=y.item||y;z.productName||(z.productName="Unknown Product");const ce=i.find(de=>de.ncrNumber===y.ncrNo),pe=y.status==="Canceled";return e.jsx(te.Fragment,{children:e.jsxs("tr",{className:`hover:bg-slate-50 ${pe?"line-through text-slate-400 bg-slate-50":""}`,children:[e.jsx("td",{className:`px-0.5 py-1 sticky left-0 border-r text-center ${pe?"bg-slate-100":"bg-white hover:bg-slate-50"}`,children:e.jsx("button",{onClick:()=>D(y),className:"p-0.5 rounded-full hover:bg-blue-100 text-blue-400 hover:text-blue-600 transition-colors",title:"‡∏î‡∏π Timeline (View Infographic)",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-full p-0.5",children:e.jsx(Fe,{className:"w-3 h-3"})})})}),e.jsxs("td",{className:`px-1 py-1 sticky left-6 border-r w-[80px] ${pe?"bg-slate-100":"bg-white hover:bg-slate-50"}`,children:[e.jsx("div",{className:"flex gap-1 mb-0.5",children:e.jsx("span",{className:"px-1 rounded text-[8px] font-bold bg-purple-100 text-purple-600 border border-purple-200",children:"NCR"})}),e.jsx("button",{onClick:()=>ve(y),disabled:pe,className:"font-bold text-blue-600 hover:text-blue-800 hover:underline text-left block truncate w-full disabled:text-slate-400 disabled:no-underline disabled:cursor-not-allowed text-[10px]",title:"‡∏î‡∏π‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (View NCR Form)",children:y.ncrNo||y.id}),e.jsx("div",{className:"text-[9px] text-slate-500",children:Ie(y.date)}),e.jsx("div",{className:"mt-0.5",children:pe?e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] text-slate-500 font-bold bg-slate-200 px-1 py-0 rounded border border-slate-300",children:[e.jsx(_t,{className:"w-2 h-2"})," ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"]}):y.status==="Closed"?e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] text-green-600 font-bold bg-green-50 px-1 py-0 rounded border border-green-100",children:[e.jsx(dt,{className:"w-2 h-2"})," Closed"]}):e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] text-amber-500 font-bold bg-amber-50 px-1 py-0 rounded border border-amber-100",children:[e.jsx(wt,{className:"w-2 h-2"})," ",y.status==="Open"?ce?ce.status:"Open":y.status]})})]}),e.jsxs("td",{className:"px-1 py-1 max-w-[150px]",children:[e.jsxs("div",{className:`font-bold flex items-center gap-1 text-[10px] ${pe?"":"text-blue-600"}`,children:[e.jsx(Xe,{className:"w-2.5 h-2.5 flex-shrink-0"})," ",e.jsx("span",{className:"truncate",children:z.productCode})]}),e.jsx("div",{className:`text-[10px] truncate ${pe?"":"text-slate-700"}`,title:z.productName,children:z.productName}),e.jsxs("div",{className:"text-[9px] text-slate-500 truncate",children:["Qty: ",z.quantity," ",z.unit]})]}),e.jsx("td",{className:"px-1 py-1 max-w-[120px]",children:e.jsx("div",{className:`flex items-start gap-1 font-medium text-[10px] ${pe?"":"text-slate-700"}`,children:e.jsx("span",{className:"line-clamp-2 leading-tight",title:z.customerName,children:z.customerName||"-"})})}),e.jsx("td",{className:"px-1 py-1 max-w-[80px]",children:e.jsx("div",{className:"text-[10px] text-slate-600 truncate",title:z.founder||y.founder||(ce==null?void 0:ce.founder),children:z.founder||y.founder||(ce==null?void 0:ce.founder)||"-"})}),e.jsx("td",{className:"px-1 py-1 max-w-[100px]",children:e.jsxs("div",{className:"flex flex-col text-[9px] leading-tight text-slate-600",children:[e.jsxs("div",{className:"truncate",title:`From: ${z.branch}`,children:[e.jsx("span",{className:"font-bold",children:"F:"})," ",z.branch]}),e.jsxs("div",{className:"truncate",title:`To: ${z.destinationCustomer}`,children:[e.jsx("span",{className:"font-bold",children:"T:"})," ",z.destinationCustomer||"-"]})]})}),e.jsxs("td",{className:"px-1 py-1 max-w-[120px]",children:[e.jsx("div",{className:`text-[10px] font-bold leading-tight ${pe?"":"text-slate-700"} mb-0.5 line-clamp-1 truncate`,title:y.problemDetail,children:y.problemDetail}),e.jsx("div",{className:`text-[8px] p-0.5 px-1 rounded border inline-block max-w-full truncate ${pe?"bg-slate-100":"bg-slate-100 border-slate-200"}`,children:z.problemSource})]}),e.jsx("td",{className:"px-1 py-1 text-right w-[60px]",children:z.hasCost?e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("span",{className:`font-bold flex items-center gap-0.5 text-[10px] ${pe?"":"text-red-600"}`,children:[e.jsx(et,{className:"w-2.5 h-2.5"})," ",(Ne=z.costAmount)==null?void 0:Ne.toLocaleString()]})}):e.jsx("span",{className:"text-[10px] text-slate-300",children:"-"})}),e.jsx("td",{className:"px-1 py-1 text-center w-[60px]",children:y.actionReject||y.actionRejectSort?e.jsx("span",{className:`inline-block px-1 py-0 rounded text-[9px] font-bold border ${pe?"bg-slate-200":"bg-red-100 text-red-700 border-red-200"}`,children:"Reject"}):y.actionScrap?e.jsx("span",{className:`inline-block px-1 py-0 rounded text-[9px] font-bold border ${pe?"bg-slate-200":"bg-orange-100 text-orange-700 border-orange-200"}`,children:"Scrap"}):e.jsx("span",{className:"text-[10px] text-slate-300",children:"-"})}),e.jsx("td",{className:"px-1 py-1 text-center w-[60px]",children:ce?e.jsx("span",{className:`inline-block px-1 py-0 rounded text-[9px] font-bold border ${ce.status==="Received"?"bg-blue-100 text-blue-700 border-blue-200":ce.status==="Graded"?"bg-indigo-100 text-indigo-700 border-indigo-200":ce.status==="Completed"?"bg-green-100 text-green-700 border-green-200":"bg-yellow-100 text-yellow-700 border-yellow-200"}`,children:ce.status}):e.jsx("span",{className:"text-[10px] text-slate-300",children:"-"})}),e.jsx("td",{className:`px-1 py-1 text-center sticky right-0 border-l w-[100px] ${pe?"bg-slate-100":"bg-white"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>ge(y),disabled:pe,className:"p-0.5 text-slate-500 hover:text-slate-800 hover:bg-slate-100 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Print Return Note)",children:e.jsx(_e,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>j(y),disabled:pe,className:"p-0.5 text-amber-500 hover:text-amber-700 hover:bg-amber-50 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Edit)",children:e.jsx(Nt,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>U(y.id),disabled:pe,className:"p-0.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)",children:e.jsx(De,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>ae(y),disabled:pe,className:"p-0.5 text-green-600 hover:text-green-800 hover:bg-green-50 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:"Export Form to Excel",children:e.jsx(tt,{className:"w-3 h-3"})}),pe?e.jsx("span",{className:"inline-flex items-center gap-0.5 bg-slate-200 text-slate-500 px-1 py-0.5 rounded text-[8px] font-bold border border-slate-300",children:e.jsx(_t,{className:"w-2.5 h-2.5"})}):ce?e.jsx("span",{className:"inline-flex items-center gap-0.5 bg-green-100 text-green-700 px-1 py-0.5 rounded text-[8px] font-bold border border-green-200",title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô‡πÅ‡∏•‡πâ‡∏ß",children:e.jsx(dt,{className:"w-2.5 h-2.5"})}):(y.actionReject||y.actionScrap||y.actionRejectSort)&&e.jsxs("button",{onClick:()=>X(y),className:"inline-flex items-center gap-0.5 bg-orange-500 hover:bg-orange-600 text-white px-1 py-0 rounded shadow-sm transition-all transform hover:scale-105 text-[8px] font-bold",title:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥",children:["‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô ",e.jsx(Rs,{className:"w-2.5 h-2.5"})]})]})})]},y.id)},y.id)})})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-sm print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{children:"‡πÅ‡∏™‡∏î‡∏á"}),e.jsxs("select",{value:F,onChange:y=>le(Number(y.target.value)),className:"bg-white border border-slate-300 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500 font-bold","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ",q.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>P(y=>Math.max(y-1,1)),disabled:E===1,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-bold text-slate-800",children:["‡∏´‡∏ô‡πâ‡∏≤ ",E]}),e.jsxs("span",{className:"text-slate-500",children:["‡∏à‡∏≤‡∏Å ",be||1]})]}),e.jsx("button",{onClick:()=>P(y=>Math.min(y+1,be)),disabled:E===be||be===0,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"})]})]})]}),h&&p&&e.jsx(Ra,{item:p,onUpdate:v,onClose:()=>S(!1),onSave:async()=>{confirm("‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ô‡∏µ‡πâ‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")&&(await g(p.id,p),alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢"))}}),d&&o&&e.jsx("div",{id:"ncr-modal-overlay",className:"fixed inset-0 bg-black/50 flex items-start justify-center p-4 pt-10 z-50 overflow-y-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl my-8",children:[e.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-slate-50 sticky top-0 rounded-t-lg z-10",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2 text-lg",children:[a?e.jsx(Nt,{className:"w-5 h-5 text-amber-500"}):e.jsx(ks,{className:"w-5 h-5 text-blue-500"}),a?"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• NCR":"‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î NCR"]}),e.jsx("button",{onClick:()=>w(!1),className:"text-slate-500 hover:text-slate-700","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs("div",{className:"bg-white shadow-xl border border-slate-200 relative p-8 min-w-[800px]",children:[e.jsxs("div",{className:"flex border-2 border-black mb-6",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black p-4 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-24"})}),e.jsxs("div",{className:"w-[70%] p-4 flex flex-col justify-center pl-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 leading-none mb-2",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-sm text-slate-600 mb-1",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-sm text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{className:"text-slate-400",children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-xl font-bold text-center border-2 border-black py-2 mb-6 bg-white text-slate-900",children:"‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (NCR) / ‡πÉ‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô:"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô",title:"‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:o.toDept||"",onChange:y=>V("toDept",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("input",{type:"date",disabled:!a,"aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:o.date,onChange:y=>V("date",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤:"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤",title:"‡∏™‡∏≥‡πÄ‡∏ô‡∏≤",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:o.copyTo||"",onChange:y=>V("copyTo",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"font-bold w-24 text-slate-800",children:["‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà NCR: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex-1 border-b border-dotted border-slate-400 bg-slate-100 outline-none px-2 py-1 font-mono text-slate-500 font-bold rounded-sm text-center",children:o.ncrNo})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"font-bold w-24 text-slate-800",children:["‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(Bs,{disabled:!a,className:"w-full border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:o.founder||"",onChange:y=>V("founder",y),options:Q})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"font-bold w-32 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï:"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠/‡∏ú‡∏•‡∏¥‡∏ï",className:"flex-1 border-b border-dotted border-slate-400 bg-transparent outline-none px-1 text-slate-700",value:o.poNo||"",onChange:y=>V("poNo",y.target.value)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:e.jsxs("h3",{className:"font-bold text-slate-900 underline",children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Non-Conforming Items) ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),e.jsx("div",{className:"border-2 border-black bg-white",children:e.jsxs("table",{className:"w-full text-xs text-left",children:[e.jsx("thead",{className:"bg-slate-100 border-b border-black font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 border-r border-black",children:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á"}),e.jsx("th",{className:"p-2 border-r border-black",children:"Ref/Neo Ref"}),e.jsx("th",{className:"p-2 border-r border-black",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"p-2 border-r border-black text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"p-2 border-r border-black text-right",children:"‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"}),e.jsx("th",{className:"p-2 border-r border-black",children:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤/‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢"})]})}),e.jsx("tbody",{className:"divide-y divide-black",children:e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black align-top",children:e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",className:"w-full bg-transparent border-b border-dotted border-slate-300",value:(o.item||o).branch||"",onChange:y=>K("branch",y.target.value)})}),e.jsxs("td",{className:"p-2 border-r border-black align-top",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Ref:"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"Ref No",title:"Ref No",className:"flex-1 bg-transparent border-b border-dotted border-slate-300 w-20",value:(o.item||o).refNo||"",onChange:y=>K("refNo",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-slate-500",children:[e.jsx("span",{children:"Neo:"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"Neo Ref No",title:"Neo Ref No",className:"flex-1 bg-transparent border-b border-dotted border-slate-300 w-20",value:(o.item||o).neoRefNo||"",onChange:y=>K("neoRefNo",y.target.value)})]})]}),e.jsxs("td",{className:"p-2 border-r border-black align-top",children:[e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",className:"w-full font-bold bg-transparent border-b border-dotted border-slate-300 mb-1",value:(o.item||o).productCode||"",onChange:y=>K("productCode",y.target.value)}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤",className:"w-full text-slate-600 font-medium bg-transparent border-b border-dotted border-slate-300 mb-1",value:(o.item||o).productName||"",onChange:y=>K("productName",y.target.value)}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",title:"‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",className:"w-full text-slate-500 bg-transparent border-b border-dotted border-slate-300",value:(o.item||o).customerName||"",onChange:y=>K("customerName",y.target.value)}),e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-blue-600",children:[e.jsx("span",{children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á:"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",title:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",className:"flex-1 bg-transparent border-b border-dotted border-blue-200",value:(o.item||o).destinationCustomer||"",onChange:y=>K("destinationCustomer",y.target.value)})]})]}),e.jsx("td",{className:"p-2 border-r border-black text-center align-top",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("input",{type:"number",disabled:!a,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",className:"w-12 text-center bg-transparent border-b border-dotted border-slate-300",value:(o.item||o).quantity||0,onChange:y=>K("quantity",Number(y.target.value))}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢",className:"w-8 text-center bg-transparent border-b border-dotted border-slate-300",value:(o.item||o).unit||"",onChange:y=>K("unit",y.target.value)})]})}),e.jsxs("td",{className:"p-2 border-r border-black text-right align-top",children:[e.jsxs("div",{children:[e.jsx("input",{type:"number",step:"0.01",disabled:!a,"aria-label":"‡∏£‡∏≤‡∏Ñ‡∏≤",title:"‡∏£‡∏≤‡∏Ñ‡∏≤",className:"w-20 text-right bg-transparent border-b border-dotted border-slate-300",value:(o.item||o).priceBill||0,onChange:y=>K("priceBill",Number(y.target.value)),onBlur:y=>K("priceBill",parseFloat(parseFloat(y.target.value).toFixed(2)))})," ‡∏ö."]}),e.jsxs("div",{className:"text-red-500 mt-1 flex items-center justify-end gap-1",children:[e.jsx("span",{children:"Exp:"}),e.jsx("input",{type:"date",disabled:!a,"aria-label":"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",title:"‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏",className:"w-24 bg-transparent border-none text-right text-xs",value:(o.item||o).expiryDate||"",onChange:y=>K("expiryDate",y.target.value)})]})]}),e.jsxs("td",{className:"p-2 border-r border-black align-top",children:[e.jsx("textarea",{disabled:!a,"aria-label":"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",className:"w-full h-12 text-xs resize-none bg-transparent border-b border-dotted border-slate-300",value:(o.item||o).problemSource||"",onChange:y=>K("problemSource",y.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏..."}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("label",{className:"flex items-center gap-1 text-red-600 font-bold cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:(o.item||o).hasCost,onChange:y=>K("hasCost",y.target.checked)})," Has Cost"]}),(o.item||o).hasCost&&e.jsxs("div",{className:"pl-4 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-red-600 font-bold",children:"Cost:"}),e.jsx("input",{type:"number",step:"0.01",disabled:!a,"aria-label":"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",className:"w-20 bg-transparent border-b border-dotted border-red-300 text-red-600 font-bold",value:(o.item||o).costAmount||0,onChange:y=>K("costAmount",Number(y.target.value)),onBlur:y=>K("costAmount",parseFloat(parseFloat(y.target.value).toFixed(2)))})," ‡∏ö."]}),e.jsxs("div",{className:"flex items-center gap-1 text-slate-500",children:[e.jsx("span",{className:"text-xs",children:"‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö:"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",title:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢",className:"w-20 bg-transparent border-b border-dotted border-slate-300 text-xs",value:(o.item||o).costResponsible||"",onChange:y=>K("costResponsible",y.target.value)})]})]})]})]})]})})]})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-black bg-slate-50",children:[e.jsx("th",{className:"border-r-2 border-black w-1/3 py-2 text-slate-900",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("th",{className:"py-2 text-slate-900",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡∏ú‡∏π‡πâ‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"border-r-2 border-black p-4 text-center align-middle h-64 relative bg-white",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-red-500 opacity-50",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û / ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£"}),e.jsx("h2",{className:"text-3xl font-bold",children:"‡∏ï‡∏≤‡∏°‡πÅ‡∏ô‡∏ö"}),e.jsx(Ct,{className:"w-16 h-16 mt-4"})]})}),e.jsxs("td",{className:"p-4 align-top text-sm bg-white",children:[e.jsxs("div",{className:"mb-2 font-bold underline text-slate-900",children:["‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4 text-slate-700",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemDamaged,onChange:()=>oe("problemDamaged")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemDamagedInBox,onChange:()=>oe("problemDamagedInBox")})," ‡∏ä‡∏≥‡∏£‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemLost,onChange:()=>oe("problemLost")})," ‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemMixed,onChange:()=>oe("problemMixed")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏•‡∏±‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemWrongInv,onChange:()=>oe("problemWrongInv")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á INV."]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemLate,onChange:()=>oe("problemLate")})," ‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemDuplicate,onChange:()=>oe("problemDuplicate")})," ‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemWrong,onChange:()=>oe("problemWrong")})," ‡∏™‡πà‡∏á‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemIncomplete,onChange:()=>oe("problemIncomplete")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemOver,onChange:()=>oe("problemOver")})," ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏¥‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemWrongInfo,onChange:()=>oe("problemWrongInfo")})," ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemShortExpiry,onChange:()=>oe("problemShortExpiry")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏±‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemTransportDamage,onChange:()=>oe("problemTransportDamage")})," ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ö‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemAccident,onChange:()=>oe("problemAccident")})," ‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemPOExpired,onChange:()=>oe("problemPOExpired")})," PO. ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemNoBarcode,onChange:()=>oe("problemNoBarcode")})," ‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πä‡∏ï‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-slate-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.problemNotOrdered,onChange:()=>oe("problemNotOrdered")})," ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 col-span-2",children:[e.jsx("input",{type:"checkbox",disabled:!a,"aria-label":"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ",checked:o.problemOther,onChange:()=>oe("problemOther")})," ",e.jsx("span",{children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",title:"‡∏£‡∏∞‡∏ö‡∏∏‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÜ",className:"border-b border-dotted border-slate-400 bg-transparent outline-none w-full text-slate-700",value:o.problemOtherText||"",onChange:y=>V("problemOtherText",y.target.value)})]})]}),e.jsx("div",{className:"font-bold underline mb-1 text-slate-900",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:"}),e.jsx("textarea",{disabled:!a,"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤",className:"w-full h-32 border border-slate-200 bg-slate-50 p-2 text-sm resize-none focus:ring-1 focus:ring-blue-500 outline-none text-slate-700",value:o.problemDetail,onChange:y=>V("problemDetail",y.target.value)})]})]})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6 text-sm bg-white",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50 border-b-2 border-black",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£"})})}),e.jsxs("tbody",{className:"divide-y divide-black border-b-2 border-black",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black w-1/2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!a,title:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)",checked:o.actionReject,onChange:y=>V("actionReject",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô (Reject)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!a,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:o.actionRejectQty||"",onChange:y=>V("actionRejectQty",parseInt(y.target.value)||0)})]})}),e.jsx("td",{className:"p-2 w-1/2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!a,title:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢",checked:o.actionRejectSort,onChange:y=>V("actionRejectSort",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!a,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏±‡∏î‡πÅ‡∏¢‡∏Å",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:o.actionRejectSortQty||"",onChange:y=>V("actionRejectSortQty",parseInt(y.target.value)||0)})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!a,title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)",checked:o.actionRework,onChange:y=>V("actionRework",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Rework)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!a,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:o.actionReworkQty||"",onChange:y=>V("actionReworkQty",parseInt(y.target.value)||0)})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",title:"‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",className:"flex-1 border-b border-dotted border-black bg-transparent outline-none",value:o.actionReworkMethod||"",onChange:y=>V("actionReworkMethod",y.target.value)})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!a,title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©",checked:o.actionSpecialAcceptance,onChange:y=>V("actionSpecialAcceptance",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏û‡∏¥‡πÄ‡∏®‡∏©"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!a,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:o.actionSpecialAcceptanceQty||"",onChange:y=>V("actionSpecialAcceptanceQty",parseInt(y.target.value)||0)})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",className:"flex-1 border-b border-dotted border-black bg-transparent outline-none",value:o.actionSpecialAcceptanceReason||"",onChange:y=>V("actionSpecialAcceptanceReason",y.target.value)})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 border-r border-black",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!a,title:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",checked:o.actionScrap,onChange:y=>V("actionScrap",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!a,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏≥‡∏•‡∏≤‡∏¢",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:o.actionScrapQty||"",onChange:y=>V("actionScrapQty",parseInt(y.target.value)||0)})]})}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",disabled:!a,title:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà",checked:o.actionReplace,onChange:y=>V("actionReplace",y.target.checked)})," ",e.jsx("span",{className:"font-bold",children:"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà"}),e.jsx("span",{className:"ml-auto text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsx("input",{type:"number",disabled:!a,"aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô",className:"w-20 border-b border-dotted border-black text-center bg-transparent outline-none",value:o.actionReplaceQty||"",onChange:y=>V("actionReplaceQty",parseInt(y.target.value)||0)})]})})]})]}),e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"p-3 bg-white",children:e.jsxs("div",{className:"flex justify-between items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",disabled:!a,"aria-label":"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à",title:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à",className:"border-b border-dotted border-black bg-transparent text-slate-700 outline-none",value:o.dueDate||"",onChange:y=>V("dueDate",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",title:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",className:"w-32 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:o.approver||"",onChange:y=>V("approver",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á",className:"w-24 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:o.approverPosition||"",onChange:y=>V("approverPosition",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"}),e.jsx("input",{type:"date",disabled:!a,"aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",className:"border-b border-dotted border-black bg-transparent text-slate-700 outline-none",value:o.approverDate||"",onChange:y=>V("approverDate",y.target.value)})]})]})})})})]}),e.jsxs("table",{className:"w-full border-2 border-black mb-6 text-sm bg-white",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50 border-b-2 border-black",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤)"})})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"w-1/4 border-r-2 border-black align-top p-0",children:[e.jsx("div",{className:"border-b border-black p-2 font-bold text-center bg-slate-50",children:"‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.causePackaging,onChange:()=>_("causePackaging")})," ‡∏ö‡∏£‡∏£‡∏à‡∏∏‡∏†‡∏±‡∏ì‡∏ë‡πå"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.causeTransport,onChange:()=>_("causeTransport")})," ‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.causeOperation,onChange:()=>_("causeOperation")})," ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!a,checked:o.causeEnv,onChange:()=>_("causeEnv")})," ‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°"]})]})]}),e.jsxs("td",{className:"align-top p-0",children:[e.jsxs("div",{className:"h-24 border-b border-black p-2 flex flex-col",children:[e.jsx("div",{className:"font-bold mb-1",children:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏ :"}),e.jsx("textarea",{disabled:!a,"aria-label":"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏",className:"flex-1 w-full bg-transparent outline-none resize-none text-slate-700",value:o.causeDetail||"",onChange:y=>V("causeDetail",y.target.value)})]}),e.jsxs("div",{className:"h-24 p-2 flex flex-col",children:[e.jsx("div",{className:"font-bold underline mb-1",children:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô :"}),e.jsx("textarea",{disabled:!a,"aria-label":"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô",title:"‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô",className:"flex-1 w-full bg-transparent outline-none resize-none text-slate-700",value:o.preventionDetail||"",onChange:y=>V("preventionDetail",y.target.value)})]})]})]}),e.jsx("tr",{className:"border-t-2 border-black",children:e.jsx("td",{colSpan:2,className:"p-3 bg-white",children:e.jsxs("div",{className:"flex justify-between items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à"}),e.jsx("input",{type:"date",disabled:!a,"aria-label":"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à",title:"‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏™‡∏£‡πá‡∏à",className:"border-b border-dotted border-black bg-transparent text-slate-700 outline-none",value:o.preventionDueDate||"",onChange:y=>V("preventionDueDate",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",className:"w-32 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:o.responsiblePerson||"",onChange:y=>V("responsiblePerson",y.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á"}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",title:"‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö",className:"w-24 border-b border-dotted border-black bg-transparent text-slate-700 text-center outline-none",value:o.responsiblePosition||"",onChange:y=>V("responsiblePosition",y.target.value)})]})]})})})]})]}),e.jsxs("div",{className:"border-2 border-black p-2 mb-6 text-xs bg-white",children:[e.jsx("span",{className:"font-bold",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ :"})," ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≤‡∏á Supplier/Out source ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ö NCR ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏-‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏¢‡∏±‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå"]}),e.jsxs("table",{className:"w-full border-2 border-black text-sm bg-white",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-slate-50 border-b-2 border-black",children:e.jsx("th",{colSpan:2,className:"py-2 text-center font-bold text-slate-900",children:"‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î NCR"})})}),e.jsxs("tbody",{children:[e.jsx("tr",{className:"border-b-2 border-black",children:e.jsx("td",{colSpan:2,className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!a,title:"‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",checked:o.qaAccept,onChange:y=>V("qaAccept",y.target.checked)})," ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",disabled:!a,title:"‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",checked:o.qaReject,onChange:y=>V("qaReject",y.target.checked)})," ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô"]}),e.jsx("input",{type:"text",disabled:!a,"aria-label":"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",title:"‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö",className:"flex-1 border-b border-dotted border-black bg-transparent outline-none text-slate-700",placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏• (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)",value:o.qaReason||"",onChange:y=>V("qaReason",y.target.value)})]})})}),e.jsxs("tr",{children:[e.jsxs("td",{className:"w-1/2 border-r-2 border-black p-4 text-center align-bottom h-32",children:[e.jsx("div",{className:"font-bold mb-8",children:"‡∏ú‡∏π‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-slate-500 text-xs",children:"‡πÅ‡∏ú‡∏ô‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û"})]}),e.jsxs("td",{className:"w-1/2 p-4 text-center align-bottom h-32",children:[e.jsx("div",{className:"font-bold mb-8",children:"‡∏ú‡∏π‡πâ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°"}),e.jsx("div",{className:"border-b border-dotted border-black w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"text-slate-500 text-xs",children:"‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£"})]})]})]})]}),e.jsx("div",{className:"text-right text-xs mt-4 font-mono text-slate-400",children:"FM-OP01-06 Rev.00"})]})}),e.jsxs("div",{className:"p-4 border-t bg-slate-50 flex justify-end gap-2 sticky bottom-0 rounded-b-lg",children:[e.jsxs("button",{onClick:()=>o&&ae(o),className:"px-4 py-2 text-green-600 hover:bg-green-50 border border-green-200 rounded font-bold flex items-center gap-2 mr-auto",children:[e.jsx(tt,{className:"w-4 h-4"})," Export Excel"]}),e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded",children:"‡∏õ‡∏¥‡∏î"}),a&&e.jsxs("button",{onClick:ne,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 font-bold shadow-sm",children:[e.jsx(qe,{className:"w-4 h-4"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"]})]})]})}),e.jsx(Sa,{isOpen:Y,onClose:()=>me(!1),report:se,correspondingReturn:i.find(y=>y.ncrNumber===(se==null?void 0:se.ncrNo))}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center",children:[e.jsx(qt,{className:"w-12 h-12 text-amber-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• NCR"}),e.jsx("input",{type:"password",value:b,onChange:y=>u(y.target.value),placeholder:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (1234)",className:"w-full border rounded p-2 text-center text-lg tracking-widest mb-4",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 rounded",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:I,className:"px-6 py-2 bg-amber-500 text-white rounded font-bold hover:bg-amber-600",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center",children:[e.jsx(De,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-bold mb-2 text-red-600",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å NCR"}),e.jsxs("p",{className:"text-slate-500 text-sm mb-4",children:["‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ",e.jsx("br",{}),"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô"]}),e.jsx("input",{type:"password",value:b,onChange:y=>u(y.target.value),placeholder:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (1234)",className:"w-full border rounded p-2 text-center text-lg tracking-widest mb-4 border-red-200 focus:ring-red-500",autoFocus:!0}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-slate-500 hover:bg-slate-100 rounded",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"}),e.jsx("button",{onClick:Z,className:"px-6 py-2 bg-red-600 text-white rounded font-bold hover:bg-red-700",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö"})]})]})}),e.jsx("style",{children:`
        .ncr-table-container {
          max-height: calc(100vh - 300px);
        }
      `})]})},Oa=({isOpen:l,onClose:c,item:i})=>{if(!l||!i)return null;const t=(p=>{let v=0;switch(p.status||""){case"Completed":v=7;break;case"COL_Documented":case"DocsCompleted":case"ReturnToSupplier":case"DirectReturn":v=6;break;case"COL_HubReceived":case"HubReceived":case"ReceivedAtHub":case"NCR_HubReceived":v=5;break;case"COL_InTransit":case"InTransit":case"InTransitToHub":case"NCR_InTransit":v=4;break;case"COL_Consolidated":case"Consolidated":v=3;break;case"COL_BranchReceived":case"BranchReceived":case"NCR_BranchReceived":v=2;break;case"COL_JobAccepted":case"JobAccepted":case"NCR_JobAccepted":v=1;break;default:v=0;break}return p.dateCompleted?v=Math.max(v,7):p.dateDocumented?v=Math.max(v,6):p.dateHubReceived?v=Math.max(v,5):p.dateInTransit?v=Math.max(v,4):p.dateConsolidated?v=Math.max(v,3):p.dateBranchReceived||p.dateReceived?v=Math.max(v,2):p.dateJobAccepted&&(v=Math.max(v,1)),p.collectionOrderId&&(v=Math.max(v,3)),v})(i),s=i.date||i.dateRequested||new Date().toISOString().split("T")[0],m=[{id:1,label:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Request)",status:t===0?"‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô":"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô",date:i.date||i.dateRequested||s,icon:Ce,colorKey:"blue",description:"‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö"},{id:2,label:"‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Job Accept)",status:t===1?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£":t>1?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=1?i.dateJobAccepted||s:void 0,icon:fe,colorKey:"orange",description:"‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô/‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏ñ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:3,label:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Rx)",status:t===2?"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏≤‡∏Ç‡∏≤":t>2?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=2?i.dateBranchReceived||i.dateReceived||s:void 0,icon:fs,colorKey:"indigo",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏≤‡∏Ç‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á/‡∏û‡∏±‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:4,label:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consol)",status:t===3?"‡∏£‡∏≠‡∏Ç‡∏ô‡∏™‡πà‡∏á":t>3?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=3?i.dateConsolidated||s:void 0,icon:Pt,colorKey:"yellow",description:"‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á Hub"},{id:5,label:"‡∏Ç‡∏ô‡∏™‡πà‡∏á (In Transit)",status:t===4?"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á":t>4?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=4?i.dateInTransit||s:void 0,icon:fe,colorKey:"purple",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏õ Hub"},{id:6,label:"‡∏ñ‡∏∂‡∏á Hub (Received)",status:t===5?"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Hub":t>5?"‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=5?i.dateHubReceived||s:void 0,icon:Be,colorKey:"green",description:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"},{id:7,label:"‡∏Ñ‡∏•‡∏±‡∏á/‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",status:t===6?"‡∏£‡∏≠‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô":t>6?"‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=6?i.dateDocumented||s:void 0,icon:Ce,colorKey:"blue",description:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£/‡∏Ñ‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"},{id:8,label:"‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô (Done)",status:t===7?"‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à":"‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£",date:t>=7?i.dateCompleted||s:void 0,icon:dt,colorKey:"green",description:"‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå"}],h=i.status==="Cancelled"||i.status==="Rejected",S={blue:{bg:"bg-blue-100",border:"border-blue-500",text:"text-blue-600",badgeBg:"bg-blue-50",badgeText:"text-blue-700"},orange:{bg:"bg-orange-100",border:"border-orange-500",text:"text-orange-600",badgeBg:"bg-orange-50",badgeText:"text-orange-700"},indigo:{bg:"bg-indigo-100",border:"border-indigo-500",text:"text-indigo-600",badgeBg:"bg-indigo-50",badgeText:"text-indigo-700"},yellow:{bg:"bg-yellow-100",border:"border-yellow-500",text:"text-yellow-600",badgeBg:"bg-yellow-50",badgeText:"text-yellow-700"},purple:{bg:"bg-purple-100",border:"border-purple-500",text:"text-purple-600",badgeBg:"bg-purple-50",badgeText:"text-purple-700"},green:{bg:"bg-green-100",border:"border-green-500",text:"text-green-600",badgeBg:"bg-green-50",badgeText:"text-green-700"},red:{bg:"bg-red-100",border:"border-red-500",text:"text-red-600",badgeBg:"bg-red-50",badgeText:"text-red-700"},gray:{bg:"bg-slate-100",border:"border-slate-300",text:"text-slate-400",badgeBg:"bg-slate-100",badgeText:"text-slate-500"}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl w-full max-w-5xl overflow-hidden flex flex-col max-h-[90vh] ${h?"border-4 border-red-500":""}`,children:[e.jsxs("div",{className:`border-b p-6 flex justify-between items-start ${h?"bg-red-50 border-red-100":"bg-slate-50 border-slate-100"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[h?e.jsx(je,{className:"w-8 h-8 text-red-600"}):e.jsx(We,{className:"w-6 h-6 text-blue-600"}),"Timeline ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Journey)"]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold border shadow-sm ${h?"bg-red-100 text-red-700 border-red-200":"bg-blue-100 text-blue-700 border-blue-200"}`,children:h?"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (CANCELED)":`Doc No: ${i.documentNo||i.id}`})]}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Status Tracking Infographic)"})]}),e.jsx("button",{onClick:c,"aria-label":"Close",title:"‡∏õ‡∏¥‡∏î",className:"p-2 hover:bg-slate-200 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-8 overflow-y-auto bg-slate-50/30",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-10",children:[e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(Ce,{className:"w-3 h-3"})," ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Documents)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"Invoice:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:i.invoiceNo||"-"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"R No:"}),e.jsx("span",{className:"font-bold text-blue-600 text-sm font-mono",children:i.documentNo||i.id})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"})," ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Ç‡∏ô‡∏™‡πà‡∏á (Control)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"TM No:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:i.tmNo||"-"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏°:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:i.controlDate?Ie(i.controlDate):"-"})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(fs,{className:"w-3 h-3"})," ‡∏™‡∏≤‡∏Ç‡∏≤ & ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Info)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsx("span",{className:"font-bold text-slate-800 text-sm",children:i.branch})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600 truncate max-w-[50px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:"}),e.jsx("span",{className:"font-bold text-slate-700 text-xs truncate max-w-[120px]",title:i.productName,children:i.productCode==="N/A"||!i.productCode?i.productName==="N/A"?"-":i.productName:i.productCode})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1 border-t border-slate-50 mt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:"}),e.jsxs("span",{className:"font-bold text-slate-800 text-xs",children:[i.quantity," ",i.unit]})]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col justify-center gap-1",children:[e.jsxs("div",{className:"text-[10px] uppercase text-slate-400 font-bold flex items-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3"})," ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Dest & COL)"]}),e.jsxs("div",{className:"flex justify-between items-end border-b border-slate-50 pb-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"COL ID:"}),e.jsx("span",{className:"font-bold text-indigo-600 text-sm",children:i.collectionOrderId||"-"})]}),e.jsxs("div",{className:"flex justify-between items-end pt-1",children:[e.jsx("span",{className:"text-xs text-slate-600",children:"To:"}),e.jsx("span",{className:"font-bold text-slate-800 text-xs truncate max-w-[120px]",title:i.destinationCustomer||"-",children:i.destinationCustomer||"-"})]})]})]}),e.jsxs("div",{className:"relative pt-10 pb-6 px-4",children:[e.jsx("div",{className:"hidden md:block absolute top-[85px] left-10 right-10 h-1.5 bg-slate-200 rounded-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-4 relative",children:m.map((p,v)=>{let d=S[p.colorKey],w=v<=t;return h?d=S.gray:w||(d=S.gray),e.jsxs("div",{className:"flex flex-col items-center relative z-10 group",children:[e.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center border-4 shadow-lg transition-transform duration-300 mb-4 bg-white
                                          ${w?`${d.border} ${d.text} scale-110 group-hover:scale-115`:"border-slate-200 text-slate-300"}
                                        `,children:e.jsx(p.icon,{className:"w-6 h-6"})}),e.jsxs("div",{className:`w-full bg-white rounded-xl border p-2 shadow-sm text-center min-h-[120px] flex flex-col transition-all duration-300
                                          ${w?"border-blue-100 shadow-md transform hover:-translate-y-1":"border-slate-100 opacity-70"}
                                        `,children:[e.jsx("div",{className:`font-bold text-xs mb-1 ${w?"text-slate-800":"text-slate-400"}`,children:p.label}),e.jsx("div",{className:"flex-grow flex items-center justify-center my-1",children:e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full font-bold
                                                  ${w?`${d.badgeBg} ${d.badgeText}`:"bg-slate-100 text-slate-400"}
                                                `,children:p.status})}),e.jsx("div",{className:"px-1 mb-1 hidden md:block",children:e.jsx("p",{className:"text-[9px] text-slate-400 leading-tight",children:p.description})}),e.jsx("div",{className:"border-t border-slate-50 pt-1 mt-auto",children:w&&p.date?e.jsxs("div",{className:"text-[10px] font-bold text-slate-600 flex items-center justify-center gap-1",children:[e.jsx(wt,{className:"w-3 h-3"}),Ie(p.date)]}):e.jsx("div",{className:"text-[9px] text-slate-300 italic",children:"Pending"})})]})]},p.id)})})]}),e.jsxs("div",{className:"mt-8 text-center text-xs text-slate-400 bg-blue-50/50 p-2 rounded-lg border border-blue-50 mx-auto max-w-2xl",children:["üí° ",e.jsx("strong",{children:"Journey Info:"})," ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô (Collection Lifecycle)"]})]})]})})},Da=({item:l,onClose:c})=>{const i=()=>{window.print()};return e.jsxs("div",{className:"fixed inset-0 bg-slate-900/50 flex flex-col items-center justify-start z-[9999] overflow-y-auto no-scrollbar print:static print:bg-white print:overflow-visible print:p-0 print:block",children:[e.jsxs("div",{className:"sticky top-0 w-full bg-white border-b border-slate-200 shadow-sm p-4 flex justify-between items-center z-50 print:hidden shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"w-5 h-5 text-slate-600"}),e.jsx("h2",{className:"font-bold text-slate-800",children:"Print Preview (A4 Mode)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-900 font-bold text-sm transition-colors shadow-sm",children:[e.jsx(_e,{className:"w-4 h-4"})," ‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå"]}),e.jsx("button",{onClick:c,className:"p-2 text-slate-400 hover:text-slate-600 rounded-full hover:bg-slate-100 transition-colors","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(je,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"my-8 print:m-0 print:w-full",children:e.jsxs("div",{className:"bg-white shadow-2xl mx-auto print:shadow-none print:mx-0 relative flex flex-col print-content-root a4-paper-container",children:[e.jsxs("div",{className:"flex border-2 border-black mb-4",children:[e.jsx("div",{className:"w-[30%] border-r-2 border-black p-2 flex items-center justify-center",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logistics",className:"w-full h-auto object-contain max-h-20"})}),e.jsxs("div",{className:"w-[70%] p-2 flex flex-col justify-center pl-4",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 leading-none mb-1",children:"‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏ô‡∏µ‡πÇ‡∏≠‡∏™‡∏¢‡∏≤‡∏° ‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå ‡πÅ‡∏≠‡∏ô‡∏î‡πå ‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï ‡∏à‡∏≥‡∏Å‡∏±‡∏î"}),e.jsx("h3",{className:"text-xs font-bold text-slate-700 mb-2",children:"NEOSIAM LOGISTICS & TRANSPORT CO., LTD."}),e.jsx("p",{className:"text-xs text-slate-600 mb-0.5",children:"159/9-10 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ö‡∏≤‡∏á‡∏°‡πà‡∏ß‡∏á ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå ‡∏à.‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå 60000"}),e.jsxs("div",{className:"text-xs text-slate-600 flex gap-4",children:[e.jsx("span",{children:"Tax ID: 0105552087673"}),e.jsx("span",{children:"|"}),e.jsx("span",{children:"Tel: 056-275-841"})]})]})]}),e.jsx("h1",{className:"text-lg font-bold text-center border-2 border-black py-1.5 mb-4 bg-white text-slate-900 print:bg-transparent uppercase tracking-wide",children:"‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Note)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-2 text-sm mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1 font-bold",children:l.documentNo||l.id})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:Ie(l.date)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏™‡∏≤‡∏Ç‡∏≤:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:l.branch})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"Invoice No:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:l.invoiceNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:l.customerName||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-bold w-20 text-slate-800",children:"TM No:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:l.tmNo||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[e.jsx("span",{className:"font-bold w-24 text-slate-800",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:"}),e.jsx("div",{className:"flex-1 border-b border-dotted border-black px-1",children:l.notes||"-"})]})]}),e.jsx("div",{className:"mb-4 flex-1",children:e.jsxs("table",{className:"w-full border-collapse border border-black text-sm",children:[e.jsx("thead",{className:"print:table-header-group",children:e.jsxs("tr",{className:"bg-slate-100 print:bg-transparent",children:[e.jsx("th",{className:"border border-black p-2 w-[15%] text-left",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-black p-2 w-[40%] text-left",children:"‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"border border-black p-2 w-[15%] text-center",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"}),e.jsx("th",{className:"border border-black p-2 w-[10%] text-center",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢"}),e.jsx("th",{className:"border border-black p-2 w-[20%] text-left",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"print:break-inside-avoid",children:[e.jsx("td",{className:"border border-black p-2 valign-top text-xs font-bold",children:l.productCode==="N/A"?"":l.productCode}),e.jsxs("td",{className:"border border-black p-2 valign-top text-xs",children:[e.jsx("div",{className:"font-bold",children:l.productName==="N/A"?"":l.productName}),l.destinationCustomer&&e.jsxs("div",{className:"text-slate-500 text-[10px]",children:["‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: ",l.destinationCustomer]})]}),e.jsx("td",{className:"border border-black p-2 text-center valign-top font-bold",children:l.quantity}),e.jsx("td",{className:"border border-black p-2 text-center valign-top text-xs",children:l.unit}),e.jsx("td",{className:"border border-black p-2 valign-top text-xs",children:l.notes||"-"})]})})]})}),e.jsx("div",{className:"mt-8 border-t-2 border-black pt-4 print:break-inside-avoid page-break-avoid",children:e.jsxs("div",{className:"flex justify-between mt-8 text-xs text-center px-8 pb-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏™‡∏≤‡∏Ç‡∏≤"}),e.jsx("div",{className:"font-bold",children:"(..........................)"}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏Ç‡∏ô‡∏™‡πà‡∏á"}),e.jsx("div",{className:"font-bold",children:"(..........................)"}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-40",children:[e.jsx("div",{className:"border-b border-black h-8"}),e.jsx("span",{children:"‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("div",{className:"font-bold",children:"(..........................)"}),e.jsx("div",{children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: .........................."})]})]})})]})}),e.jsx("style",{children:`
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&display=swap');
        
        .print-content-root {
          font-family: 'Sarabun', 'TH Sarabun New', sans-serif;
        }

        .a4-paper-container {
          width: 210mm;
          min-height: 297mm;
          padding: 10mm 15mm;
        }

        @media print {
          @page {
            size: A4;
            margin: 0;
          }
          body {
            background: white !important;
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
          }
          .print-content-root {
            width: 100%;
          }
          .print\\:hidden {
            display: none !important;
          }
          .print\\:table-header-group {
            display: table-header-group !important;
          }
          .print\\:break-inside-avoid {
             page-break-inside: avoid !important;
             break-inside: avoid !important;
          }
        }
      `})]})},Ta=()=>{const{items:l,updateReturnRecord:c,deleteReturnRecord:i,getNextCollectionNumber:g}=Se(),[t,s]=C.useState({query:"",status:"All",startDate:"",endDate:""}),[m,h]=C.useState(null),[S,p]=C.useState(!1),[v,d]=C.useState(!1),[w,o]=C.useState(null),[O,a]=C.useState(!1),[N,n]=C.useState(null),[r,b]=C.useState(1),[u,x]=C.useState(20),[k,R]=C.useState(new Set);C.useEffect(()=>{const D="R68121552",Q=l.filter(q=>q.documentNo&&q.documentNo.includes(D)||q.refNo&&q.refNo.includes(D));if(Q.length>0){const q=Q[0],ae={Draft:"Step 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Draft) - ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö",Requested:"Step 1: ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Requested) - ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ",JobAccepted:"Step 2: ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Job Accepted)",COL_JobAccepted:"Step 2: ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß (Job Accepted)",BranchReceived:"Step 3: ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Rx)",COL_BranchReceived:"Step 3: ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Rx)",Consolidated:"Step 4: ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consol)",COL_Consolidated:"Step 4: ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consol)",InTransit:"Step 5: ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á",COL_InTransit:"Step 5: ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á",HubReceived:"Step 6: ‡∏ñ‡∏∂‡∏á Hub",COL_HubReceived:"Step 6: ‡∏ñ‡∏∂‡∏á Hub",Completed:"Step 7: ‡∏à‡∏ö‡∏á‡∏≤‡∏ô",Canceled:"‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Canceled)"}[q.status||""]||`‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${q.status}`;T.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,background:"#eff6ff",color:"#1e3a8a"}).fire({icon:"info",title:`üîé ‡∏û‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ ${D}`,html:`<div class="text-xs text-left mt-1"><b>‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà:</b> ${ae}<br/><b>(‡∏°‡∏µ ${Q.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</b></div>`})}},[l]);const f=C.useMemo(()=>l.filter(D=>{if(D.documentType==="NCR"||D.ncrNumber&&D.documentType!=="LOGISTICS"||t.startDate&&D.date<t.startDate||t.endDate&&D.date>t.endDate||t.status!=="All"&&D.status!==t.status)return!1;const Q=t.query.toLowerCase();return!(Q&&!`
          ${D.id}
          ${D.branch}
          ${D.invoiceNo||""}
          ${D.documentNo||""}
          ${D.tmNo||""}
          ${D.customerName||""}
          ${D.productCode||""}
          ${D.productName||""}
          ${D.destinationCustomer||""}
          ${D.notes||""}
          ${D.collectionOrderId||""}
        `.toLowerCase().includes(Q))}).sort((D,Q)=>new Date(Q.date).getTime()-new Date(D.date).getTime()),[l,t]),$=C.useMemo(()=>{const D={};return f.forEach(Q=>{const ee=(Q.documentNo?Q.documentNo.trim():`_NO_DOC_${Q.id}`).toLowerCase();D[ee]||(D[ee]=[]),D[ee].push(Q)}),Object.entries(D).map(([Q,q])=>({key:Q,items:q,rep:q[0]})).sort((Q,q)=>new Date(q.rep.date).getTime()-new Date(Q.rep.date).getTime())},[f]),A=Math.ceil($.length/u),M=C.useMemo(()=>{const D=(r-1)*u;return $.slice(D,D+u)},[$,r,u]);C.useEffect(()=>{b(1)},[t,u]);const B=D=>{const Q=new Set(k);Q.has(D)?Q.delete(D):Q.add(D),R(Q)},E=async()=>{const D=new Mt.Workbook,Q=D.addWorksheet("COL Report");Q.columns=[{header:"Date",key:"date",width:15},{header:"Branch",key:"branch",width:15},{header:"Invoice No",key:"invoiceNo",width:15},{header:"Control Date",key:"controlDate",width:15},{header:"Doc No (R)",key:"documentNo",width:15},{header:"TM No",key:"tmNo",width:15},{header:"COL No",key:"collectionOrderId",width:20},{header:"Status",key:"status",width:15},{header:"Product Code",key:"productCode",width:15},{header:"Product Name",key:"productName",width:30},{header:"Quantity",key:"quantity",width:10},{header:"Unit",key:"unit",width:10},{header:"Destination",key:"destination",width:20},{header:"Notes",key:"notes",width:30}],f.forEach(ae=>{Q.addRow({date:Ie(ae.date),branch:ae.branch,invoiceNo:ae.invoiceNo||"-",controlDate:ae.controlDate||"-",documentNo:ae.documentNo||"-",tmNo:ae.tmNo||"-",collectionOrderId:ae.collectionOrderId||"-",status:ae.status,productCode:ae.productCode==="N/A"?"":ae.productCode,productName:ae.productName==="N/A"?"":ae.productName,quantity:ae.quantity,unit:ae.unit||"",destination:ae.destinationCustomer||"-",notes:ae.notes||"-"})});const q=await D.xlsx.writeBuffer(),ee=new Blob([q],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});es.saveAs(ee,`COL_Report_${new Date().toISOString().split("T")[0]}.xlsx`)},P=async D=>{const Q=new Mt.Workbook,q=Q.addWorksheet("COL Item");q.mergeCells("A1:E1"),q.getCell("A1").value="‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / Collection Receipt",q.getCell("A1").font={size:16,bold:!0},q.getCell("A1").alignment={horizontal:"center"},q.getCell("A3").value="‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà / Date:",q.getCell("B3").value=Ie(D.date),q.getCell("D3").value="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà / Doc No:",q.getCell("E3").value=D.documentNo||D.id,q.getCell("A4").value="‡∏™‡∏≤‡∏Ç‡∏≤ / Branch:",q.getCell("B4").value=D.branch,q.getRow(6).values=["‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏à‡∏≥‡∏ô‡∏ß‡∏ô","‡∏´‡∏ô‡πà‡∏ß‡∏¢","‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏"],q.getRow(6).font={bold:!0},q.getRow(7).values=[D.productCode==="N/A"?"":D.productCode,D.productName==="N/A"?"":D.productName,D.quantity,D.unit,D.notes||"-"],q.getColumn(1).width=15,q.getColumn(2).width=30,q.getColumn(3).width=10,q.getColumn(4).width=10,q.getColumn(5).width=20;const ee=await Q.xlsx.writeBuffer(),ae=new Blob([ee],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});es.saveAs(ae,`COL_Item_${D.id}.xlsx`)},F=D=>{n(D),a(!0)},le=async D=>{const{value:Q}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",input:"password",inputLabel:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",inputPlaceholder:"Enter password",confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",showCancelButton:!0,inputAttributes:{autocapitalize:"off",autocorrect:"off"}});Q==="1234"?(h({...D}),p(!0)):Q&&T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error")},Y=async D=>{const Q=(D.documentNo||"").trim().toLowerCase(),q=(D.refNo||"").trim().toLowerCase();if(!Q&&!q){await me(D.id);return}const ee=l.filter(be=>{const he=(be.documentNo||"").trim().toLowerCase(),ve=(be.refNo||"").trim().toLowerCase();return Q&&(he===Q||ve===Q)||q&&(he===q||ve===q)});if(ee.length>1){const be={};ee.forEach(j=>{be[j.status||"Unknown"]=(be[j.status||"Unknown"]||0)+1});const he=Object.entries(be).map(([j,I])=>`${j}: ${I}`).join(", "),ve=await T.fire({title:"‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö (System Clean)",html:`
                ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ <b>${D.documentNo||D.refNo}</b> ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô <b>${ee.length}</b> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                <br/><div class="text-xs text-slate-500 mt-2 mb-2 bg-slate-100 p-2 rounded text-left">
                   <b>Status Breakdown:</b><br/>
                   ${he}
                </div>
                <br/>
                <span class="text-red-500 font-bold">‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà)</span>
                <br/><span class="text-xs">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á</span>
            `,icon:"warning",showDenyButton:!0,showCancelButton:!0,confirmButtonText:`‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (${ee.length})`,denyButtonText:"‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ (1)",confirmButtonColor:"#d33",denyButtonColor:"#f59e0b"});if(ve.isConfirmed){const{value:j}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (Admin)",input:"password",inputPlaceholder:"Password",showCancelButton:!0,inputAttributes:{autocapitalize:"off",autocorrect:"off"}});if(j==="1234"){let I=0;await Promise.all(ee.map(async U=>{await i(U.id)&&I++})),T.fire("‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",`‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${I} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`,"success")}else j&&T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏¥‡∏î","","error")}else ve.isDenied&&await me(D.id)}else await me(D.id)},me=async D=>{if((await T.fire({title:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£?",text:"‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"})).isConfirmed){const{value:q}=await T.fire({title:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô",input:"password",inputLabel:"Password",inputPlaceholder:"Enter password",inputAttributes:{autocapitalize:"off",autocorrect:"off"}});q==="1234"?await i(D)?T.fire("‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß","success"):T.fire("‡∏•‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","error"):q&&T.fire("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á","‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á","error")}},se=async()=>{m&&(await c(m.id,m),p(!1),h(null),T.fire("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à","‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß","success"))},G=D=>{o(D),d(!0)};return e.jsxs("div",{className:"h-full flex flex-col gap-4 p-4 font-inter text-slate-800 bg-slate-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm print:hidden",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-700 to-indigo-600 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(fe,{className:"w-6 h-6 text-blue-600"}),"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô COL (Collection Report)"]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection Report)"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(Fe,{className:"absolute left-2 top-1.5 w-4 h-4 text-slate-400 group-hover:text-blue-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (Inv, Doc, COL)...",value:t.query,onChange:D=>s({...t,query:D.target.value}),className:"pl-8 pr-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full md:w-64 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 border border-slate-200 rounded-lg p-0.5",children:[e.jsx("input",{type:"date",value:t.startDate,onChange:D=>s({...t,startDate:D.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:t.endDate,onChange:D=>s({...t,endDate:D.target.value}),className:"bg-transparent text-xs p-1 outline-none w-28 text-slate-600 cursor-pointer","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î"})]}),e.jsxs("select",{value:t.status,onChange:D=>s({...t,status:D.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1.5 outline-none focus:ring-1 focus:ring-blue-500 max-w-[150px]","aria-label":"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",title:"‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞",children:[e.jsx("option",{value:"All",children:"‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (All Status)"}),e.jsx("option",{value:"Requested",children:"Requested (‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô)"}),e.jsx("option",{value:"COL_JobAccepted",children:"Job Accepted (‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)"}),e.jsx("option",{value:"COL_BranchReceived",children:"Branch Received (‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤)"}),e.jsx("option",{value:"COL_Consolidated",children:"Consolidated (‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)"}),e.jsx("option",{value:"COL_InTransit",children:"In Transit (‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á)"}),e.jsx("option",{value:"COL_HubReceived",children:"Hub Received (‡∏ñ‡∏∂‡∏á Hub)"}),e.jsx("option",{value:"Completed",children:"Completed (‡∏à‡∏ö‡∏á‡∏≤‡∏ô)"})]}),e.jsxs("div",{className:"flex gap-1 ml-auto",children:[e.jsxs("button",{onClick:E,className:"bg-green-600 text-white font-bold px-3 py-1 rounded-lg flex items-center gap-1 hover:bg-green-700 transition-colors shadow-sm text-xs whitespace-nowrap",children:[e.jsx(tt,{className:"w-3 h-3"}),"Excel (All)"]}),e.jsx("button",{onClick:()=>s({query:"",status:"All",startDate:"",endDate:""}),className:"px-2 py-1 text-slate-600 hover:bg-slate-100 font-medium rounded-lg border border-slate-200",title:"‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á (Clear)",children:e.jsx(Ee,{className:"w-3 h-3"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col print:hidden",children:[e.jsx("div",{className:"overflow-auto flex-1 relative table-scroll-container",children:e.jsxs("table",{className:"w-full text-left border-collapse min-w-[1200px]",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 border-r max-w-[50px] text-center",children:"#"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Date)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[100px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[120px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[150px]",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà COL (COL No)"}),e.jsx("th",{className:"px-3 py-3 border-r min-w-[200px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product) - EXPAND (+)"}),e.jsx("th",{className:"px-3 py-3 text-center min-w-[100px]",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞"}),e.jsx("th",{className:"px-3 py-3 text-center min-w-[100px]",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:M.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:11,className:"p-8 text-center text-slate-400 italic",children:["‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Collection ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏µ‡πâ",e.jsx("div",{className:"text-xs mt-2",children:"‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏≠‡∏∑‡πà‡∏ô"})]})}):M.map((D,Q)=>{const{rep:q,items:ee,key:ae}=D,be=k.has(ae);return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors text-xs text-slate-700 align-top",children:[e.jsxs("td",{className:"px-3 py-2 border-r text-center text-slate-400 relative",children:[e.jsx("button",{onClick:()=>G(q),className:"absolute left-1 top-2 p-0.5 rounded-full hover:bg-blue-100 text-blue-400 hover:text-blue-600 transition-colors",title:"‡∏î‡∏π Timeline (View Infographic)",children:e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-full p-0.5",children:e.jsx(Fe,{className:"w-2.5 h-2.5"})})}),(r-1)*u+Q+1]}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:Ie(q.date)}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:e.jsx("div",{className:"font-bold",children:q.branch})}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:q.invoiceNo?e.jsx("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded text-slate-600 font-mono",children:q.invoiceNo}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:q.documentNo?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-bold text-blue-600 font-mono",children:q.documentNo}),ee.length>1&&e.jsxs("span",{className:"inline-flex items-center gap-1 w-fit bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[e.jsx(st,{className:"w-3 h-3"})," ",ee.length," items"]})]}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:q.controlDate?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3 text-slate-400"}),e.jsx("span",{children:Ie(q.controlDate)})]}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:q.tmNo?e.jsx("span",{className:"text-slate-700 font-medium",children:q.tmNo}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:q.collectionOrderId?e.jsx("span",{className:"font-mono text-indigo-600 font-bold bg-indigo-50 px-1.5 py-0.5 rounded text-[10px]",children:q.collectionOrderId}):"-"}),e.jsx("td",{className:"px-3 py-2 border-r align-top",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"group",children:[e.jsx("div",{className:"font-bold text-slate-800",children:ee[0].productCode==="N/A"?"":ee[0].productCode}),e.jsx("div",{className:"line-clamp-2",title:ee[0].productName,children:ee[0].productName==="N/A"?"":ee[0].productName}),e.jsx("div",{className:"mt-1 text-slate-500 text-[10px] flex gap-2",children:e.jsxs("span",{children:["Qty: ",e.jsx("span",{className:"font-semibold text-slate-700",children:ee[0].quantity})," ",ee[0].unit]})})]}),ee.length>1&&e.jsxs("button",{onClick:()=>B(ae),className:`flex items-center justify-center gap-1 w-full py-1.5 rounded text-[10px] font-bold border transition-all mt-1
                                        ${be?"bg-slate-100 text-slate-600 border-slate-200":"bg-indigo-50 text-indigo-600 border-indigo-100 hover:bg-indigo-100"}`,"aria-label":be?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",title:be?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£":"‡∏Ç‡∏¢‡∏≤‡∏¢‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°",children:[be?e.jsx(Ue,{className:"w-3 h-3"}):e.jsx(Qe,{className:"w-3 h-3"}),be?"‡∏¢‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (Collapse)":`‡∏î‡∏π‡∏≠‡∏µ‡∏Å ${ee.length-1} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (+)`]}),be&&ee.length>1&&e.jsx("div",{className:"flex flex-col gap-3 pt-2 border-t border-slate-100 mt-1 animate-slide-down",children:ee.slice(1).map(he=>e.jsxs("div",{className:"pl-2 border-l-2 border-indigo-200 group relative",children:[e.jsx("div",{className:"font-bold text-slate-700 text-[11px]",children:he.productCode==="N/A"?"":he.productCode}),e.jsx("div",{className:"text-slate-600 text-[11px] leading-tight mb-0.5",children:he.productName==="N/A"?"":he.productName}),e.jsxs("div",{className:"text-[10px] text-slate-500",children:["Qty: ",e.jsxs("b",{children:[he.quantity," ",he.unit]})]}),e.jsxs("div",{className:"flex gap-1 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>le(he),className:"p-0.5 bg-amber-50 text-amber-600 rounded border border-amber-200 hover:bg-amber-100",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç",children:e.jsx(Nt,{className:"w-2.5 h-2.5"})}),e.jsx("button",{onClick:()=>Y(he),className:"p-0.5 bg-red-50 text-red-600 rounded border border-red-200 hover:bg-red-100",title:"‡∏•‡∏ö",children:e.jsx(De,{className:"w-2.5 h-2.5"})})]})]},he.id))})]})}),e.jsx("td",{className:"px-3 py-2 text-center align-top",children:e.jsx("span",{className:`
                          inline-flex px-2 py-0.5 rounded-full text-[10px] font-bold border
                          ${q.status==="Requested"?"bg-slate-100 text-slate-600 border-slate-200":""}
                          ${q.status==="COL_JobAccepted"?"bg-blue-50 text-blue-600 border-blue-200":""}
                          ${q.status==="COL_BranchReceived"?"bg-indigo-50 text-indigo-600 border-indigo-200":""}
                          ${q.status==="COL_Consolidated"?"bg-orange-50 text-orange-600 border-orange-200":""}
                          ${q.status==="COL_InTransit"||q.status==="COL_HubReceived"?"bg-purple-50 text-purple-600 border-purple-200":""}
                          ${q.status==="Completed"?"bg-green-50 text-green-600 border-green-200":""}
                        `,children:q.status})}),e.jsx("td",{className:"px-3 py-2 align-top text-center border-l",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>F(q),className:"p-1 hover:bg-slate-100 rounded text-slate-500 hover:text-blue-600 transition-colors",title:"‡∏û‡∏¥‡∏°‡∏û‡πå (Print)",children:e.jsx(_e,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>le(q),className:"p-1 hover:bg-slate-100 rounded text-amber-500 hover:text-amber-600 transition-colors",title:"‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (Edit)",children:e.jsx(Nt,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>P(q),className:"p-1 hover:bg-slate-100 rounded text-green-600 hover:text-green-700 transition-colors",title:"Export Excel",children:e.jsx(tt,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>Y(q),className:"p-1 hover:bg-slate-100 rounded text-red-400 hover:text-red-600 transition-colors",title:"‡∏•‡∏ö (Delete)",children:e.jsx(De,{className:"w-3 h-3"})})]})})]},ae)})})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-sm print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{children:"‡πÅ‡∏™‡∏î‡∏á"}),e.jsxs("select",{value:u,onChange:D=>x(Number(D.target.value)),className:"bg-white border border-slate-300 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500 font-bold","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ",$.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ - ",f.length," Products)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(D=>Math.max(D-1,1)),disabled:r===1,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-bold text-slate-800",children:["‡∏´‡∏ô‡πâ‡∏≤ ",r]}),e.jsxs("span",{className:"text-slate-500",children:["‡∏à‡∏≤‡∏Å ",A||1]})]}),e.jsx("button",{onClick:()=>b(D=>Math.min(D+1,A)),disabled:r===A||A===0,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"})]})]})]}),S&&m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden animate-scale-up",children:[e.jsxs("div",{className:"bg-slate-900 px-6 py-4 flex justify-between items-center border-b border-slate-800",children:[e.jsxs("h3",{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(Nt,{className:"w-5 h-5 text-amber-500"})," ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Edit Return Record)"]}),e.jsx("button",{onClick:()=>p(!1),className:"text-slate-400 hover:text-white transition-colors","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(je,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-date",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (Date)"}),e.jsx("input",{id:"edit-date",type:"date",value:m.date,onChange:D=>h({...m,date:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-branch",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"}),e.jsx("input",{id:"edit-branch",type:"text",value:m.branch,onChange:D=>h({...m,branch:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-invoice",className:"block text-sm font-bold text-slate-700 mb-1",children:"Invoice No"}),e.jsx("input",{id:"edit-invoice",type:"text",value:m.invoiceNo||"",onChange:D=>h({...m,invoiceNo:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-docno",className:"block text-sm font-bold text-slate-700 mb-1",children:"Doc No (R)"}),e.jsx("input",{id:"edit-docno",type:"text",value:m.documentNo||"",onChange:D=>h({...m,documentNo:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-colno",className:"block text-sm font-bold text-slate-700 mb-1",children:"COL No"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:"edit-colno",type:"text",value:m.collectionOrderId||"",onChange:D=>h({...m,collectionOrderId:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"COL-xxxx-xxx"}),e.jsx("button",{type:"button",onClick:async()=>{const D=await g();h({...m,collectionOrderId:D})},className:"px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 text-xs font-bold whitespace-nowrap transition-colors",title:"Run Auto (‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)",children:"Auto"})]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-tmno",className:"block text-sm font-bold text-slate-700 mb-1",children:"TM No"}),e.jsx("input",{id:"edit-tmno",type:"text",value:m.tmNo||"",onChange:D=>h({...m,tmNo:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-controldate",className:"block text-sm font-bold text-slate-700 mb-1",children:"Control Date"}),e.jsx("input",{id:"edit-controldate",type:"date",value:m.controlDate||"",onChange:D=>h({...m,controlDate:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("hr",{className:"my-2 border-slate-200"}),e.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Info)"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-productcode",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Code)"}),e.jsx("input",{id:"edit-productcode",type:"text",value:m.productCode,onChange:D=>h({...m,productCode:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-productname",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Name)"}),e.jsx("input",{id:"edit-productname",type:"text",value:m.productName,onChange:D=>h({...m,productName:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-quantity",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Qty)"}),e.jsx("input",{id:"edit-quantity",type:"number",value:m.quantity,onChange:D=>h({...m,quantity:Number(D.target.value)}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{htmlFor:"edit-unit",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Unit)"}),e.jsx("input",{id:"edit-unit",type:"text",value:m.unit,onChange:D=>h({...m,unit:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"edit-notes",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (Notes)"}),e.jsx("textarea",{id:"edit-notes",rows:2,value:m.notes||"",onChange:D=>h({...m,notes:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none resize-none"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"edit-status",className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Status)"}),e.jsxs("select",{id:"edit-status",value:m.status,onChange:D=>h({...m,status:D.target.value}),className:"w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white",children:[e.jsx("option",{value:"Requested",children:"Requested (‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô)"}),e.jsx("option",{value:"COL_JobAccepted",children:"Job Accepted (‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)"}),e.jsx("option",{value:"COL_BranchReceived",children:"Branch Received (‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤)"}),e.jsx("option",{value:"COL_Consolidated",children:"Consolidated (‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤)"}),e.jsx("option",{value:"COL_InTransit",children:"In Transit (‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ç‡∏ô‡∏™‡πà‡∏á)"}),e.jsx("option",{value:"COL_HubReceived",children:"Hub Received (‡∏ñ‡∏∂‡∏á Hub)"}),e.jsx("option",{value:"Completed",children:"Completed (‡∏à‡∏ö‡∏á‡∏≤‡∏ô)"})]})]})]})}),e.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-slate-600 font-bold hover:bg-slate-200 rounded-lg transition-colors",children:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å (Cancel)"}),e.jsxs("button",{onClick:se,className:"px-6 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 shadow-lg shadow-blue-900/20 transition-all flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (Save)"]})]})]})}),v&&e.jsx(Oa,{isOpen:v,onClose:()=>d(!1),item:w}),O&&N&&e.jsx(Da,{item:N,onClose:()=>a(!1)}),e.jsx("style",{children:`
        .table-scroll-container {
          max-height: calc(100vh - 220px);
        }
      `})]})},Aa=()=>{const[l,c]=C.useState("Ledger"),{items:i,loading:g}=Se(),[t,s]=C.useState({query:"",startDate:"",endDate:"",movementType:"All"}),m=C.useMemo(()=>{const n=[];i.forEach(b=>{let u=b.dateGraded;!u&&b.disposition&&(u=b.date),!u&&(b.dateDocumented||b.dateCompleted)&&(u=b.dateDocumented||b.dateCompleted),u&&(n.push({...b,movementType:"IN",movementDate:u}),(b.dateDocumented||b.dateCompleted)&&n.push({...b,movementType:"OUT",movementDate:b.dateDocumented||b.dateCompleted}))}),n.sort((b,u)=>{const x=b.movementDate||"0",R=(u.movementDate||"0").localeCompare(x);return R!==0?R:b.movementType==="IN"&&u.movementType==="OUT"?-1:b.movementType==="OUT"&&u.movementType==="IN"?1:0});const r=b=>{const u=n.filter(R=>R.disposition===b),x=u.filter(R=>R.movementType==="IN").reduce((R,f)=>R+f.quantity,0),k=u.filter(R=>R.movementType==="OUT").reduce((R,f)=>R+f.quantity,0);return{totalIn:x,totalOut:k,onHand:x-k}};return{fullLedger:n,sellableStock:{stats:r("Restock")},rtvStock:{stats:r("RTV")},claimStock:{stats:r("Claim")},internalStock:{stats:r("InternalUse")},scrapStock:{stats:r("Recycle")}}},[i]),h=C.useMemo(()=>(l==="Ledger"?m.fullLedger:m.fullLedger.filter(r=>r.disposition===l)).filter(r=>{var u,x,k,R;const b=t.query.toLowerCase();return!(b&&!((u=r.productName)!=null&&u.toLowerCase().includes(b))&&!((x=r.productCode)!=null&&x.toLowerCase().includes(b))&&!((k=r.customerName)!=null&&k.toLowerCase().includes(b))&&!((R=String(r.branch))!=null&&R.toLowerCase().includes(b))||t.startDate&&(r.movementDate||"0")<t.startDate||t.endDate&&(r.movementDate||"0")>t.endDate||t.movementType!=="All"&&r.movementType!==t.movementType)}),[l,m.fullLedger,t]),S=()=>{var R;const n=["MovementDate","MovementType","Branch","Customer","ProductCode","ProductName","RefNo","NeoRefNo","Quantity","Unit","PriceBill","ExpiryDate","Disposition"],r=h.map(f=>[f.movementDate||"",f.movementType,`"${String(f.branch).replace(/"/g,'""')}"`,`"${f.customerName.replace(/"/g,'""')}"`,f.productCode,`"${f.productName.replace(/"/g,'""')}"`,f.refNo,f.neoRefNo||"",f.quantity,f.unit,f.priceBill,f.expiryDate||"",f.disposition||""].join(",")),b="\uFEFF"+[n.join(","),...r].join(`
`),u=new Blob([b],{type:"text/csv;charset=utf-8;"}),x=URL.createObjectURL(u),k=document.createElement("a");k.setAttribute("href",x),k.setAttribute("download",`inventory_report_${l}_${(R=Ie(new Date))==null?void 0:R.replace(/\//g,"-")}.csv`),document.body.appendChild(k),k.click(),document.body.removeChild(k)},p=[{id:"Ledger",label:"1. ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Full Ledger)",icon:Fl,stats:null},{id:"Restock",label:"2. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏¢ (Sellable)",icon:Ee,stats:m.sellableStock.stats},{id:"RTV",label:"3. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô (RTV)",icon:fe,stats:m.rtvStock.stats},{id:"Claim",label:"4. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏° (Claim)",icon:Ft,stats:m.claimStock.stats},{id:"InternalUse",label:"5. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô (Internal)",icon:ts,stats:m.internalStock.stats},{id:"Recycle",label:"6. ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ (Scrap)",icon:De,stats:m.scrapStock.stats}],[v,d]=C.useState(1),[w,o]=C.useState(20);te.useEffect(()=>{d(1)},[t,l]);const O=Math.ceil(h.length/w),a=C.useMemo(()=>{const n=(v-1)*w;return h.slice(n,n+w)},[h,v,w]),N=p.find(n=>n.id===l);return e.jsxs("div",{className:"p-6 h-full flex flex-col space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inventory)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô"})]}),e.jsx("div",{className:"border-b border-slate-200",children:e.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:p.map(n=>{const r=n.icon;return e.jsxs("button",{onClick:()=>c(n.id),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2
                  ${l===n.id?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}
                `,children:[e.jsx(r,{className:"w-4 h-4"}),n.label]},n.id)})})}),l!=="Ledger"&&(N==null?void 0:N.stats)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 animate-fade-in",children:[e.jsx(Kt,{title:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Total In)",value:N.stats.totalIn,color:"text-blue-600"}),e.jsx(Kt,{title:"‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß (Total Out)",value:N.stats.totalOut,color:"text-amber-600"}),e.jsx(Kt,{title:"‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å (On-Hand)",value:N.stats.onHand,color:"text-green-600",isHighlight:!0})]}),e.jsxs("div",{className:"bg-white p-2 rounded-xl border border-slate-200 shadow-sm flex flex-col md:flex-row gap-2",children:[e.jsxs("div",{className:"relative flex-grow max-w-sm",children:[e.jsx(Fe,{className:"w-3 h-3 absolute left-2 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...",value:t.query,onChange:n=>s({...t,query:n.target.value}),className:"w-full pl-7 pr-2 py-1 bg-slate-50 border border-slate-200 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none text-xs"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"date",value:t.startDate,onChange:n=>s({...t,startDate:n.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500 w-28","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô"}),e.jsx("input",{type:"date",value:t.endDate,onChange:n=>s({...t,endDate:n.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500 w-28","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("select",{value:t.movementType,onChange:n=>s({...t,movementType:n.target.value}),className:"bg-slate-50 border border-slate-200 rounded-lg text-xs p-1 outline-none focus:ring-1 focus:ring-blue-500","aria-label":"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß",title:"‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß",children:[e.jsx("option",{value:"All",children:"IN/OUT ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"}),e.jsx("option",{value:"IN",children:"‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ (IN)"}),e.jsx("option",{value:"OUT",children:"‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å (OUT)"})]}),e.jsxs("button",{onClick:S,className:"bg-green-600 text-white font-bold px-3 py-1 rounded-lg flex items-center justify-center gap-1 hover:bg-green-700 transition-colors shadow-sm text-xs whitespace-nowrap ml-auto md:ml-0",children:[e.jsx(tt,{className:"w-3 h-3"}),"Excel"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex-1 flex flex-col",children:[e.jsx("div",{className:"overflow-auto flex-1",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-500 font-bold",children:e.jsxs("tr",{className:"whitespace-nowrap",children:[e.jsx("th",{className:"px-1 py-1 w-[80px] text-[10px]",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà/‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó"}),e.jsx("th",{className:"px-1 py-1 max-w-[150px] text-[10px]",children:"‡∏™‡∏≤‡∏Ç‡∏≤/‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[180px] text-[10px]",children:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("th",{className:"px-1 py-1 max-w-[100px] text-[10px]",children:"NCR No."}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á (Ref)"}),e.jsx("th",{className:"px-1 py-1 text-right w-[60px] text-[10px]",children:"Qty"}),e.jsx("th",{className:"px-1 py-1 text-right w-[60px] text-[10px]",children:"Price"}),e.jsx("th",{className:"px-1 py-1 w-[70px] text-[10px]",children:"Exp."}),e.jsx("th",{className:"px-1 py-1 max-w-[120px] text-[10px]",children:"‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:g?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center text-slate-400",children:"Loading data..."})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"p-8 text-center text-slate-400 italic",children:"‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏á"})}):a.map(n=>e.jsxs("tr",{className:"text-[11px] hover:bg-slate-50",children:[e.jsxs("td",{className:"px-1 py-1",children:[e.jsx("div",{className:"font-mono text-[9px]",children:Ie(n.movementDate)}),n.movementType==="IN"?e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-green-600 font-bold text-[9px]",children:[e.jsx(ql,{className:"w-3 h-3"})," ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤"]}):e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-red-600 font-bold text-[9px]",children:[e.jsx(Ul,{className:"w-3 h-3"})," ‡∏à‡πà‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å"]})]}),e.jsxs("td",{className:"px-1 py-1 max-w-[150px]",children:[e.jsx("div",{className:"font-medium text-slate-800 truncate",title:n.customerName,children:n.customerName}),e.jsxs("div",{className:"text-[9px] text-slate-500 truncate",title:`‡∏™‡∏≤‡∏Ç‡∏≤: ${n.branch}`,children:["‡∏™‡∏≤‡∏Ç‡∏≤: ",n.branch]})]}),e.jsxs("td",{className:"px-1 py-1 max-w-[180px]",children:[e.jsx("div",{className:"font-bold text-slate-800 truncate",title:n.productName,children:n.productName}),e.jsx("div",{className:"text-[9px] text-slate-500",children:n.productCode})]}),e.jsx("td",{className:"px-1 py-1 text-[9px] font-mono text-slate-600 max-w-[100px] truncate",title:n.ncrNumber||"-",children:n.ncrNumber||"-"}),e.jsxs("td",{className:"px-1 py-1 text-[9px] max-w-[120px]",children:[e.jsxs("div",{className:"truncate",title:`Ref: ${n.refNo}`,children:["Ref: ",n.refNo]}),e.jsxs("div",{className:"text-slate-500 truncate",title:`Neo: ${n.neoRefNo}`,children:["Neo: ",n.neoRefNo||"-"]})]}),e.jsxs("td",{className:"px-1 py-1 text-right font-mono text-[10px]",children:[n.quantity," ",n.unit]}),e.jsxs("td",{className:"px-1 py-1 text-right font-mono text-[10px]",children:["‡∏ø",(n.priceBill||0).toLocaleString()]}),e.jsx("td",{className:"px-1 py-1 text-[9px] text-red-600 font-medium font-mono",children:Ie(n.expiryDate)}),e.jsxs("td",{className:"px-1 py-1 text-[9px] text-slate-500 max-w-[120px]",children:[e.jsx("div",{className:"truncate",children:n.disposition}),n.destinationCustomer&&e.jsxs("div",{className:"text-blue-600 truncate",title:n.destinationCustomer,children:["T: ",n.destinationCustomer]})]})]},n.id+"-"+n.movementType+"-"+n.movementDate))})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex flex-col md:flex-row justify-between items-center gap-4 text-sm print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx("span",{children:"‡πÅ‡∏™‡∏î‡∏á"}),e.jsxs("select",{value:w,onChange:n=>o(Number(n.target.value)),className:"bg-white border border-slate-300 rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500 font-bold","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{children:["‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ (‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ",h.length," ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(n=>Math.max(n-1,1)),disabled:v===1,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"font-bold text-slate-800",children:["‡∏´‡∏ô‡πâ‡∏≤ ",v]}),e.jsxs("span",{className:"text-slate-500",children:["‡∏à‡∏≤‡∏Å ",O||1]})]}),e.jsx("button",{onClick:()=>d(n=>Math.min(n+1,O)),disabled:v===O||O===0,className:"px-3 py-1 bg-white border border-slate-300 rounded hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"‡∏ñ‡∏±‡∏î‡πÑ‡∏õ"})]})]})]})]})},Kt=({title:l,value:c,color:i,isHighlight:g=!1})=>e.jsxs("div",{className:`bg-white p-4 rounded-lg border shadow-sm ${g?"border-blue-200 bg-blue-50":"border-slate-200"}`,children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:l}),e.jsx("p",{className:`text-3xl font-bold ${i} ${g?"text-blue-600":""}`,children:c.toLocaleString()})]}),Ia={documentNo:["doc_no","docNo","r_no","rNo","‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£","‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô","document_no","documentNo","rnumber","returnno","refno","reference"],date:["date","‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà","‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£","dateofdoc"],customerCode:["soldto_id","customer_code","‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤","custcode","customercode"],customerName:["soldto_name","customer_name","‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤","customer","custname","shopname","‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤"],destinationCustomer:["shipto_name","destination","‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á","‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á","‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á","shiptoname","receiver"],customerAddress:["shipto_address","address","‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà","‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á","shiptoaddress","deliveryaddress"],productCode:["sku_id","product_code","‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","itemcode","material","partno"],productName:["sku_name","product_name","‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","itemname","description","materialdescription","product","‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"],quantity:["total_qty","qty","quantity","‡∏à‡∏≥‡∏ô‡∏ß‡∏ô","amount","total"],unit:["unit","‡∏´‡∏ô‡πà‡∏ß‡∏¢","uom"],tmNo:["transportmanifest_no","transportmanifestno","tm_no","tmno","tm","‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°","‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà tm","manifresh","manifest"],controlDate:["doc_date","transportmanifest_date","tm_date","control_date","‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°","‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏ô‡∏™‡πà‡∏á","dateoftm"],notes:["comment","tmnotes","notes","remark","‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏","remarks","note"]},ys=l=>l.toLowerCase().replace(/[\s_.-]/g,""),Jt=l=>l&&typeof l=="object"&&l.text?l.text:String(l||""),Ea=async(l,c)=>{const i=await l.arrayBuffer(),g=new Mt.Workbook;await g.xlsx.load(i);const t=g.worksheets[0];if(!t)throw new Error("No worksheet found");let s=1,m=!1;t.eachRow((d,w)=>{if(m)return;const O=d.values.slice(1).map(N=>Jt(N).toLowerCase()).join(" ");let a=0;(O.includes("doc")||O.includes("r no")||O.includes("‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà"))&&a++,(O.includes("cust")||O.includes("‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤")||O.includes("sold"))&&a++,(O.includes("product")||O.includes("item")||O.includes("‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤")||O.includes("sku"))&&a++,(O.includes("qty")||O.includes("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô"))&&a++,a>=1&&(s=w,m=!0)});const h={};if(t.getRow(s).eachCell((d,w)=>{const o=ys(Jt(d.value));for(const[O,a]of Object.entries(Ia))if(a.some(N=>ys(N)===o)){h[w]=O;break}}),Object.keys(h).length===0)throw new Error("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡πÄ‡∏ä‡πà‡∏ô Doc No, Product, Qty)");new Set(c.filter(d=>d.status!=="Draft"&&d.status!=="Requested").map(d=>(d.documentNo||"").trim().toLowerCase()).filter(Boolean)),new Set(c.map(d=>`${(d.documentNo||"").trim().toLowerCase()}|${(d.productName||"").trim().toLowerCase()}`));const p=new Set,v=[];return t.eachRow((d,w)=>{if(w<=s)return;const o={documentType:"LOGISTICS",status:"Draft"};let O=!1;if(d.eachCell((a,N)=>{const n=h[N];if(n){let r=a.value;if(n==="date"||n==="controlDate"){if(r instanceof Date)r=r.toISOString().split("T")[0];else if(typeof r=="object"&&r.text)r=r.text;else if(typeof r=="string"){const b=r.trim().split("/");b.length===3&&(r=`${b[2]}-${b[1]}-${b[0]}`)}}r=Jt(r),r&&(typeof r=="string"&&(r=r.trim()),o[n]=r,O=!0)}}),o.customerAddress){const a=o.customerAddress;let N="";const n=a.match(/(?:‡∏à\.|‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î)\s*([^\s0-9]+)/);n&&n[1]&&(N=n[1].trim());let r="";const b=a.match(/(?:‡∏≠\.|‡∏≠‡∏≥‡πÄ‡∏†‡∏≠)\s*([^\s0-9]+)/);b&&b[1]&&(r=b[1].trim());const u=(R,f)=>R.includes(f),x=(R,f)=>f.some($=>R.includes($)),k=(R,f)=>x(R,["‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢","‡πÅ‡∏û‡∏£‡πà","‡∏ô‡πà‡∏≤‡∏ô"])?"EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á":x(R,["‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","‡∏•‡∏≥‡∏û‡∏π‡∏ô","‡∏û‡∏∞‡πÄ‡∏¢‡∏≤","‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô"])?"‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà":u(R,"‡∏ï‡∏≤‡∏Å")&&u(f,"‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î")?"‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î":u(R,"‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£")||u(R,"‡∏ï‡∏≤‡∏Å")&&!u(f,"‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î")?"‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£":x(R,["‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢","‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå"])||u(R,"‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå")&&x(f,["‡∏´‡∏•‡πà‡∏°‡∏™‡∏±‡∏Å","‡∏´‡∏•‡πà‡∏°‡πÄ‡∏Å‡πà‡∏≤"])?"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å":x(R,["‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó","‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ","‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£"])||u(R,"‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå")&&!x(f,["‡∏´‡∏•‡πà‡∏°‡∏™‡∏±‡∏Å","‡∏´‡∏•‡πà‡∏°‡πÄ‡∏Å‡πà‡∏≤"])?"‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå":null;if(N){const R=k(N,r);R&&(o.branch=R)}if(!o.branch){const R=a;x(R,["‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢","‡πÅ‡∏û‡∏£‡πà","‡∏ô‡πà‡∏≤‡∏ô"])?o.branch="EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á":x(R,["‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","‡∏•‡∏≥‡∏û‡∏π‡∏ô","‡∏û‡∏∞‡πÄ‡∏¢‡∏≤","‡πÅ‡∏°‡πà‡∏Æ‡πà‡∏≠‡∏á‡∏™‡∏≠‡∏ô"])?o.branch="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà":u(R,"‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î")?o.branch="‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î":u(R,"‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£")||u(R,"‡∏ï‡∏≤‡∏Å")?o.branch="‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£":x(R,["‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å","‡∏™‡∏∏‡πÇ‡∏Ç‡∏ó‡∏±‡∏¢","‡∏≠‡∏∏‡∏ï‡∏£‡∏î‡∏¥‡∏ï‡∏ñ‡πå"])?o.branch="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å":x(R,["‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏ä‡∏±‡∏¢‡∏ô‡∏≤‡∏ó","‡∏≠‡∏∏‡∏ó‡∏±‡∏¢‡∏ò‡∏≤‡∏ô‡∏µ","‡∏û‡∏¥‡∏à‡∏¥‡∏ï‡∏£"])?o.branch="‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå":u(R,"‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏π‡∏£‡∏ì‡πå")&&(x(R,["‡∏´‡∏•‡πà‡∏°‡∏™‡∏±‡∏Å","‡∏´‡∏•‡πà‡∏°‡πÄ‡∏Å‡πà‡∏≤"])?o.branch="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å":o.branch="‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå")}}if(O){const a=o.customerName;a&&(o.destinationCustomer=a),o.customerName="‡∏ö‡∏à‡∏Å.‡∏ã‡∏µ‡πÇ‡∏ô-‡πÅ‡∏õ‡∏ã‡∏¥‡∏ü‡∏¥‡∏Ñ ‡πÄ‡∏ó‡∏£‡∏î‡∏î‡∏¥‡πâ‡∏á (‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢)",o.date=new Date().toISOString().split("T")[0];const N=(o.documentNo||"").trim().toLowerCase(),n=(o.productName||"").trim().toLowerCase(),r=`${N}|${n}`,b=c.find(u=>{const x=(u.documentNo||"").trim().toLowerCase(),k=(u.productName||"").trim().toLowerCase();return`${x}|${k}`===r});if(b){const u=new Set(["JobAccepted","COL_JobAccepted","NCR_JobAccepted","BranchReceived","COL_BranchReceived","NCR_BranchReceived","Consolidated","COL_Consolidated","InTransit","COL_InTransit","NCR_InTransit","InTransitToHub","HubReceived","COL_HubReceived","NCR_HubReceived","ReceivedAtHub","DocsCompleted","COL_Documented","Completed","ReturnToSupplier","DirectReturn"]);b.status&&u.has(b.status)?o.__isLocked=!0:(o.__isUpdate=!0,o.id=b.id)}else p.has(r)&&(o.__isDupInFile=!0);N&&p.add(r),v.push(o)}}),v},$a=async l=>{const{value:c}=await T.fire({title:"Import Excel (Logistics)",input:"file",inputAttributes:{accept:".xlsx, .xls, .csv","aria-label":"Upload Excel File"},html:`
            <div class="text-sm text-slate-500 mb-2">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå .xlsx)</div>
        `,confirmButtonText:"‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (Next)",showCancelButton:!0,cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",showLoaderOnConfirm:!0,preConfirm:async h=>{if(!h)return T.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå"),!1;try{return await Ea(h,l)}catch(S){return T.showValidationMessage(`Error: ${S}`),!1}}});if(!c)return null;let i=c;if(i.length===0)return T.fire("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£","‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","warning"),null;i.forEach(h=>{h.__selected===void 0&&(h.__selected=!h.__isLocked&&!h.__isDupInFile)});const g=i.filter(h=>h.__isDupInFile||h.__isLocked),t=g.length;if(t>0){const h=Array.from(new Set(g.map(a=>a.documentNo))).slice(0,10),S=new Set(g.map(a=>a.documentNo)).size-h.length,p=h.join(", ")+(S>0?` ...and ${S} more`:""),v=g.filter(a=>a.__isLocked).length,d=g.filter(a=>a.__isDupInFile).length;let w="";v>0&&(w+=`<p class="text-xs text-slate-500">‚Ä¢ <b>${v}</b> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ‡∏ï‡∏¥‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πá‡∏≠‡∏Ñ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß/‡∏à‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)</p>`),d>0&&(w+=`<p class="text-xs text-slate-500">‚Ä¢ <b>${d}</b> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô‡πÄ‡∏≠‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå Excel (‡πÄ‡∏•‡∏Ç‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ + ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô)</p>`);const{isConfirmed:o,isDenied:O}=await T.fire({title:"‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πâ‡∏≥/‡∏ï‡∏¥‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (Conflicts)",html:`
                <div class="text-left text-sm">
                    <p class="mb-2 text-red-600 font-bold">‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ${t} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                    <div class="bg-slate-100 p-2 rounded border border-slate-300 mb-2 text-xs text-slate-600 font-mono">
                        <b>Documents:</b> ${p||"N/A"}
                    </div>
                    <div class="mb-3 pl-2 border-l-2 border-red-200">
                        ${w}
                    </div>
                    <p class="mb-1">‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ <b>"‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"</b> (Force Import) ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <b>"‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡∏ö/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï"</b></p>
                    <p class="text-xs text-slate-400">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡∏ö‡∏•‡∏á‡πÑ‡∏õ</p>
                </div>
            `,icon:"warning",showDenyButton:!0,showCancelButton:!0,confirmButtonColor:"#3b82f6",denyButtonColor:"#f43f5e",cancelButtonColor:"#64748b",confirmButtonText:"‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡∏ö/‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (Force Update)",denyButtonText:"‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å (Remove)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"});if(o)i.forEach(a=>{if(a.__isLocked||a.__isDupInFile){if(!a.id){const N=(a.documentNo||"").trim().toLowerCase(),n=(a.productName||"").trim().toLowerCase(),r=l.find(b=>(b.documentNo||"").trim().toLowerCase()===N&&(b.productName||"").trim().toLowerCase()===n);r&&(a.id=r.id)}a.__isLocked=!1,a.__isDupInFile=!1,a.__isUpdate=!0,a.__selected=!0}}),T.fire({icon:"success",title:"‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢",text:'‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô "‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï"',timer:1e3,showConfirmButton:!1});else if(O){if(i=i.filter(a=>!a.__isDupInFile&&!a.__isLocked),i.length===0)return T.fire("‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤","‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å","info"),null}else return null}let s=null,m=!0;for(;m;){const h=i.map((w,o)=>{const O=w.__isLocked,a=w.__isDupInFile,N=w.__isUpdate;let n="#ffffff",r="";O?(n="#f3f4f6",r='<span style="font-size:0.75em; background:#4b5563; color:white; padding:2px 6px; border-radius:4px; font-weight:bold;">Locked Step 2+</span>'):a?(n="#fff1f2",r='<span style="font-size:0.75em; background:#f43f5e; color:white; padding:2px 6px; border-radius:4px; font-weight:bold;">Duplicate In File</span>'):N&&(n="#eff6ff",r='<span style="font-size:0.75em; background:#3b82f6; color:white; padding:2px 6px; border-radius:4px; font-weight:bold;">Update Existing</span>');const b=Oe.map(u=>`<option value="${u}" ${u===w.branch?"selected":""}>${u}</option>`).join("");return`
                <tr style="background-color: ${n}; border-bottom: 1px solid #e2e8f0;">
                    <td style="padding: 10px; text-align:center;">
                        <input type="checkbox" class="row-checkbox" data-index="${o}" ${w.__selected?"checked":""} ${O?"disabled":""} style="transform: scale(1.2);">
                    </td>
                    <td style="padding: 8px;">
                        <select class="swal2-select row-branch" data-index="${o}" style="margin:0; width:100%; font-size:0.9em; padding: 6px; border-color:#cbd5e1;" ${O?"disabled":""}>
                            <option value="">- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -</option>
                            ${b}
                        </select>
                    </td>
                    <td style="padding: 8px; font-size: 0.9em; color:#334155;">
                        <div style="font-weight:bold; color:#1e293b;">${w.documentNo||"-"}</div>
                        ${r}
                    </td>
                     <td style="padding: 8px; font-size: 0.9em; color:#334155;">${w.destinationCustomer||"-"}</td>
                     <td style="padding: 8px; font-size: 0.9em; color:#334155;">${w.customerAddress||"-"}</td>
                     <td style="padding: 8px; font-size: 0.9em; color:#334155;">${w.productName||"-"}</td>
                     <td style="padding: 8px; font-size: 0.9em; text-align:right; font-weight:bold; color:#0f172a;">${w.quantity} ${w.unit||""}</td>
                </tr>
            `}).join(""),{isConfirmed:S,isDismissed:p,value:v,dismiss:d}=await T.fire({title:`‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (${i.length})`,width:"1000px",html:`
                <div style="text-align:left;">
                    <div style="margin-bottom:15px; padding:15px; background:#f0f9ff; border-radius:8px; display:flex; align-items:center; gap:15px; border:1px solid #bae6fd;">
                         <label style="font-weight:bold; font-size:0.95em; color:#0369a1;">üìç ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Batch):</label>
                         <select id="swal-batch-branch" class="swal2-select" style="margin:0; width:220px; font-size:0.95em; padding:8px; border-color:#7dd3fc;">
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --</option>
                            ${Oe.map(w=>`<option value="${w}">${w}</option>`).join("")}
                         </select>
                         <span style="font-size:0.85em; color:#0c4a6e;">(‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏Ç‡∏≤‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£)</span>
                    </div>
                     <div style="margin-bottom: 10px; display: flex; justify-content: flex-end;">
                         <button type="button" id="btn-remove-dups" style="font-size: 0.8em; padding: 6px 12px; border: 1px solid #f43f5e; color: #f43f5e; background: #fff1f2; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 5px; font-weight: bold;">
                             <span style="font-size: 1.2em;">üóëÔ∏è</span> ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (Remove Conflicts)
                        </button>
                    </div>
                    <div style="max-height: 450px; overflow-y: auto; border: 1px solid #cbd5e1; border-radius: 8px; box-shadow: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);">
                        <table style="width:100%; border-collapse: collapse;">
                            <thead style="background: #f8fafc; position: sticky; top: 0; z-index:10; shadow: 0 1px 2px rgba(0,0,0,0.1);">
                                <tr>
                                    <th style="padding:10px; width:50px; text-align:center;">‚úì</th>
                                    <th style="padding:10px; width:180px; text-align:left;">‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)</th>
                                    <th style="padding:10px; text-align:left;">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (R No)</th>
                                    <th style="padding:10px; text-align:left;">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
                                    <th style="padding:10px; text-align:left;">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Address)</th>
                                    <th style="padding:10px; text-align:left;">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                                    <th style="padding:10px; width:100px; text-align:right;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${h}
                            </tbody>
                        </table>
                    </div>
                    <div style="margin-top:15px; font-size:0.85em; color:#64748b; display:flex; gap:15px; justify-content:flex-end;">
                        <span style="display:flex; items-center; gap:4px;"><span style="width:12px; height:12px; background:#4b5563; border-radius:2px; display:inline-block;"></span> Locked (‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)</span>
                        <span style="display:flex; items-center; gap:4px;"><span style="width:12px; height:12px; background:#f43f5e; border-radius:2px; display:inline-block;"></span> Duplicate (‡∏ã‡πâ‡∏≥)</span>
                    </div>
                </div>
            `,showCancelButton:!0,confirmButtonText:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ (Confirm Import)",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#10b981",focusConfirm:!1,didOpen:()=>{const w=document.getElementById("swal-batch-branch"),o=document.getElementById("btn-remove-dups");o&&o.addEventListener("click",()=>{var O;(O=T.getPopup())==null||O.setAttribute("data-action","remove_dups"),T.clickConfirm()}),w&&w.addEventListener("change",O=>{const a=O.target.value;document.querySelectorAll(".row-branch").forEach(n=>{n.disabled||(n.value=a)})})},preConfirm:()=>{var n;if(((n=T.getPopup())==null?void 0:n.getAttribute("data-action"))==="remove_dups")return"REMOVE_CONFLICTS";const o=document.querySelectorAll(".row-branch"),O=document.querySelectorAll(".row-checkbox"),a=[],N=[];return i.forEach((r,b)=>{const u=O[b],x=o[b].value;if(r.branch=x,r.__selected=u.checked,!u.checked)return;!x&&!r.__isLocked&&N.push(r);const{__isLocked:k,__isDup:R,__isDupInFile:f,__isUpdate:$,__selected:A,...M}=r;M.branch=x,a.push(M)}),N.length>0?{action:"MISSING_BRANCH",items:N}:a.length===0?(T.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"),!1):a}});if(p&&(d===T.DismissReason.cancel||v!=="REMOVE_CONFLICTS"))return m=!1,null;if(v==="REMOVE_CONFLICTS"){i=i.filter(w=>!w.__isDup&&!w.__isLocked),i.forEach(w=>{w.__selected===void 0&&(w.__selected=!0)});continue}if(v&&v.action==="MISSING_BRANCH"){const w=v.items,{value:o}=await T.fire({title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",width:"1200px",html:`
                    <div class="text-left text-sm">
                        <p class="mb-2 text-red-600 font-bold">‡∏û‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ${w.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:</p>
                        
                        <div style="margin-bottom:15px; padding:10px; background:#f0f9ff; border-radius:6px; display:flex; align-items:center; gap:10px; border:1px solid #bae6fd;">
                             <label style="font-weight:bold; font-size:0.9em; color:#0369a1;">üìç ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Batch):</label>
                             <select id="swal-missing-batch-branch" class="swal2-select" style="margin:0; width:200px; font-size:0.9em; padding:6px; border-color:#7dd3fc; height: 36px;">
                                <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --</option>
                                ${Oe.map(O=>`<option value="${O}">${O}</option>`).join("")}
                             </select>
                        </div>

                        <div style="max-height: 400px; overflow-y: auto; border: 1px solid #e2e8f0; border-radius: 6px;">
                            <table style="width:100%; border-collapse: separate; border-spacing: 0; font-size:0.85em;">
                                <thead class="bg-slate-100 sticky top-0 z-10 shadow-sm">
                                    <tr>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b">Doc No</th>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b" style="min-width: 150px;">‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤ (Branch) <span class="text-red-500">*</span></th>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b" style="min-width: 180px;">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (Customer)</th>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b" style="min-width: 200px;">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Address)</th>
                                        <th class="p-2 text-left font-semibold text-slate-700 bg-slate-100 border-b">Product</th>
                                        <th class="p-2 text-right font-semibold text-slate-700 bg-slate-100 border-b">Qty</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${w.map((O,a)=>`
                                        <tr class="border-b border-slate-100 hover:bg-slate-50 transition-colors">
                                            <td class="p-2 align-top text-slate-600 font-mono">${O.documentNo||"-"}</td>
                                            <td class="p-2 align-top">
                                                <select class="swal-fix-input-branch w-full p-1 border border-slate-300 rounded text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500" data-idx="${a}">
                                                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
                                                    ${Oe.map(N=>`<option value="${N}" ${N===O.branch?"selected":""}>${N}</option>`).join("")}
                                                </select>
                                            </td>
                                            <td class="p-2 align-top text-slate-600">
                                                ${O.destinationCustomer||"-"}
                                            </td>
                                            <td class="p-2 align-top text-slate-600">
                                                ${O.customerAddress||"-"}
                                            </td>
                                            <td class="p-2 align-top text-slate-700">${O.productName||"-"}</td>
                                            <td class="p-2 align-top text-right font-bold text-slate-700">${O.quantity}</td>
                                        </tr>
                                    `).join("")}
                                </tbody>
                            </table>
                        </div>
                    </div>
                `,icon:"warning",showCancelButton:!0,confirmButtonText:"‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ï‡πà‡∏≠",cancelButtonText:"‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å",confirmButtonColor:"#3b82f6",focusConfirm:!1,didOpen:()=>{const O=document.getElementById("swal-missing-batch-branch");O&&O.addEventListener("change",a=>{const N=a.target.value;document.querySelectorAll(".swal-fix-input-branch").forEach(r=>{r.value=N})})},preConfirm:()=>{const O=document.querySelectorAll(".swal-fix-input-branch"),a=[];let N=!1;return O.forEach((n,r)=>{const b=n.value;b?n.classList.remove("border-red-500","bg-red-50"):(n.classList.add("border-red-500","bg-red-50"),N=!0),a.push({branch:b,destinationCustomer:w[r].destinationCustomer,customerAddress:w[r].customerAddress})}),N?(T.showValidationMessage("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"),!1):a}});o&&o.forEach((O,a)=>{const N=w[a];N&&(N.branch=O.branch,N.destinationCustomer=O.destinationCustomer,N.customerAddress=O.customerAddress)});continue}v&&Array.isArray(v)&&(s=v,m=!1)}return s?(T.fire({icon:"success",title:"‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",text:`‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ${s.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`,timer:1500,showConfirmButton:!1}),s):null},Pa=({formData:l,requestItems:c,setFormData:i,handleRequestSubmit:g,uniqueCustomers:t=[],uniqueDestinations:s=[],existingItems:m=[]})=>{te.useEffect(()=>{i(p=>({...p,documentType:"LOGISTICS"}))},[i]);const h=(p,v)=>{i(d=>({...d,[p]:v}))},S=async()=>{try{const p=await $a(m);p&&p.length>0&&g(p)}catch(p){console.error("Import/Submit Error:",p),T.fire({icon:"error",title:"‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î",text:"‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ Import ‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á"})}};return e.jsx("div",{className:"h-full overflow-auto p-6 bg-slate-50",children:e.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl border border-slate-200 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-indigo-500"}),e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-blue-50 text-blue-600 shadow-inner",children:e.jsx(Ce,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"1. ‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Create Return Request)"}),e.jsx("p",{className:"text-sm text-slate-500",children:"‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Header)"})]})]}),e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-4 py-2 bg-emerald-100 text-emerald-700 rounded-lg hover:bg-emerald-200 font-bold transition-colors text-sm",children:[e.jsx(Cs,{className:"w-4 h-4"})," Import Excel"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏™‡∏≤‡∏Ç‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏•‡∏±‡∏ö (Branch) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"relative",children:e.jsxs("select",{"aria-label":"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",title:"‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤",required:!0,value:l.branch||"",onChange:p=>h("branch",p.target.value),className:"w-full p-3 bg-slate-50 border border-slate-300 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm",children:[e.jsx("option",{value:"",disabled:!0,children:"-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏Ç‡∏≤ --"}),e.jsx("option",{value:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å",children:"‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å"}),(Oe&&Array.isArray(Oe)?Oe:["‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏û‡∏ä‡∏£","‡πÅ‡∏°‡πà‡∏™‡∏≠‡∏î","‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà","EKP ‡∏•‡∏≥‡∏õ‡∏≤‡∏á","‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå","‡∏™‡∏≤‡∏¢ 3","‡∏Ñ‡∏•‡∏≠‡∏á 13","‡∏ã‡∏µ‡πÇ‡∏ô‡πà","‡∏õ‡∏£‡∏∞‡∏î‡∏π‡πà"]).filter(p=>p!=="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å").map(p=>e.jsx("option",{value:p,children:p},p)),e.jsx("option",{value:"Other",children:"‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Other)"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç Invoice"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç Invoice",title:"‡πÄ‡∏•‡∏Ç Invoice",value:l.invoiceNo||"",onChange:p=>h("invoiceNo",p.target.value),placeholder:"INV-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ (Control Date)"}),e.jsx("input",{type:"date","aria-label":"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ",title:"‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏°‡∏£‡∏ñ",value:l.controlDate||l.date||"",onChange:p=>{h("controlDate",p.target.value),h("date",p.target.value)},className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (‡πÄ‡∏•‡∏Ç R)"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£",value:l.documentNo||l.refNo||"",onChange:p=>{h("documentNo",p.target.value),h("refNo",p.target.value)},placeholder:"R-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM NO)"}),e.jsx("input",{type:"text","aria-label":"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM NO)",title:"‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡∏Ñ‡∏∏‡∏° (TM NO)",value:l.tmNo||"",onChange:p=>h("tmNo",p.target.value),placeholder:"TM-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤"}),e.jsx("input",{type:"text","aria-label":"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",title:"‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",value:l.customerCode||"",onChange:p=>h("customerCode",p.target.value),placeholder:"CUS-xxxx",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:["‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Source Customer) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text","aria-label":"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",title:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á",required:!0,value:l.customerName||"",onChange:p=>h("customerName",p.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm",list:"customer-list"}),e.jsx("datalist",{id:"customer-list",children:t.map(p=>e.jsx("option",{value:p},p))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á (Destination Customer)"}),e.jsx("input",{type:"text","aria-label":"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",title:"‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á",value:l.destinationCustomer||"",onChange:p=>h("destinationCustomer",p.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm",list:"destination-list"}),e.jsx("datalist",{id:"destination-list",children:s.map(p=>e.jsx("option",{value:p},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (Province)"}),e.jsx("input",{type:"text","aria-label":"‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î",title:"‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î",value:l.province||"",onChange:p=>h("province",p.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà (Address)"}),e.jsx("textarea",{rows:2,"aria-label":"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",title:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤",value:l.customerAddress||"",onChange:p=>h("customerAddress",p.target.value),placeholder:"‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô (Quantity)"}),e.jsx("input",{type:"number","aria-label":"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",title:"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô",min:"1",value:l.quantity||"",onChange:p=>h("quantity",parseFloat(p.target.value)),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏à‡∏≥‡∏ô‡∏ß‡∏ô...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none font-bold text-blue-600 transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Unit)"}),e.jsx("input",{type:"text","aria-label":"‡∏´‡∏ô‡πà‡∏ß‡∏¢",title:"‡∏´‡∏ô‡πà‡∏ß‡∏¢",value:l.unit||"",onChange:p=>h("unit",p.target.value),placeholder:"‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡πà‡∏≠‡∏á, ‡∏û‡∏≤‡πÄ‡∏•‡∏ó, ‡∏ä‡∏¥‡πâ‡∏ô...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (Notes)"}),e.jsx("textarea",{rows:3,"aria-label":"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",title:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏",value:l.notes||"",onChange:p=>h("notes",p.target.value),placeholder:"‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏≠‡∏∑‡πà‡∏ô‡πÜ...",className:"w-full p-2.5 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-all duration-200 hover:border-blue-300 hover:shadow-sm"})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsxs("button",{type:"button",onClick:()=>{const p=[];if(l.branch||p.push("‡∏™‡∏≤‡∏Ç‡∏≤ (Branch)"),l.customerName||p.push("‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Source Customer)"),p.length>0){T.fire({icon:"warning",title:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô",text:`‡∏Ç‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ${p.join(", ")}`,confirmButtonColor:"#f59e0b"});return}const v=(l.documentNo||l.refNo||"").trim();if(v){const d=v.toLowerCase();if(m.some(o=>{if(o.id===l.id)return!1;const O=(o.documentNo||"").trim().toLowerCase(),a=(o.refNo||"").trim().toLowerCase();return O===d||a===d})){T.fire({icon:"error",title:"‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å! (Duplicate R No)",html:`‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ <b>${v}</b> ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß<br/>‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ (‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å: ‡∏´‡πâ‡∏≤‡∏°‡∏ã‡πâ‡∏≥)`,confirmButtonColor:"#ef4444"});return}}if(l.invoiceNo&&m.some(w=>w.id!==l.id&&w.branch===l.branch&&w.invoiceNo===l.invoiceNo)){T.fire({icon:"error",title:"‡∏û‡∏ö‡πÄ‡∏•‡∏Ç‡∏≠‡∏¥‡∏ô‡∏ß‡∏≠‡∏¢‡∏ã‡πå‡∏ã‡πâ‡∏≥",text:`‡πÄ‡∏•‡∏Ç Invoice: ${l.invoiceNo} ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏≤‡∏Ç‡∏≤ ${l.branch}`,confirmButtonColor:"#ef4444"});return}if(c.length===0){const d={...l,productName:"General Request",quantity:l.quantity||1,unit:l.unit||"Lot"};g([d])}else g()},className:"px-8 py-4 bg-blue-600 text-white rounded-xl font-bold shadow-lg hover:bg-blue-700 hover:shadow-xl transition-all flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"})," ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Create Request)"]})})]})]})})})};class La extends te.Component{constructor(c){super(c),this.props=c,this.state={hasError:!1,error:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,i){console.error("Uncaught error:",c,i)}render(){var c;return this.state.hasError?e.jsxs("div",{className:"p-8 text-center text-red-600 bg-red-50 h-screen flex flex-col items-center justify-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (System Error)"}),e.jsx("p",{className:"mb-4",children:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á:"}),e.jsx("pre",{className:"bg-white p-4 rounded shadow text-left text-sm font-mono overflow-auto max-w-2xl border border-red-200",children:(c=this.state.error)==null?void 0:c.toString()}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ (Reload)"})]}):this.props.children}}const Ba=({onNavigate:l})=>{const{addReturnRecord:c,getNextReturnNumber:i,items:g,updateReturnRecord:t}=Se(),{state:s,derived:m,actions:h}=Es(),[S,p]=C.useState(1),[v,d]=C.useState(!1),[w,o]=C.useState(""),O=()=>{if(w!=="1234"){T.fire({icon:"error",title:"‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á",text:"‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",confirmButtonColor:"#ef4444"});return}d(!1),o("")};return!s||!m||!h?e.jsx("div",{className:"p-6 text-center",children:"Loading System..."}):e.jsx(La,{children:e.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-slate-900 text-white flex flex-col shadow-xl z-20",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800",children:[e.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Inbound Collection System"})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto",children:[{id:1,label:"1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô (Create)",icon:Ce},{id:2,label:"2. ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (Job Accept)",icon:dt},{id:3,label:"3. ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Branch Rx)",icon:fe},{id:4,label:"4. ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consolidate)",icon:Ns}].map(a=>e.jsxs("button",{onClick:()=>p(a.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-sm font-medium transition-all duration-200
                                    ${S===a.id?"bg-blue-600 text-white shadow-lg shadow-blue-900/50 translate-x-1":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.icon,{className:`w-5 h-5 ${S===a.id?"text-white":"text-slate-500"}`}),e.jsx("span",{children:a.label})]}),S===a.id&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white animate-pulse"})]},a.id))}),e.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2",children:[l&&e.jsxs("button",{onClick:()=>l(ue.DASHBOARD),className:"w-full bg-slate-800 hover:bg-slate-700 text-white rounded-lg p-3 transition-all flex items-center justify-center gap-2 font-medium text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å"]}),e.jsxs("div",{className:"bg-slate-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö"}),e.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm font-bold",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),"Online"]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[e.jsxs("header",{className:"bg-white border-b border-slate-200 h-16 flex items-center px-6 justify-between shadow-sm z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[S>1&&e.jsxs("button",{onClick:()=>p(S-1),className:"flex items-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition-all font-medium text-sm",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö"]}),e.jsxs("h2",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[S===1&&e.jsxs(e.Fragment,{children:[e.jsx(Ce,{className:"w-5 h-5 text-blue-600"})," ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏Å‡∏•‡∏±‡∏ö (Create Return Request)"]}),S===2&&e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"w-5 h-5 text-blue-600"})," ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏≤‡∏Ç‡∏≤ (Job Acceptance)"]}),S===3&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-5 h-5 text-blue-600"})," ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏£‡∏¥‡∏á (Physical Receive)"]}),S===4&&e.jsxs(e.Fragment,{children:[e.jsx(Ns,{className:"w-5 h-5 text-blue-600"})," ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Consolidation)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Data Entry Officer"})}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-100 to-indigo-100 border border-blue-200 flex items-center justify-center",children:e.jsx(Bt,{className:"w-5 h-5 text-blue-600"})})]})]}),e.jsxs("main",{className:"flex-1 overflow-auto bg-slate-50 p-6 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5 pointer-events-none"}),S===1&&e.jsx(Pa,{formData:s.formData,requestItems:s.requestItems,isCustomBranch:s.isCustomBranch,uniqueCustomers:m.uniqueCustomers,uniqueDestinations:m.uniqueDestinations,uniqueProductCodes:m.uniqueProductCodes,uniqueProductNames:m.uniqueProductNames,existingItems:g,setFormData:h.setFormData,setIsCustomBranch:h.setIsCustomBranch,setRequestItems:h.setRequestItems,handleAddItem:h.handleAddItem,handleRemoveItem:h.handleRemoveItem,handleRequestSubmit:h.handleRequestSubmit}),S===2&&e.jsx("div",{className:"h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx($s,{onComplete:()=>p(3)})}),S===3&&e.jsx("div",{className:"h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx(Ps,{onComplete:()=>p(4)})}),S===4&&e.jsx("div",{className:"h-full bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:e.jsx(Ls,{onComplete:()=>{l?l(ue.OPERATIONS,2):T.fire({icon:"info",title:"Navigation Info",text:"Navigation not configured",timer:1500,showConfirmButton:!1})}})})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 p-4 flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(qt,{className:"w-4 h-4 text-amber-400"})," ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå (Authentication)"]}),e.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-white transition","aria-label":"‡∏õ‡∏¥‡∏î",title:"‡∏õ‡∏¥‡∏î",children:e.jsx(je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("input",{type:"password",autoFocus:!0,className:"w-full p-3 border border-slate-300 rounded-lg text-center text-2xl tracking-widest font-mono mb-4 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"PASSCODE",value:w,onChange:a=>o(a.target.value),onKeyDown:a=>a.key==="Enter"&&O()}),e.jsx("button",{onClick:O,className:"w-full bg-slate-900 text-white py-3 rounded-xl font-bold hover:bg-slate-800 transition shadow-lg shadow-slate-900/20",children:"‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô (Confirm)"})]})]})})]})})},rs=[{uid:"admin-001",email:"admin@neosiam.com",displayName:"System Admin",role:"ADMIN",photoURL:"https://ui-avatars.com/api/?name=Admin&background=ef4444&color=fff"},{uid:"ncr-op-001",email:"ncr@neosiam.com",displayName:"NCR Staff Operators",role:"NCR_OPERATOR",photoURL:"https://ui-avatars.com/api/?name=NCR&background=6366f1&color=fff"},{uid:"col-op-001",email:"col@neosiam.com",displayName:"COL Staff",role:"COL_OPERATOR",photoURL:"https://ui-avatars.com/api/?name=COL&background=f97316&color=fff"},{uid:"req-entry-001",email:"request@neosiam.com",displayName:"COL Staff REQUEST Operators",role:"REQUEST_ENTRY",photoURL:"https://ui-avatars.com/api/?name=REQUEST&background=eab308&color=fff"},{uid:"qc-op-001",email:"qc@neosiam.com",displayName:"QC Inspector",role:"QC_OPERATOR",photoURL:"https://ui-avatars.com/api/?name=QC&background=22c55e&color=fff"},{uid:"closure-op-001",email:"closure@neosiam.com",displayName:"Closure Staff",role:"CLOSURE_OPERATOR",photoURL:"https://ui-avatars.com/api/?name=Closure&background=a855f7&color=fff"},{uid:"viewer-001",email:"viewer@neosiam.com",displayName:"Ops Manager",role:"VIEWER",photoURL:"https://ui-avatars.com/api/?name=Manager&background=64748b&color=fff"}],_a=(l,c)=>c!=="1234"?null:rs.find(g=>g.email===l)||null;rs.map(l=>l.email);const Ma=({onLoginSuccess:l})=>{const[c,i]=C.useState(""),[g,t]=C.useState(""),[s,m]=C.useState(!1),[h,S]=C.useState(""),[p,v]=C.useState(!1),d=async o=>{o.preventDefault(),S(""),v(!0),await new Promise(a=>setTimeout(a,500));const O=_a(c,g);O?l(O):(S("‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"),v(!1))},w=o=>{i(o.email),t(""),setTimeout(()=>{const O=document.querySelector('input[type="password"]');O==null||O.focus()},100)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-slate-50 to-indigo-50 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-purple-200 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-blob animation-delay-4000"})]}),e.jsxs("div",{className:"w-full max-w-6xl flex gap-8 relative z-10",children:[e.jsxs("div",{className:"flex-1 bg-white rounded-2xl shadow-2xl p-8 backdrop-blur-sm bg-white/90",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-2xl shadow-lg mb-4",children:e.jsx("img",{src:"https://img2.pic.in.th/pic/logo-neo.png",alt:"Neo Logo",className:"w-12 h-12 object-contain"})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Neosiam Return"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∑‡∏ô (Return Management System)"})]}),e.jsxs("form",{onSubmit:d,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"User:"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"email",value:c,onChange:o=>i(o.target.value),placeholder:"admin@neosiam.com",required:!0,className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Password:"}),e.jsxs("div",{className:"relative",children:[e.jsx(qt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:s?"text":"password",value:g,onChange:o=>t(o.target.value),placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢",required:!0,className:"w-full pl-10 pr-12 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all outline-none"}),e.jsx("button",{type:"button",onClick:()=>m(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:s?e.jsx(Ql,{className:"w-5 h-5"}):e.jsx(ks,{className:"w-5 h-5"})})]})]}),h&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm",children:[e.jsx(Hl,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{children:h})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-semibold py-3 rounded-lg hover:from-blue-700 hover:to-indigo-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(zl,{className:"w-5 h-5"}),e.jsx("span",{children:"‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö"})]})})]})]}),e.jsxs("div",{className:"flex-1 bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(Bt,{className:"w-6 h-6 text-blue-600"}),"Quick Login (Development)"]}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å Email ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏≠‡∏á)"}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:rs.map(o=>e.jsx("button",{onClick:()=>w(o),className:"w-full text-left p-4 bg-white border border-slate-200 rounded-xl hover:border-blue-300 hover:shadow-md transition-all group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:o.photoURL||"https://ui-avatars.com/api/?name=User",alt:o.displayName,className:"w-12 h-12 rounded-full border-2 border-slate-100 group-hover:border-blue-200 transition-colors"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-slate-800 group-hover:text-blue-700 transition-colors",children:o.displayName}),e.jsx("div",{className:"text-xs text-slate-500",children:o.email})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Ts(o.role)}`,children:ls(o.role)})]})},o.uid))}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-700",children:[e.jsx("strong",{children:"‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:"})," Quick Login ‡∏à‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡πÅ‡∏Ñ‡πà Email ‡πÉ‡∏´‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏≠‡∏á"]})})]})]}),e.jsx("style",{children:`
        @keyframes blob {
          0%, 100% { transform: translate(0, 0) scale(1); }
          25% { transform: translate(20px, -20px) scale(1.1); }
          50% { transform: translate(-20px, 20px) scale(0.9); }
          75% { transform: translate(20px, 20px) scale(1.05); }
        }
        .animate-blob {
          animation: blob 7s infinite;
        }
        .animation-delay-2000 {
          animation-delay: 2s;
        }
        .animation-delay-4000 {
          animation-delay: 4s;
        }
      `})]})},Fa=()=>{const{user:l,login:c}=Ds(),[i,g]=C.useState(ue.DASHBOARD),[t,s]=C.useState(null),[m,h]=C.useState(void 0),[S,p]=C.useState(!1),[v,d]=C.useState(!1);if(!l)return e.jsx(Ma,{onLoginSuccess:c});const w=a=>{s(a),g(ue.OPERATIONS)},o=()=>{switch(i){case ue.DASHBOARD:return e.jsx(vs,{});case ue.OPERATIONS:return e.jsx(wa,{initialData:t,onClearInitialData:()=>s(null),initialStep:m});case ue.NCR:return e.jsx(Ca,{});case ue.NCR_REPORT:return e.jsx(ka,{onTransfer:w});case ue.COL_REPORT:return e.jsx(Ta,{});case ue.INVENTORY:return e.jsx(Aa,{});case ue.COLLECTION:return e.jsx(Ba,{onNavigate:(a,N)=>{g(a),N&&h(N)}});default:return e.jsx(vs,{})}},O=()=>{switch(i){case ue.DASHBOARD:return"‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° (Dashboard)";case ue.OPERATIONS:return"‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£ (Operations Hub)";case ue.NCR:return"‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤ (NCR System)";case ue.NCR_REPORT:return"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR";case ue.COL_REPORT:return"‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô COL";case ue.INVENTORY:return"‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Inventory)";case ue.COLLECTION:return"‡∏á‡∏≤‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Collection)";default:return"Neosiam Return"}};return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-slate-50 print:h-auto print:overflow-visible print:block relative",children:[e.jsx(Yl,{currentView:i,onChangeView:g,isOpen:S,onClose:()=>p(!1)}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 print:h-auto print:overflow-visible w-full",children:[e.jsxs("header",{className:"bg-white border-b border-slate-200 h-16 flex items-center justify-between px-4 md:px-8 shadow-sm z-10 print:hidden shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>p(!0),className:"lg:hidden p-2 text-slate-500 hover:bg-slate-100 rounded-lg transition-colors","aria-label":"‡πÄ‡∏°‡∏ô‡∏π",children:e.jsx(Ss,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800 truncate max-w-[200px] md:max-w-none",children:O()})]}),e.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>d(!v),className:"relative p-2 text-slate-500 hover:bg-slate-100 rounded-full transition-colors","aria-label":"‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",title:"‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô",children:[e.jsx(Wl,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1.5 right-2 w-2 h-2 bg-red-500 rounded-full border border-white animate-pulse"})]}),v&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-2xl border border-slate-100 overflow-hidden z-50 animate-fade-in-up origin-top-right",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (Notifications)"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium cursor-pointer hover:underline",children:"‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:[{id:1,title:"NCR ‡πÉ‡∏´‡∏°‡πà",desc:"‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô NCR #NCR-2024-001 ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà",time:"10 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß",type:"alert"},{id:2,title:"‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏Ç‡∏≠",desc:"‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ #REQ-998 ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥",time:"1 ‡∏ä‡∏°. ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß",type:"info"},{id:3,title:"‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ Hub",desc:"‡∏£‡∏ñ‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô 71-0139 ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏®‡∏π‡∏ô‡∏¢‡πå‡πÅ‡∏•‡πâ‡∏ß",time:"2 ‡∏ä‡∏°. ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß",type:"success"}].map(a=>e.jsxs("div",{className:"p-4 border-b border-slate-50 hover:bg-slate-50 transition-colors cursor-pointer flex gap-3 items-start group",children:[e.jsx("div",{className:`w-2 h-2 mt-2 rounded-full flex-shrink-0 ${a.type==="alert"?"bg-red-500":a.type==="success"?"bg-green-500":"bg-blue-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-700 group-hover:text-blue-600 transition-colors",children:a.title}),e.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:a.desc}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:a.time})]})]},a.id))}),e.jsx("div",{className:"p-3 text-center border-t border-slate-100 bg-slate-50/50",children:e.jsx("button",{className:"text-xs text-slate-500 hover:text-slate-800 font-medium",children:"‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-3 md:pl-4 border-l border-slate-200",children:[e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-sm font-bold text-slate-800",children:l.displayName}),e.jsx("p",{className:"text-xs text-slate-500",children:ls(l.role)})]}),e.jsx("img",{src:l.photoURL||"https://img2.pic.in.th/pic/logo-neo.png",alt:"User Avatar",className:"w-8 h-8 md:w-9 md:h-9 rounded-full object-cover bg-white p-1 border border-slate-200"})]})]})]}),e.jsx("main",{className:"flex-1 overflow-auto print:overflow-visible print:h-auto w-full relative",children:o()})]})]})},qa=()=>e.jsx(Xl,{children:e.jsx(Kl,{children:e.jsx(Fa,{})})}),Ms=document.getElementById("root");if(!Ms)throw new Error("Could not find root element to mount to");const Ua=Vl.createRoot(Ms);Ua.render(e.jsx(te.StrictMode,{children:e.jsx(qa,{})}));
